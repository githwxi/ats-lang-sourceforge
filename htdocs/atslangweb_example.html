

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>The ATS Programming Language</title>
<link rel="stylesheet" type="text/css" href="http://www.ats-lang.org/styles/atslangweb_example.css" />
<script
src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
></script>
<script
src="http://www.ats-lang.org/scripts/atslangweb_jsddm_menu.js"
></script>

</head><!--head-->

<!--****** ****** *-->


























<body id="body-layout">
<div id="theBodyProp">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td style="vertical-align: top;">
<div id="theSidebar">
<div id="theSidebar-prop">
<table border="0" cellspacing="0" cellpadding="2">
  <tr><td><a href="http://www.ats-lang.org/">Home</a>(<a href="http://www.ats-lang.org/htdocs-old/ATS.html">old</a>)</td></tr>
  <tr><td><a href="http://www.ats-lang.org/DOWNLOAD/">Download</a></td></tr>
  <tr><td><a href="http://www.ats-lang.org/DOCUMENT/">Documents</a></td></tr>
  <tr><td><a href="http://www.ats-lang.org/LIBRARY/">Libraries</a></td></tr>
  <tr><td><a href="http://www.ats-lang.org/RESOURCE/">Resources</a></td></tr>
  <tr><td><a href="http://www.ats-lang.org/COMMUNITY/">Community</a></td></tr>
  <tr><td><strong>Examples</strong></td></tr>
  <tr><td><a href="http://www.ats-lang.org/IMPLEMENT/">Implementations</a></td></tr>
  <tr><td><a href="http://www.ats-lang.org/PAPER/">Papers</a></td></tr>
  <tr><td><a href="https://lists.sourceforge.net/lists/listinfo/ats-lang-users">Mailing-list</a></td></tr>
</table>
</div>

</div><!--theSidebar-->
</td>

<td style="vertical-align: top; width: 100%;">
<div id="thePage">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>
<div id="thePageHeader">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>
<div id="thePageHeaderTitle">
<div id="thePageHeaderMainTitle">
<strong>The ATS Programming Language</strong>
</div>
<div id="thePageHeaderByTitle">
<strong>Unleashing the Potential of Types and Templates!</strong>
</div>

</div><!--thePageHeaderTitle-->
</td>
</tr>

<tr>
<td>
<div id="thePageHeaderSeparator">
<div class="Page-mysitelinks">
<a href="http://www.ats-lang.org/">Home</a><span class="separator"> | </span><a href="http://www.ats-lang.org/DOWNLOAD">Download</a><span class="separator"> | </span><a href="http://www.ats-lang.org/DOCUMENT">Documents</a><span class="separator"> | </span><a href="http://www.ats-lang.org/LIBRARY">Libraries</a><span class="separator"> | </span><a href="http://www.ats-lang.org/RESOURCE">Resources</a><span class="separator"> | </span><a href="http://www.ats-lang.org/COMMUNITY">Community</a>
</div>

</div><!--thePageHeaderSeparator-->
</td>
</tr>
</table>
</div><!--thePageHeader-->
</td>
</tr>

<tr>
<td>
<div id="thePageBody">
<div id="thePageBody-prop">

<!-- ****** ****** -->

<h1>Examples</h1>

<ul><li><a href="#HWexample">Hello, world!</a></li>
<li><a href="#FIBexample">Computing Fibonacci Numbers:</a> an example of programming with theorem-proving
</li>
<li><a href="#FURTHERexamples">Further Examples</a></li>
</ul><!--menu-->

<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<h2><a id="HWexample">Hello, world!</a></h2>

<p>
Following is a complete program in ATS for printing out the string
"Hello, world!" plus a newline:
</p><!--para-->

<pre class="atsyntax">
<span class="keyword">implement</span> main <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> print <span class="keyword">(</span>"Hello, world!\n"<span class="keyword">)</span>
</pre>


<p>
Assume that the program is stored in a file named <span style="text-decoration: underline;">hello.dats</span>. By
executing the following command-line:

</p>

<pre>atscc -o hello hello.dats</pre>

<p>
we can generate an executable named <span style="text-decoration: underline;">hello</span>, which does what is
mentioned above if executed. The command <em>atscc</em> first compiles the
ATS program contained in <span style="text-decoration: underline;">hello.dats</span> into some C code and then
invokes a C compiler (e.g., gcc) to translate the C code into binary object
code.

</p>

<hr style="background-color: #E0E0E0; height: 1px;"></hr>

<h2><a id="FIBexample">Computing Fibonacci Numbers</a></h2>

<p>
The paradigm of programming with theorem-proving (PwTP) is a cornerstone of
ATS, and a simple example to illustrate this programming paradigm is presented
here.

</p>

<p>
A function fib can be specified as follows for computing Fibonacci numbers:
</p>

<pre>
fib(0)   = 0
fib(1)   = 1
fib(n+2) = fib(n) + fib(n+1) for n >= 0
</pre>

<p>
Following is a direct implementation of this specified function in ATS:
</p>

<pre class="atsyntax">
<span class="keyword">fun</span> fib <span class="keyword">(</span>n<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span> <span class="keyword">=</span>
  <span class="keyword">if</span> n &gt;= 2 <span class="keyword">then</span> fib <span class="keyword">(</span>n-2<span class="keyword">)</span> + fib <span class="keyword">(</span>n-1<span class="keyword">)</span> <span class="keyword">else</span> n
<span class="comment">// end of [fib]
</span></pre>


<p>
Clearly, this is a terribly inefficient implementation of exponential
time-complexity. An implementation of fib in C is given as follows that is
of linear time-complexity:

</p><!--para-->

<pre>int fibc (int n) {
  int tmp, f0 = 0, f1 = 1 ;
  while (n-- > 0) { tmp = f1 ; f1 = f0 + f1 ; f0 = tmp ; } ; return f0 ;
} // end of [fibc]
</pre>

If translated into ATS, the function fibc can essentially be implemented
as follows:
<pre class="atsyntax">
<span class="keyword">fun</span> fibc <span class="keyword">(</span>n<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> loop <span class="keyword">(</span>n<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> f0<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> f1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> n <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> loop <span class="keyword">(</span>n-1<span class="keyword">,</span> f1<span class="keyword">,</span> f0+f1<span class="keyword">)</span> <span class="keyword">else</span> f0
  <span class="comment">// end of [loop]
</span><span class="keyword">in</span>
  loop <span class="keyword">(</span>n<span class="keyword">,</span> 0<span class="keyword">,</span> 1<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [fibc]
</span></pre>


There is obviously a logic gap between the defintion of fib and its
implementation as is embodied in fibc. In ATS, an implementation of fib can
be given that completely bridges this gap. First, the specification of fib
needs to be encoded into ATS, which is fulfilled by the declaration of the
following dataprop:

<pre class="atsyntax">
<span class="keyword">dataprop</span> <span class="prfexp"><span class="staexp"><span id="loc9"><span class="stacstdec">FIB <span class="keyword">(</span>int<span class="keyword">,</span> int<span class="keyword">)</span></span></span></span> <span class="keyword">=</span>
  <span class="keyword">|</span> FIB0 <span class="staexp"><span class="keyword">(</span>0<span class="keyword">,</span> 0<span class="keyword">)</span></span> <span class="keyword">|</span> FIB1 <span class="staexp"><span class="keyword">(</span>1<span class="keyword">,</span> 1<span class="keyword">)</span></span>
  <span class="keyword">|</span> <span class="keyword">{</span><span class="staexp">n<span class="keyword">:</span>nat</span><span class="keyword">}</span> <span class="keyword">{</span><span class="staexp">r0<span class="keyword">,</span>r1<span class="keyword">:</span>int</span><span class="keyword">}</span> FIB2 <span class="staexp"><span class="keyword">(</span>n+2<span class="keyword">,</span> r0+r1<span class="keyword">)</span></span> <span class="keyword">of</span> <span class="staexp"><span class="keyword">(</span>FIB <span class="keyword">(</span>n<span class="keyword">,</span> r0<span class="keyword">)</span><span class="keyword">,</span> FIB <span class="keyword">(</span>n+1<span class="keyword">,</span> r1<span class="keyword">)</span><span class="keyword">)</span></span></span>
<span class="comment">// end of [FIB]
</span></pre>


<p>
This declaration introduces a type <span class=atsyntax_staexp>FIB</span> for proofs, and such a type
is referred to as a prop in ATS. Intuitively, if a proof can be assgined
the type <span class=atsyntax_staexp>FIB</span>(n,r) for some integers n and r, then fib(n) equals r.
In other words, <span class=atsyntax_staexp>FIB</span>(n,r) encodes the relation fib(n)=r. There are
three constructors <span class=atsyntax_dynexp>FIB0</span>, <span class=atsyntax_dynexp>FIB1</span> and <span class=atsyntax_dynexp>FIB2</span>
associated with FIB, which are given the following types corresponding to
the three equations in the definition of fib:
</p>

<pre><span class=atsyntax_dynexp>FIB0</span> : <span class=atsyntax_staexp>() -> FIB (0, 0)</span>
<span class=atsyntax_dynexp>FIB1</span> : <span class=atsyntax_staexp>() -> FIB (1, 1)</span>
<span class=atsyntax_dynexp>FIB2</span> : <span class=atsyntax_staexp>{n:nat} {r0,r1:int} (FIB (n, r0), FIB (n, r1) -> FIB (n+2, r0+r1)</span>
</pre>

<p>
Note that {...} is the concrete syntax in ATS for universal quantification.
For instance, <span class=atsyntax_dynexp>FIB2</span>(<span class=atsyntax_dynexp>FIB0</span>(), <span class=atsyntax_dynexp>FIB1</span>()) is a term of
the type <span class=atsyntax_staexp>FIB</span>(2,1), attesting to fib(2)=1.

</p>

<p>A fully verified implementaion of the fib function in ATS can now be given
as follows:
</p>

<pre class="atsyntax">
<span class="keyword">fun</span> fibats
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>int<span class="keyword">]</span> <span class="keyword">(</span>FIB <span class="keyword">(</span>n<span class="keyword">,</span> r<span class="keyword">)</span> <span class="keyword">|</span> int r<span class="keyword">)</span></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> loop <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat <span class="keyword">|</span> i &lt;= n<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>r0<span class="keyword">,</span>r1<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>
    <span class="prfexp">pf0<span class="keyword">:</span> <span class="staexp">FIB <span class="keyword">(</span>i<span class="keyword">,</span> r0<span class="keyword">)</span></span></span><span class="keyword">,</span> <span class="prfexp">pf1<span class="keyword">:</span> <span class="staexp">FIB <span class="keyword">(</span>i+1<span class="keyword">,</span> r1<span class="keyword">)</span></span></span> <span class="keyword">|</span> ni<span class="keyword">:</span> <span class="staexp">int <span class="keyword">(</span>n-i<span class="keyword">)</span></span><span class="keyword">,</span> r0<span class="keyword">:</span> <span class="staexp">int r0</span><span class="keyword">,</span> r1<span class="keyword">:</span> <span class="staexp">int r1</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>int<span class="keyword">]</span> <span class="keyword">(</span>FIB <span class="keyword">(</span>n<span class="keyword">,</span> r<span class="keyword">)</span> <span class="keyword">|</span> int r<span class="keyword">)</span></span> <span class="keyword">=</span>
    <span class="keyword">if</span> ni <span class="keyword">&gt;</span> 0 <span class="keyword">then</span>
      loop <span class="staexp"><span class="keyword">{</span>i+1<span class="keyword">}</span></span> <span class="keyword">(</span><span class="prfexp">pf1</span><span class="keyword">,</span> <span class="prfexp">FIB2 <span class="keyword">(</span>pf0<span class="keyword">,</span> pf1<span class="keyword">)</span></span> <span class="keyword">|</span> ni - 1<span class="keyword">,</span> r1<span class="keyword">,</span> r0 + r1<span class="keyword">)</span>
    <span class="keyword">else</span> <span class="keyword">(</span><span class="prfexp">pf0</span> <span class="keyword">|</span> r0<span class="keyword">)</span>
  <span class="comment">// end of [loop]
</span><span class="keyword">in</span>
  loop <span class="staexp"><span class="keyword">{</span>0<span class="keyword">}</span></span> <span class="keyword">(</span><span class="prfexp">FIB0 <span class="keyword">(</span><span class="keyword">)</span></span><span class="keyword">,</span> <span class="prfexp">FIB1 <span class="keyword">(</span><span class="keyword">)</span></span> <span class="keyword">|</span> n<span class="keyword">,</span> 0<span class="keyword">,</span> 1<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [fibats]
</span></pre>
<!--ats2xhtmld-->

<p>Note that fibats is assigned the following type:
</p>

<pre><span class=atsyntax_dynexp>fibats</span> : <span class=atsyntax_staexp>{n:nat} int(n) -> [r:int] (FIB(n,r) | int(r))</span>
</pre>

<p>
where [...] is the concrete syntax in ATS for existential quantification
and the bar symbol (|) is just a separator (like a comma) for separating
proofs from values. For each integer I, <span class=atsyntax_staexp>int</span>(I) is a singleton
type for the only integer whose value is I. When fibats is applied to an
integer of value n, it returns a pair consisting of a proof and an integer
value r such that the proof, which is of the type <span class=atsyntax_staexp>FIB</span>(n,r),
asserts fib(n)=r.  Therefore, <span class=atsyntax_dynexp>fibats</span> is a verified
implementation of fib as is encoded by <span class=atsyntax_staexp>FIB</span>. Note that the inner
function <span class=atsyntax_dynexp>loop</span> directly corresponds to the while-loop in the body
of the function fibc (written in C).

</p><!--para-->

<p>
Lastly, it should be emphasized that proofs are completely erased after
typechecking. In particular, there is no proof construction at run-time.

</p><!--para-->

<hr style="background-color: #E0E0E0; height: 1px;"></hr>

<h2><a id="FURTHERexamples">Further Examples</a></h2>

Please find
<a href="http://www.ats-lang.org/htdocs-old/EXAMPLE/example.html">on-line</a>
a large variety of programs written in ATS.

<p></p>

<!-- ****** ****** -->

</div><!--div/id=thePageBody-prop-->

</div><!--thePageBody-->
</td>
</tr>

<tr>
<td>
<div id="thePageFooter">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>
<div id="thePageFooterSeparator">
<div class="Page-mysitelinks">
<a href="http://www.ats-lang.org/">Home</a><span class="separator"> | </span><a href="http://www.ats-lang.org/DOWNLOAD">Download</a><span class="separator"> | </span><a href="http://www.ats-lang.org/DOCUMENT">Documents</a><span class="separator"> | </span><a href="http://www.ats-lang.org/LIBRARY">Libraries</a><span class="separator"> | </span><a href="http://www.ats-lang.org/RESOURCE">Resources</a><span class="separator"> | </span><a href="http://www.ats-lang.org/COMMUNITY">Community</a>
</div>

</div><!--thePageFooterSeparator-->
</td>
</tr>

<tr>
<td>
<div id="thePageFooterRest">
<table>
<tr>
<td style="width: 100%;">
This page is created with
<a href="http://www.ats-lang.org">ATS</a>
by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>
and also maintained by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>.
</td>
<td style="width: 0%;"><!--pushed to the right-->
<a href="http://sourceforge.net">
<img
src="http://sflogo.sourceforge.net/sflogo.php?group_id=205722&amp;type=2"
width="120"
height="36"
alt="SourceForge.net Logo"
/>
</a>
</td>
</tr>
</table>

</div><!--thePageFooterRest-->
</td>
</tr>
</table>
</div><!--thePageFooter-->
</td>
</tr>
</table>
</div><!--thePage-->
</td>
</tr>
</table>
</div><!--theBodyProp-->

</body><!--body-->
</html><!--html-->


