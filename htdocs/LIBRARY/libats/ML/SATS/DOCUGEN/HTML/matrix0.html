
<!DOCTYPE html>
<html>
<head>
<title>ATSLIB/libats/ML/matrix0</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<style type="text/css">
  .patsyntax {color:#808080;background-color:#E0E0E0;}
  .patsyntaxkeyword {color:#000000;font-weight:bold;}
  .patsyntaxcomment {color:#787878;font-style:italic;}
  .patsyntaxextcode {color:#A52A2A;}
  .patsyntaxneuexp  {color:#800080;}
  .patsyntaxstaexp  {color:#0000F0;}
  .patsyntaxprfexp  {color:#603030;}
  .patsyntaxdynexp  {color:#F00000;}
  .patsyntaxstalab  {color:#0000F0;font-style:italic}
  .patsyntaxdynlab  {color:#F00000;font-style:italic}
  .patsyntaxdynstr  {color:#008000;font-style:normal}
  .patsyntaxstacstdec  {text-decoration:none;}
  .patsyntaxstacstuse  {color:#0000CF;text-decoration:underline;}
  .patsyntaxdyncstdec  {text-decoration:none;}
  .patsyntaxdyncstuse  {color:#B80000;text-decoration:underline;}
  .patsyntaxdyncst_implement  {color:#B80000;text-decoration:underline;}
  .patsyntax span.keyword {color:#000000;font-weight:bold;}
  .patsyntax span.comment {color:#787878;font-style:italic;}
  .patsyntax span.extcode {color:#A52A2A;}
  .patsyntax span.neuexp  {color:#800080;}
  .patsyntax span.staexp  {color:#0000F0;}
  .patsyntax span.prfexp  {color:#603030;}
  .patsyntax span.dynexp  {color:#F00000;}
  .patsyntax span.stalab  {color:#0000F0;font-style:italic}
  .patsyntax span.dynlab  {color:#F00000;font-style:italic}
  .patsyntax span.dynstr  {color:#008000;font-style:normal}
  .patsyntax span.stacstdec  {text-decoration:none;}
  .patsyntax span.stacstuse  {color:#0000CF;text-decoration:underline;}
  .patsyntax span.dyncstdec  {text-decoration:none;}
  .patsyntax span.dyncstuse  {color:#B80000;text-decoration:underline;}
  .patsyntax span.dyncst_implement  {color:#B80000;text-decoration:underline;}
</style>

<script
type="text/javascript"
src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
></script>

<script
type="text/javascript"
src="http://www.ats-lang.org/scripts/patscode_tryit_bind_all.js"
></script>

</head>
<body>

<h1>ATSLIB/libats/ML/matrix0</h1>


The functions declared in this package are primarily for supporting
ML-style processing of persistent matrices. Note that a plain matrix (as is in
C) is not available in languages such as Java and ML due to the need for
performing matrix-bounds checking at run-time. Instead, matrices in these
languages are always bundled together with their dimensions. In ATS, the type
<span class="patsyntaxstaexp">matrix0(T)</span> is for a matrix paired with its dimension in which
elements of the type T are stored.



<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<menu>
<li><a href="#matrix0">matrix0</a></li>
<li><a href="#matrix0_vt0ype_type">matrix0_vt0ype_type</a></li>
<li><a href="#matrix0_of_mtrxszref">matrix0_of_mtrxszref</a></li>
<li><a href="#mtrxszref_of_matrix0">mtrxszref_of_matrix0</a></li>
<li><a href="#matrix0_get_nrow">matrix0_get_nrow</a></li>
<li><a href="#matrix0_get_ncol">matrix0_get_ncol</a></li>
<li><a href="#matrix0_make_elt">matrix0_make_elt</a></li>
<li><a href="#matrix0_get_at">matrix0_get_at</a></li>
<li><a href="#matrix0_get_at_int">matrix0_get_at_int</a></li>
<li><a href="#matrix0_set_at">matrix0_set_at</a></li>
<li><a href="#matrix0_set_at_int">matrix0_set_at_int</a></li>
<li><a href="#matrix0_tabulate">matrix0_tabulate</a></li>
<li><a href="#matrix0_foreach">matrix0_foreach</a></li>
<li><a href="#matrix0_iforeach">matrix0_iforeach</a></li>
<li><a href="#matrix0_foldleft">matrix0_foldleft</a></li>
<li><a href="#matrix0_ifoldleft">matrix0_ifoldleft</a></li>
<li><a href="#Overloaded Symbols">Overloaded Symbols</a></li>
<li><a href="#[]">[]</a></li>
<li><a href="#.nrow">.nrow</a></li>
<li><a href="#.ncol">.ncol</a></li>
<li><a href="#fprint">fprint</a></li>
</menu>

<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<h2><a id="matrix0">matrix0</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="keyword">stadef</span> <span class="staexp">matrix0 <span class="keyword">=</span> <span class="staexp">matrix0_vt0ype_type</span></span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_vt0ype_type">matrix0_vt0ype_type</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="staexp"><span class="keyword">abstype</span>
matrix0_vt0ype_type
  <span class="keyword">(</span>a<span class="keyword">:</span> <span class="keyword">vt@ype</span><span class="comment">(*invariant*)</span><span class="keyword">)</span> <span class="keyword">=</span> ptr</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_of_mtrxszref">matrix0_of_mtrxszref</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
matrix0_of_mtrxszref
  <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="keyword">(</span><span class="staexp">mtrxszref</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span></span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="mtrxszref_of_matrix0">mtrxszref_of_matrix0</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
mtrxszref_of_matrix0
  <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="keyword">(</span>M<span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">mtrxszref</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span></span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_get_nrow">matrix0_get_nrow</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
matrix0_get_nrow<span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="keyword">(</span>M<span class="keyword">:</span> <span class="staexp">matrix0</span> <span class="staexp">a</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">size_t</span></span></pre>
<h3>Description</h3>

This function returns the number of rows of the matrix associated with a given
matrix0-value.
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_get_ncol">matrix0_get_ncol</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
matrix0_get_ncol<span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="keyword">(</span>M<span class="keyword">:</span> <span class="staexp">matrix0</span> <span class="staexp">a</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">size_t</span></span></pre>
<h3>Description</h3>

This function returns the number of columns of the matrix associated with a given
matrix0-value.
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_make_elt">matrix0_make_elt</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_make_elt <span class="keyword">with</span> matrix0_make_elt_int</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_make_elt <span class="keyword">with</span> matrix0_make_elt_size</span></pre>
<h3>Description</h3>

This function creates a matrix0-value of a given dimension in
which each matrix-cell is initialized with a given value (3rd argument).
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_get_at">matrix0_get_at</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_get_at <span class="keyword">with</span> matrix0_get_at_int</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_get_at <span class="keyword">with</span> matrix0_get_at_size</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_get_at_int">matrix0_get_at_int</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>t0p<span class="keyword">}</span></span>
matrix0_get_at_int
  <span class="keyword">(</span>M<span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">a</span></span></pre>
<h3>Description</h3>

Given an matrix0-value M of dimension m by n and two indices i and j, this
function returns M[i,j] if i and j are valid (that is, 0 <= i < m and 0 <=
j < n), or it raises the exception <span class="patsyntaxdynexp">MatrixSubscriptExn</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_set_at">matrix0_set_at</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_set_at <span class="keyword">with</span> matrix0_set_at_int</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> matrix0_set_at <span class="keyword">with</span> matrix0_set_at_size</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_set_at_int">matrix0_set_at_int</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>t0p<span class="keyword">}</span></span>
matrix0_set_at_int
  <span class="keyword">(</span>M<span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">a</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnrefwrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></pre>
<h3>Description</h3>

Given an matrix0-value M of dimension m by n, two indicies i and j, and a
value x, this function assigns x to M[i,j] if i and j are valid (that is, 0
<= i < m and 0 <= j < n), or it raises the exception
<span class="patsyntaxdynexp">MatrixSubscriptExn</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_tabulate">matrix0_tabulate</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span>
<span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
matrix0_tabulate
  <span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span>
<span class="keyword">(</span> nrow<span class="keyword">:</span> <span class="staexp">size_t</span><span class="keyword">(</span><span class="staexp">m</span><span class="keyword">)</span>
<span class="keyword">,</span> ncol<span class="keyword">:</span> <span class="staexp">size_t</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span>
<span class="keyword">,</span> fopr<span class="keyword">:</span> <span class="staexp">cfun</span><span class="keyword">(</span><span class="staexp">sizeLt</span><span class="keyword">(</span><span class="staexp">m</span><span class="keyword">)</span><span class="keyword">,</span> <span class="staexp">sizeLt</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> <span class="staexp">a</span><span class="keyword">)</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span></span> <span class="comment">// end of [matrix0_tabulate]</span></pre>
<h3>Description</h3>

Given sizes nrow and ncol and a function f, this function returns a
matrix0-value M of dimension nrow by ncol such that each M[i,j] is
initialized with the value returned by f(i,j), where i ranges from 0 until
nrow-1, inclusive, and j from 0 until ncol-1, inclusive.
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_foreach">matrix0_foreach</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span>
<span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
matrix0_foreach
<span class="keyword">(</span>
M <span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> fwork<span class="keyword">:</span> <span class="keyword">(</span><span class="staexp">&amp;</span><span class="staexp">a</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">)</span> <span class="keyword">-&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp">void</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span> <span class="comment">// end of [matrix0_foreach]</span></pre>
<h3>Description</h3>

Given a matrix0-value M and a closure-function f,
<span class="patsyntaxdynexp">matrix0_foreach</span> applies f to each matrix-cell contained in M.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_iforeach">matrix0_iforeach</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span>
<span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
matrix0_iforeach
<span class="keyword">(</span>
M <span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> fwork<span class="keyword">:</span> <span class="keyword">(</span><span class="staexp">size_t</span><span class="keyword">,</span> <span class="staexp">size_t</span><span class="keyword">,</span> <span class="staexp">&amp;</span><span class="staexp">a</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">)</span> <span class="keyword">-&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp">void</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span> <span class="comment">// end of [matrix0_iforeach]</span></pre>
<h3>Description</h3>

Given a matrix0-value M of dimension m by n and a closure-function f,
<span class="patsyntaxdynexp">matrix0_iforeach</span> applies f to i, j and the matrix-cell (i, j),
where i ranges from 0 to m-1, inclusive, and j from 0 to n-1, inclusive.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_foldleft">matrix0_foldleft</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
res<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p
<span class="keyword">}</span></span> matrix0_foldleft
<span class="keyword">(</span>
  M<span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> ini<span class="keyword">:</span> <span class="staexp">res</span><span class="keyword">,</span> fopr<span class="keyword">:</span> <span class="keyword">(</span><span class="staexp">res</span><span class="keyword">,</span> <span class="staexp">&amp;</span><span class="staexp">a</span><span class="keyword">)</span> <span class="keyword">-&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp">res</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">res</span></span> <span class="comment">// end of [matrix0_foldleft]</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="matrix0_ifoldleft">matrix0_ifoldleft</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
res<span class="keyword">:</span>vt0p<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>vt0p
<span class="keyword">}</span></span> matrix0_ifoldleft
<span class="keyword">(</span>
  M<span class="keyword">:</span> <span class="staexp">matrix0</span><span class="keyword">(</span><span class="staexp">a</span><span class="keyword">)</span><span class="keyword">,</span> ini<span class="keyword">:</span> <span class="staexp">res</span><span class="keyword">,</span> fopr<span class="keyword">:</span> <span class="keyword">(</span><span class="staexp">res</span><span class="keyword">,</span> <span class="staexp">size_t</span><span class="keyword">,</span> <span class="staexp">size_t</span><span class="keyword">,</span> <span class="staexp">&amp;</span><span class="staexp">a</span><span class="keyword">)</span> <span class="keyword">-&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp">res</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">res</span></span> <span class="comment">// end of [matrix0_ifoldleft]</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="Overloaded Symbols">Overloaded Symbols</a></h2>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="[]">[]</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> matrix0_get_at_int <span class="keyword">of</span> 0</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> matrix0_set_at_int <span class="keyword">of</span> 0</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> matrix0_get_at_size <span class="keyword">of</span> 0</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> matrix0_set_at_size <span class="keyword">of</span> 0</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id=".nrow">.nrow</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">.</span>nrow <span class="keyword">with</span> matrix0_get_nrow</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id=".ncol">.ncol</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">.</span>ncol <span class="keyword">with</span> matrix0_get_ncol</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="fprint">fprint</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_matrix0</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_matrix0_sep</span></pre>


<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<table>
<tr>
<td style="width: 100%;">
This page is created with
<a href="http://www.ats-lang.org">ATS</a>
by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>
and also maintained by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>.
</td>
<td style="width: 0%;"><!--pushed to the right-->
<a href="http://sourceforge.net">
<img
src="http://sflogo.sourceforge.net/sflogo.php?group_id=205722&amp;type=2"
width="120"
height="36"
alt="SourceForge.net Logo"
/>
</a>
</td>
</tr>
</table>


</body>
</html>

