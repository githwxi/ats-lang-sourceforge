%!PS-Adobe-2.0
%%Creator: dvips(k) 5.78 Copyright 1998 Radical Eye Software (www.radicaleye.com)
%%Title: waaapl99.dvi
%%Pages: 16
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Roman Times-Bold Times-Italic Courier
%%EndComments
%DVIPSCommandLine: dvips -o waaapl99.ps waaapl99.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 1999.10.18:2038
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 2 string 0 1 255{IE S dup 360 add 36 4 index cvrs cvn
put}for pop 65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N
/RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley
X /rulex X V}B /V{}B /RV statusdict begin /product where{pop false[
(Display)(NeXT)(LaserWriter 16/600)]{dup length product length le{dup
length product exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}
forall}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont cvx]cvx def}def /ObliqueSlant
{dup sin S cos div neg}B /SlantFont{4 index mul add}def /ExtendFont{3 -1
roll mul exch}def /ReEncodeFont{/Encoding exch def}def end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (waaapl99.dvi)
@start /Fa 103[45 31[45 45 1[45 45 45 45 1[45 45 45 45
45 45 1[45 45 45 45 45 45 45 1[45 19[45 45 7[45 45 8[45
10[45 45 46[{TeXBase1Encoding ReEncodeFont}28 74.7198
/Courier rf /Fb 133[29 33 1[50 33 37 21 29 29 1[37 37
37 54 21 33 1[21 37 37 21 33 37 33 1[37 9[62 2[42 37
46 1[46 1[50 62 42 1[33 25 1[54 46 1[54 50 1[46 12[37
37 37 4[25 42[37 2[{TeXBase1Encoding ReEncodeFont}42
74.7198 /Times-Italic rf /Fc 138[55 33 39 44 1[55 50
55 83 28 55 1[28 3[44 55 44 1[50 12[66 1[72 5[66 3[78
5[66 72 12[50 50 50 50 2[25 33 45[{TeXBase1Encoding ReEncodeFont}27
99.6264 /Times-Bold rf
%DVIPSBitmapFont: Fd cmsy7 7 1
/Fd 1 49 df<13E0EA01F0EA03F8A3EA07F0A313E0A2120F13C0A3EA1F80A21300A25A12
3EA35AA3127812F8A25A12100D1E7D9F13>48 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmbx10 10 1
/Fe 1 50 df<141E143E14FE1307133FB5FCA313CFEA000FB3B3A6007FB61280A4213779
B630>49 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff cmmi7 7 3
/Ff 3 111 df<133EEA07FEA2EA007CA213FCA25BA21201A25BA21203EC07809038E01F
C0EC38600007EB61E014C3EBC187EBC307D80FC613C09038CC038001B8C7FC13E0487E13
FEEB3F80EB0FC0486C7E1303003E1460A2127EECC0C0127CECC18012FC903801E30038F8
00FE0070137C1B297CA723>107 D<3B07801FC007E03B0FE07FF01FF83B18F0E0F8783C
3B30F1807CE03E903AFB007D801ED860FEEB3F005B49133E00C14A133E5B1201A2484849
5BA35F4848485A1830EE01F0A23C0F8003E003E060A218C0933801E180271F0007C013E3
933800FF00000E6D48137C341B7D993B>109 D<3907801FC0390FE07FF03918F0E0F839
30F1807CEBFB00D860FE133C5B5B00C1147C5B1201A248485BA34A5AEA07C01660EC03E0
A23A0F8007C0C0A2EDC180913803C300D81F0013C7EC01FE000EEB00F8231B7D9929>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmti10 10 3
/Fg 3 117 df<EB01C0EB07E014F0130F14E01307EB038090C7FCAB13F0EA03FCEA071E
EA0E1F121CA212385B1270A25BEAF07E12E013FEC65AA212015B1203A25B12075BA2000F
13E013C013C1001F13C01381A2EB83801303EB0700A2130E6C5AEA07F8EA01E0143879B6
19>105 D<D801E013FE3A07F803FF803A0E3C0F07C03A1E3E3C03E0261C1F787F39383F
F00114E0007813C000708114804A485AEAF07FEAE07EA20000140701FE5C5BA2150F0001
5D5B151F5E12034990383F8380160316070007027F130049137EA2160E000F147C49141E
161C5E001FEC3C7849EB1FE00007C7EA0780292679A42F>110 D<EB0380EB07C0130FA4
131F1480A3133F1400A35B137E007FB5FCA2B6FC3800FC00A312015BA312035BA312075B
A3120F5BA3121FEB801CA2143C003F1338EB0078147014F014E0EB01C0EA3E03381F0780
380F0F00EA07FCEA01F0183579B31C>116 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmr7 7 4
/Fh 4 51 df<140EB3A2B812E0A3C7000EC8FCB3A22B2B7DA333>43
D<EB3F803801FFF03803E0F83807803C48487E001E7F003E1480A2003C1307007C14C0A4
00FC14E0AE007C14C0A36CEB0F80A36CEB1F006C131E6C6C5A3803E0F86CB45A38003F80
1B277EA521>48 D<13381378EA01F8121F12FE12E01200B3AB487EB512F8A215267BA521
>I<13FF000313E0380E03F0381800F848137C48137E00787F12FC6CEB1F80A4127CC7FC
15005C143E147E147C5C495A495A5C495A010EC7FC5B5B903870018013E0EA0180390300
030012065A001FB5FC5A485BB5FCA219267DA521>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmsy10 10 18
/Fi 18 107 df<007FB81280B912C0A26C17803204799641>0 D<121C127FEAFF80A5EA
7F00121C0909799917>I<EB0380497EA7397803803C00FC147E00FE14FE397F8383FC39
3FC387F8390FE38FE03903FBBF803900FFFE00EB3FF8EB0FE0A2EB3FF8EBFFFE3903FBBF
80390FE38FE0393FC387F8397F8383FC39FE0380FE00FC147E0078143C390007C000A76D
5A1F247BA62A>3 D[<15F84A7E4A7E4A7EA56E5A6E5A6E5A92C9FCAB007FB812F0B912F8
A26C17F0CCFCAB15F84A7E4A7E4A7EA56E5A6E5A6E5A>53 48 123
172 64 I<EB0FE0EB7FFC497E0003EBFF804814C04814E04814F04814F8A24814FCA3B6
12FEA86C14FCA36C14F8A26C14F06C14E06C14C06C1480C6EBFE006D5AEB0FE01F207BA4
2A>15 D<007FB812F8B912FCA26C17F8CCFCAE007FB812F8B912FCA26C17F8CCFCAE007F
B812F8B912FCA26C17F836287BA841>17 D<EF0180EF07C0171FEF7F80933801FF00EE07
FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9
FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA3FF0EA7FC048CBFC5AEA7F80EA3FE0EA0FF8
EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED3F
E0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0170FEF038094C7
FCAE007FB81280B912C0A26C1780324479B441>20 D<126012F812FEEA7F80EA3FE0EA0F
F8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED
3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0171FEF7F8093
3801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48C8FCEC07FCEC1FF0
EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA1FF0EA7FC048CBFC12FC1270
CCFCAE007FB81280B912C0A26C1780324479B441>I<181EA4181F84A285180785727EA2
727E727E85197E85F11F80F10FC0F107F0007FBA12FCBCFCA26C19FCCCEA07F0F10FC0F1
1F80F13F00197E61614E5A4E5AA24E5A61180F96C7FCA260181EA4482C7BAA53>33
D<EE0180EE03C01607A2EE0F80A2EE1F00A2163EA25EA25EA24B5AA24B5AA24B5A150F5E
4BC7FCA2153EA25DA25DA24A5AA24A5AA24A5AA24A5AA24AC8FCA2143EA25CA25CA2495A
A2495AA2495AA2495AA249C9FCA2133EA25B13FC5B485AA2485AA2485AA2485AA248CAFC
A2123EA25AA25AA25A12602A4E75BB00>54 D<14034A7E4A7EA24A7EA34A7EA2EC7CF8A2
ECF87CA2ECF03C0101133EA249487EA249486C7EA249486C7EA2EC00034980A2013E6D7E
A2496D7EA20178147801F8147CA2484880A2484880A24848EC0F80A2491407000F16C0A2
48C8EA03E0A2003EED01F0A2003C1500007C16F8A248167CA248163C006016182E347CB1
37>94 D<0060161800F0163C6C167CA2007C16F8A2003C16F0003E1501A26CED03E0A26C
6CEC07C0A2000716806D140FA26C6CEC1F00A26C6C143EA26C6C5CA201781478017C14F8
A26D495AA26D495AA26D5CEC8007A26D6C485AA26D6C48C7FCA2903801F03EA20100133C
ECF87CA2EC7CF8A2EC3FF0A26E5AA36E5AA26E5A6EC8FC2E347CB137>I<126012F0B3A8
B712FE16FFA216FE00F0C9FCB3A81260283A7BB933>I<126012F0B3B3B3B3A5B512F014
F8A26C13F0155272BD25>98 D<14301478B3B3B3B3A5387FFFF8B5FCA26C13F015527FBD
25>I<EC01F8140FEC3F80ECFC00495A495A495AA2130F5CB3A7131F5C133F49C7FC13FE
EA03F8EA7FE048C8FCEA7FE0EA03F8EA00FE137F6D7E131F80130FB3A7801307A26D7E6D
7E6D7EEC3F80EC0FF814011D537ABD2A>102 D<12FCEAFFC0EA07F0EA01FCEA007E7F80
131F80130FB3A7801307806D7E6D7EEB007EEC1FF0EC07F8EC1FF0EC7E00495A495A495A
5C130F5CB3A7131F5C133F91C7FC137E485AEA07F0EAFFC000FCC8FC1D537ABD2A>I<12
6012F0B3B3B3B3A91260045377BD17>106 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmr10 10 23
/Fj 23 121 df<B912FEA3000190C7000113006C5EB3B3AD486D497EB648B512FEA33739
7DB83E>5 D<B812FEA3D87FE0C7121F16016C6CEC007F6C6C151FA26C6C816C6C81A26C
6C816C7F7E6E15806D6C14016D7EA26D7E6D6C91C7FCA26D7E6D7EA26D7F6D7FA26E7E14
3FA26E5A6E5A6EC9FC140E5C5C14300270EC01805C495A495A49C81203010E16005B5B49
5D5B48485D48485D90C95A485E000E4B5A48ED1FFE003FB7FC5AB8FCA231397BB83C>I<
146014E0EB01C0EB0380EB0700130E131E5B5BA25B485AA2485AA212075B120F90C7FCA2
5A121EA2123EA35AA65AB2127CA67EA3121EA2121F7EA27F12077F1203A26C7EA26C7E13
78A27F7F130E7FEB0380EB01C0EB00E01460135278BD20>40 D<12C07E12707E7E7E120F
6C7E6C7EA26C7E6C7EA21378A2137C133C133E131EA2131F7FA21480A3EB07C0A6EB03E0
B2EB07C0A6EB0F80A31400A25B131EA2133E133C137C1378A25BA2485A485AA2485A48C7
FC120E5A5A5A5A5A13527CBD20>I<15301578B3A6007FB812F8B912FCA26C17F8C80078
C8FCB3A6153036367BAF41>43 D<EB03F8EB1FFF90387E0FC09038F803E03901E000F048
4813780007147C48487FA248C77EA2481580A3007EEC0FC0A600FE15E0B3007E15C0A400
7F141F6C1580A36C15006D5B000F143EA26C6C5B6C6C5B6C6C485A6C6C485A90387E0FC0
D91FFFC7FCEB03F8233A7DB72A>48 D<EB01C013031307131F13FFB5FCA2131F1200B3B3
A8497E007FB512F0A31C3879B72A>I<EB0FF0EB7FFE48B57E3903E03FE0390F000FF000
0E6D7E486D7E486D7E123000706D7E126012FCB4EC7F807FA56CC7FC121CC8FCEDFF00A3
4A5A5D14035D4A5A5D140F4A5A4A5A92C7FC147C5C495A495A495A495A91C8FC011EEB01
805B5B49130348481400485A485A000EC75A000FB6FC5A5A485CB6FCA321387CB72A>I<
EB07F8EB3FFF4913C03901F80FF03903C007F848486C7E380E0001000F80381FE0006D7F
A56C5A6C5AC85A1401A25D4A5AA24A5A5DEC0F80027EC7FCEB1FFCECFF809038000FE06E
7EEC01FC816E7EED7F80A216C0A2153F16E0A2121EEA7F80487EA416C049137F007F1580
007EC7FC0070ECFF006C495A121E390F8003F83907F00FF00001B512C06C6C90C7FCEB0F
F8233A7DB72A>I<EC3FC0903801FFF0010713FC90380FE03E90383F800790387E001F49
EB3F804848137F485AA2485A000FEC3F0049131E001F91C7FCA2485AA3127F90C9FCEB01
FC903807FF8039FF1E07E090383801F0496C7E01607F01E0137E497FA249148016C0151F
A290C713E0A57EA56C7E16C0A2121FED3F807F000F15006C6C5B15FE6C6C5B6C6C485A39
00FE07F090383FFFC06D90C7FCEB03FC233A7DB72A>54 D<121C127FEAFF80A5EA7F0012
1CC7FCB2121C127FEAFF80A5EA7F00121C092479A317>58 D<007FB812F8B912FCA26C17
F8CCFCAE007FB812F8B912FCA26C17F836167B9F41>61 D<EAFFF8A4EAF000B3B3B3B3A3
EAFFF8A40D5378BD17>91 D<EAFFF8A4EA0078B3B3B3B3A3EAFFF8A40D537FBD17>93
D<EB1FE0EBFFFC3803E03F3907000F80390F8007E0486C6C7E13E06E7EA26E7E6C5A6C5A
C8FCA4147FEB07FFEB3FE0EBFE00EA03F8EA0FF0EA1FC0123F485A90C7FC160C12FEA314
01A26C13036CEB077C903980063E18383FC01E3A0FE0781FF03A03FFF00FE03A007F8007
C026277DA52A>97 D<ED0FC0EC03FFA3EC003F150FB0EB03F8EB1FFF90387E078F9038F8
01EF3903F0007F4848133F4848131FA24848130F123F90C7FC5AA2127E12FEAA127E127F
A27EA26C6C131FA26C6C133F6C6C137F6C6CEBEFF03A01F801CFFF39007C078F90381FFE
0FD907F813C0283B7DB92E>100 D<ED03F090390FF00FF890393FFC3C3C9039F81F707C
3901F00FE03903E007C03A07C003E010000FECF000A248486C7EA86C6C485AA200075C6C
6C485A6D485A6D48C7FC38073FFC38060FF0000EC9FCA4120FA213C06CB512C015F86C14
FE6CECFF804815C03A0F80007FE048C7EA0FF0003E140348140116F8481400A56C140100
7C15F06CEC03E0003F1407D80F80EB0F80D807E0EB3F003901FC01FC39007FFFF0010790
C7FC26387EA52A>103 D<EA0380EA0FE0487EA56C5AEA0380C8FCAAEA03F012FFA31207
1203B3AA487EB512C0A312387EB717>105 D<EA03F012FFA3120F1203B3B3AD487EB512
C0A3123A7EB917>108 D<2703F00FF0EB1FE000FFD93FFCEB7FF8913AF03F01E07E903B
F1C01F83803F3D0FF3800FC7001F802603F70013CE01FE14DC49D907F8EB0FC0A2495CA3
495CB3A3486C496CEB1FE0B500C1B50083B5FCA340257EA445>I<3903F00FF000FFEB3F
FCECF03F9039F1C01F803A0FF3800FC03803F70013FE496D7EA25BA35BB3A3486C497EB5
00C1B51280A329257EA42E>I<EB03FE90380FFF8090383E03E09038F800F84848137C48
487F48487F4848EB0F80001F15C090C712074815E0A2007EEC03F0A400FE15F8A9007E15
F0A2007F14076C15E0A26C6CEB0FC0000F15806D131F6C6CEB3F006C6C137EC66C13F890
387E03F090381FFFC0D903FEC7FC25277EA52A>I<B538807FFFA33A03FE003FF00001EC
1F80000092C7FC017E131C6D13186D6C5AECC070010F5B6D6C5AECF180EB03FB6DB4C8FC
6D5AA2147F804A7E8114CF903801C7E090380383F090380703F8EB0601496C7E011C137E
49137F01787F496D7E486C80000FEC3FF0D8FFFE90B51280A329247FA32C>120
D E
%EndDVIPSBitmapFont
/Fk 130[50 50 50 50 50 50 50 50 50 50 50 50 1[50 50 50
50 50 50 1[50 50 50 50 50 50 50 50 50 1[50 1[50 50 50
6[50 50 50 2[50 50 50 50 2[50 50 2[50 2[50 3[50 50 50
50 50 7[50 50 50 50 1[50 50 50 50 50 50 50 50 38[{
TeXBase1Encoding ReEncodeFont}59 83.022 /Courier rf /Fl
134[33 3[33 18 26 22 1[33 33 33 52 18 2[18 33 1[22 29
33 29 33 29 11[48 1[37 2[37 2[59 6[37 1[48 44 1[48 7[33
33 1[33 3[33 33 33 1[17 22 3[22 22 40[{TeXBase1Encoding ReEncodeFont}36
66.4176 /Times-Roman rf
%DVIPSBitmapFont: Fm cmsy6 6 1
/Fm 1 4 df<136013701360A20040132000E0137038F861F0387E67E0381FFF803807FE
00EA00F0EA07FE381FFF80387E67E038F861F038E060700040132000001300A213701360
14157B9620>3 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fn cmmi10 10 36
/Fn 36 122 df<EC3FC0ECFFF8903807E07C90380F801FD93F00EB800C017E130F499038
07C01C4848ECE018485A484801031338000FEDF0305B001F16704848156017E0007F16C0
90C713F1178016F34816004815F716FE5EA2485D5EA4007E1407150F003E91381DF81800
3F14796C02E11338270F8007C013303B07E03F007CF02601FFF8EB3FC026003FC0EB0F80
2E267DA435>11 D<EB07F0D91FFC1430D97FFE147090B5146000036E13E0486E13C0D9F0
1F1301270F8007E01380261F00011303001CD900F0130048EC7007160648EC300E0060EC
380CED181C00E01518C8121CED0C3816301670166016E05EA2150D5EA2150F93C7FCA215
0EA3150CA3151CA215181538A45DA45DA44A5AA35D2C377FA42B>13
D<1403EC3FF891387FFF80D901E313C014800103133F9138001F80ED070092C7FC80A280
A2808013018080130080147F81143F8149B47E130790380F8FF0EB3E0F496C7E13F83801
F003D803E07F1207380FC0011380121FEA3F0014005A127EA212FE5D481301A35DA24813
035D6C13075D127C4A5A6C91C7FC5C6C133E6C6C5A3807C0F03801FFE0D8003FC8FC223D
7DBB25>I<133F14C0EB07F06D7E801301A26D7EA3147FA36E7EA36E7EA36E7EA36E7EA3
6E7EA36E7EA26E7EA214014A7E5C4A7E91381E3F80143C14784A6C7E1301EB03E049486C
7EEB0F80EB1F00496D7E137E5B48486D7E485A485A000F6E7E485A485A48C87E12FE167F
4816800070151F293B7CB930>21 D<013FB512FE90B7FC5A5A4815FE260F801CC7FCEA1E
005A00385B5A5A481378C7FC147014F0A4495AA31303A3495AA3130FA25C131FA3133FA2
91C8FC131E28257EA324>28 D<1503A35DA21506A2150EA2150CA2151CA21518A21538A2
1530A21570A2EC07FE91383FFFC0903901FCE3F0903907E0E0F890391F80C03ED93E007F
EB7C01D801F8EC0F80D803F0018013C0D807E014071403D80FC015E0D81F801300A24848
5AA2007E1306A2020E130F12FE48010C14C0A2021CEB1F80A20218EB3F00A20238137E00
7C5D1430007E4A5A003E90387003F06CEC07C09138600F80D80F80013FC7FC3903E0E0FC
3901F8E7F039007FFF80D90FFCC8FCEB01C0A25CA21303A291C9FCA25BA21306A2130EA2
130CA22B4B7CB931>30 D<121C127FEAFF80A5EA7F00121C0909798817>58
D<121C127FEAFF80A213C0A3127F121C1200A412011380A2120313005A1206120E5A5A5A
12600A19798817>I<EF0380EF0FC0173FEFFF80933803FE00EE0FF8EE3FE0EEFF80DB03
FEC7FCED0FF8ED3FE0EDFF80DA03FEC8FCEC0FF8EC3FE0ECFF80D903FEC9FCEB0FF8EB3F
E0EBFF80D803FECAFCEA0FF8EA3FE0EA7F8000FECBFCA2EA7F80EA3FE0EA0FF8EA03FEC6
6C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED3FE0ED0FF8
ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0170FEF0380323279AD41>
I<150C151E153EA2153C157CA2157815F8A215F01401A215E01403A215C01407A2158014
0FA215005CA2141E143EA2143C147CA2147814F8A25C1301A25C1303A2495AA25C130FA2
91C7FC5BA2131E133EA2133C137CA2137813F8A25B1201A25B1203A25B1207A25B120FA2
90C8FC5AA2121E123EA2123C127CA2127812F8A25A12601F537BBD2A>I<126012FCB4FC
EA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007FC0EC1FF0EC07FC
EC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE01FF9338007F80
EF1FC0A2EF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48
C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA3FF0EA7F
C048CBFC12FC1270323279AD41>I<0103B77E4916F018FC903B0007F80003FE4BEB00FF
F07F80020FED3FC0181F4B15E0A2141FA25DA2143F19C04B143F1980027F157F190092C8
12FE4D5A4A4A5AEF0FF04AEC1FC005FFC7FC49B612FC5F02FCC7B4FCEF3FC00103ED0FE0
717E5C717E1307844A1401A2130F17035CA2131F4D5A5C4D5A133F4D5A4A4A5A4D5A017F
4BC7FC4C5A91C7EA07FC49EC3FF0B812C094C8FC16F83B397DB83F>66
D<9339FF8001C0030F13E0037F9038F80380913A01FF807E07913A07F8000F0FDA1FE0EB
079FDA3F80903803BF0002FFC76CB4FCD901FC80495A4948157E495A495A4948153E017F
163C49C9FC5B1201484816385B1207485A1830121F4993C7FCA2485AA3127F5BA312FF90
CCFCA41703A25F1706A26C160E170C171C5F6C7E5F001F5E6D4A5A6C6C4A5A16076C6C02
0EC8FC6C6C143C6C6C5C6CB4495A90393FE00FC0010FB5C9FC010313FC9038007FC03A3D
7CBA3B>I<0103B5D8F803B512F8495DA290260007F8C73807F8004B5DA2020F150F615D
A2021F151F615DA2023F153F615DA2027F157F96C7FC92C8FCA24A5D605CA249B7FC60A2
02FCC7120101031503605CA201071507605CA2010F150F605CA2011F151F605CA2013F15
3F605CA2017F157F95C8FC91C8FC496C4A7EB690B6FCA345397DB845>72
D<4BB4FC031F13F09238FE01FC913903F0007EDA07C0EB1F80DA1F80EB0FC0023EC7EA07
E002FCEC03F0495A4948EC01F8495A4948EC00FC495A49C912FE49167E13FE49167F1201
485AA2485AA2120F5B001F17FFA2485AA34848ED01FEA400FFEE03FC90C9FCA2EF07F8A2
EF0FF0A218E0171F18C0EF3F806C167F180017FE4C5A6C6C5D1603001F4B5A6D4A5A000F
ED1F806C6C4AC7FC6D147E0003EC01F8D801FC495AD8007EEB0FC090263F807FC8FC9038
07FFF801001380383D7CBA3F>79 D<0103B7FC4916E018F8903B0007F80007FC4BEB00FE
187F020FED3F80F01FC05DA2021F16E0A25DA2143FF03FC05DA2027FED7F80A292C81300
18FE4A4A5A604AEC07F04D5A0101ED3FC04CB4C7FC91B612FC17E0D903FCCAFCA25CA213
07A25CA2130FA25CA2131FA25CA2133FA25CA2137FA291CBFC497EB6FCA33B397DB835>
I<147E903803FF8090390FC1C38090391F00EFC0017E137F49133F485A4848EB1F801207
5B000F143F48481400A2485A5D007F147E90C7FCA215FE485C5AA214015D48150CA21403
EDF01C16181407007C1538007E010F1330003E131F027B13706C01E113E03A0F83C0F9C0
3A03FF007F80D800FCEB1F0026267DA42C>97 D<133FEA1FFFA3C67E137EA313FE5BA312
015BA312035BA31207EBE0FCEBE3FF9038E707C0390FFE03E09038F801F001F013F8EBE0
00485A15FC5BA2123F90C7FCA214015A127EA2140312FE4814F8A2140715F05AEC0FE0A2
15C0EC1F80143F00781400007C137E5C383C01F86C485A380F07C06CB4C7FCEA01FC1E3B
7CB924>I<EC3FC0903801FFF0903807E03C90380F800E90383F0007017E131F49137F48
4813FF485A485A120F4913FE001F143848481300A2127F90C8FCA35A5AA45AA315031507
007E1406150E003E143C003F14706C14E0390F8007C03907C03F003801FFF838003FC020
267DA424>I<EC3FC0903801FFF0903807E07890381F801C90387E001E49130E485A485A
1207485A49131E001F141C153C484813F8EC03E0007FEB3FC09038FFFE0014E090C8FC5A
5AA7007E140315071506003E140E153C6C14706C6C13E0EC07C03903E03F003801FFF838
003FC020267DA427>101 D<16F8ED03FEED0F8792381F0F80ED3E3F167F157CA215FC17
00161C4A48C7FCA414035DA414075DA20107B512F0A39026000FE0C7FC5DA4141F5DA414
3F92C8FCA45C147EA514FE5CA413015CA4495AA45C1307A25C121E123F387F8F80A200FF
90C9FC131E12FEEA7C3CEA7878EA1FF0EA07C0294C7CBA29>I<EB03F0EA01FFA3EA0007
5CA3130F5CA3131F5CA3133F91C9FCA35B90387E03F8EC0FFF91383C0F809039FEF007C0
D9FDC07FEBFF80EC0003485A5BA249130712035BA2150F00075D5BA2151F000F5D5B153F
93C7FC121F4990387F0180157EEDFE03003F02FC130090C7FC5EEDF80648150E007E150C
161C5E00FEEC787048EC3FE00038EC0F80293B7CB930>104 D<14E0EB03F8A21307A314
F0EB01C090C7FCAB13F8EA03FEEA070F000E1380121C121812381230EA701F1260133F00
E0130012C05BEA007EA213FE5B1201A25B12035BA20007131813E01438000F133013C014
70EB806014E014C01381EB838038078700EA03FEEA00F815397EB71D>I<150FED3F80A2
157FA31600151C92C7FCABEC0F80EC3FE0ECF0F0903801C0F849487E14005B130E130C13
1CEB1801133801305BA2EB0003A25DA21407A25DA2140FA25DA2141FA25DA2143FA292C7
FCA25CA2147EA214FEA25CA21301001E5B123F387F83F0A238FF87E0495A00FE5BD87C1F
C8FCEA707EEA3FF8EA0FC0214981B722>I<EB03F0EA01FFA3EA00075CA3130F5CA3131F
5CA3133F91C8FCA35B017EEB07C0ED1FF0ED783801FEEBE0F89039FC01C1FCEC0383EC07
070001130ED9F81C13F891383803F091387001E0000349C7FCEBF1C0EBF38001F7C8FCEA
07FEA2EBFFE0EBE7F8380FE0FEEBC07F6E7E141F001F80D9800F1330A21670003F011F13
6001001380A216E04815C0007E1481020F1380158300FE903807870048EB03FE0038EB00
F8263B7CB92B>I<EB0FC0EA03FF5AA2EA001F1480A2133FA21400A25BA2137EA213FEA2
5BA21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C7FCA25AA2
EA7E03A2EAFE07130612FCA2130E130C131C1318EA7C38EA3C70EA1FE0EA0780123B7DB9
19>I<D803E0017F14FE3D07F801FFE003FFC03D0E3C0781F00F03E03D1C3E1E00F83C01
F026383F38D9FC707F00304914E04A90387DC000007049EB7F8000604991C7FCA200E090
C700FE1301485A017E5CA200000201140301FE5F495CA203031407000160495C180F0307
5D1203494A011F13601980030F023F13E00007F000C0495C1901031F023E1380000F1803
494A150061033F150E001FEF1E1C4991C7EA0FF80007C7000EEC03E043267EA449>I<D8
03E0137F3A07F801FFE03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00705B
00605BA200E090C712FC485A137EA20000140101FE5C5BA2150300015D5B15075E120349
010F133016C0031F13700007ED80605B17E0EE00C0000F15014915801603EE0700001FEC
0F0E49EB07FC0007C7EA01F02C267EA432>I<EC1FC0ECFFF8903807E07E90380F801F90
393F000F80017E14C0491307484814E0485A4848EB03F0120F5B121F48481307A2127F90
C7FCA2150F5A4815E0A2151F16C0A248EC3F8016005D157E007E5C4A5A003E495A003F49
5A6C495A6C6C48C7FC3807E07E3801FFF038003F8024267DA428>I<90390F8003F09039
1FE00FFC903939F03C1F903A70F8700F80903AE0FDE007C09038C0FF80030013E0000149
1303018015F05CEA038113015CA2D800031407A25CA20107140FA24A14E0A2010F141F17
C05CEE3F80131FEE7F004A137E16FE013F5C6E485A4B5A6E485A90397F700F80DA383FC7
FC90387E1FFCEC07E001FEC9FCA25BA21201A25BA21203A25B1207B512C0A32C3583A42A
>I<3903E001F83907F807FE390E3C1E07391C3E381F3A183F703F800038EBE07F0030EB
C0FF00705B00601500EC007E153CD8E07F90C7FCEAC07EA2120013FE5BA312015BA31203
5BA312075BA3120F5BA3121F5B0007C9FC21267EA425>114 D<14FF010313C090380F80
F090383E00380178131C153C4913FC0001130113E0A33903F000F06D13007F3801FFE014
FC14FF6C14806D13C0011F13E013039038003FF014071403001E1301127FA24814E0A348
EB03C012F800E0EB07800070EB0F006C133E001E13F83807FFE0000190C7FC1E267CA427
>I<EB01C0497E1307A4130F5CA3131F5CA3133F91C7FC007FB51280A2B6FCD8007EC7FC
A313FE5BA312015BA312035BA312075BA3120FEBC006A2140E001F130CEB801C14181438
5C146014E0380F81C038078780D803FEC7FCEA00F819357EB31E>I<01F8EB03C0D803FE
EB07E0D8070F130F000E018013F0121C12180038140700301403D8701F130112601500D8
E03F14E000C090C7FC5BEA007E16C013FE5B1501000115805B150316001203495B150615
0E150C151C151815385D00015C6D485A6C6C485AD97E0FC7FCEB1FFEEB07F024267EA428
>118 D<903907E001F090391FF807FC9039783E0E0F9039E01F1C1FD801C09038383F80
3A03800FF07F0100EBE0FF5A000E4A1300000C157E021F133C001C4AC7FC1218A2C7123F
A292C8FCA25CA2147EA214FEA24A130CA20101141C001E1518003F5BD87F81143801835C
00FF1560010714E03AFE0E7C01C0D87C1C495A2778383E0FC7FC391FF00FFC3907C003F0
29267EA42F>120 D<13F8D803FE1470D8070F14F8000EEB8001121C1218003814030030
15F0EA701F1260013F130700E0010013E012C05BD8007E130F16C013FE5B151F00011580
5BA2153F000315005BA25D157EA315FE5D1401000113033800F80790387C1FF8EB3FF9EB
0FE1EB00035DA2000E1307D83F805B007F495AA24A5A92C7FCEB003E007C5B00705B6C48
5A381E07C06CB4C8FCEA01FC25367EA429>I E
%EndDVIPSBitmapFont
/Fo 134[37 37 55 37 1[23 32 32 1[42 42 42 60 23 37 1[23
42 42 23 37 42 37 42 42 29[55 67[{TeXBase1Encoding ReEncodeFont}23
83.022 /Times-Italic rf /Fp 133[37 42 42 60 42 42 23
32 28 42 42 42 42 65 23 42 23 23 42 42 28 37 42 37 42
37 3[28 1[28 3[78 1[60 51 46 55 1[46 60 60 74 51 1[32
28 60 60 46 1[60 55 55 60 5[23 23 42 42 42 42 42 42 42
42 42 42 23 21 28 21 2[28 28 28 1[69 33[46 46 2[{
TeXBase1Encoding ReEncodeFont}69 83.022 /Times-Roman
rf /Fq 134[60 1[86 1[66 40 47 53 1[66 60 66 100 33 66
1[33 1[60 40 53 66 53 1[60 9[120 2[80 66 86 4[113 80
2[47 2[73 1[86 86 1[86 8[60 60 60 60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}38 119.552 /Times-Bold
rf /Fr 75[25 11[25 17[37 27[33 37 37 54 37 37 21 29 25
37 37 37 37 58 21 37 21 21 37 37 25 33 37 33 37 33 3[25
1[25 46 1[54 71 54 54 46 42 50 54 42 54 54 66 46 54 29
25 54 54 42 46 54 50 50 54 6[21 37 37 37 37 37 37 37
37 37 37 21 19 25 19 42 1[25 25 25 36[42 2[{
TeXBase1Encoding ReEncodeFont}76 74.7198 /Times-Roman
rf /Fs 139[25 29 33 14[33 42 37 31[54 65[{TeXBase1Encoding ReEncodeFont}
7 74.7198 /Times-Bold rf /Ft 136[72 1[50 28 39 33 2[50
50 4[28 1[50 1[44 50 2[44 8[72 8[72 5[33 72 72 71[{
TeXBase1Encoding ReEncodeFont}17 99.6264 /Times-Roman
rf
%DVIPSBitmapFont: Fu cmsy10 12 1
/Fu 1 4 df<147014F8A81470007815F0007C1401B4EC07F8D87F80EB0FF0D83FE0EB3F
E0D80FF0EB7F80D803F8EBFE003900FE73F890383F77E090380FFF80D903FEC7FCEB00F8
EB03FE90380FFF8090383F77E09038FE73F83903F870FED80FF0EB7F80D83FE0EB3FE0D8
7F80EB0FF0D8FF00EB07F8007CEC01F000781400C7140014F8A81470252B7AAD32>3
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fv cmbx12 20.736 15
/Fv 15 122 df<BDFC1CFCF4FFC01DF81DFF1EC01EF88AC7003F91C96C14FF090315C0E1
007F800A0F14F80A03800A00800B3F7F7780778077800B018077808C8A787F787FA27880
8D8A8D8A8D8A8DA28D8AA28DA28BA28DA42280A38BA322C0B22280A367A32200A4699CB5
FCA269A3545CA2696669666966695491C7FC6668545B9BB55A65535C535C535C0B3F5C9A
B6C8FC5214FC0A0F5C0A3F5C0903B612C0097F5DBF48C9FC1EF81EE01E800BFCCAFC1DE0
52CBFC99CCFC82767AF594>68 D<922603FFF8150E037FD9FFC0143F0203B600FC5C021F
03FF5C027FEEC00149B8EAF00349EFFC07010FDA000F13FE4901F09039007FFF8F4901C0
020F13DF4990C8000390B5FC494815004801F8163F48844A8248498248844A8248844A83
4885A291CB7E5A86A286B5FC8680A28680A280A26E8380806E187E6E95C7FC6C8015E015
FCEDFFC06C15FCEEFFE06C16FF18F06CEFFF8019F06C18FE737E6C856C19F06C19FC6D84
6D846D856D856D850101856D85023F846E841407020084031F18801500040F17C0EE007F
050716E0EF003F1803DE007F14F0191F8585070114F8A28586007E85B4FC86A286A37F86
A36D1AF0A37F1CE06D60A26D1AC06D607F6D1A806E5F6E4D13006E606E17FF02FC4C5B02
FF4C5B03E04B5B03FC031F5B01FBD9FF80027F5B01F102FE0107B55AD9E07F90B8C7FC6E
17FCD9C00F5FD9800317E090C76C168048020F4BC8FC48020015F00070030349C9FC557A
75F76C>83 D<001FC012F8A7481FFC03F0C76C91C7120F92C8EF007F02F81B1F02E01B07
02801B0191C984491D7F491D3F491D1FA2491D0FA2491D07007F1FFEA2491D03A4491D01
A700FF1FFF90CA85A6CB1A00B3B3B3AD4ABC12C0A8787479F387>I<92383FFFF80207B6
12E0027F15FC49B87E010717E0011F83499026F0007F13FC4948C7000F7F90B502036D7E
486E6D806F6D80727F486E6E7F8486727FA28684A26C5C72806C5C6D90C8FC6D5AEB0FF8
EB03E090CAFCA70507B6FC041FB7FC0303B8FC157F0203B9FC021FECFE0391B612800103
ECF800010F14C04991C7FC017F13FC90B512F04814C0485C4891C8FC485B5A485B5C5A5C
A2B5FC5CA360A36E5DA26C5F6E5D187E6C6D846E4A48806C6D4A4814FC6C6ED90FF0ECFF
FC6C02E090263FE07F14FE00019139FC03FFC06C91B6487E013F4B487E010F4B13070103
03F01301D9003F0280D9003F13FC020101F8CBFC57507ACE5E>97
D<93383FFFF00307B612C0033F15F84AB712FE0207707E021F17E0027F8391B526FC001F
7F010302C001037F4991C7487F49495C495B4901F04A7F5B90B55A485CA2485C4891C8FC
A248715B5C48715B725B4A6F5B489438007FC0071FC7FC96C8FC5AA25CA3B5FCAF7E80A4
7E80A27E806CF11F80F23FC06C6E167FA26C6EEEFF80816C606C6E17006D6D4B5A6D6D15
076D6D4B5A6D6D6C4A5A6D02E0EC7FF06D02F849485A01009126FF801F5B6E91B6C7FC02
1F5E020716F8020116E06E6C1580030702FCC8FCDB003F13804A507ACE56>99
D<97380FFFE00607B6FCA8F00003190086B3AD93383FFF800307B512F8033F14FF4AB712
C0020716F0021F16FC027F9039FE007FFE91B500F0EB0FFF01030280010190B5FC4949C8
7E49498149498149498149498190B548814884484A8192CAFC5AA2485BA25A5C5AA35A5C
A4B5FCAF7EA4807EA37EA2807EA26C7F616C6E5D6C606C80616D6D5D6D6D5D6D6D92B67E
6D6D4A15FC010301FF0207EDFFFE6D02C0EB3FFE6D6C9039FC01FFF86E90B65A020F16C0
02031600DA007F14FC030F14E09226007FFEC749C7FC5F797AF76C>I<93387FFF80030F
B512FC037FECFF804AB712E0020716F8021F16FE027FD9F8077F49B5D8C000804991C700
3F13E04901FC020F7F49496E7F49498049496E7F49496E7F90B55A48727E92C914804884
485B1BC048841BE0485BA27313F05AA25C5AA21BF885A2B5FCA391BAFCA41BF002F8CCFC
A67EA3807EA47E806CF103F0F207F86C7F1A0F6C6E17F06C191F6F17E06C6E163F6D6DEE
7FC06D6D16FF6D6D4B13806D6D4B13006D6D6CEC0FFE6D02E0EC3FFC6D02F8ECFFF86D91
26FFC00F5B023F91B65A020F178002034CC7FC020016F8031F15E0030392C8FCDB000F13
E04D507BCE58>I<903801FFFCB6FCA8C67E131F7FB3B3B3B3B3ABB812C0A82A7879F735>
108 D<902601FFF891380FFFE0B692B512FE05036E7E050F15E0053F15F84D81932701FF
F01F7F4CD900077FDC07FC6D80C66CDA0FF06D80011FDA1FC07F6D4A48824CC8FC047E6F
7F5EEDF9F85E03FB707F5E15FF5EA25EA293C9FCA45DB3B3A6B8D8E003B81280A8614E79
CD6C>110 D<902601FFFCEC7FFEB6020FB512F0057F14FE4CB712C0040716F0041F8204
7F16FE93B5C66C7F92B500F0010F14C0C66C0380010380011F4AC76C806D4A6E8004F06F
7F4C6F7F4C6F7F4C8193C915804B7014C0861DE0A27414F0A27414F8A47513FCA57513FE
AF5113FCA598B512F8A31DF0621DE0621DC0621D806F5E701800704B5B505B704B5B7092
B55A04FC4A5C704A5C706C010F5C05E0013F49C7FC9227FE7FFC01B55A70B712F0040F16
C0040393C8FC040015F8053F14C0050301F0C9FC94CCFCB3A6B812E0A85F6F7ACD6C>
112 D<902601FFF8EB07FEB691383FFFC094B512F00403804C14FE4C8093261FFC3F1380
93263FE07F13C0DC7F80B5FCC66C5D011FDAFE0114E06DEBF9FC16F815FB16F016E015FF
16C07114C05E72138095381FFE0093C76C5AF001E095C8FCA25DA65DB3B3A2B812F8A843
4E7ACD4F>114 D<912603FFFCEB0780027F9039FFE00FC00103B6EAF83F010FEDFEFF01
3F92B5FC49EB000F2601FFF01300480180143F4890C8120F4848814848814981123F8348
5A187FA212FF6D163FA37F7F6DEE1F8002C092C7FC14F014FEECFFF06CECFF8016FEEEFF
E06C16FC6C16FF18C06C836C17F86C836C836C83013F17806D17C0010717E0010117F0EB
003F020716F8EC001F030015FC1607EE007F051F13FE1707007E82B482836D167FA2183F
7F181FA27F19FC7FA26D163F6D17F86D167F19F06D16FF6E4A13E002E04A13C06E4A1380
02FE023F1300913AFFC003FFFE01E790B65A01C316F0018016C026FE003F92C7FC480107
14F80070D9007F90C8FC3F507ACE4C>I<15FFA75CA55CA45CA25CA25CA25CA25C91B5FC
A25B5B5B131F5B90B9FC120FBAFCA6D8000791C9FCB3B3A3F01FE0AE183F7014C07F187F
7014806D16FF826D4B13006E6D485AEEFE0F6E90B55A020F5D6E5D020115C06E6C5C031F
49C7FC030113F03B6E7CEC4B>I<DAFFFE933803FFF8B60303B6FCA8C66CEE0001011F71
7E6D84B3B3A862A497B5FCA261A2616D5F1ADF6F150F6DEF1F9F073F806D6EDA7F1F13FF
6D6ED901FEEDFF8070EB07FC023F01FEEB3FF86E90B612F06E16C0020316800200EDFE00
031F14F80300028003C0C7FC614F79CD6C>I<B892B612F8A8D8001F49C90003EBF0006D
6D04001380A26D6E94C7FC626D6E5E1A03A26D6E4B5AA26D6E4B5AA26E6D5E1A1F6E6D5E
1A3F6E6070157FA26E6D4B5AA26E6E4990C8FCA26E6E5C19036E6E5C1907A26E6E495AA2
6F6D495AA26F6D5C193F6F6D5C197F6F5E7113FFA26F028190C9FCA26FECC3FEA26FECE3
FC18E76FECF7F818FFA2705CA2705CA2705CA2705CA37091CAFCA2705BA2705BA2705BA2
715AA3715AA24D5AA26017FF95CBFC5EA24C5AEA03F8D80FFE4A5A487E486D495A487F5F
B56C131F5F163F4C5AA24C5A4B90CCFC6C49485A4B5AEC800F6C9038003FF849EBFFF026
1FFC0713C06CB65A6C92CDFC6C14FCC614F0013F13C0D907FCCEFC5D6F7CCC66>121
D E
%EndDVIPSBitmapFont
end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 398 732 a Fv(Dep)5 b(enden)-5 b(tly)66 b(T)-5
b(yp)5 b(ed)64 b(Data)h(Structures)3501 680 y Fu(\003)1705
972 y Ft(Hongwei)24 b(Xi)1431 1139 y(Ore)o(gon)g(Graduate)h(Institute)
1811 1524 y Fs(Abstract)470 1661 y Fr(The)19 b(mechanism)i(for)f
(declaring)h(datatypes)g(in)f(functional)g(programming)i(languages)f
(such)g(as)f(ML)f(and)i(Hask)o(ell)358 1752 y(is)i(of)h(great)g(use)g
(in)g(practice.)38 b(This)24 b(mechanism,)i(ho)n(we)n(v)o(er)m(,)g
(often)e(suf)n(fers)g(from)g(its)f(imprecision)h(in)g(capturing)h(the)
358 1843 y(in)m(v)n(ariants)18 b(inherent)g(in)f(data)h(structures.)23
b(W)-6 b(e)17 b(remedy)h(the)g(situation)f(with)g(the)h(introduction)g
(of)g(dependent)h(datatypes)358 1935 y(so)25 b(that)g(we)g(can)g(model)
h(data)f(structures)g(with)g(signi\002cantly)g(more)g(accurac)o(y)-5
b(.)43 b(W)-6 b(e)24 b(present)i(a)f(fe)n(w)g(interesting)g(e)o(x-)358
2026 y(amples)g(such)g(as)g(implementations)g(of)g(red-black)h(trees)e
(and)i(binomial)f(heaps)g(to)g(illustrate)f(the)h(use)g(of)f(dependent)
358 2117 y(datatypes)d(in)f(capturing)h(some)g(sophisticated)g(in)m(v)n
(ariants)g(in)f(data)h(structures.)27 b(W)-6 b(e)20 b(claim)g(that)g
(dependent)i(datatypes)358 2209 y(can)d(enable)h(the)f(programmer)h(to)
e(implement)i(algorithms)f(in)g(a)g(w)o(ay)g(that)g(is)f(more)i(rob)o
(ust)f(and)g(easier)g(to)g(understand.)150 2489 y Fq(1)119
b(Intr)n(oduction)150 2670 y Fp(The)19 b(mechanism)f(that)i(allo)n(ws)f
(the)g(programmer)e(to)i(declare)g(datatypes)f(seems)i(indispensable)e
(in)i(functional)d(program-)150 2766 y(ming)h(languages)g(such)g(as)i
(Standard)e(ML)h([15)n(])g(and)g(Hask)o(ell)g([19)o(].)24
b(In)19 b(practice,)f(we)h(often)g(encounter)d(situations)j(where)150
2861 y(the)28 b(declared)f(datatypes)g(do)h(not)g(accurately)f(capture)
g(what)h(we)g(really)g(need.)48 b(F)o(or)28 b(instance,)i(if)e(what)g
(we)h(need)e(is)i(a)150 2957 y(data)21 b(structure)f(for)g(the)h(pairs)
g(of)g(inte)o(ger)f(lists)i(of)f(the)g(same)g(length,)f(we)h(often)f
(declare)h(a)g(datatype)f(in)h(Standard)f(ML)h(or)150
3052 y(Hask)o(ell)f(that)f(is)i(for)d Fo(all)i Fp(pairs)f(of)g(inte)o
(ger)g(lists.)26 b(This)19 b(inaccurac)o(y)f(problem)f(is)k(often)d(a)i
(rich)f(source)g(for)f(program)g(errors.)150 3148 y(A)25
b(typical)g(scenario)f(is)h(that)g(a)g(function)f(which)g(should)g
(only)g(recei)n(v)o(e)f(as)j(its)g(ar)o(gument)c(a)j(pair)g(of)f(inte)o
(ger)g(lists)i(of)f(the)150 3243 y(same)20 b(length)f(is)i(mistak)o
(enly)e(applied)g(to)h(a)h(pair)e(of)h(inte)o(ger)f(lists)i(of)f(dif)n
(ferent)e(lengths.)25 b(Unfortunately)-5 b(,)16 b(such)k(a)h(mistak)o
(e)150 3339 y(causes)d(no)g(type)f(errors)g(if)i(pairs)f(of)f(inte)o
(ger)g(lists)i(of)f(equal)g(length)f(are)h(gi)n(v)o(en)e(a)j(type)e
(that)h(is)h(for)e(all)i(pairs)f(of)g(inte)o(ger)e(lists,)150
3434 y(and)26 b(thus)h(can)g(usually)f(hide)g(in)h(a)h(program)c
(unnoticed)h(until)i(at)g(run-time,)g(when)f(deb)n(ugging)f(often)h
(becomes)g(much)150 3530 y(more)19 b(demanding)f(than)i(at)g
(compile-time.)275 3625 y(The)c(inaccurac)o(y)f(problem)g(becomes)h
(more)g(serious)h(when)f(we)h(start)h(to)f(implement)e(more)h
(sophisticated)g(data)h(struc-)150 3721 y(tures)j(such)f(as)h
(red-black)e(trees,)i(binomial)e(heaps,)h(ordered)f(lists,)j(etc.)k
(There)19 b(are)g(some)h(relati)n(v)o(ely)e(comple)o(x)g(in)m(v)n
(ariants)150 3816 y(in)24 b(these)f(data)g(structures)g(that)h(we)g
(must)f(maintain)g(in)g(order)f(to)i(implement)e(them)h(correctly)-5
b(.)33 b(F)o(or)23 b(instance,)h(a)g(correct)150 3911
y(implementation)c(of)h(an)h(insertion)f(operation)f(on)i(a)g
(red-black)e(tree)i(should)f(al)o(w)o(ays)h(yield)f(a)i(red-black)d
(tree.)30 b(If)22 b(we)g(can)150 4007 y(form)28 b(a)h(datatype)e(to)i
(precisely)f(capture)g(the)g(properties)f(of)i(a)g(red-black)e(tree,)j
(then)e(it)i(becomes)e(possible)g(to)h(detect)150 4102
y(a)f(program)d(error)h(through)f(type-checking)f(when)j(such)g(an)g
(error)g(leads)g(to)g(the)h(violation)e(of)h(one)g(of)g(these)g
(captured)150 4198 y(properties.)c(This)e(is)g(e)n(vidently)e(a)h
(desirable)g(feature)f(in)h(programming)d(if)k(it)f(can)g(be)h(made)e
(practical.)275 4293 y(The)j(need)g(for)g(forming)f(more)h(accurate)g
(datatypes)g(partially)g(moti)n(v)n(ated)g(the)h(design)f(of)g
(Dependent)g(ML)g(\(DML\),)150 4389 y(an)e(enrichment)e(of)h(ML)h(with)
g(a)g(restricted)g(form)f(of)g(dependent)f(types.)24
b(More)c(precisely)-5 b(,)18 b(DML)i(is)h(a)f(language)e(schema.)150
4484 y(Gi)n(v)o(en)24 b(a)g(constraint)g(domain)f Fn(C)6
b Fp(,)26 b(DML\()p Fn(C)6 b Fp(\))24 b(is)h(the)f(language)f(in)i(the)
f(schema)g(where)g(all)h(type)e(inde)o(x)h(e)o(xpressions)f(are)150
4580 y(dra)o(wn)d(from)g Fn(C)6 b Fp(.)28 b(Roughly)20
b(speaking,)f(a)j(type)e(inde)o(x)g(e)o(xpression)f(is)j(simply)f(a)g
(term)g(that)g(can)g(be)g(used)g(to)g(inde)o(x)f(a)h(type.)150
4675 y(T)-7 b(ype-checking)21 b(in)k(DML\()p Fn(C)6 b
Fp(\))23 b(can)h(then)g(be)g(reduced)f(to)h(constraint)g(satisf)o
(action)g(in)g Fn(C)6 b Fp(.)38 b(In)24 b(this)h(paper)m(,)f(we)g
(restrict)h Fn(C)150 4771 y Fp(to)h(some)f(inte)o(ger)f(domain)g(and)h
(use)h(the)f(name)g(DML)g(for)g(this)h(particular)e(DML\()p
Fn(C)6 b Fp(\).)40 b(A)26 b(v)n(ariant)f(of)g(DML,)g
Fo(de)g(Caml)p Fp(,)150 4866 y(has)f(been)f(implemented)f(on)h(top)g
(of)h(Caml-light)f([14)n(].)36 b(This)24 b(implementation)d
(essentially)j(replaces)f(the)h(front-end)d(of)p 150
4937 1440 4 v 234 4991 a Fm(\003)270 5014 y Fl(P)o(artially)e
(supported)g(by)e(the)h(United)g(States)g(Air)f(F)o(orce)h(Materiel)i
(Command)d(\(F19)g(628-96-C-0161\))j(and)d(the)h(Department)h(of)e
(Defense.)1929 5349 y Fp(1)p eop
%%Page: 2 2
2 1 bop 150 383 a Fp(Caml-light)17 b(with)i(a)f(dependent)e(type-check)
o(er)f(and)j(k)o(eeps)f(the)h(back-end)e(of)i(Caml-light)f(intact.)25
b(It)18 b(also)g(modi\002es)g(man)o(y)150 478 y(library)h(functions,)g
(assigning)g(to)h(them)g(more)g(accurate)f(types.)275
574 y(An)j(alternati)n(v)o(e)e(approach)g(to)j(forming)d(more)h
(accurate)g(datatypes)h(is)h(to)f(use)g(nested)g(datatypes)f([2].)30
b(F)o(or)22 b(instance,)150 669 y(a)k(nested)g(datatype)e(e)o(xactly)h
(representing)f(red-black)f(trees)k(can)e(be)h(readily)f(formed.)40
b(Ho)n(we)n(v)o(er)m(,)25 b(there)g(e)o(xist)h(v)n(arious)150
765 y(signi\002cant)h(dif)n(ferences)f(between)h(DML-style)g(dependent)
e(types)j(and)f(nested)g(datatypes,)h(which)f(we)h(will)g(illustrate)
150 860 y(later)-5 b(.)275 956 y(W)e(e)21 b(use)f Fk(typewriter)48
b(font)20 b Fp(in)h(this)f(paper)f(to)i(represent)e(code)g(in)i(de)f
(Caml,)g(all)h(of)f(which)g(ha)n(v)o(e)f(been)h(v)o(eri\002ed)150
1051 y(in)j(a)g(prototype)e(implementation.)30 b(A)23
b(signi\002cant)g(consequence)d(of)j(the)f(introduction)f(of)h
(dependent)f(types)h(is)i(the)f(loss)150 1147 y(of)29
b(the)g(notion)f(of)g(principal)g(types)h(in)g(DML.)g(F)o(or)f
(instance,)j(both)d(of)h(the)g(follo)n(wing)e(types)i(can)g(be)g
(assigned)f(to)i(an)150 1242 y(implementation)18 b(in)i(de)g(Caml)h
(which)f(zips)g(tw)o(o)h(lists)g(together)-5 b(.)150
1404 y Fk('a)49 b(list)h(*)f('b)h(list)f(->)g(\('a)g(*)h('b\))f(list)
150 1500 y({n:nat}'a)f(list\(n\))h(*)g('b)h(list\(n\))e(->)i(\('a)f(*)h
('b\))f(list\(n\))150 1662 y Fp(The)27 b(\002rst)h(type)e(has)h(the)g
(usually)g(meaning,)g(while)g(the)g(second)f(one)h(implies)g(that)g
(for)g(e)n(v)o(ery)e(natural)h(number)g Fn(n)p Fp(,)j(the)150
1757 y(function)16 b(yields)i(a)g(list)h(with)f(length)f
Fn(n)h Fp(when)f(gi)n(v)o(en)g(a)h(pair)g(of)f(lists)i(with)f(length)f
Fn(n)p Fp(.)25 b(Notice)18 b(that)g(we)g(use)g Fk('a)49
b(list\(n\))150 1853 y Fp(for)31 b(the)h(type)f(of)h(a)g(list)h(with)f
(length)f Fn(n)h Fp(in)g(which)f(e)n(v)o(ery)g(element)g(is)h(of)g
(type)f Fk('a)p Fp(.)60 b(If)32 b(a)g(dependent)e(type)h(is)i(to)f(be)
150 1948 y(assigned)18 b(to)h(a)h(function)d(in)i(DML,)g(it)g(is)h(the)
f(responsibility)e(of)i(the)g(programmer)d(to)j(annotate)e(the)i
(function)e(with)j(such)e(a)150 2043 y(dependent)h(type.)26
b(This)20 b(is)i(probably)d(the)h(most)h(signi\002cant)f(dif)n(ference)
f(between)h(the)h(programming)c(styles)k(in)g(ML)g(and)150
2139 y(in)k(DML.)f(In)g(practice,)h(we)g(observ)o(e)e(that)i(the)f
(type)h(annotations)e(in)h(a)h(typical)f(DML)h(program)d(often)i
(constitutes)g(less)150 2234 y(than)17 b(20\045)h(of)f(the)h(entire)g
(code.)23 b(Since)18 b(dependent)e(type)h(annotations)f(can)i(often)f
(lead)h(to)g(more)f(accurate)g(reports)f(of)i(type)150
2330 y(error)23 b(messages)h(and)f(serv)o(e)g(as)i(informati)n(v)o(e)c
(program)h(documentation,)f(we)j(feel)g(that)g(the)g(DML)g(programming)
c(style)150 2425 y(is)h(acceptable)f(from)f(a)i(practical)e(point)h(of)
g(vie)n(w)-5 b(.)25 b(W)-7 b(e)22 b(will)f(pro)o(vide)d(some)i
(concrete)f(e)o(xamples)h(for)f(the)i(reader)e(to)i(judge)150
2521 y(this)h(claim,)f(including)e(implementations)g(of)i(red-black)e
(trees)j(and)e(binomial)g(heaps.)27 b(Both)21 b(of)g(these)h
(implementations)150 2616 y(are)h(adopted)e(from)h(the)h(corresponding)
d(ones)j(in)g([17)n(].)34 b(The)23 b(implementations)e(in)i(de)g(Caml)g
(ha)n(v)o(e)g(se)n(v)o(eral)f(adv)n(antages)150 2712
y(o)o(v)o(er)j(the)h(original)f(ones.)43 b(W)-7 b(e)27
b(ha)n(v)o(e)f(v)o(eri\002ed)f(more)g(in)m(v)n(ariants)g(in)h(the)g(de)
g(Caml)h(implementations.)41 b(F)o(or)26 b(instance,)h(it)150
2807 y(is)f(v)o(eri\002ed)d(in)i(the)g(type)f(system)h(of)f(de)h(Caml)g
(that)f(the)h(function)e(which)h(mer)o(ges)g(tw)o(o)g(binomial)g(heaps)
g(indeed)g(yields)150 2903 y(a)k(binomial)f(heap.)46
b(Also)29 b(the)e(type)h(annotations)e(in)i(the)f(implementations,)h
(which)f(can)g(be)h(fully)f(trusted)g(since)h(the)o(y)150
2998 y(are)h(mechanically)e(v)o(eri\002ed,)j(of)n(fer)e(some)h
(pedagogical)e(v)n(alues.)51 b(W)-7 b(e)31 b(feel)e(it)g(is)h(easier)g
(to)f(understand)e(the)i(de)g(Caml)150 3094 y(implementations)18
b(because)i(the)g(reader)f(can)h(reason)g(in)g(the)g(presence)f(of)h
(these)h(informati)n(v)o(e)c(dependent)h(types.)275 3189
y(In)d(this)i(paper)m(,)e(it)i(is)g(neither)f(possible)f(nor)h
(necessary)f(to)h(formally)f(present)g(DML.)h(Instead,)g(we)h(focus)e
(on)h(presenting)150 3285 y(some)21 b(concrete)e(e)o(xamples)h(in)h
(the)g(programming)c(language)j Fo(de)g(Caml)p Fp(,)i(a)f(v)n(ariant)f
(of)h(DML,)f(as)i(well)f(as)h(some)f(intuiti)n(v)o(e)150
3380 y(e)o(xplanation.)29 b(W)-7 b(e)23 b(refer)f(the)g(interested)g
(reader)f(to)h([22)o(])g(for)g(the)g(formal)f(de)n(v)o(elopment)f(of)i
(DML,)g(though)e(we)j(strongly)150 3476 y(belie)n(v)o(e)c(that)h(this)h
(is)g(lar)o(gely)e(unnecessary)g(for)g(comprehending)d(this)21
b(paper)-5 b(.)275 3571 y(The)19 b(rest)g(of)g(the)h(paper)e(is)i(or)o
(ganized)c(as)21 b(follo)n(ws.)j(In)19 b(Section)g(2,)g(we)h(gi)n(v)o
(e)e(a)i(brief)f(o)o(v)o(ervie)n(w)e(of)i(the)g(types)g(in)h(DML.)150
3667 y(W)-7 b(e)23 b(then)e(introduce)e(de)j(Caml)g(in)f(Section)g(3,)h
(presenting)e(some)h(of)g(its)i(main)e(features)g(and)g(illustrating)g
(type-checking)150 3762 y(in)26 b(de)g(Caml)g(with)g(a)h(short)e(e)o
(xample.)41 b(Some)26 b(case)g(studies)g(are)g(gi)n(v)o(en)f(in)h
(Section)f(4,)j(including)c(implementations)g(of)150
3857 y(Braun)f(trees,)h(random-access)d(lists,)k(red-black)c(trees)j
(and)e(binomial)g(heaps.)34 b(Lastly)-5 b(,)23 b(we)h(discuss)g(some)f
(related)f(w)o(ork)150 3953 y(and)e(then)f(conclude.)150
4196 y Fq(2)119 b(T)-9 b(ypes)30 b(in)h(Dependent)h(ML)150
4377 y Fp(In)26 b(this)h(section,)g(we)g(present)e(a)i(brief)f(e)o
(xplanation)e(on)i(the)g(types)g(in)g(DML.)g(The)g(reader)g(is)h
(encouraged)c(to)k(skip)f(this)150 4473 y(section)j(and)f(read)h(it)h
(later)m(,)h(though)c(it)j(could)e(be)h(helpful)f(to)h(gather)f(some)h
(intuition)f(before)g(studying)g(the)h(concrete)150 4568
y(e)o(xamples)19 b(in)h(Section)g(3.)275 4664 y(Intuiti)n(v)o(ely)e
(speaking,)h(dependent)f(types)i(are)g(types)g(which)g(depend)f(on)g
(the)i(v)n(alues)f(of)g(language)e(e)o(xpressions.)24
b(F)o(or)150 4759 y(instance,)19 b(we)g(may)f(form)g(a)i(type)e
Fn(int)p Fj(\()p Fn(i)p Fj(\))h Fp(for)g(each)f(inte)o(ger)g
Fn(i)h Fp(to)h(mean)e(that)h(e)n(v)o(ery)f(inte)o(ger)f(e)o(xpression)h
(of)h(this)g(type)g(must)150 4855 y(ha)n(v)o(e)c(v)n(alue)g
Fn(i)p Fp(,)h(that)f(is,)j Fn(int)p Fj(\()p Fn(i)p Fj(\))d
Fp(is)i(a)e(singleton)g(type.)23 b(Note)15 b(that)h Fn(i)f
Fp(is)i(the)e(e)o(xpression)f(on)h(which)g(this)h(type)f(depends.)22
b(W)-7 b(e)16 b(use)150 4950 y(the)f(name)g Fo(type)g(inde)n(x)g(e)n
(xpr)m(ession)g Fp(for)g(such)g(an)g(e)o(xpression.)22
b(There)14 b(are)h(v)n(arious)f(compelling)g(reasons,)h(such)g(as)h
(practical)150 5046 y(type-checking,)23 b(for)h(imposing)g
(restrictions)h(on)g(e)o(xpressions)e(which)i(can)g(be)g(chosen)f(as)i
(type)f(inde)o(x)f(e)o(xpressions.)38 b(A)1929 5349 y(2)p
eop
%%Page: 3 3
3 2 bop 312 461 a Fp(inde)o(x)19 b(e)o(xpressions)82
b Fn(i;)14 b(j)87 b Fj(::=)c Fn(a)23 b Fi(j)g Fn(c)g
Fi(j)g Fn(i)18 b Fj(+)g Fn(j)28 b Fi(j)23 b Fn(i)18 b
Fi(\000)g Fn(j)28 b Fi(j)23 b Fn(i)18 b Fi(\003)g Fn(j)28
b Fi(j)23 b Fn(i)18 b Fi(\004)h Fn(j)28 b Fi(j)c Fj(min\()p
Fn(i;)14 b(j)5 b Fj(\))23 b Fi(j)g Fj(max\()p Fn(i;)14
b(j)5 b Fj(\))23 b Fi(j)g Fj(mo)r(d\()p Fn(i;)14 b(j)5
b Fj(\))288 561 y Fp(inde)o(x)19 b(propositions)120 b
Fn(P)95 b Fj(::=)83 b Fn(i)22 b(<)h(j)28 b Fi(j)23 b
Fn(i)g Fi(\024)f Fn(j)28 b Fi(j)c Fn(i)e Fi(\025)h Fn(j)28
b Fi(j)23 b Fn(i)g(>)f(j)28 b Fi(j)23 b Fn(i)g Fj(=)g
Fn(j)28 b Fi(j)23 b Fn(i)f Fi(6)p Fj(=)h Fn(j)28 b Fi(j)23
b Fn(P)2904 573 y Fh(1)2960 561 y Fi(^)40 b Fn(P)3108
573 y Fh(2)3168 561 y Fi(j)24 b Fn(P)3268 573 y Fh(1)3324
561 y Fi(_)39 b Fn(P)3471 573 y Fh(2)542 660 y Fp(inde)o(x)19
b(sorts)139 b Fn(\015)88 b Fj(::=)83 b Fn(int)22 b Fi(j)h(f)p
Fn(a)g Fj(:)g Fn(\015)28 b Fi(j)23 b Fn(P)12 b Fi(g)22
b(j)h Fn(\015)2034 672 y Fh(1)2090 660 y Fi(\003)18 b
Fn(\015)2193 672 y Fh(2)423 760 y Fp(inde)o(x)h(conte)o(xts)136
b Fn(\036)84 b Fj(::=)f Fi(\001)23 b(j)g Fn(\036;)14
b(a)23 b Fj(:)g Fn(\015)28 b Fi(j)23 b Fn(\036;)14 b(P)1157
1021 y Fp(Figure)19 b(1:)26 b(The)19 b(syntax)h(for)f(type)h(inde)o(x)f
(e)o(xpressions)150 1288 y(no)o(v)o(elty)g(in)i(DML)g(is)g(to)g
(require)f(that)g(type)h(inde)o(x)e(e)o(xpressions)h(be)g(dra)o(wn)g
(only)g(from)f(a)j(gi)n(v)o(en)d(constraint)h(domain.)25
b(F)o(or)150 1383 y(the)20 b(purpose)e(of)h(this)h(paper)m(,)e(we)i
(restrict)g(type)f(inde)o(x)f(e)o(xpressions)h(to)h(inte)o(gers.)j(W)-7
b(e)21 b(present)e(the)h(syntax)f(for)g(type)g(inde)o(x)150
1479 y(e)o(xpressions)27 b(in)i(Figure)f(1,)j(where)d(we)h(use)g
Fn(a)g Fp(for)f(type)g(inde)o(x)f(v)n(ariables)h(and)g
Fn(c)h Fp(for)g(a)g(\002x)o(ed)f(inte)o(ger)-5 b(.)49
b(Note)29 b(that)g(the)150 1574 y(language)24 b(for)g(type)h(inde)o(x)f
(e)o(xpressions)g(is)i(typed.)40 b(W)-7 b(e)26 b(use)g
Fo(sorts)g Fp(for)f(the)g(types)g(in)h(this)f(language)f(in)h(order)f
(to)i(a)n(v)n(oid)150 1670 y(potential)18 b(confusion.)23
b(W)-7 b(e)20 b(use)f Fi(\001)h Fp(for)e(the)h(empty)f(inde)o(x)g(v)n
(ariable)g(conte)o(xt)f(and)i(omit)g(the)g(standard)f(sorting)g(rules)h
(for)f(this)150 1765 y(language.)29 b(W)-7 b(e)23 b(also)g(use)f
(certain)f(transparent)g(abbre)n(viations,)f(such)i(as)h
Fj(0)j Fi(\024)g Fn(i)g(<)g(j)i Fp(which)21 b(stands)i(for)e
Fj(0)26 b Fi(\024)g Fn(i)20 b Fi(^)g Fn(i)26 b(<)g(j)5
b Fp(.)150 1861 y(The)22 b(subset)h(sort)g Fi(f)p Fn(a)k
Fj(:)h Fn(\015)k Fi(j)c Fn(P)12 b Fi(g)23 b Fp(stands)f(for)g(the)h
(sort)g(for)f(those)h(elements)f(of)g(sort)h Fn(\015)28
b Fp(which)22 b(satisfy)h(the)g(proposition)d Fn(P)12
b Fp(.)150 1956 y(F)o(or)20 b(e)o(xample,)e(we)j(use)f
Fo(nat)g Fp(as)h(an)f(abbre)n(viation)e(for)i(the)g(subset)g(sort)g
Fi(f)p Fn(a)j Fj(:)g Fg(int)31 b Fi(j)23 b Fn(a)g Fi(\025)f
Fj(0)p Fi(g)p Fp(.)275 2052 y(T)-7 b(ypes)20 b(in)g(DML)g(are)g(formed)
f(as)i(follo)n(ws.)j(W)-7 b(e)22 b(use)e Fn(\013)h Fp(for)f(type)f(v)n
(ariables)h(and)f Fn(\016)24 b Fp(for)c(type)f(constructors.)591
2229 y(types)83 b Fn(\034)92 b Fj(::=)83 b Fn(\013)24
b Fi(j)f Fj(\()p Fn(\034)1363 2241 y Fh(1)1401 2229 y
Fn(;)14 b(:)g(:)g(:)f(;)h(\034)1621 2241 y Ff(n)1667
2229 y Fj(\))p Fn(\016)s Fj(\()p Fn(i)p Fj(\))23 b Fi(j)g
Fe(1)g Fi(j)g Fn(\034)2054 2241 y Fh(1)2110 2229 y Fi(\003)18
b Fn(\034)2206 2241 y Fh(2)2267 2229 y Fi(j)23 b Fn(\034)2349
2241 y Fh(1)2409 2229 y Fi(!)h Fn(\034)2552 2241 y Fh(2)2612
2229 y Fi(j)f Fj(\005)p Fn(a)g Fj(:)h Fn(\015)5 b(:\034)32
b Fi(j)23 b Fj(\006)p Fn(a)g Fj(:)g Fn(\015)5 b(:\034)150
2409 y Fp(F)o(or)28 b(instance,)i Fn(l)r(ist)e Fp(is)i(a)f(type)f
(constructor)e(and)i Fj(\()p Fn(int)p Fj(\))p Fn(l)r(ist)p
Fj(\()p Fn(n)p Fj(\))h Fp(stands)f(for)g(the)h(type)f(of)g(an)g(inte)o
(ger)g(list)i(of)e(length)f Fn(n)p Fp(.)150 2504 y Fj(\005)p
Fn(a)40 b Fj(:)g Fn(\015)5 b(:\034)40 b Fp(and)28 b Fj(\006)p
Fn(a)40 b Fj(:)g Fn(\015)5 b(:\034)40 b Fp(form)28 b(a)i(uni)n(v)o
(ersal)e(dependent)f(type)i(and)f(an)i(e)o(xistential)f(dependent)e
(type,)k(respecti)n(v)o(ely)-5 b(.)150 2600 y(F)o(or)22
b(instance,)h(the)f(uni)n(v)o(ersal)f(dependent)f(type)i
Fj(\005)p Fn(a)28 b Fj(:)f Fn(nat:)p Fj(\()p Fn(int)p
Fj(\))p Fn(l)r(ist)p Fj(\()p Fn(a)p Fj(\))f Fi(!)i Fj(\()p
Fn(int)p Fj(\))p Fn(l)r(ist)p Fj(\()p Fn(a)p Fj(\))22
b Fp(captures)g(the)g(in)m(v)n(ariant)f(of)h(a)150 2695
y(function)h(which,)h(for)g(e)n(v)o(ery)e(natural)i(number)e
Fn(a)p Fp(,)k(returns)d(an)h(inte)o(ger)f(list)j(of)e(length)f
Fn(a)i Fp(when)e(gi)n(v)o(en)g(an)h(inte)o(ger)g(list)h(of)150
2791 y(length)h Fn(a)p Fp(.)44 b(Also)27 b(we)g(can)f(use)h(the)g(e)o
(xistential)f(dependent)e(type)i Fj(\006)p Fn(a)35 b
Fj(:)g Fn(nat:)p Fj(\()p Fn(int)p Fj(\))p Fn(l)r(ist)p
Fj(\()p Fn(a)p Fj(\))26 b Fp(to)g(mean)g(an)h(inte)o(ger)e(list)j(of)
150 2886 y(some)20 b(unkno)n(wn)e(length.)24 b(W)-7 b(e)21
b(demonstrate)e(ho)n(w)g(a)i(type)f(constructor)e(is)j(declared)e(in)h
(Section)g(3.)275 2981 y(The)k(typing)g(rules)h(for)f(this)h(language)e
(should)h(be)h(f)o(amiliar)g(from)f(a)h(dependently)d(typed)i
Fn(\025)p Fp(-calculus)h(\(such)f(as)i(the)150 3077 y(ones)20
b(underlying)e(Coq)j(or)g(NuPrl\).)26 b(The)20 b(critical)h(notion)e
(of)i Fo(type)f(con)m(ver)o(sion)g Fp(uses)h(the)g(judgment)e
Fn(\036)24 b Fi(`)g Fn(\034)3302 3089 y Fh(1)3364 3077
y Fi(\021)f Fn(\034)3488 3089 y Fh(2)3547 3077 y Fp(which)150
3172 y(is)e(the)f(congruent)e(e)o(xtension)h(of)h(equality)f(on)h(inde)
o(x)f(e)o(xpressions)g(to)h(arbitrary)f(types:)1246 3346
y Fn(\036)24 b Fi(j)-14 b Fj(=)23 b Fn(\034)1452 3358
y Fh(1)1512 3346 y Fi(\021)g Fn(\034)1645 3316 y Fd(0)1636
3366 y Fh(1)1757 3346 y Fi(\001)14 b(\001)g(\001)82 b
Fn(\034)1972 3358 y Ff(n)2041 3346 y Fi(\021)23 b Fn(\034)2174
3316 y Fd(0)2165 3366 y Ff(n)2293 3346 y Fn(\036)h Fi(j)-14
b Fj(=)22 b Fn(i)2535 3299 y(:)2514 3346 y Fj(=)h Fn(i)2631
3316 y Fd(0)p 1246 3387 1408 4 v 1273 3466 a Fn(\036)g
Fi(`)g Fj(\()p Fn(\034)1487 3478 y Fh(1)1525 3466 y Fn(;)14
b(:)g(:)g(:)f(;)h(\034)1745 3478 y Ff(n)1791 3466 y Fj(\))p
Fn(\016)s Fj(\()p Fn(i)p Fj(\))23 b Fi(\021)g Fj(\()p
Fn(\034)2144 3435 y Fd(0)2135 3486 y Fh(1)2173 3466 y
Fn(;)14 b(:)g(:)g(:)f(;)h(\034)2402 3435 y Fd(0)2393
3486 y Ff(n)2439 3466 y Fj(\))p Fn(\016)s Fj(\()p Fn(i)2572
3435 y Fd(0)2595 3466 y Fj(\))992 3574 y Fn(\036)24 b
Fi(`)f Fn(\034)1175 3586 y Fh(1)1235 3574 y Fi(\021)g
Fn(\034)1368 3544 y Fd(0)1359 3595 y Fh(1)1479 3574 y
Fn(\036)h Fi(`)f Fn(\034)1662 3586 y Fh(2)1722 3574 y
Fi(\021)g Fn(\034)1855 3544 y Fd(0)1846 3595 y Fh(2)p
992 3615 892 4 v 1084 3694 a Fn(\036)h Fi(`)e Fn(\034)1266
3706 y Fh(1)1322 3694 y Fi(\003)c Fn(\034)1418 3706 y
Fh(2)1479 3694 y Fi(\021)k Fn(\034)1611 3664 y Fd(0)1602
3715 y Fh(1)1658 3694 y Fi(\003)c Fn(\034)1763 3664 y
Fd(0)1754 3715 y Fh(2)2033 3574 y Fn(\036)24 b Fi(`)e
Fn(\034)2224 3544 y Fd(0)2215 3595 y Fh(1)2276 3574 y
Fi(\021)h Fn(\034)2400 3586 y Fh(1)2504 3574 y Fn(\036)g
Fi(`)g Fn(\034)2686 3586 y Fh(2)2746 3574 y Fi(\021)g
Fn(\034)2879 3544 y Fd(0)2870 3595 y Fh(2)p 2033 3615
875 4 v 2066 3694 a Fn(\036)g Fi(`)g Fn(\034)2248 3706
y Fh(1)2309 3694 y Fi(!)g Fn(\034)2451 3706 y Fh(2)2511
3694 y Fi(\021)g Fn(\034)2644 3664 y Fd(0)2635 3715 y
Fh(1)2695 3694 y Fi(!)h Fn(\034)2847 3664 y Fd(0)2838
3715 y Fh(2)1161 3803 y Fn(\036;)14 b(a)23 b Fj(:)h Fn(\015)j
Fi(`)c Fn(\034)33 b Fi(\021)22 b Fn(\034)1706 3773 y
Fd(0)p 1014 3839 864 4 v 1014 3918 a Fn(\036)h Fi(`)g
Fj(\005)p Fn(a)g Fj(:)h Fn(\015)5 b(:\034)32 b Fi(\021)23
b Fj(\005)p Fn(a)g Fj(:)g Fn(\015)5 b(:\034)1854 3888
y Fd(0)2172 3803 y Fn(\036;)14 b(a)23 b Fj(:)g Fn(\015)28
b Fi(`)23 b Fn(\034)33 b Fi(\021)22 b Fn(\034)2717 3773
y Fd(0)p 2027 3839 860 4 v 2027 3918 a Fn(\036)i Fi(`)e
Fj(\006)p Fn(a)h Fj(:)g Fn(\015)5 b(:\034)33 b Fi(\021)22
b Fj(\006)p Fn(a)h Fj(:)g Fn(\015)5 b(:\034)2862 3888
y Fd(0)150 4101 y Fp(Notice)23 b(that)h(it)g(is)g(the)g(application)e
(of)h(these)g(rules)h(which)f(generates)f(constraints.)34
b(F)o(or)23 b(instance,)h(the)f(constraint)g Fn(\036)29
b Fi(j)-14 b Fj(=)150 4197 y(\()p Fn(a)19 b Fj(+)f Fn(n)p
Fj(\))g(+)g(1)597 4150 y Fn(:)576 4197 y Fj(=)k Fn(m)d
Fj(+)f Fn(n)i Fp(is)i(generated)c(in)i(order)f(to)i(deri)n(v)o(e)e
Fn(\036)k Fi(`)g Fj(\()p Fn(int)p Fj(\))p Fn(l)r(ist)p
Fj(\(\()p Fn(a)18 b Fj(+)g Fn(n)p Fj(\))g(+)g(1\))23
b Fi(\021)g Fj(\()p Fn(int)p Fj(\))p Fn(l)r(ist)p Fj(\()p
Fn(m)17 b Fj(+)h Fn(n)p Fj(\))p Fp(.)275 4292 y(It)h(is)g(dif)n
(\002cult)g(to)g(present)f(more)g(details)h(gi)n(v)o(en)f(the)g(space)h
(limitation.)24 b(F)o(or)19 b(those)f(who)h(are)f(interested,)h(we)g
(point)f(out)150 4388 y(that)i(the)g(detailed)g(formal)f(de)n(v)o
(elopment)f(of)h(DML)i(can)f(be)g(found)e(in)j([22)n(].)150
4631 y Fq(3)119 b(Some)30 b(F)m(eatur)n(es)g(in)g(de)h(Caml)150
4812 y Fp(In)18 b(this)h(section,)f(we)h(use)f(e)o(xamples)g(to)g
(present)g(some)g(unique)f(and)h(signi\002cant)f(features)h(in)h(de)f
(Caml,)h(preparing)d(for)i(the)150 4908 y(case)j(studies)f(in)g
(Section)g(4.)275 5003 y(The)c(programmer)e(often)i(declares)g
(datatypes)h(when)f(programming)d(in)k(ML.)g(F)o(or)g(instance,)g(the)f
(follo)n(wing)g(datatype)150 5099 y(declaration)j(de\002nes)h(a)g(type)
g(constructor)e Fn(l)r(ist)p Fp(.)1929 5349 y(3)p eop
%%Page: 4 4
4 3 bop 150 383 a Fk(type)49 b('a)h(list)f(=)g(nil)g(|)h(cons)f(of)h
('a)f(*)h('a)f(list)150 545 y Fp(Roughly)24 b(speaking,)i(this)g
(declaration)e(states)j(that)f(a)g(polymorphic)d(list)k(is)f(formed)e
(with)i(tw)o(o)g(constructors)e Fk(nil)i Fp(and)150 640
y Fk(cons)p Fp(,)18 b(whose)g(types)f(are)h Fk('a)50
b(list)17 b Fp(and)h Fk('a)49 b(*)h('a)f(list)g(->)h('a)f(list)p
Fp(,)18 b(respecti)n(v)o(ely)-5 b(.)22 b(W)-7 b(e)19
b(use)f Fk('a)g Fp(for)g(a)g(type)150 736 y(v)n(ariable.)23
b(Ho)n(we)n(v)o(er)m(,)18 b(the)h(declared)f(type)g Fk('a)50
b(list)18 b Fp(is)i(coarse.)25 b(F)o(or)18 b(instance,)h(we)g(cannot)f
(use)i(the)f(type)f(to)i(distinguish)150 831 y(an)g(empty)f(list)j
(from)d(a)h(non-empty)e(one.)24 b(In)c(de)g(Caml,)h(this)g(type)e(can)h
(be)g(re\002ned)g(as)h(follo)n(ws.)150 993 y Fk(refine)49
b('a)g(list)g(with)g(nat)h(=)250 1089 y(nil\(0\))e(|)i({n:nat})e
(cons\(n+1\))h('a)g(*)h('a)f(list\(n\))150 1251 y Fp(The)20
b(clause)h Fk(refine)49 b('a)g(list)h(with)f(nat)20 b
Fp(means)h(that)g(we)g(re\002ne)f(the)h(type)g Fk('a)49
b(list)21 b Fp(with)g(an)f(inde)o(x)g(of)g(sort)150 1346
y Fk(nat)p Fp(,)g(that)g(is,)h(the)f(inde)o(x)f(is)i(a)g(natural)e
(number)-5 b(.)24 b(In)c(this)h(case,)f(the)g(inde)o(x)f(stands)h(for)g
(the)g(length)g(of)f(a)i(list.)275 1508 y Fi(\017)41
b Fk(nil\(0\))19 b Fp(means)h(that)g Fk(nil)h Fp(is)g(of)f(type)f
Fk('a)50 b(list\(0\))p Fp(,)19 b(that)h(is,)h(it)g(is)g(a)g(list)g(of)f
(length)f Fj(0)p Fp(.)275 1670 y Fi(\017)41 b Fk({n:nat})48
b(cons\(n+1\))g(of)i('a)f(*)h('a)f(list\(n\))20 b Fp(means)f(that)i
Fk(cons)f Fp(is)h(of)f(type)1071 1848 y Fk({n:nat})48
b('a)i(*)f('a)h(list\(n\))e(->)i('a)f(list\(n+1\))o Fn(;)358
2027 y Fp(that)22 b(is,)i(for)d(e)n(v)o(ery)g(natural)h(number)e
Fk(n)p Fp(,)j Fk(cons)f Fp(yields)h(a)f(list)i(of)e(length)f
Fn(n)f Fj(+)g(1)i Fp(when)g(gi)n(v)o(en)f(an)h(element)g(of)g(type)358
2122 y Fk('a)c Fp(and)f(a)i(list)g(of)e(length)g Fn(n)p
Fp(.)25 b(Note)18 b Fk({n:nat})f Fp(is)i(a)g(uni)n(v)o(ersal)d
(quanti\002er)m(,)h(which)g(is)i(usually)f(written)f(as)i
Fj(\005)p Fn(n)k Fj(:)g Fn(nat)358 2218 y Fp(in)d(type)g(theory)-5
b(.)150 2380 y(No)n(w)21 b(list)i(types)f(ha)n(v)o(e)f(become)f(more)h
(informati)n(v)o(e.)27 b(The)21 b(follo)n(wing)f(code)h(de\002nes)g
(the)h(append)e(function)g(on)h(lists.)30 b(W)-7 b(e)150
2475 y(use)20 b Fk([])h Fp(for)e Fk(nil)i Fp(and)e Fk(::)26
b Fp(as)20 b(the)h(in\002x)f(operator)e(for)i Fk(cons)p
Fp(.)150 2637 y Fk(let)49 b(rec)h(append)e(=)i(function)349
2733 y(\([],)f(ys\))h(->)f(ys)250 2828 y(|)g(\(x)h(::)f(xs,)g(ys\))h
(->)f(x)h(::)f(append\(xs,)f(ys\))150 2923 y(withtype)g({m:nat}{n:nat})
g('a)h(list\(m\)*'a)f(list\(n\)->'a)g(list\(m+n\))150
3085 y Fp(The)16 b Fk(withtype)f Fp(clause)h(is)i(a)e(type)g
(annotation)e(supplied)h(by)h(the)h(programmer)m(,)c(which)j(simply)f
(states)j(that)e(the)g(function)150 3181 y(returns)k(a)h(list)h(of)f
(length)f(of)g Fn(m)f Fj(+)f Fn(n)k Fp(when)e(gi)n(v)o(en)f(a)j(pair)e
(of)h(lists)h(of)e(lengths)h Fn(m)g Fp(and)f Fn(n)p Fp(,)h(respecti)n
(v)o(ely)-5 b(.)25 b(W)-7 b(e)22 b(no)n(w)e(present)150
3276 y(an)g(informal)f(description)g(about)g(type-checking)e(in)j(this)
h(case.)275 3372 y(F)o(or)e(the)g(\002rst)h(clause)g
Fk(\([],)49 b(ys\))g(->)g(ys)p Fp(,)20 b(the)f(type-check)o(er)e
(assumes)j(that)g Fk(ys)f Fp(is)i(of)e(types)g Fk('a)49
b(list\(b\))19 b Fp(for)150 3467 y(some)c(inde)o(x)f(v)n(ariable)g
Fn(b)i Fp(of)e(sort)i Fk(nat)p Fp(.)23 b(This)15 b(implies)h(that)f
Fk(\([],)49 b(ys\))15 b Fp(is)h(of)f(type)g Fk('a)50
b(list\(0\))e(*)i('a)f(list\(b\))p Fp(.)150 3563 y(The)18
b(type-check)o(er)f(then)h(instantiates)h Fn(m)g Fp(and)f
Fn(n)i Fp(with)f Fj(0)f Fp(and)h Fn(b)p Fp(,)g(respecti)n(v)o(ely)-5
b(,)17 b(and)h(v)o(erify)f(that)i(the)g Fk(ys)g Fp(on)f(the)h(right)f
(side)150 3658 y(of)23 b Fk(->)h Fp(is)h(of)f(type)f
Fk('a)49 b(list\(0+b\))p Fp(.)35 b(Since)24 b Fk(ys)g
Fp(is)g(of)g(type)f Fk('a)50 b(list\(b\))23 b Fp(under)f(assumption,)h
(the)h(type-check)o(er)150 3754 y(generates)17 b(a)i(constraint)e
Fn(b)23 b Fj(=)g(0)12 b(+)g Fn(b)k Fp(under)h(the)i(assumption)e(that)h
Fn(b)h Fp(is)g(a)g(natural)e(number)-5 b(.)23 b(This)c(constraint)e
(can)h(be)g(easily)150 3849 y(v)o(eri\002ed.)275 3945
y(Let)24 b(us)h(no)n(w)f(type-check)e(the)i(second)g(clause)g
Fk(\(x)50 b(::)99 b(xs,)49 b(ys\))g(->)h(x)f(::)100 b(append\(xs,)48
b(ys\))p Fp(.)37 b(As-)150 4040 y(sume)24 b(that)h Fk(xs)g
Fp(and)f Fk(ys)h Fp(are)g(of)f(type)g Fk('a)49 b(list\(a\))24
b Fp(and)g Fk('a)50 b(list\(b\))p Fp(,)25 b(respecti)n(v)o(ely)-5
b(,)23 b(where)h Fn(a)h Fp(and)f Fn(b)h Fp(are)g(inde)o(x)150
4136 y(v)n(ariables)h(of)g(sort)h Fk(nat)p Fp(.)45 b(Then)26
b Fk(\(x)49 b(::)100 b(xs,)49 b(ys\))27 b Fp(is)g(of)g(type)f
Fk('a)49 b(list\(a+1\))g(*)g('a)h(list\(b\))p Fp(,)27
b(and)f(we)150 4231 y(therefore)21 b(instantiate)i Fn(m)h
Fp(and)e Fn(n)i Fp(with)f Fn(a)d Fj(+)g(1)k Fp(and)e
Fn(b)p Fp(,)i(respecti)n(v)o(ely)-5 b(.)31 b(Also)24
b(we)f(infer)g(that)g(the)g(right)f(side)i Fk(x)49 b(::)100
b(ap-)150 4327 y(pend\(xs,)48 b(ys\))27 b Fp(is)g(of)f(type)f
Fk('a)50 b(list\(\(a+b\)+1\))24 b Fp(since)j Fn(xs)g
Fp(and)f Fn(y)s(s)g Fp(are)g(assumed)g(of)g(types)g Fk('a)49
b(list\(a\))150 4422 y Fp(and)30 b Fk('a)50 b(list\(b\))p
Fp(,)33 b(respecti)n(v)o(ely)-5 b(.)55 b(W)-7 b(e)32
b(need)f(to)g(pro)o(v)o(e)e(that)i(the)g(right)f(side)i(is)g(of)e(type)
h Fk(int)49 b(list\(m+n\))30 b Fp(for)150 4518 y Fn(m)23
b Fj(=)g Fn(a)18 b Fj(+)g(1)i Fp(and)g Fn(n)j Fj(=)f
Fn(b)p Fp(.)k(This)20 b(leads)g(to)h(the)f(follo)n(wing)e(constraint,)
1506 4696 y Fj(\()p Fn(a)h Fj(+)f(1\))g(+)g Fn(b)23 b
Fj(=)f(\()p Fn(a)d Fj(+)f Fn(b)p Fj(\))g(+)g(1)150 4875
y Fp(which)f(can)g(be)g(immediately)f(v)o(eri\002ed)g(under)g(that)h
(assumption)f(that)i Fn(a)f Fp(and)g Fn(b)g Fp(are)h(natural)e
(numbers.)22 b(This)c(\002nishes)f(type-)150 4970 y(checking)i(the)i
(abo)o(v)o(e)e(de)h(Caml)i(program.)i(The)c(interested)g(reader)g(is)i
(referred)d(to)i([22)n(])g(for)f(the)h(formal)f(presentation)f(of)150
5065 y(type-checking)e(in)j(DML.)1929 5349 y(4)p eop
%%Page: 5 5
5 4 bop 275 383 a Fp(Clearly)-5 b(,)18 b(a)i(natural)e(question)g(is)i
(whether)e(the)h(type)f(for)h Fk(append)f Fp(can)h(be)g(reconstructed)e
(or)i(synthesized.)k(F)o(or)c(such)150 478 y(a)24 b(simple)g(e)o
(xample,)g(this)g(seems)h(highly)e(possible.)36 b(Ho)n(we)n(v)o(er)m(,)
23 b(our)g(e)o(xperience)f(indicates)i(that)g(it)h(seems)f(e)o
(xceedingly)150 574 y(dif)n(\002cult)c(in)g(general)f(to)h(synthesize)g
(dependent)e(types)i(in)g(practice,)g(though)e(we)j(ha)n(v)o(e)e(not)h
(formally)f(studied)g(this)i(issue.)275 669 y(Instead)e(of)h
(re\002ning)f(a)i(type,)f(it)h(is)g(also)g(allo)n(wed)f(to)g(declare)g
(a)h(dependent)d(type)i(in)g(de)g(Caml.)26 b(F)o(or)20
b(instance,)g(we)h(can)150 765 y(declare)e(the)i(follo)n(wing.)150
922 y Fk(datatype)48 b('a)i(list)f(with)g(nat)g(=)h(nil\(0\))e(|)i
({n:nat})f(cons)g(of)g('a)h(*)f('a)h(list\(n\))150 1078
y Fp(The)19 b(declaration)f(is)j(basically)f(equi)n(v)n(alent)e(to)h
(the)h(re\002nement)e(we)i(made)g(earlier)-5 b(.)24 b(Ho)n(we)n(v)o(er)
m(,)18 b(there)h(is)i(also)f(a)g(signi\002cant)150 1174
y(dif)n(ference.)k(When)d(we)g(declare)f(a)h(re\002nement,)e(we)j(must)
e(be)h(able)g(to)f(interpret)g(the)h(corresponding)c(unre\002ned)i
(types)h(in)150 1269 y(terms)25 b(of)g(re\002ned)f(ones.)39
b(F)o(or)25 b(e)o(xample,)f(after)h(re\002ning)f(the)h(type)g
Fk('a)49 b(list)p Fp(,)26 b(we)f(must)g(interpret)f(this)i(type)e(in)i
(terms)150 1365 y(of)h(the)g(re\002ned)f(list)i(type.)45
b(W)-7 b(e)28 b(need)e(e)o(xistential)h(dependent)e(types)i(for)f(this)
i(purpose.)43 b Fk('a)50 b(list)27 b Fp(is)h(interpreted)d(as)150
1460 y Fk([n:nat])49 b('a)g(list\(n\))p Fp(,)17 b(that)h(is,)h
Fk('a)50 b(list)18 b Fp(is)g Fk('a)50 b(list\(n\))17
b Fp(for)g(some)h(\(unkno)n(wn\))d(natural)i(number)f
Fn(n)p Fp(.)25 b(Note)150 1556 y(that)f Fk([n:nat])f
Fp(is)h(an)g(e)o(xistential)f(quanti\002er)m(,)g(which)g(is)i(often)e
(written)g(as)i Fj(\006)p Fn(n)k Fj(:)h Fn(nat)24 b Fp(in)f(type)h
(theory)-5 b(.)33 b(This)24 b(pro)o(vides)150 1651 y(a)g(smooth)e
(interaction)g(between)h(ML)g(types)g(and)g(dependent)e(types.)34
b(Suppose)22 b(that)h Fn(f)33 b Fp(is)24 b(de\002ned)e(before)g(the)i
(list)g(type)150 1747 y(is)f(re\002ned)f(and)f(its)j(type)e(is)h
Fk('a)49 b(list)g(->)h('a)f(list)p Fp(.)31 b(After)22
b(re\002ning)g(the)g(list)h(type,)g(we)f(can)g(assign)h(to)f
Fn(f)32 b Fp(the)22 b(type)150 1842 y Fk(\([n:nat])48
b('a)i(list\))f(->)g([n:nat])g('a)g(list)p Fp(,)19 b(that)g(is,)h
Fn(f)28 b Fp(tak)o(es)19 b(a)g(list)h(with)g(unkno)n(wn)c(length)i(and)
g(returns)150 1937 y(a)i(list)h(with)f(unkno)n(wn)d(length.)24
b(This)c(mak)o(es)g(it)g(possible)g(for)f Fn(f)29 b Fp(to)20
b(be)g(applied)f(to)h(an)f(ar)o(gument)f(of)h(dependent)f(type,)h(say)
-5 b(,)150 2033 y Fk(int)49 b(list\(2\))p Fp(.)24 b(This)c(is)h(also)g
(essential)f(for)f(ensuring)g(backw)o(ard)f(compatibility)-5
b(,)18 b(a)i(v)o(ery)f(important)g(issue)h(when)g(the)150
2128 y(use)g(of)g(e)o(xisting)g(ML)g(code)g(is)h(concerned.)275
2224 y(Ho)n(we)n(v)o(er)m(,)e(there)i(is)h(a)f(need)g(for)f(imposing)g
(some)h(restriction)g(on)f(datatype)g(re\002nement.)27
b(W)-7 b(e)22 b(gi)n(v)o(e)f(a)g(short)g(e)o(xample)150
2319 y(to)f(illustrate)h(such)f(a)g(need.)k(The)c(datatype)f
Fk('a)50 b(tree)20 b Fp(is)h(declared)e(as)i(follo)n(ws)f(for)f
Fo(all)i Fp(binary)d(trees.)150 2476 y Fk(datatype)48
b('a)i(tree)f(=)g(Leaf)h(|)f(Node)g(of)h('a)f(tree)g(*)h('a)f(*)h('a)f
(tree)150 2633 y Fp(Suppose)19 b(we)i(declare)e(the)h(follo)n(wing)f
(re\002nement,)f(where)i(the)g(type)g(inde)o(x)f(standards)g(for)h(the)
g(height)f(of)h(a)h(tree.)150 2789 y Fk(refine)49 b('a)g(tree)g(with)g
(nat)h(=)250 2885 y(Leaf\(0\))e(|)i({h:nat})e(Node\(h+1\))g(of)i('a)f
(tree\(h\))g(*)g('a)h(*)f('a)h(tree\(h\))150 3041 y Fp(This)27
b(re\002nement)f(is)i(problematic)d(since)i(the)g(type)g
Fk([h:nat])48 b('a)i(tree\(h\))26 b Fp(no)n(w)g(standards)g(for)h(the)g
(type)f(of)h(all)150 3137 y Fo(perfect)20 b Fp(binary)e(trees,)i(and)f
(therefore)f(it)i(cannot)f(be)h(used)f(to)h(represent)e(the)i(original)
f Fk('a)49 b(tree)p Fp(,)19 b(which)h(is)g(the)g(type)f(for)150
3232 y(all)h(binary)e(trees.)25 b(There)18 b(is)i(some)f(syntactic)g
(restriction)g(that)g(can)g(be)g(imposed)f(to)i(rule)e(out)h(such)g
(problematic)f(datatype)150 3328 y(re\002nements.)24
b(W)-7 b(e)21 b(stop)f(mentioning)e(the)j(restriction)e(since)h(it)h
(is)g(simply)f(not)g(needed)f(in)h(this)h(paper)-5 b(.)275
3423 y(There)19 b(is)i(another)e(important)f(use)j(of)f(e)o(xistential)
f(dependent)f(types.)25 b(In)20 b(order)f(to)h(guarantee)e(practical)i
(type)g(check-)150 3519 y(ing)26 b(in)g(de)g(Caml,)i(we)e(must)g(mak)o
(e)g(constraints)f(relati)n(v)o(ely)g(simple.)42 b(Currently)-5
b(,)26 b(we)g(only)f(accept)h(linear)g(inte)o(ger)e(con-)150
3614 y(straints.)h(This)20 b(immediately)e(implies)i(that)f(there)h
(are)f(man)o(y)f(\(realistic\))i(constraints)f(that)g(are)h(ine)o
(xpressible)e(in)h(the)h(type)150 3710 y(system)26 b(of)g(de)h(Caml.)43
b(F)o(or)26 b(instance,)h(the)f(follo)n(wing)f(code)h(implements)f(a)i
(\002lter)f(function)f(on)g(a)i(list)h(which)d(remo)o(v)o(es)150
3805 y(from)19 b(the)h(list)i(all)e(elements)g(not)g(satisfying)g(the)g
(property)e Fk(p)p Fp(.)150 3962 y Fk(let)49 b(filter)g(p)h(=)f
(function)349 4057 y([])h(->)f([])250 4153 y(|)g(x)h(::)f(xs)h(->)f(if)
h(p\(x\))f(then)g(x)g(::)h(\(filter)e(p)i(xs\))f(else)g(\(filter)g(p)g
(xs\))150 4309 y Fp(In)31 b(general,)i(it)g(is)f(impossible)f(to)h(kno)
n(w)e(the)i(length)f(of)g(the)g(list)i Fk(\(filter)49
b(p)g(l\))32 b Fp(without)f(kno)n(wing)e(what)j Fk(p)g
Fp(is.)150 4405 y(Therefore,)19 b(it)j(is)g(impossible)f(to)g(type)g
(the)g(function)e(using)i(only)f(uni)n(v)o(ersal)g(dependent)f(types.)
28 b(Nonetheless,)20 b(we)i(kno)n(w)150 4500 y(that)27
b(the)h(length)e(of)h Fk(\(filter)49 b(p)g(xs\))28 b
Fp(is)g(less)g(than)f(or)g(equal)g(to)h(that)f(of)g Fk(l)p
Fp(.)47 b(This)27 b(in)m(v)n(ariant)f(can)h(be)g(captured)f(by)150
4596 y(assigning)19 b Fk(filter)h Fp(the)g(follo)n(wing)f(types.)150
4752 y Fk(\('a)49 b(->)h(bool\))f(->)g({m:nat})g('a)g(list\(m\))f(->)i
([n:nat)f(|)g(n)h(<=)f(m])h('a)f(list\(n\))150 4909 y
Fp(Note)20 b(that)g Fk([n:nat)49 b(|)h(n)f(<=)h(m])20
b Fp(stands)h(for)e Fj(\006)p Fn(n)k Fj(:)g Fi(f)p Fn(a)g
Fj(:)g Fn(nat)f Fi(j)i Fn(a)e Fi(\024)h Fn(m)p Fi(g)p
Fp(.)275 5005 y(Another)30 b(signi\002cant)h(use)g(of)h(e)o(xistential)
f(dependent)e(types)j(is)g(to)g(represent)e(a)i(range)f(of)g(v)n
(alues.)58 b(W)-7 b(e)33 b(can)e(use)150 5100 y Fk(\([n:nat])48
b(int\(n\)\))h(array)25 b Fp(to)g(represent)f(the)h(type)g(for)f(the)h
(v)o(ectors)f(whose)h(elements)g(are)g(natural)f(numbers.)1929
5349 y(5)p eop
%%Page: 6 6
6 5 bop 150 355 a Fk(datatype)48 b('a)i(brauntree)e(with)h(nat)g(=)349
455 y(L\(0\))250 554 y(|)g({m:nat}{n:nat)f(|)99 b(n)50
b(<=)f(m)h(<=)f(n+1})349 654 y(B\(m+n+1\))g(of)g('a)g(*)h('a)g
(brauntree\(m\))d(*)j('a)f(brauntree\(n\))f(;;)150 853
y(let)h(rec)h(diff)f(k)g(=)h(function)349 953 y(L)g(->)f(0)250
1052 y(|)g(B\(_,)g(l,)h(r\))f(->)349 1152 y(if)h(k)f(=)h(0)g(then)f(1)
349 1252 y(else)g(if)h(k)f(mod)h(2)f(=)h(1)g(then)f(diff)g(\(k/2\))g(l)
g(else)g(diff)g(\(k/2)g(-)h(1\))f(r)150 1351 y(withtype)f
({k:nat}{n:nat)g(|)h(k)h(<=)f(n)h(<=)f(k+1})598 1451
y(int\(k\))g(->)g('a)h(brauntree\(n\))d(->)j(int\(n-k\))e(;;)150
1650 y(let)h(rec)h(size)f(=)g(function)349 1750 y(L)h(->)f(0)h(|)g
(B\(_,)f(l,)g(r\))h(->)f(let)g(n)h(=)f(size)h(r)f(in)h(1)f(+)h(n)f(+)h
(n)g(+)f(diff)g(n)h(l)150 1849 y(withtype)e({n:nat})h('a)g
(brauntree\(n\))f(->)h(int\(n\))g(;;)882 2115 y Fp(Figure)20
b(2:)25 b(An)20 b(implementation)e(of)i(the)g(size)h(function)e(on)g
(Braun)h(trees)150 2382 y(This)28 b(is)h(v)o(ery)e(useful)g(for)h
(eliminating)f(array)g(bound)f(checks)h(at)i(run-time)d([20)o(].)49
b(In)27 b(general,)i(we)f(vie)n(w)g(that)g(the)g(use)150
2478 y(of)d(e)o(xistential)h(types)f(in)h(de)f(Caml)i(for)e(handling)e
(functions)h(lik)o(e)i Fk(filter)f Fp(is)i(crucial)e(to)h(the)g
(scalability)f(of)g(the)h(type)150 2573 y(system)20 b(of)g(de)g(Caml)h
(since)f(such)g(functions)f(are)h(ab)n(undant)f(in)h(practice.)275
2669 y(Lastly)-5 b(,)19 b(we)i(mention)e(a)h(con)m(v)o(ention)d(in)k
(de)f(Caml.)25 b(After)20 b(declaring)f(a)i(dependent)c(type)j(as)h
(follo)n(ws,)844 2846 y Fk(datatype)49 b Fj(\()p Fn(\013)1378
2858 y Fh(1)1415 2846 y Fn(;)14 b(:)g(:)g(:)g(;)g(\013)1653
2858 y Ff(m)1716 2846 y Fj(\))21 b Fn(\016)53 b Fk(with)c
Fj(\()p Fn(sor)r(t)2288 2858 y Fh(1)2326 2846 y Fn(;)14
b(:)g(:)g(:)g(;)g(sor)r(t)2659 2858 y Ff(n)2705 2846
y Fj(\))23 b(=)g Fi(\001)14 b(\001)g(\001)g(\001)g(\001)g(\001)150
3026 y Fp(we)21 b(may)e(write)i Fj(\()p Fn(\034)691 3038
y Fh(1)728 3026 y Fn(;)14 b(:)g(:)g(:)g(;)g(\034)949
3038 y Ff(m)1012 3026 y Fj(\))p Fn(\016)24 b Fp(to)d(stand)f(for)f(the)
i(follo)n(wing.)1045 3204 y Fj([)p Fn(a)1112 3216 y Fh(1)1172
3204 y Fj(:)i Fn(sor)r(t)1366 3216 y Fh(1)1405 3204 y
Fj(])14 b Fi(\001)g(\001)g(\001)f Fj([)p Fn(a)1619 3216
y Ff(n)1687 3204 y Fj(:)23 b Fn(sor)r(t)1881 3216 y Ff(n)1928
3204 y Fj(])p Fn(:)p Fj(\()p Fn(\034)2042 3216 y Fh(1)2080
3204 y Fn(;)14 b(:)g(:)g(:)f(;)h(\034)2300 3216 y Ff(m)2363
3204 y Fj(\))p Fn(\016)s Fj(\()p Fn(a)2511 3216 y Fh(1)2549
3204 y Fn(;)g(:)g(:)g(:)g(;)g(a)2778 3216 y Ff(n)2823
3204 y Fj(\))150 3383 y Fp(F)o(or)20 b(e)o(xample,)e
Fk('a)50 b(list)20 b Fp(stands)g(for)g Fk([n:nat])48
b('a)i(list\(n\))p Fp(.)150 3625 y Fq(4)119 b(Case)30
b(Studies)150 3807 y Fp(In)d(this)i(section,)g(we)f(present)f(some)g(e)
o(xamples)g(to)h(demonstrate)e(the)h(use)h(of)g(dependent)d(datatypes)i
(in)h(capturing)e(in-)150 3902 y(v)n(ariants)i(in)h(data)g(structures.)
50 b(All)29 b(these)g(e)o(xamples)f(in)h(de)g(Caml)g(ha)n(v)o(e)f(been)
h(successfully)f(v)o(eri\002ed)g(in)h(a)g(prototype)150
3998 y(compiler)23 b(for)h(de)h(Caml,)h(which)e(is)h(written)g(on)f
(top)g(of)g(the)h(Caml-light)f(compiler)f([14)o(].)38
b(The)24 b(claim)h(we)g(mak)o(e)f(is)h(that)150 4093
y(dependent)18 b(datatypes)h(enable)h(the)g(programmer)d(to)k
(implement)e(algorithms)g(in)h(a)h(w)o(ay)f(that)g(is)i(more)d(rob)n
(ust)h(and)f(easier)150 4189 y(to)h(understand.)150 4426
y Fc(4.1)99 b(Braun)26 b(T)-7 b(r)n(ees)150 4578 y Fp(A)31
b(Braun)f(tree)g(is)i(a)f(balanced)e(binary)g(tree)i([4)o(])f(such)h
(that)f(for)g(e)n(v)o(ery)f(branch)g(node)h(in)g(the)h(tree,)i(its)e
(left)g(subtree)f(is)150 4673 y(either)22 b(the)h(same)g(size)g(as)h
(its)g(right)e(subtree,)g(or)h(contains)f(one)g(more)g(element.)32
b(Braun)22 b(trees)h(can)g(be)f(used)h(to)g(gi)n(v)o(e)f(neat)150
4769 y(implementations)h(for)i(\003e)o(xible)g(arrays)g(and)f(priority)
g(queues.)40 b(In)25 b([16)o(],)h(there)f(is)h(an)g(algorithm)e(which)g
(computes)h(the)150 4864 y(size)g(of)e(a)h(Braun)g(tree)g(in)g
Fn(O)r Fj(\(log)1129 4827 y Fh(2)1180 4864 y Fn(n)p Fj(\))h
Fp(time,)f(where)g Fn(n)g Fp(is)h(the)f(size)g(of)g(the)g(Braun)f
(tree.)36 b(W)-7 b(e)25 b(implement)e(this)h(algorithm)150
4960 y(in)c(Figure)g(2.)25 b(W)-7 b(e)21 b(\002rst)g(declare)e(a)i
(dependent)c(datatype)i Fk('a)50 b(brauntree\(n\))18
b Fp(for)i(Braun)f(trees)i(of)e(size)i Fn(n)p Fp(.)k(Note)20
b(that)150 5055 y(the)g(type)g(of)g Fk(B)g Fp(is)1929
5349 y(6)p eop
%%Page: 7 7
7 6 bop 150 383 a Fk({m:nat}{n:nat)47 b(|)j(n)g(<=)f(m)h(<=)f(n+1})150
478 y('a)g(*)h('a)g(brauntree\(m\))d(*)j('a)f(brauntree\(n\))f(->)h('a)
h(brauntree\(m+n+1\))150 640 y Fp(which)26 b(states)h(that)f
Fk(B)g Fp(yields)g(a)h(Braun)e(tree)h(of)g(size)h Fn(m)c
Fj(+)f Fn(n)h Fj(+)f(1)k Fp(when)g(gi)n(v)o(en)f(an)h(element,)g(a)h
(Braun)e(tree)i(of)e(size)i Fn(m)150 736 y Fp(and)22
b(a)h(Braun)g(tree)g(of)f(size)i Fn(n)f Fp(where)f Fn(n)28
b Fi(\024)f Fn(m)h Fi(\024)f Fn(n)21 b Fj(+)f(1)j Fp(holds.)32
b(This)23 b(e)o(xactly)f(captures)g(the)g(in)m(v)n(ariant)g(on)g(Braun)
g(trees)150 831 y(mentioned)c(abo)o(v)o(e.)275 927 y(Gi)n(v)o(en)h(a)h
(natural)g(number)e Fn(k)24 b Fp(and)19 b(a)i(Braun)e(tree)h(of)g(size)
h Fn(n)g Fp(satisfying)e Fn(k)26 b Fi(\024)d Fn(n)g Fi(\024)f
Fn(k)f Fj(+)d(1)p Fp(,)i(the)g(function)f Fk(diff)h Fp(yields)150
1022 y(the)i(dif)n(ference)d(between)i Fn(n)h Fp(and)f
Fn(k)s Fp(.)29 b(W)m(ith)22 b(this)g(function,)e(the)i(size)g(function)
e(on)h(Braun)g(trees)h(can)f(be)h(de\002ned)e(straight-)150
1118 y(forw)o(ardly)-5 b(.)26 b(An)c(interesting)e(point)h(in)g(this)h
(e)o(xample)e(is)j(that)e(the)g(type)g(of)g(the)h(function)e
Fk(size)h Fp(precisely)f(indicates)h(that)150 1213 y(this)28
b(is)g(the)f(size)h(function)e(on)g(Braun)h(trees)h(since)f(it)h
(states)g(that)g(the)f(function)e(returns)i(an)g(inte)o(ger)f(of)h(v)n
(alue)g Fn(n)g Fp(when)150 1309 y(gi)n(v)o(en)19 b(a)i(Braun)e(tree)h
(of)g(size)h Fn(n)p Fp(.)275 1404 y(The)k(reason)f(that)i
Fk(diff)49 b Fn(n)h(l)27 b Fp(yields)f(the)f(dif)n(ference)f(between)h
Fi(j)p Fn(l)r Fi(j)p Fp(,)h(the)g(size)g(of)f Fn(l)r
Fp(,)i(and)e Fn(n)h Fp(can)f(be)g(found)f(in)i([16)o(].)150
1500 y(W)-7 b(e)22 b(gi)n(v)o(e)f(some)g(brief)f(e)o(xplanation)f(belo)
n(w)-5 b(.)27 b(It)22 b(is)g(clear)f(that)g Fi(j)p Fn(l)r
Fi(j)e(\000)f Fn(n)k Fp(is)g(either)f Fj(0)g Fp(or)g
Fj(1)p Fp(.)28 b(If)21 b Fn(l)i Fp(is)f(a)g(leaf,)f Fi(j)p
Fn(l)r Fi(j)e(\000)g Fn(n)i Fp(must)h(be)f Fj(0)p Fp(.)150
1595 y(Otherwise,)h Fi(j)p Fn(l)r Fi(j)k Fj(=)g(1)19
b(+)h Fi(j)p Fn(l)921 1565 y Fd(0)943 1595 y Fi(j)g Fj(+)g
Fi(j)p Fn(r)1133 1565 y Fd(0)1157 1595 y Fi(j)p Fp(,)j(where)e
Fn(l)1476 1565 y Fd(0)1521 1595 y Fp(and)h Fn(r)1703
1565 y Fd(0)1749 1595 y Fp(are)g(the)g(left)h(and)e(right)h(branches)e
(of)i Fn(l)r Fp(,)g(respecti)n(v)o(ely)-5 b(.)28 b(If)22
b Fn(n)h Fp(is)g(odd,)150 1691 y(then)d Fn(n)j Fj(=)f(1)c(+)g
Fi(b)p Fn(n=)p Fj(2)p Fi(c)f Fj(+)h Fi(b)p Fn(n=)p Fj(2)p
Fi(c)i Fp(and)f(thus)537 1868 y Fi(j)p Fn(l)r Fi(j)f(\000)g
Fn(n)83 b Fj(=)g(1)18 b(+)g Fi(j)p Fn(l)1185 1838 y Fd(0)1207
1868 y Fi(j)h Fj(+)f Fi(j)p Fn(r)1394 1838 y Fd(0)1418
1868 y Fi(j)h(\000)f Fj(1)f(+)i Fi(b)p Fn(n=)p Fj(2)p
Fi(c)e Fj(+)h Fi(b)p Fn(n=)p Fj(2)p Fi(c)j Fj(=)i(\()p
Fi(j)p Fn(l)2393 1838 y Fd(0)2416 1868 y Fi(j)c(\000)f(b)p
Fn(n=)p Fj(2)p Fi(c)p Fj(\))f(+)h(\()p Fi(j)p Fn(r)2975
1838 y Fd(0)2999 1868 y Fi(j)h(\000)f(b)p Fn(n=)p Fj(2)p
Fi(c)p Fj(\))150 2048 y Fp(Since)i Fi(j)p Fn(l)405 2017
y Fd(0)428 2048 y Fi(j)e(\000)h Fj(1)j Fi(\024)h(j)p
Fn(r)767 2017 y Fd(0)791 2048 y Fi(j)g(\024)g(j)p Fn(l)975
2017 y Fd(0)997 2048 y Fi(j)e Fp(holds,)f(we)g(ha)n(v)o(e)g(the)g
(follo)n(wing.)1146 2226 y Fj(2\()p Fi(j)p Fn(l)1270
2192 y Fd(0)1292 2226 y Fi(j)f(\000)f(b)p Fn(n=)p Fj(2)p
Fi(c)p Fj(\))f Fi(\000)h Fj(1)23 b Fi(\024)g(j)p Fn(l)r
Fi(j)18 b(\000)g Fn(n)k Fi(\024)h Fj(2\()p Fi(j)p Fn(l)2368
2192 y Fd(0)2391 2226 y Fi(j)18 b(\000)g(b)p Fn(n=)p
Fj(2)p Fi(c)p Fj(\))150 2405 y Fp(It)27 b(can)g(no)n(w)g(be)g(readily)f
(v)o(eri\002ed)g(that)h Fi(j)p Fn(l)r Fi(j)c(\000)g Fn(n)36
b Fj(=)f(1)27 b Fp(if)g Fi(j)p Fn(l)1903 2374 y Fd(0)1926
2405 y Fi(j)d(\000)f(b)p Fn(n=)p Fj(2)p Fi(c)34 b Fj(=)i(1)27
b Fp(and)f Fi(j)p Fn(l)r Fi(j)d(\000)g Fn(n)36 b Fj(=)f(0)27
b Fp(if)h Fi(j)p Fn(l)3188 2374 y Fd(0)3210 2405 y Fi(j)c(\000)f(b)p
Fn(n=)p Fj(2)p Fi(c)34 b Fj(=)i(0)p Fp(.)150 2500 y(Therefore,)25
b(if)i Fn(n)f Fp(is)i(odd,)e Fi(j)p Fn(l)r Fi(j)d(\000)f
Fn(n)34 b Fj(=)g Fi(j)p Fn(l)1352 2470 y Fd(0)1375 2500
y Fi(j)23 b(\000)f(b)p Fn(n=)p Fj(2)p Fi(c)p Fp(.)42
b(W)m(ith)27 b(some)f(similar)g(reasoning,)g(we)h(can)f(e)n(v)o
(entually)e(pro)o(v)o(e)h(the)150 2596 y(correctness)19
b(of)h(the)g(de\002ned)f(function)g Fk(diff)p Fp(.)275
2691 y(This)29 b(e)o(xample)e(also)j(sho)n(ws)f(that)g(although)e(the)i
(datatype)f(type)h(declaration)e(for)i(Braun)f(trees)i(contains)e(size)
i(in-)150 2787 y(formation,)f(this)h(information)d(is)j(not)f(a)n(v)n
(ailable)g(at)g(run-time)f(and)h(therefore)e(a)j(recursi)n(v)o(e)e(w)o
(alk)h(through)e(the)i(tree)h(is)150 2882 y(necessary)19
b(to)i(determine)e(the)h(size)h(of)f(a)g(tree.)150 3120
y Fc(4.2)99 b(Random-Access)26 b(Lists)150 3271 y Fp(A)21
b(random-access)d(list)k(is)f(a)g(list)g(representation)d(such)i(that)h
(list)g(lookup)e(\(update\))f(can)i(be)h(implemented)d(in)j(an)f(ef)n
(\002cient)150 3367 y(w)o(ay)-5 b(.)25 b(In)20 b(this)h(case,)g(the)f
(lookup)f(\(update\))g(function)f(tak)o(es)j Fn(O)r Fj(\(log)15
b Fn(n)p Fj(\))21 b Fp(time)g(in)f(contrast)g(to)g(the)h(usual)f
Fn(O)r Fj(\()p Fn(n)p Fj(\))i Fp(time)f(\(w)o(orst)150
3462 y(case\),)f(where)g Fn(n)g Fp(is)h(the)g(length)e(of)h(the)g
(input)f(list.)275 3558 y(W)-7 b(e)31 b(present)f(an)g(implementation)e
(of)j(random-access)d(list)j(in)g(Figures)f(3)h(and)e(4.)56
b(W)-7 b(e)32 b(\002rst)f(declare)f(the)g(depen-)150
3653 y(dent)23 b(datatype)g(for)g(random-access)f(lists.)36
b(Note)24 b(that)g Fk('a)49 b(rlist\(n\))23 b Fp(stands)h(for)f(the)h
(type)f(of)h(random-access)d(lists)150 3749 y(with)i(length)e
Fn(n)p Fp(.)33 b Fk(Nil)22 b Fp(and)g Fk(One)h Fp(are)f(the)h
(constructors)e(for)h(empty)g(and)g(singleton)f(random-access)g(lists,)
j(respecti)n(v)o(ely)-5 b(.)150 3844 y(Furthermore,)24
b(the)h(constructors)e Fk(Even)i Fp(and)g Fk(Odd)g Fp(are)g(to)h(form)e
(random-access)f(lists)j(of)f(e)n(v)o(en)f(and)h(odd)f(lengths,)i(re-)
150 3939 y(specti)n(v)o(ely)-5 b(.)29 b(If)22 b Fk(l1)h
Fp(and)e Fk(l2)i Fp(represent)e(lists)i Fn(x)1526 3951
y Fh(1)1564 3939 y Fn(;)14 b(:)g(:)g(:)g(;)g(x)1796 3951
y Ff(n)1864 3939 y Fp(and)22 b Fn(y)2048 3951 y Fh(1)2085
3939 y Fn(;)14 b(:)g(:)g(:)f(;)h(y)2310 3951 y Ff(n)2378
3939 y Fp(for)21 b(some)h Fn(n)27 b(>)f Fj(0)p Fp(,)d(respecti)n(v)o
(ely)-5 b(,)20 b(then)i Fk(Even)150 4035 y(\(l1,)49 b(l2\))26
b Fp(represents)f(the)h(list)g Fn(x)1240 4047 y Fh(1)1278
4035 y Fn(;)14 b(y)1356 4047 y Fh(1)1393 4035 y Fn(;)g(:)g(:)g(:)g(;)g
(x)1625 4047 y Ff(n)1670 4035 y Fn(;)g(y)1748 4047 y
Ff(n)1793 4035 y Fp(.)42 b(Similarly)-5 b(,)26 b(if)h
Fk(l1)f Fp(and)f Fk(l2)h Fp(represent)e(lists)k Fn(x)3222
4047 y Fh(1)3259 4035 y Fn(;)14 b(:)g(:)g(:)g(;)g(x)3491
4047 y Ff(n)3536 4035 y Fn(;)g(x)3620 4047 y Ff(n)p Fh(+1)150
4130 y Fp(and)j Fn(y)329 4142 y Fh(1)366 4130 y Fn(;)d(:)g(:)g(:)g(;)g
(y)592 4142 y Ff(n)655 4130 y Fp(for)j(some)g Fn(n)23
b(>)g Fj(0)p Fp(,)18 b(respecti)n(v)o(ely)-5 b(,)16 b
Fk(Odd\(l1,)48 b(l2\))18 b Fp(represents)f Fn(x)2605
4142 y Fh(1)2643 4130 y Fn(;)d(y)2721 4142 y Fh(1)2758
4130 y Fn(;)g(:)g(:)g(:)f(;)h(x)2989 4142 y Ff(n)3035
4130 y Fn(;)g(y)3113 4142 y Ff(n)3158 4130 y Fn(;)g(x)3242
4142 y Ff(n)p Fh(+1)3371 4130 y Fp(.)25 b(W)m(ith)18
b(such)150 4226 y(a)25 b(data)f(structure,)g(we)h(can)f(implement)f(a)i
(lookup)d(\(update\))g(function)h(on)h(random-access)e(list)j(which)f
(tak)o(es)h Fn(O)r Fj(\(log)15 b Fn(n)p Fj(\))150 4321
y Fp(time.)37 b(A)24 b(crucial)g(in)m(v)n(ariant)e(on)i(this)h(data)f
(structure)f(is)i(that)f Fk(l1)g Fp(and)g Fk(l2)g Fp(must)g(ha)n(v)o(e)
g(the)g(same)g(length)f(if)h Fk(Even\(l1,)150 4417 y(l2\))f
Fp(is)g(formed)e(or)i Fk(l1)f Fp(contains)g(one)g(more)g(element)g
(than)g Fk(l2)h Fp(if)g Fk(Odd\(l1,)49 b(l2\))22 b Fp(is)i(formed.)31
b(This)22 b(is)i(clearly)e(cap-)150 4512 y(tured)j(by)h(the)g
(dependent)e(datatype)h(declaration)g(for)g Fk('a)50
b(rlist)p Fp(.)42 b(The)26 b(function)e Fk(cons)i Fp(appends)f(an)h
(element)g(to)g(a)150 4608 y(list)h(and)e Fk(uncons)g
Fp(decomposes)f(a)j(list)f(into)g(a)g(pair)f(consisting)g(of)h(the)g
(head)f(and)g(the)h(tail)g(of)g(the)f(list.)43 b(Note)26
b(that)g(the)150 4703 y(type)18 b(of)h Fk(uncons)g Fp(requires)e(this)j
(function)d(only)h(to)h(be)g(applied)f(to)h(a)h(non-empty)c(list.)26
b(Both)19 b Fk(cons)f Fp(and)h Fk(uncons)f Fp(tak)o(es)150
4799 y Fn(O)r Fj(\(log)d Fn(n)p Fj(\))21 b Fp(time.)275
4894 y(The)h(function)f Fk(lookup_safe)g Fp(deserv)o(es)h(some)h(e)o
(xplanation.)30 b(The)22 b(type)g(of)h(this)g(function)e(indicates)i
(that)f(it)i(can)150 4990 y(be)e(applied)f(to)h Fk(i)h
Fp(and)e Fk(l)h Fp(only)g(if)g Fk(i)g Fp(is)h(a)g(natural)e(number)f
(and)i(its)h(v)n(alue)e(is)i(less)g(than)f(the)g(length)f(of)h
Fk(l)p Fp(.)30 b(Notice)22 b(that)h(the)150 5085 y Fk(look_up)49
b(i)g(l)21 b Fp(simply)f(return)f Fk(x)h Fp(when)g(the)g
Fk(l)h Fp(matches)f(the)g(pattern)f Fk(One)49 b(x)p Fp(.)26
b(There)19 b(is)i(no)f(need)g(to)g(check)g(whether)1929
5349 y(7)p eop
%%Page: 8 8
8 7 bop 150 593 a Fk(datatype)48 b('a)i(rlist)f(with)g(nat)g(=)349
693 y(Nil\(0\))250 792 y(|)g(One\(1\))g(of)g('a)250 892
y(|)g({n:nat)g(|)h(n)f(>)h(0})f(Even\(n+n\))f(of)i('a)f(rlist\(n\))g(*)
g('a)h(rlist\(n\))250 992 y(|)f({n:nat)g(|)h(n)f(>)h(0})f(Odd\(n+n+1\))
f(of)i('a)f(rlist\(n+1\))f(*)i('a)f(rlist\(n\))f(;;)150
1191 y(exception)g(Subscript)g(;;)150 1390 y(let)h(rec)h(cons)f(x)g(=)h
(function)349 1490 y(Nil)g(->)f(One)g(x)250 1589 y(|)g(One)h(y)f(->)99
b(Even\(One\(x\),)48 b(One\(y\)\))250 1689 y(|)h(Even\(l1,)g(l2\))g(->)
g(Odd\(cons)g(x)g(l2,)g(l1\))250 1789 y(|)g(Odd\(l1,)g(l2\))g(->)g
(Even\(cons)g(x)g(l2,)g(l1\))150 1888 y(withtype)f({n:nat})h('a)g(->)h
('a)f(rlist\(n\))f(->)i('a)f(rlist\(n+1\))f(;;)150 2088
y(let)h(rec)h(uncons)e(=)i(function)349 2187 y(One)g(x)f(->)h(\(x,)f
(Nil\))250 2287 y(|)g(Even\(l1,)g(l2\))g(->)349 2386
y(let)h(\(x,)f(l1\))g(=)h(uncons)e(l1)i(in)f(begin)449
2486 y(match)g(l1)g(with)549 2586 y(Nil)g(->)g(\(x,)g(l2\))h(|)f(_)h
(->)f(\(x,)h(Odd\(l2,)e(l1\)\))349 2685 y(end)250 2785
y(|)h(Odd\(l1,)g(l2\))g(->)g(let)h(\(x,)f(l1\))g(=)h(uncons)f(l1)g(in)g
(\(x,)h(Even\(l2,)e(l1\)\))150 2885 y(withtype)g({n:nat)h(|)h(n)f(>)h
(0})f('a)h(rlist\(n\))e(->)i('a)f(*)h('a)f(rlist\(n-1\))f(;;)150
3084 y(let)h(rec)h(length)e(=)i(function)349 3183 y(Nil)g(->)f(0)250
3283 y(|)g(One)h(_)f(->)h(1)250 3383 y(|)f(Even)g(\(l1,)g(_\))h(->)f(2)
h(*)g(\(length)e(l1\))250 3482 y(|)h(Odd)h(\(_,)f(l2\))g(->)g(2)h(*)g
(\(length)e(l2\))h(+)h(1)150 3582 y(withtype)e({n:nat})h('a)g
(rlist\(n\))g(->)g(int\(n\))g(;;)150 3781 y(let)g(rec)h(lookup_safe)d
(i)j(=)g(function)349 3881 y(One)g(x)f(->)h(x)250 3980
y(|)f(Even\(l1,)g(l2\))g(->)349 4080 y(if)h(i)f(mod)h(2)f(=)h(0)f(then)
h(lookup_safe)d(\(i)j(/)f(2\))h(l1)349 4180 y(else)f(lookup_safe)f(\(i)
i(/)f(2\))h(l2)250 4279 y(|)f(Odd\(l1,)g(l2\))g(->)349
4379 y(if)h(i)f(mod)h(2)f(=)h(0)f(then)h(lookup_safe)d(\(i)j(/)f(2\))h
(l1)349 4479 y(else)f(lookup_safe)f(\(i)i(/)f(2\))h(l2)150
4578 y(withtype)e({i:nat}{n:nat)g(|)h(i)h(<)g(n})f(int\(i\))g(->)g('a)h
(rlist\(n\))e(->)h('a)h(;;)841 4844 y Fp(Figure)19 b(3:)26
b(An)20 b(implementation)e(of)i(random-access)e(lists)j(in)g(de)f(Caml)
g(\(I\))1929 5349 y(8)p eop
%%Page: 9 9
9 8 bop 150 355 a Fk(let)49 b(rec)h(update_safe)d(i)j(x)g(=)f(function)
349 455 y(One)h(y)f(->)h(One)f(x)250 554 y(|)g(Even\(l1,)g(l2\))g(->)
349 654 y(if)h(i)f(mod)h(2)f(=)h(0)f(then)h(Even\(update_safe)c(\(i)k
(/)f(2\))h(x)f(l1,)h(l2\))349 754 y(else)f(Even\(l1,)g(update_safe)e
(\(i)j(/)f(2\))h(x)g(l2\))250 853 y(|)f(Odd\(l1,)g(l2\))g(->)349
953 y(if)h(i)f(mod)h(2)f(=)h(0)f(then)h(Odd\(update_safe)d(\(i)i(/)h
(2\))f(x)h(l1,)f(l2\))349 1052 y(else)g(Odd\(l1,)g(update_safe)f(\(i)h
(/)h(2\))f(x)h(l2\))150 1152 y(withtype)e({i:nat}{n:nat)g(|)h(i)h(<)g
(n})598 1252 y(int\(i\))f(->)g('a)h(->)f('a)h(rlist\(n\))e(->)i('a)f
(rlist\(n\))f(;;)827 1517 y Fp(Figure)19 b(4:)26 b(An)20
b(implementation)e(of)i(random-access)e(lists)j(in)g(de)f(Caml)h
(\(II\))150 1690 y Fk(datatype)48 b('a)i(rlist)f(with)g(nat)g(=)349
1790 y(Nil\(0\))250 1889 y(|)g(One\(1\))g(of)g('a)250
1989 y(|)g({n:nat)g(|)h(n)f(>)h(0})f(Even\(n+n\))f(of)i(\('a)f(*)h
('a\))f(rlist\(n\))250 2088 y(|)g({n:nat)g(|)h(n)f(>)h(0})f
(Odd\(n+n+1\))f(of)i('a)f(*)h(\('a)f(*)h('a\))f(rlist\(n\))918
2354 y Fp(Figure)20 b(5:)25 b(A)c(nested)e(dependent)f(datatype)h(for)h
(random)e(access)j(lists)150 2621 y Fk(i)i Fp(is)g Fj(0)p
Fp(:)29 b(it)23 b(must)f(be)g(since)g Fk(i)h Fp(is)g(a)f(natural)g
(number)e(and)h Fk(i)i Fp(is)g(less)g(than)f(the)g(length)f(of)h
Fk(l)p Fp(,)h(which)e(is)j Fj(1)e Fp(in)g(this)h(case.)31
b(The)150 2717 y(usual)20 b(lookup)e(function)h(can)h(be)g(implemented)
e(as)j(usual)f(or)g(as)h(follo)n(ws.)150 2879 y Fk(let)49
b(rec)h(lookup)e(i)i(l)f(=)250 2974 y(if)g(i)h(<)f(0)h(then)f(raise)g
(Subscript)250 3070 y(else)g(if)g(i)h(>=)f(length)g(l)h(then)f(raise)f
(Subscript)499 3165 y(else)h(lookup_safe)f(i)h(l)150
3260 y(withtype)f(int)i(->)f('a)g(rlist)g(->)h('a)f(;;)275
3422 y Fp(W)-7 b(e)27 b(point)f(out)g(that)h(an)f(implementation)f(of)h
(random-access)e(lists)k(is)g(gi)n(v)o(en)d(in)i([17)n(],)i(which)d
(uses)h(the)f(feature)g(of)150 3518 y(nested)21 b(datatypes.)29
b(Okasaki')-5 b(s)21 b(implementation)f(supports)g(\(on)h(a)n(v)o
(erage\))f Fn(O)r Fj(\(1\))p Fp(-time)i(consing)e(and)i(unconsing)d
(opera-)150 3613 y(tions)24 b(and)f(are)h(thus)f(superior)g(to)h(our)e
(implementation)g(in)i(this)g(respect.)35 b(On)24 b(the)g(other)f
(hand,)g(the)h(update)e(function)g(in)150 3709 y(Okasaki')-5
b(s)23 b(implementation)e(requires)h(the)h(use)g(of)g(some)g(higher)n
(-order)c(feature,)k(which)f(does)h(not)g(e)o(xist)g(in)g(our)f(imple-)
150 3804 y(mentation.)i(W)-7 b(e)21 b(vie)n(w)f(this)h(as)g(an)f(edge)f
(of)h(our)g(implementation.)275 3900 y(It)i(should)f(be)h(stressed)h
(that)f(nested)g(datatypes)g(and)f(DML-style)h(dependent)e(types)i(are)
g(orthogonal)e(to)i(each)g(other)-5 b(.)150 3995 y(F)o(or)23
b(instance,)h(we)g(can)f(form)g(a)h(nested)f(dependent)e(datatype)i(in)
h(Figure)e(5)i(for)f(random-access)e(lists,)26 b(imitating)d(a)h(cor)n
(-)150 4091 y(responding)19 b(datatype)h(in)i([17)o(].)29
b(Unfortunately)-5 b(,)19 b(we)j(currently)d(cannot)i(e)o(xperiment)e
(with)j(such)f(a)h(dependent)e(datatype)150 4186 y(because)g
(polymorphic)d(recursion)h(is)j(not)f(supported)e(in)j(Caml-light.)150
4424 y Fc(4.3)99 b(Red-Black)26 b(T)-7 b(r)n(ees)150
4575 y Fp(A)24 b(red-black)e(tree)i(\(RBT\))g(is)h(a)f(balanced)f
(binary)f(tree)i(which)f(satis\002es)j(the)d(follo)n(wing)g
(conditions:)31 b(\(a\))23 b(all)i(lea)n(v)o(es)f(are)150
4671 y(mark)o(ed)16 b(black)h(and)g(all)h(other)e(nodes)h(are)g(mark)o
(ed)f(either)h(red)g(or)g(black;)h(\(b\))e(for)h(e)n(v)o(ery)f(node)g
(there)h(are)g(the)h(same)f(number)150 4766 y(of)22 b(black)f(nodes)g
(on)g(e)n(v)o(ery)g(path)g(connecting)f(the)i(node)f(to)h(a)g(leaf,)g
(and)g(this)g(number)e(is)j(called)e(the)h Fo(blac)n(k)g(height)f
Fp(of)h(the)150 4862 y(node;)c(\(c\))h(the)f(tw)o(o)h(sons)g(of)f(e)n
(v)o(ery)g(red)g(node)f(must)i(be)g(black.)24 b(It)19
b(is)g(a)g(common)e(practice)h(to)h(use)g(the)f(RBT)i(data)f(structure)
150 4957 y(for)j(implementing)f(a)i(dictionary)-5 b(.)31
b(W)-7 b(e)23 b(declare)g(a)g(datatype)e(in)i(Figure)f(6,)i(which)e
(precisely)g(captures)g(these)h(properties)150 5053 y(of)d(a)h(RBT)-6
b(.)1929 5349 y(9)p eop
%%Page: 10 10
10 9 bop 150 643 a Fk(type)49 b(key)g(==)h(int)f(;;)150
842 y(sort)g(color)g(==)g({a:int)g(|)h(0)f(<=)h(a)f(<=)h(1})f(;;)150
1041 y(datatype)f(rbtree)h(with)g(\(color,)g(nat,)g(nat\))g(=)349
1141 y(E\(0,)g(0,)h(0\))250 1241 y(|)f({cl:color}{cr:color}{bh:nat})349
1340 y(B\(0,)g(bh+1,)g(0\))h(of)f(rbtree\(cl,)f(bh,)h(0\))h(*)f(key)h
(*)f(rbtree\(cr,)f(bh,)h(0\))250 1440 y(|)g
({cl:color}{cr:color}{bh:nat})349 1540 y(R\(1,)g(bh,)h(cl+cr\))e(of)i
(rbtree\(cl,)e(bh,)h(0\))g(*)h(key)f(*)h(rbtree\(cr,)e(bh,)h(0\))g(;;)
150 1739 y(let)g(restore)g(=)g(function)349 1839 y(\(R\(R\(a,)g(x,)g
(b\),)g(y,)h(c\),)f(z,)h(d\))f(->)g(R\(B\(a,)g(x,)h(b\),)f(y,)g(B\(c,)g
(z,)h(d\)\))250 1938 y(|)f(\(R\(a,)g(x,)h(R\(b,)f(y,)g(c\)\),)g(z,)h
(d\))f(->)g(R\(B\(a,)g(x,)h(b\),)f(y,)g(B\(c,)g(z,)h(d\)\))250
2038 y(|)f(\(a,)h(x,)f(R\(R\(b,)g(y,)g(c\),)g(z,)h(d\)\))f(->)g
(R\(B\(a,)g(x,)h(b\),)f(y,)g(B\(c,)g(z,)h(d\)\))250 2137
y(|)f(\(a,)h(x,)f(R\(b,)g(y,)g(R\(c,)h(z,)f(d\)\)\))g(->)g(R\(B\(a,)g
(x,)h(b\),)f(y,)g(B\(c,)g(z,)h(d\)\))250 2237 y(|)f(\(a,)h(x,)f(b\))g
(->)h(B\(a,)f(x,)g(b\))150 2337 y(withtype)f
({cl:color}{cr:color}{bh:nat}{vl:nat}{)o(vr:na)o(t)c(|)50
b(vl+vr)f(<=)g(1})598 2436 y(rbtree\(cl,)f(bh,)i(vl\))f(*)g(key)h(*)f
(rbtree\(cr,)f(bh,)h(vr\))h(->)598 2536 y([c:color])e(rbtree\(c,)h
(bh+1,)f(0\))i(;;)150 2735 y(exception)e(Item_already_exists)e(;;)150
2934 y(let)j(insert)g(x)h(t)f(=)250 3034 y(let)g(rec)g(ins)g(=)h
(function)449 3134 y(E)g(->)f(R\(E,)g(x,)g(E\))349 3233
y(|)h(B\(a,)f(y,)g(b\))h(->)f(if)h(x)f(<)h(y)g(then)f(restore\(ins)e
(a,)j(y,)f(b\))1146 3333 y(else)g(if)h(y)f(<)h(x)g(then)f(restore\(a,)f
(y,)h(ins)g(b\))1395 3433 y(else)g(raise)g(Item_already_exists)349
3532 y(|)h(R\(a,)f(y,)g(b\))h(->)f(if)h(x)f(<)h(y)g(then)f(R\(ins)g(a,)
g(y,)g(b\))1146 3632 y(else)g(if)h(y)f(<)h(x)g(then)f(R\(a,)g(y,)g(ins)
g(b\))1395 3731 y(else)g(raise)g(Item_already_exists)250
3831 y(withtype)f({c:color}{bh:nat})748 3931 y(rbtree\(c,)g(bh,)h(0\))h
(->)748 4030 y([c':color][v:nat)d(|)i(v)h(<=)f(c])h(rbtree\(c',)e(bh,)h
(v\))g(in)250 4130 y(match)g(ins)g(t)g(with)349 4230
y(R\(a,)g(y,)h(b\))f(->)h(B\(a,)f(y,)g(b\))250 4329 y(|)g(t)h(->)f(t)
150 4429 y(withtype)f({c:color}{bh:nat})f(key)i(->)h(rbtree\(c,)e(bh,)h
(0\))g(->)598 4528 y([bh':nat])f(rbtree\(0,)h(bh',)g(0\))g(;;)1245
4794 y Fp(Figure)20 b(6:)25 b(A)c(red-black)d(tree)i(implementation)
1908 5349 y(10)p eop
%%Page: 11 11
11 10 bop 275 383 a Fp(A)23 b(sort)h Fk(color)e Fp(is)j(declared)c(for)
i(the)g(type)g(inde)o(x)f(e)o(xpressions)g(representing)f(the)i(colors)
g(of)g(nodes.)33 b(W)-7 b(e)24 b(use)g Fj(0)f Fp(for)150
478 y(black)h(and)g Fj(1)h Fp(for)f(red.)38 b(F)o(or)25
b(simplicity)-5 b(,)25 b(we)g(use)g(inte)o(gers)f(for)g(k)o(e)o(ys.)38
b(Of)25 b(course,)g(one)f(can)h(readily)f(use)h(other)e(ordered)150
574 y(data)g(structures.)32 b(The)23 b(type)f Fk(rbtree)h
Fp(is)h(inde)o(x)o(ed)c(with)j(a)h(triple)f Fk(\(c,)49
b(bh,)g(v\))p Fp(,)24 b(where)e Fn(c)h Fp(is)h(the)f(color)f(of)h(the)g
(node,)150 669 y Fn(bh)f Fp(is)h(the)e(black)h(height)f(of)g(the)h
(tree,)g(and)f Fn(v)26 b Fp(is)d(the)e(number)f(of)i(color)f
(violations.)29 b(W)-7 b(e)23 b(record)d(one)h(color)g(violation)g(if)h
(a)150 765 y(red)g(node)g(is)i(follo)n(wed)d(by)h(another)g(red)g
(node,)g(and)g(thus)h(a)g(RBT)h(must)e(ha)n(v)o(e)h(no)f(color)g
(violations.)31 b(Clearly)-5 b(,)23 b(the)g(types)150
860 y(of)e(constructors)e(indicate)h(that)h(color)f(violations)g(cano)g
(only)g(occur)g(at)h(the)g(top)g(node.)k(Also,)d(notice)e(that)h(a)g
(leaf,)g(that)g(is,)150 956 y Fk(E)p Fp(,)g(is)g(considered)e(black.)26
b(Gi)n(v)o(en)20 b(the)h(datatype)e(declaration)h(and)g(the)g(e)o
(xplanation,)f(it)i(should)f(be)g(clear)h(that)g(the)g(type)f(of)150
1051 y(a)h(RBT)g(is)g(simply)1143 1147 y Fk([c:color][bh:nat])46
b(rbtree\(c,bh,0\))p Fp(,)150 1292 y(that)20 b(is,)h(a)g(tree)f(which)g
(has)g(some)g(top)g(node)f(color)g Fn(c)i Fp(and)f(some)g(black)f
(height)h Fn(bh)g Fp(b)n(ut)g(no)g(color)f(violations.)275
1388 y(It)25 b(is)h(an)g(in)m(v)n(olv)o(ed)d(task)i(to)h(implement)e
(RBT)-6 b(.)26 b(The)f(implementation)e(we)j(present)e(is)j(basically)e
(adopted)e(from)i(the)150 1483 y(one)20 b(in)g([17)n(],)h(though)d
(there)i(are)g(some)f(minor)g(modi\002cations.)24 b(W)-7
b(e)21 b(e)o(xplain)e(ho)n(w)h(the)g(insertion)f(operation)f(on)i(a)g
(RBT)i(is)150 1579 y(implemented.)28 b(Clearly)-5 b(,)21
b(the)h(in)m(v)n(ariant)e(we)i(intend)f(to)h(capture)e(is)j(that)f
(inserting)f(an)g(entry)g(into)h(a)g(RBT)g(yields)g(another)150
1674 y(RBT)-6 b(.)21 b(In)f(other)f(w)o(ords,)h(we)g(intend)g(to)g
(declare)f(that)i(the)f(insertion)f(operation)g(is)i(of)f(the)g(follo)n
(wing)e(type.)150 1836 y Fk(key->[c:color][bh:nat])46
b(rbtree\(c,bh,0\)->[c:color][bh:nat])d(rbtree\(c,bh,0\))150
1998 y Fp(If)21 b(we)h(insert)f(an)g(entry)f(into)h(a)h(RBT)-6
b(,)21 b(some)g(properties)f(on)h(RBT)h(may)f(be)g(violated.)27
b(These)21 b(properties)f(can)g(be)i(restored)150 2093
y(through)c(some)i(rotation)f(operations.)k(The)d(function)f
Fk(restore)g Fp(in)i(Figure)e(6)h(is)h(de\002ned)f(for)f(this)i
(purpose.)275 2189 y(The)e(type)g(of)h Fk(restore)f Fp(is)i(easy)e(to)h
(understand.)j(It)d(states)h(that)f(this)g(function)e(tak)o(es)i(an)g
(entry)-5 b(,)18 b(a)j(tree)e(with)h(at)h(most)150 2284
y(one)k(color)f(violation)g(and)g(a)i(RBT)g(and)e(returns)g(a)i(RBT)g
(tree.)39 b(The)25 b(tw)o(o)g(trees)h(in)f(the)g(ar)o(gument)e(must)i
(ha)n(v)o(e)f(the)h(same)150 2380 y(black)19 b(height)g
Fn(bh)h Fp(for)f(some)g(natural)g(number)f Fn(bh)h Fp(and)g(the)h
(returned)e(RBT)j(has)f(black)f(height)f Fn(bh)e Fj(+)g(1)p
Fp(.)25 b(This)20 b(information)150 2475 y(can)25 b(be)g(of)f(great)h
(help)f(for)g(understanding)e(the)j(code.)38 b(If)25
b(the)g(information)e(had)h(been)g(informally)f(e)o(xpressed)h(through)
150 2571 y(comments,)30 b(it)f(w)o(ould)g(be)g(dif)n(\002cult)f(to)h
(kno)n(w)f(whether)g(the)h(comments)f(can)h(be)g(trusted.)50
b(Also)30 b(notice)e(that)h(it)h(is)g(not)150 2666 y(tri)n(vial)22
b(at)h(all)g(to)f(v)o(erify)f(the)i(information)c(manually)-5
b(.)30 b(W)-7 b(e)23 b(could)f(imagine)f(that)h(almost)h(e)n(v)o
(eryone)d(who)h(did)h(this)h(w)o(ould)150 2762 y(appreciate)c(the)h(a)n
(v)n(ailability)g(of)g(a)g(type-check)o(er)e(to)i(perform)e(it)j
(automatically)-5 b(.)275 2857 y(There)26 b(is)j(a)f(great)f(dif)n
(ference)f(between)g(type-checking)f(a)j(pattern)f(matching)f(clause)h
(in)h(DML)g(and)f(in)g(ML.)h(The)150 2953 y(operational)e(semantics)i
(of)f(ML)h(requires)f(that)h(pattern)e(matching)h(be)g(performed)f
(sequentially)-5 b(,)27 b(that)h(is,)j(the)c(chosen)150
3048 y(pattern)c(matching)g(clause)h(is)i(al)o(w)o(ays)e(the)g(\002rst)
h(one)f(which)g(matches)g(a)g(gi)n(v)o(en)f(v)n(alue.)37
b(F)o(or)23 b(instance,)i(in)f(the)h(de\002nition)150
3144 y(of)c(the)h(function)e Fk(restore)p Fp(,)h(if)h(the)g(last)h
(clause)f(is)g(chosen)f(at)h(run-time,)f(then)g(we)h(kno)n(w)f(the)g
(ar)o(gument)f(of)h Fk(restore)150 3239 y Fp(does)j(not)h(match)f
(either)g(of)g(the)h(clauses)g(ahead)f(of)g(the)h(last)g(one.)38
b(This)25 b(must)g(be)f(tak)o(en)h(into)f(account)f(when)h(we)h(type-)
150 3334 y(checking)20 b(pattern)h(matching)g(in)h(DML.)f(One)h
(approach)e(is)i(to)g(e)o(xpand)e(patterns)i(into)f(disjoint)h(ones.)29
b(F)o(or)22 b(instance,)g(the)150 3430 y(pattern)c Fk(\(a,)50
b(x,)f(b\))19 b Fp(e)o(xpands)f(into)h Fj(36)f Fp(patterns)h
Fj(\()p Fn(patter)r(n)1999 3442 y Fh(1)2036 3430 y Fn(;)14
b(x;)g(patter)r(n)2431 3442 y Fh(2)2469 3430 y Fj(\))p
Fp(,)20 b(where)e Fn(patter)r(n)3038 3442 y Fh(1)3095
3430 y Fp(and)h Fn(patter)r(n)3509 3442 y Fh(2)3566 3430
y Fp(range)150 3525 y(o)o(v)o(er)g(the)i(follo)n(wing)e(six)i
(patterns:)26 b Fk(R\(B)49 b(_,)h(_,)f(B)h(_\))p Fp(,)20
b Fk(R\(B)50 b(_,)f(_,)h(E\))p Fp(,)20 b Fk(R\(E,)49
b(_,)h(B)f(_\))p Fp(,)21 b Fk(R\(E,)49 b(_,)h(E\))p Fp(,)150
3621 y Fk(B)g(_)p Fp(,)20 b(and)g Fk(E)p Fp(.)g(Unfortunately)-5
b(,)17 b(such)j(e)o(xpansion)e(may)i(lead)g(to)h(combinatorial)d(e)o
(xplosion.)23 b(An)d(alternati)n(v)o(e)f(is)i(to)g(require)150
3716 y(the)30 b(programmer)e(to)i(indicate)g(whether)g(such)g(e)o
(xpansion)e(is)j(needed.)55 b(Neither)30 b(of)g(these)g(is)i(currently)
c(a)n(v)n(ailable)i(in)150 3812 y(de)25 b(Caml,)h(and)e(the)h(author)e
(has)j(tak)o(en)e(the)h(incon)m(v)o(enience)c(to)k(e)o(xpand)e
(patterns)h(into)h(disjoint)f(ones)h(when)f(necessary)-5
b(.)150 3907 y(W)e(e)26 b(emphasize)d(that)i(the)g(code)f(in)h(Figure)f
(6)g(must)h(be)g(thus)f(e)o(xpanded)e(in)j(order)e(to)i(pass)g
(type-checking)d(in)j(de)f(Caml.)150 4003 y(Though)18
b(this)j(can)f(be)g(\002x)o(ed)f(straightforw)o(ardly)-5
b(,)17 b(it)k(is)g(currently)e(unclear)g(what)h(method)f(can)h(solv)o
(e)f(the)i(problem)d(best.)275 4098 y(The)28 b(complete)g
(implementation)f(of)i(the)g(insertion)g(operation)e(follo)n(ws)i
(immediately)-5 b(.)50 b(Notice)29 b(that)g(the)g(type)g(of)150
4194 y(function)21 b Fk(ins)i Fp(indicates)g(that)g Fk(ins)g
Fp(may)f(return)g(a)h(tree)g(with)g(one)f(color)g(violation)g(if)h(it)h
(is)g(applied)e(to)h(a)g(tree)g(with)g(red)150 4289 y(top)c(node.)k
(This)d(is)g(\002x)o(ed)f(by)f(replacing)g(the)h(top)g(node)g(with)g(a)
h(black)e(one)h(for)g(e)n(v)o(ery)e(returned)h(tree)h(with)g(a)h(red)f
(top)g(node.)275 4385 y(Moreo)o(v)o(er)m(,)d(we)k(can)f(use)h(an)f(e)o
(xtra)g(inde)o(x)f(to)i(indicate)e(the)i(size)g(of)f(a)h(RBT)-6
b(.)20 b(If)f(we)h(do)f(so,)h(we)g(can)f(then)g(sho)n(w)g(that)h(the)
150 4480 y Fk(insert)g Fp(function)e(al)o(w)o(ays)j(returns)f(a)g(RBT)i
(of)e(size)h Fn(n)d Fj(+)g(1)j Fp(when)e(gi)n(v)o(en)g(a)i(RBT)g(of)f
(size)h Fn(n)g Fp(\(note)f(that)g(an)g(e)o(xception)f(is)150
4576 y(raised)h(if)g(the)h(inserted)e(entry)h(already)f(e)o(xists)h(in)
h(the)f(tree\).)25 b(Please)20 b(refer)g(to)g([23)o(])g(for)g(details.)
150 4813 y Fc(4.4)99 b(Binomial)25 b(Heaps)150 4965 y
Fp(A)18 b(binomial)e(tree)h(is)h(de\002ned)f(recursi)n(v)o(ely;)f(a)i
(binomial)e(tree)h Fn(B)1999 4977 y Fh(0)2054 4965 y
Fp(with)h(rank)e Fj(0)h Fp(consists)h(of)f(a)h(single)f(node)f(and)h(a)
h(binomial)150 5060 y(tree)h Fn(B)357 5072 y Ff(k)q Fh(+1)501
5060 y Fp(of)g(rank)f Fn(k)f Fj(+)c(1)19 b Fp(consists)h(of)e(tw)o(o)i
(link)o(ed)e(binomial)g(trees)h Fn(B)2251 5072 y Ff(k)2311
5060 y Fp(of)g(rank)f Fn(k)k Fp(such)d(that)g(the)g(root)f(of)h(one)f
Fn(B)3513 5072 y Ff(k)3574 5060 y Fp(is)i(the)1908 5349
y(11)p eop
%%Page: 12 12
12 11 bop 150 383 a Fp(leftmost)21 b(son)g(of)g(the)g(other)f
Fn(B)1050 395 y Ff(k)1091 383 y Fp(.)29 b(A)22 b(binomial)e(heap)g
Fn(H)29 b Fp(is)22 b(a)f(collection)f(of)h(binomial)f(trees)i(that)f
(satisfy)h(the)f(properties:)150 478 y(\(a\))f(each)g(binomial)f(tree)i
(in)f Fn(H)28 b Fp(is)21 b(heap-ordered,)c(that)k(is,)g(the)f(k)o(e)o
(y)g(of)g(a)h(node)e(is)j(greater)d(that)i(or)f(equal)g(to)g(the)h(k)o
(e)o(y)e(of)i(its)150 574 y(parent,)f(and)h(\(b\))g(there)g(is)h(at)g
(most)f(one)g(binomial)f(tree)i(in)f Fn(H)29 b Fp(whose)21
b(root)g(has)g(a)h(gi)n(v)o(en)e(de)o(gree.)27 b(Please)22
b(refer)f(to)g([6])g(for)150 669 y(details.)275 765 y(W)-7
b(e)23 b(declare)f(some)g(datatypes)g(in)g(Figure)g(7)h(for)f(forming)e
(binomial)h(heaps.)32 b(The)22 b(type)g Fk(tree\(n\))g
Fp(is)h(for)f(binomial)150 860 y(trees)j(of)f(rank)g
Fn(n)p Fp(,)i(and)d(the)i(type)f Fk(treelist\(n\))f Fp(is)j(for)e(a)g
(list)i(of)e(binomial)g(trees)h(with)f Fo(decr)m(easing)g
Fp(ranks)g(and)f Fn(n)31 b Fj(=)150 956 y Fn(m)10 b Fj(+)g(1)17
b Fp(if)h(the)g(list)h(is)g(not)e(empty)-5 b(,)17 b(where)g
Fn(m)i Fp(is)f(the)g(rank)f(of)h(the)g(\002rst)g(binomial)f(tree)h(in)g
(the)g(list.)25 b(W)-7 b(e)19 b(represent)e(a)h(binomial)150
1051 y(heap)k(as)h(a)f(list)i(of)e(binomial)f(trees)i(with)f
Fo(incr)m(easing)g Fp(ranks.)30 b(F)o(or)22 b(a)h(heap)f(of)g(type)g
Fk(heap\(n\))p Fp(,)g(if)g Fn(n)27 b Fj(=)g(0)22 b Fp(then)g(the)g
(heap)150 1147 y(is)k(empty;)h(otherwise)d Fn(n)32 b
Fj(=)g Fn(m)22 b Fj(+)f(1)k Fp(where)g Fn(m)g Fp(is)h(the)f(rank)f(of)h
(the)g(\002rst)h(binomial)e(tree)h(in)g(the)g(heap.)39
b(Notice)25 b(that)g(we)150 1242 y(attach)d(rank)f(to)h(each)f(tree)h
(node)f(in)h(order)e(to)i(ef)n(\002ciently)f(compute)f(the)i(rank)f(of)
h(a)g(tree)g(while)g(using)f(the)h(type)f(of)h Fk(Node)150
1338 y Fp(to)e(guarantee)f(that)h(the)g(\002rst)h(component)d(of)i
(each)g(node)f(indeed)g(represents)g(the)h(rank)g(of)g(that)g(node.)275
1433 y(Notice)f(that)h(the)g(datatype)e(for)h(binomial)g(trees)h
Fo(does)g(not)f Fp(capture)g(the)g(in)m(v)n(ariant)f(stating)i(that)g
(these)g(trees)g(are)g(heap-)150 1529 y(ordered.)41 b(This)26
b(seems)g(to)h(be)f(be)o(yond)d(the)j(reach)g(of)g(dependent)d
(datatypes.)42 b(Also)26 b(note)g(that)g(we)h(w)o(ould)e(not)h(be)g
(able)150 1624 y(to)g(capture)e(some)h(of)g(the)g(in)m(v)n(ariants)f
(if)i(we)g(used)f(the)g(ordinary)f(list)i(constructors,)f(that)g(is,)j
Fk(nil)d Fp(and)g Fk(cons)p Fp(,)h(to)g(form)150 1720
y(tree)e(lists.)36 b(This)24 b(leads)f(to)h(the)f(introduction)e(of)j
Fk(Tempty)p Fp(,)f Fk(Tcons)p Fp(,)h Fk(Hempty)f Fp(and)g
Fk(Hcons)p Fp(.)35 b(This)23 b(special)h(feature)e(in)150
1815 y(programming)17 b(with)j(dependent)e(datatypes)h(has)i(an)f
(unpleasant)f(consequence,)e(which)j(we)h(mention)e(in)h(Section)g(5.)
275 1911 y(The)31 b(implementation)e(in)i(Figure)g(7)g(and)g(8)g(is)i
(lar)o(gely)d(adopted)f(from)i([17)n(].)59 b(Since)31
b(the)g(type)g(for)g(the)g(function)150 2006 y Fk(merge)c
Fp(is)i(relati)n(v)o(ely)d(comple)o(x,)h(we)h(e)o(xplain)e(it)j(as)f
(follo)n(ws.)46 b(This)28 b(type)f(states)i(that)e(gi)n(v)o(en)g(tw)o
(o)g(binomial)g(heaps)g(of)150 2102 y(types)h Fk(heap\(m\))f
Fp(and)g Fk(heap\(n\))p Fp(,)h(respecti)n(v)o(ely)-5
b(,)28 b(this)g(function)e(returns)h(a)h(binomial)e(heap)i(of)f(type)g
Fk(heap\(l\))g Fp(for)150 2197 y(some)20 b Fn(l)i Fp(such)e(that)g
Fn(l)25 b Fj(=)d Fn(m)f Fp(if)g Fn(n)i Fj(=)f(0)p Fp(,)e(or)g
Fn(l)25 b Fj(=)d Fn(n)f Fp(if)f Fn(m)j Fj(=)g(0)p Fp(,)d(or)g
Fn(l)k Fi(\025)f Fj(min\()p Fn(m;)14 b(n)p Fj(\))24 b
Fn(>)e Fj(0)e Fp(otherwise.)150 2436 y Fq(5)119 b(Limitation)150
2617 y Fp(W)-7 b(e)21 b(mention)e(some)h(limitations)g(of)g(dependent)e
(datatypes)h(in)i(this)g(section.)275 2713 y(In)h(order)f(to)h(capture)
f(in)m(v)n(ariants,)h(we)g(may)g(ha)n(v)o(e)g(to)g(declare)g(ne)n(w)g
(datatypes)f(instead)h(of)h(using)e(e)o(xisting)h(ones.)31
b(F)o(or)150 2808 y(instance,)25 b(we)g(declared)f(the)h(datatype)e
Fk(treelist)h Fp(in)h(Figure)f(7)h(instead)f(of)h(using)f(the)h(e)o
(xisting)e(list)j(constructors)d(to)150 2904 y(form)f(a)i(list)h(of)e
(trees.)35 b(The)23 b(reason)g(is)i(that)e(we)h(w)o(anted)f(to)h(only)e
(form)h(lists)i(of)e(binomial)f(trees)i(with)g(decreasing)e(rank.)150
2999 y(Similarly)-5 b(,)18 b(we)h(introduced)d(the)i(datatype)f
Fk(heap)i Fp(to)f(capture)f(the)i(in)m(v)n(ariant)e(that)h(a)h
(binomial)e(heap)h(is)h(a)g(list)h(of)e(trees)g(with)150
3095 y(increasing)25 b(order)-5 b(.)44 b(This)27 b(forces)f(us)h(to)f
(de\002ne)g(the)h(function)e Fk(to_heap)h Fp(later)m(,)h(which)g
(essentially)f(re)n(v)o(erses)g(a)h(list)h(of)150 3190
y(trees)20 b(and)f(append)e(it)j(to)g(a)g(heap.)k(If)19
b(we)h(used)f(the)g(e)o(xisting)g(list)h(constructors)e(without)h
(declaring)e(either)i(of)g Fk(treelist)150 3285 y Fp(and)i
Fk(heap)p Fp(,)g(we)h(could)e(then)h(use)h(some)f(e)o(xisting)g
(function)f(on)h(lists)h(instead)g(of)f(de\002ning)f
Fk(to_heap)p Fp(.)28 b(In)21 b(order)f(w)o(ords,)150
3381 y(using)g(dependent)e(datatypes)h(may)h(lose)g(some)g
(opportunities)e(for)i(code)f(reuse.)275 3476 y(Another)28
b(limitation)i(can)g(be)g(illustrated)g(using)g(the)g(follo)n(wing)f(e)
o(xample.)54 b(Let)30 b Fk(B)h Fp(be)f(the)g(constructor)f(declared)150
3572 y(in)d(Figure)f(2,)i(which)e(is)i(used)f(to)f(form)g(Braun)g
(trees.)42 b(Suppose)25 b(that)h Fk(B\(x,)49 b(l,)h(r\))26
b Fp(occurs)f(in)g(the)h(code)f(where)h Fo(the)150 3667
y(pr)l(o)o(gr)o(ammer)19 b(knows)g Fp(for)f(some)h(reason)g(that)g
Fk(l)h Fp(is)g(the)f(same)g(size)h(as)g Fk(r)g Fp(or)f(contains)f(one)h
(more)f(element)h(b)n(ut)g(this)h(cannot)150 3763 y(be)25
b(established)g(in)g(the)g(type)f(system)i(of)e(de)h(Caml.)40
b(In)25 b(this)h(case,)g(the)f(code)g(is)h(to)f(be)g(rejected)f(by)h
(the)g(de)g(Caml)g(type-)150 3858 y(check)o(er)m(,)i(though)f(the)h
(code)f(will)i(cause)f(no)g(run-time)f(error)g(\(if)h(we)h(trust)f(the)
g(programmer\).)43 b(The)27 b(situation)g(is)h(v)o(ery)150
3954 y(similar)23 b(to)h(the)f(case)g(where)g(we)g(mo)o(v)o(e)f(from)g
(an)h(untyped)e(programming)f(language)h(into)i(a)g(typed)f(one.)34
b(A)23 b(solution)f(to)150 4049 y(this)g(problem)d(is)k(that)e(we)h
(introduce)d(some)i(run-time)f(checks.)27 b(F)o(or)21
b(instance,)g(we)h(may)f(de\002ne)f(the)i(follo)n(wing)d(function)150
4145 y(and)h(replace)f Fk(B\(x,)49 b(l,)h(r\))20 b Fp(with)g
Fk(make_brauntree)48 b(x)h(l)h(r)p Fp(.)150 4288 y Fk(let)f
(make_brauntree)e(x)j(l)g(r)f(=)250 4384 y(let)g(m)h(=)f(size\(l\))g
(and)g(n)h(=)f(size\(r\))g(in)349 4479 y(if)h(n)f(<=)h(m)f(&&)h(m)f(<=)
h(n+1)f(then)g(B\(x,)g(l,)h(r\))f(else)g(raise)g(Illegal_argument)150
4575 y(withtype)f(int)i(->)f(brauntree)f(->)i(brauntree)e(->)h
(brauntree)150 4718 y Fp(The)21 b(function)e Fk(make_brauntree)g
Fp(can)i(readily)f(pass)h(type-checking)d(in)j(de)g(Caml)h(\(we)f
(refer)f(the)h(interested)g(reader)150 4814 y(to)e([22)o(])g(for)g
(further)f(details\).)24 b(The)19 b(penalty)f(in)i(this)f(case)h(is)g
(that)f Fk(make_brauntree)f Fp(tak)o(es)h Fn(O)r Fj(\(log)3176
4776 y Fh(2)3227 4814 y Fn(n)p Fj(\))h Fp(time)g(to)f(b)n(uild)150
4909 y(a)i(tree)f(of)g(size)h Fn(n)p Fp(,)f(though)e(this)j(can)f(be)g
(a)n(v)n(oided)f(if)i(we)f(store)h(size)f(information)e(in)j(each)e
(node.)275 5005 y(In)24 b(general,)h(if)h(the)f(programmer)d
(anticipates)i(the)h(abo)o(v)o(e)f(situation)g(to)i(occur)e(frequently)
-5 b(,)23 b(then)i(she)g(or)g(he)g(should)150 5100 y(either)j(mak)o(e)g
(sure)g(that)g(run-time)f(checks)h(can)g(be)g(done)f(ef)n(\002ciently)h
(or)g(switch)g(back)g(to)g(non-dependent)d(datatypes.)1908
5349 y(12)p eop
%%Page: 13 13
13 12 bop 150 444 a Fk(datatype)48 b(tree)h(with)g(nat)h(=)349
543 y({n:nat})f(Node\(n\))f(of)i(int\(n\))e(*)i(int)f(*)h
(treelist\(n\))150 743 y(and)f(treelist)g(with)g(nat)g(=)349
842 y(Tempty\(0\))250 942 y(|)g({m:nat}{n:nat)f(|)h(m)h(>=)f(n})h
(Tcons\(m+1\))e(of)h(tree\(m\))g(*)g(treelist\(n\))f(;;)150
1141 y(datatype)g(heap)h(with)g(nat)h(=)349 1241 y(Hempty\(0\))250
1340 y(|)f({m:nat}{n:nat)f(|)h(n)h(=)g(0)f(\\/)h(m+1)f(<)g(n})h
(Hcons\(m+1\))e(of)h(tree\(m\))g(*)g(heap\(n\))g(;;)150
1540 y(let)g(rank)g(=)h(function)e(Node\(r,)h(_,)g(_\))h(->)f(r)150
1639 y(withtype)f({n:nat})h(tree\(n\))f(->)i(int\(n\))e(;;)150
1839 y(let)h(root)g(=)h(function)e(Node\(_,)h(x,)g(_\))h(->)f(x)150
1938 y(withtype)f({n:nat})h(tree\(n\))f(->)i(int)f(;;)150
2137 y(let)g(link)g(\(Node\(r,)g(x1,)g(ts1\))g(as)g(t1\))h(=)f
(function)349 2237 y(Node\(_,)g(x2,)g(ts2\))g(as)h(t2)f(->)349
2337 y(if)h(\(x1)f(<=)g(x2\))h(then)f(Node\(r+1,)f(x1,)h(Tcons\(t2,)f
(ts1\)\))349 2436 y(else)h(Node\(r+1,)f(x2,)i(Tcons\(t1,)e(ts2\)\))150
2536 y(withtype)g({r:nat})h(tree\(r\))f(->)i(tree\(r\))e(->)i
(tree\(r+1\))e(;;)150 2735 y(let)h(rec)h(insTree)e(t)i(=)f(function)349
2835 y(Hempty)g(->)g(Hcons\(t,)g(Hempty\))250 2934 y(|)g(Hcons\(t',)f
(ts'\))h(as)h(ts)f(->)349 3034 y(if)h(rank)f(t)g(<)h(rank)f(t')h(then)f
(Hcons\(t,)f(ts\))h(else)g(insTree)g(\(link)g(t)g(t'\))g(ts')150
3134 y(withtype)f({r:nat}{n:nat)g(|)h(n)h(=)g(0)f(\\/)h(r)f(<)h(n})598
3233 y(tree\(r\))f(->)g(heap\(n\))g(->)g([l:nat)g(|)h(l)f(>)h(r])f
(heap\(l\))g(;;)150 3433 y(let)g(insert)g(x)h(hp)f(=)h(insTree)e
(\(Node\(0,)g(x,)i(Tempty\)\))e(hp)150 3532 y(withtype)g(int)i(->)f
([n:nat])g(heap\(n\))f(->)h([n:nat)g(|)h(n)f(>)h(0])f(heap\(n\))g(;;)
150 3731 y(let)g(rec)h(merge)e(=)i(function)349 3831
y(\(hp1,)f(Hempty\))g(->)g(hp1)250 3931 y(|)g(\(Hempty,)g(hp2\))g(->)g
(hp2)250 4030 y(|)g(\(Hcons\(t1,)f(hp1'\))h(as)h(hp1\),)e(\(Hcons\(t2,)
g(hp2'\))h(as)h(hp2\))f(->)349 4130 y(if)h(rank)f(t1)g(<)h(rank)f(t2)g
(then)g(Hcons\(t1,)g(merge\(hp1',)e(hp2\)\))349 4230
y(else)i(if)h(rank)f(t1)g(>)h(rank)f(t2)g(then)g(Hcons\(t2,)g
(merge\(hp1,)f(hp2'\)\))349 4329 y(else)h(let)h(hp)f(=)h(merge\(hp1',)d
(hp2'\))i(in)h(insTree)e(\(link)h(t1)h(t2\))f(hp)150
4429 y(withtype)f({m:nat}{n:nat})g(heap\(m\))g(*)i(heap\(n\))e(->)598
4528 y([l:nat)h(|)h(\(n)f(=)h(0)f(/\\)h(l)f(=)h(m\))f(\\/)h(\(m)f(=)h
(0)g(/\\)f(l)h(=)f(n\))h(\\/)1047 4628 y(\(l)f(>=)h(min\(m,)e(n\))i(>)f
(0\)])h(heap\(l\))e(;;)939 4993 y Fp(Figure)19 b(7:)25
b(An)c(implementation)d(of)i(binomial)f(heapin)g(de)h(Caml)g(\(I\))1908
5349 y(13)p eop
%%Page: 14 14
14 13 bop 150 355 a Fk(exception)48 b(Heap_is_empty)g(;;)150
554 y(let)h(rec)h(removeMinTree)d(=)j(function)349 654
y(Hempty)f(->)g(raise)g(Heap_is_empty)250 754 y(|)g(Hcons\(t,)g
(Hempty\))f(->)i(\(t,)f(Hempty\))250 853 y(|)g(Hcons\(t,)g(hp\))g(->)
349 953 y(let)h(\(t',)f(hp'\))g(=)g(removeMinTree)f(hp)h(in)349
1052 y(if)h(root)f(t)g(<)h(root)f(t')h(then)f(\(t,)g(hp\))g(else)g
(\(t',)g(Hcons\(t,)g(hp'\)\))150 1152 y(withtype)f({n:nat})598
1252 y(heap\(n\))h(->)598 1351 y([r:nat][l:nat)f(|)h(l)h(=)g(0)f(\\/)h
(l)f(>=)h(n)f(>)h(0])f(\(tree\(r\))g(*)g(heap\(l\)\))g(;;)150
1551 y(let)g(findMin)g(hp)g(=)h(let)f(\(t,)g(_\))h(=)f(removeMinTree)f
(hp)h(in)h(root)f(t)150 1650 y(withtype)f({n:nat})h(heap\(n\))f(->)i
(int)f(;;)150 1849 y(let)g(rec)h(to_heap)e(hp)h(=)h(function)349
1949 y(Tempty)f(->)g(hp)250 2049 y(|)g(Tcons\(t,)g(ts\))g(->)g(to_heap)
g(\(Hcons\(t,)f(hp\)\))h(ts)150 2148 y(withtype)f({m:nat}{n:nat)g(|)h
(m)h(=)g(0)f(\\/)h(m)f(>)h(n})598 2248 y(heap\(m\))f(->)g
(treelist\(n\))f(->)h(heap)h(;;)150 2447 y(let)f(deleteMin)f(hp)i(=)250
2547 y(let)f(\(Node\(_,)f(x,)i(ts\),)f(hp\))g(=)h(removeMinTree)d(hp)
250 2646 y(in)i(merge)g(\(to_heap)f(Hempty)h(ts,)g(hp\))150
2746 y(withtype)f(heap)h(->)h(heap)f(;;)914 3012 y Fp(Figure)20
b(8:)25 b(An)20 b(implementation)e(of)i(binomial)f(heap)h(in)g(de)g
(Caml)h(\(II\))150 3279 y(W)-7 b(e)27 b(recommend)22
b(that)k(the)f(programmer)e(a)n(v)n(oid)i(comple)o(x)e(encodings)h
(when)h(using)f(dependent)g(datatypes)g(to)i(capture)150
3374 y(in)m(v)n(ariants)19 b(in)h(data)g(structures.)150
3617 y Fq(6)119 b(Related)31 b(W)-9 b(ork)150 3799 y
Fp(The)21 b(use)h(of)g(type)f(systems)h(in)g(program)d(error)i
(detection)g(is)h(ubiquitous.)28 b(Usually)-5 b(,)21
b(the)h(types)f(in)h(general)f(purpose)f(pro-)150 3894
y(gramming)e(languages)g(such)h(as)i(ML)f(and)f(Ja)n(v)n(a)h(are)f
(relati)n(v)o(ely)g(ine)o(xpressi)n(v)o(e)f(for)h(the)g(sak)o(e)h(of)g
(practical)f(type-checking.)150 3989 y(In)27 b(these)h(languages,)g
(the)g(use)f(of)h(types)f(in)h(program)d(v)o(eri\002cation)h(is)j(ef)n
(fecti)n(v)o(e)d(b)n(ut)i(too)f(limited.)47 b(Our)27
b(w)o(ork)g(can)h(be)150 4085 y(vie)n(wed)20 b(as)i(pro)o(viding)c(a)k
(more)e(e)o(xpressi)n(v)o(e)f(type)i(system)g(to)g(allo)n(w)g(the)g
(programmer)d(to)j(capture)f(more)g(program)f(prop-)150
4180 y(erties)i(through)e(types)i(and)f(thus)h(catch)f(more)g(errors)g
(at)i(compile-time.)j(As)d(a)f(consequence,)d(types)j(can)g(serv)o(e)f
(as)i(infor)n(-)150 4276 y(mati)n(v)o(e)j(program)f(documentation,)g(f)
o(acilitating)h(program)f(comprehension.)39 b(W)-7 b(e)27
b(assign)f(priority)f(to)h(the)f(practicality)150 4371
y(of)d(type-checking)d(in)k(our)f(language)e(design)i(and)g(emphasize)f
(the)i(need)e(for)h(restricting)g(the)g(e)o(xpressi)n(v)o(eness)f(of)h
(a)h(type)150 4467 y(system.)275 4562 y(In)30 b([21)o(],)j(we)e(ha)n(v)
o(e)f(compared)f(our)h(w)o(ork)g(with)g(some)h(traditional)e(dependent)
g(type)h(systems)h(such)g(as)g(the)g(ones)150 4658 y(underlining)18
b(Coq)k([8)o(])f(and)g(NuPrl)g([5)o(],)g(which)g(are)g(f)o(ar)g(more)f
(re\002ned)g(than)h(the)g(type)g(system)g(of)g(DML.)g(There,)f(we)h
(also)150 4753 y(gi)n(v)o(e)26 b(comparison)f(to)h(the)h(notion)f(of)g
(inde)o(x)o(ed)f(types)h([25)o(])h(\(an)f(earlier)g(v)o(ersion)g(of)g
(which)g(is)i(described)d(in)i([24)o(]\),)h(the)150 4849
y(notion)18 b(of)h(re\002nement)f(types)i([9)o(,)f(7],)g(the)h(notion)e
(of)h(sized)h(types)f([13)o(],)g(and)g(the)g(programming)d(language)i
(Cayenne)g([1].)275 4944 y(There)25 b(ha)n(v)o(e)h(been)g(man)o(y)f
(recent)g(studies)i(on)f(the)g(use)h(of)f(nested)g(datatypes)g([2)o(])g
(in)h(constructing)d(\(sophisticated\))150 5040 y(datatypes)f(to)h
(capture)f(more)h(in)m(v)n(ariants)e(in)j(data)f(structures.)36
b(F)o(or)23 b(instance,)i(a)f(v)n(ariety)f(of)h(e)o(xamples)f(can)h(be)
g(found)e(in)1908 5349 y(14)p eop
%%Page: 15 15
15 14 bop 150 383 a Fp([3)o(,)24 b(18)o(,)h(10)o(,)f(12)o(,)g(11)o(].)
37 b(W)-7 b(e)25 b(feel)f(that)g(the)g(adv)n(antage)e(of)i(this)g
(approach)e(is)j(that)f(it)h(requires)e(relati)n(v)o(ely)f(minor)h
(language)150 478 y(e)o(xtensions,)18 b(which)i(may)f(include)g
(polymorphic)d(recursion,)i(higher)n(-order)f(kinds,)i(rank-2)f
(polymorphism,)e(to)k(e)o(xisting)150 574 y(functional)26
b(programming)e(languages)h(such)j(as)g(Hask)o(ell,)h(while)e
(type-checking)e(in)i(DML)h(is)g(much)e(more)h(in)m(v)n(olv)o(ed.)150
669 y(On)f(the)g(other)f(hand,)h(this)g(approach)e(seems)i(less)h
(\003e)o(xible,)f(often)f(requiring)f(some)i(in)m(v)n(olv)o(ed)e
(treatment)h(at)h(both)f(type)150 765 y(and)j(program)e(le)n(v)o(el.)49
b(The)28 b(important)f(notion)g(of)i(datatype)e(re\002nement)g(in)h
(DML)h(cannot)e(be)h(captured)f(with)i(nested)150 860
y(datatypes.)24 b(F)o(or)c(instance,)f(it)i(is)g(impossible)e(to)h
(form)f(a)i(nested)e(datatype)g(that)h(can)g(capture)f(the)h(notion)f
(of)h(the)g(length)f(of)150 956 y(a)h(list)h(since)f(this)g(w)o(ould)f
(imply)g(that)h(one)f(could)g(simply)g(use)h(types)g(to)g(distinguish)e
(non-empty)f(lists)22 b(from)c(empty)h(ones.)150 1051
y(In)g(general,)e(we)i(think)f(that)h(these)g(tw)o(o)g(approaches)e
(are)i(essentially)g(orthogonal)d(in)j(spite)g(of)f(some)h(similar)g
(moti)n(v)n(ations)150 1147 y(behind)g(their)h(de)n(v)o(elopment)d(and)
j(the)o(y)f(can)h(be)g(readily)g(combined)e(with)i(little)h(ef)n(fort.)
150 1390 y Fq(7)119 b(Conclusion)150 1571 y Fp(The)27
b(use)h(of)f(dependent)e(datatypes)i(in)g(capturing)f(in)m(v)n(ariants)
g(in)h(data)h(structures)f(is)h(no)o(v)o(el.)45 b(This)28
b(practice)f(can)g(of)n(fer)150 1667 y(man)o(y)18 b(adv)n(antages)g
(when)h(we)h(implement)f(algorithms)f(in)i(adv)n(anced)d(programming)f
(languages)j(equipped)e(with)j(such)f(a)150 1762 y(mechanism.)30
b(The)21 b(most)i(signi\002cant)e(adv)n(antage)g(is)i(probably)d(in)i
(program)e(error)h(detection.)30 b(W)-7 b(e)23 b(ar)o(gued)d(in)j
(Section)e(1)150 1857 y(that)30 b(the)g(imprecision)e(of)i(datatypes)f
(in)h(Standard)e(ML)i(or)g(Hask)o(ell)g(in)g(capturing)e(in)m(v)n
(ariants)g(can)i(be)g(a)g(rich)f(source)150 1953 y(for)e(run-time)f
(program)f(errors.)46 b(In)27 b(addition,)h(the)f(dependent)f(type)h
(annotations)e(supplied)i(by)g(the)g(programmer)e(are)150
2048 y(mechanically)j(v)o(eri\002ed)h(and)g(can)g(thus)h(be)f(fully)g
(trusted.)53 b(The)o(y)29 b(can)g(serv)o(e)g(as)i(v)n(aluable)d
(program)g(documentation,)150 2144 y(f)o(acilitating)18
b(program)e(understanding.)21 b(There)d(are)g(also)h(v)n(arious)e(uses)
i(of)f(dependent)f(datatypes)g(in)i(compiler)e(optimiza-)150
2239 y(tion.)275 2335 y(T)-7 b(ype-checking)27 b(in)j(DML)h(is)g(lar)o
(gely)e(independent)f(of)i(the)h(size)g(of)f(a)h(program)d(since)i(a)h
(type-checking)c(unit)k(is)150 2430 y(roughly)23 b(the)h(body)g(of)g(a)
h(tople)n(v)o(el)f(function.)37 b(In)24 b(general,)h(what)f(matters)h
(in)g(type-checking)c(is)26 b(the)f(dif)n(\002culty)e(le)n(v)o(el)i(of)
150 2526 y(the)g(properties)e(that)i(are)g(to)g(be)f(check)o(ed.)38
b(A)25 b(more)f(serious)g(issue)i(is)f(ho)n(w)f(to)h(report)f(error)g
(messages)g(in)h(case)h(of)e(type)150 2621 y(errors.)g(The)19
b(type-checking)d(in)k(de)f(Caml)h(implements)e(a)i(top-do)n(wn)d
(style)j(algorithm,)d(which)i(usually)g(pinpoints)f(to)i(the)150
2717 y(location)25 b(of)h(a)g(type)g(error)-5 b(.)42
b(Unfortunately)-5 b(,)24 b(the)i(author)f(\002nds)h(that)g(it)h(may)f
(often)f(be)h(surprisingly)f(dif)n(\002cult)g(to)h(\002gure)150
2812 y(out)21 b(the)h(cause)g(of)f(a)i(type)e(error)-5
b(.)29 b(On)21 b(the)h(positi)n(v)o(e)f(side,)h(the)g(type-check)o(er)d
(of)j(de)f(Caml)i(is)f(often)f(capable)g(of)h(detecting)150
2908 y(a)29 b(v)n(ariety)e(of)i(subtle)f(errors.)49 b(F)o(or)28
b(instance,)i(the)e(author)f(once)h(used)g Fk(Even\(l1,)49
b(l2\))28 b Fp(to)h(form)e(a)i(random-list)e(\(in)150
3003 y(Figure)21 b(3\))g(and)g(the)h(type-check)o(er)d(raised)j(an)f
(error)g(because)g(it)h(could)f(not)g(pro)o(v)o(e)f(that)h
Fk(l1)h Fp(cannot)f(be)g Fk(Nil)p Fp(.)29 b(If)22 b(this)g(had)150
3099 y(gone)j(unnoticed,)g(it)i(w)o(ould)e(ha)n(v)o(e)h(in)m(v)n
(alidated)e(some)h(in)m(v)n(ariant)g(assumed)g(by)h(the)g(programmer)m
(,)e(potentially)g(causing)150 3194 y(\(dif)n(\002cult\))g(run-time)f
(errors.)38 b(W)-7 b(e)26 b(are)f(currently)e(in)j(the)e(process)h(of)g
(gathering)d(more)i(statistics)j(re)o(garding)22 b(the)j(use)g(of)150
3290 y(de)20 b(Caml.)275 3385 y(The)26 b(usual)g(focus)h(of)f(data)h
(structure)e(design)i(is)g(mainly)f(on)g(enhancing)f(time)i(and/or)e
(space)i(ef)n(\002cienc)o(y)-5 b(,)26 b(and)g(less)150
3481 y(attention)17 b(is)j(paid)d(to)i(program)d(error)h(detection.)23
b(The)18 b(introduction)e(of)i(dependent)e(datatypes)h(pro)o(vides)f
(an)j(opportunity)150 3576 y(to)h(remedy)f(the)h(situation.)25
b(In)20 b(general,)f(we)h(are)g(interested)g(in)g(promoting)e(the)i
(use)h(of)f(light-weight)e(formal)h(methods)g(in)150
3672 y(practical)k(programming,)d(enhancing)h(the)i(rob)n(ustness)g(of)
g(programs.)32 b(W)-7 b(e)24 b(ha)n(v)o(e)f(presented)f(some)h
(concrete)f(e)o(xamples)150 3767 y(of)h(dependent)e(datatypes)i(in)g
(this)h(paper)f(in)g(support)f(of)h(such)g(a)h(promotion.)32
b(W)-7 b(e)25 b(hope)d(these)h(e)o(xamples)g(can)g(raise)h(the)150
3862 y(a)o(w)o(areness)c(of)g(dependent)e(datatypes)h(and)h(their)g
(use)g(in)g(implementing)e(algorithms.)150 4105 y Fq(8)119
b(Ackno)o(wledgment)150 4287 y Fp(I)26 b(thank)e(Chris)i(Okasaki,)g
(Ralf)g(Hinze)g(and)f(an)g(anon)o(ymous)e(referee)h(for)h(their)g
(constructi)n(v)o(e)f(comments,)h(which)g(ha)n(v)o(e)150
4382 y(undoubtedly)17 b(raised)j(the)g(quality)f(of)h(the)h(paper)-5
b(.)150 4612 y Fq(Refer)n(ences)187 4781 y Fr([1])42
b(Lennart)28 b(Augustsson.)59 b(Cayenne)29 b(\226)g(a)f(language)i
(with)e(dependent)i(types.)57 b(In)29 b Fb(Pr)m(oceedings)g(of)f(the)g
(3r)m(d)i(A)n(CM)d(SIGPLAN)316 4872 y(International)20
b(Confer)m(ence)g(on)g(Functional)f(Pr)m(o)o(gr)o(amming)p
Fr(,)h(pages)g(239\226250,)h(1998.)187 4996 y([2])42
b(Richard)25 b(Bird)g(and)h(Lambert)f(Meertens.)47 b(Nested)25
b(datatypes.)48 b(In)25 b Fb(Mathematics)h(of)f(pr)m(o)o(gr)o(am)h
(construction)p Fr(,)i(pages)e(52\22667.)316 5088 y(Springer)o(-V)-8
b(erlag)18 b(LNCS)g(1422,)i(1998.)1908 5349 y Fp(15)p
eop
%%Page: 16 16
16 15 bop 187 383 a Fr([3])42 b(Richard)20 b(Bird)f(and)h(Ross)g(P)o
(aterson.)29 b(de)20 b(bruijn)g(notation)g(as)f(a)h(nested)g
(datatypes.)30 b Fb(J)n(ournal)21 b(of)e(Functional)i(Pr)m(o)o(gr)o
(amming)p Fr(,)f(T)-6 b(o)316 474 y(appear)l(.)187 595
y([4])42 b(W)-7 b(.)19 b(Braun)i(and)g(M.)f(Rem.)31 b(A)20
b(logarithmic)h(implementation)g(of)f(fe)o(xible)h(arrays.)31
b(T)-5 b(echnical)21 b(Report)f(Memorandum)j(MS83/1,)316
686 y(Eidenho)o(v)o(en)d(Uni)n(v)o(ersity)g(of)e(T)-5
b(echnology)g(,)21 b(1983.)187 806 y([5])42 b(Robert)24
b(L.)e(Constable)i(et)f(al.)41 b Fb(Implementing)24 b(Mathematics)h
(with)e(the)g(NuPrl)g(Pr)m(oof)g(De)o(velopment)h(System)p
Fr(.)42 b(Prentice-Hall,)316 898 y(Engle)n(w)o(ood)20
b(Clif)n(fs,)e(Ne)n(w)h(Jerse)o(y)-5 b(,)19 b(1986.)187
1018 y([6])42 b(Thomas)27 b(H.)g(Corman,)i(Charles)e(E.)f(Leiserson,)j
(and)e(Ronald)h(L.)e(Ri)n(v)o(est.)52 b Fb(Intr)m(oduction)28
b(to)f(Algorithms)p Fr(.)52 b(The)27 b(MIT)g(Press,)316
1109 y(Cambridge,)19 b(Massachusetts,)h(1989.)187 1230
y([7])42 b(Ro)n(w)o(an)20 b(Da)o(vies.)26 b(Practical)18
b(re\002nement-type)i(checking.)29 b(Thesis)18 b(Proposal,)h(No)o(v)o
(ember)h(1997.)187 1350 y([8])42 b(Gilles)18 b(Do)n(wek,)h(Amy)g(Felty)
-5 b(,)18 b(Hugo)i(Herbelin,)f(G)t(\264)-29 b(erard)19
b(Huet,)f(Chet)h(Murthy)-5 b(,)19 b(Catherine)g(P)o(arent,)f(Christine)
h(P)o(aulin-Mohring,)316 1441 y(and)28 b(Benjamin)g(W)-6
b(erner)l(.)55 b(The)27 b(Coq)h(proof)h(assistant)e(user')l(s)h(guide.)
55 b(Rapport)29 b(T)-5 b(echniques)28 b(154,)j(INRIA,)26
b(Rocquencourt,)316 1533 y(France,)19 b(1993.)28 b(V)-8
b(ersion)19 b(5.8.)187 1653 y([9])42 b(T)m(im)26 b(Freeman)g(and)h
(Frank)g(Pfenning.)50 b(Re\002nement)27 b(types)g(for)f(ML.)50
b(In)26 b Fb(A)n(CM)g(SIGPLAN)f(Confer)m(ence)i(on)g(Pr)m(o)o(gr)o
(amming)316 1745 y(Langua)o(g)o(e)21 b(Design)e(and)h(Implementation)p
Fr(,)g(pages)f(268\226277,)i(T)-6 b(oronto,)19 b(Ontario,)g(1991.)150
1865 y([10])42 b(Ralf)23 b(Hinze.)43 b(Numerical)24 b(Representations)h
(as)f(Higher)o(-Order)f(Nested)i(T)-6 b(ypes.)42 b(T)-5
b(echnical)24 b(Report)g(IAI-TR-98-12,)h(Institut)316
1956 y(f)6 b(\250)-31 b(ur)19 b(Informatik)g(III,)f(Uni)n(v)o(ersit)t
(\250)-29 b(at)19 b(Bonn,)g(April)f(1998.)150 2077 y([11])42
b(Ralf)28 b(Hinze.)56 b(Constructing)29 b(Red-Black)g(T)m(rees.)57
b(In)28 b Fb(Pr)m(oceedings)h(of)f(W)-7 b(orkshop)30
b(on)f(Algorithmic)f(Aspects)g(of)g(Advanced)316 2168
y(Pr)m(o)o(gr)o(amming)20 b(Langua)o(g)o(es)p Fr(,)h(September)e(1999.)
150 2288 y([12])42 b(Ralf)18 b(Hinze.)27 b(Manuf)o(acturing)21
b(Datatypes.)27 b(In)19 b Fb(Pr)m(oceedings)h(of)f(W)-7
b(orkshop)21 b(on)e(Algorithmic)g(Aspects)g(of)f(Advanced)j(Pr)m(o)o
(gr)o(am-)316 2380 y(ming)27 b(Langua)o(g)o(es)p Fr(,)j(September)d
(1999.)53 b(Also)27 b(a)o(v)n(ailable)g(as)f(T)-5 b(echnical)27
b(Report)g(IAI-TR-99-5,)h(Institut)e(f)6 b(\250)-31 b(ur)27
b(Informatik)g(III,)316 2471 y(Uni)n(v)o(ersit)t(\250)-29
b(at)19 b(Bonn.)150 2591 y([13])42 b(John)30 b(Hughes,)i(Lars)c(P)o
(areto,)j(and)e(Amr)g(Sabry)-5 b(.)58 b(Pro)o(ving)29
b(the)g(correctness)h(of)f(reacti)n(v)o(e)g(systems)g(using)h(sized)f
(types.)59 b(In)316 2683 y Fb(Confer)m(ence)20 b(Recor)m(d)f(of)g(23r)m
(d)h(A)n(CM)d(SIGPLAN)h(Symposium)h(on)g(Principles)g(of)f(Pr)m(o)o(gr)
o(amming)i(Langua)o(g)o(es)p Fr(,)g(pages)g(410\226423,)316
2774 y(1996.)150 2894 y([14])42 b(INRIA.)26 b(Caml-light.)g
Fa(http://caml.inria.fr)p Fr(.)150 3015 y([15])42 b(Robin)27
b(Milner)m(,)i(Mads)e(T)-6 b(ofte,)28 b(Robert)f(W)-7
b(.)26 b(Harper)m(,)i(and)g(D.)e(MacQueen.)53 b Fb(The)26
b(De\002nition)i(of)e(Standar)m(d)j(ML)p Fr(.)51 b(MIT)27
b(Press,)316 3106 y(Cambridge,)19 b(Massachusetts,)h(1997.)150
3226 y([16])42 b(Chris)16 b(Okasaki.)k(Three)c(Algorithms)g(on)h(Braun)
f(T)m(rees)g(by)g(Chris)g(Okasaki.)21 b Fb(J)n(ournal)c(of)f
(Functional)g(Pr)m(o)o(gr)o(amming)p Fr(,)h(7\(6\):661\226)316
3318 y(666,)i(No)o(v)o(ember)h(1997.)150 3438 y([17])42
b(Chris)19 b(Okasaki.)27 b Fb(Pur)m(ely)19 b(Functional)h(Data)f
(Structur)m(es)p Fr(.)28 b(Cambridge)20 b(Uni)n(v)o(ersity)f(Press,)f
(1998.)150 3558 y([18])42 b(Chris)22 b(Okasaki.)36 b(From)22
b(F)o(ast)f(Exponentiation)i(to)f(Square)g(Matrices:)29
b(An)22 b(Adv)o(enture)h(in)f(T)-6 b(ypes.)36 b(In)22
b Fb(Pr)m(oceedings)h(of)f(the)g(4th)316 3650 y(A)n(CM)c(SIGPLAN)g
(International)i(Confer)m(ence)g(on)g(Functional)f(Pr)m(o)o(gr)o
(amming)p Fr(,)h(September)f(1999.)150 3770 y([19])42
b(Simon)48 b(Pe)o(yton)h(Jones)h(et)e(al.)121 b(Hask)o(ell)49
b(98)g(\226)g(A)f(non-strict,)56 b(purely)49 b(functional)g(language.)
123 b(A)-6 b(v)n(ailable)50 b(from)316 3861 y Fa
(http://www.haskell.org/onlinereport/)p Fr(,)12 b(February)20
b(1999.)150 3982 y([20])42 b(H.)29 b(Xi)h(and)g(F)-6
b(.)29 b(Pfenning.)63 b(Eliminating)30 b(array)g(bound)i(checking)f
(through)g(dependent)h(types.)63 b(In)30 b Fb(Pr)m(oceedings)h(of)f(A)n
(CM)316 4073 y(SIGPLAN)d(Confer)m(ence)j(on)f(Pr)m(o)o(gr)o(amming)g
(Langua)o(g)o(e)h(Design)f(and)g(Implementation)p Fr(,)i(pages)e
(249\226257,)k(Montreal,)e(June)316 4164 y(1998.)150
4285 y([21])42 b(H.)20 b(Xi)g(and)h(F)-6 b(.)20 b(Pfenning.)32
b(Dependent)22 b(types)f(in)g(practical)g(programming.)33
b(In)21 b Fb(Pr)m(oceedings)g(of)g(A)n(CM)e(SIGPLAN)h(Symposium)316
4376 y(on)f(Principles)g(of)g(Pr)m(o)o(gr)o(amming)h(Langua)o(g)o(es)p
Fr(,)h(pages)e(214\226227,)i(San)e(Antonio,)g(January)h(1999.)150
4497 y([22])42 b(Hongwei)27 b(Xi.)49 b Fb(Dependent)28
b(T)-6 b(ypes)26 b(in)g(Pr)o(actical)g(Pr)m(o)o(gr)o(amming)p
Fr(.)51 b(PhD)26 b(thesis,)h(Carne)o(gie)g(Mellon)g(Uni)n(v)o(ersity)-5
b(,)28 b(1998.)51 b(pp.)316 4588 y(viii+189.)19 b(A)-6
b(v)n(ailable)20 b(as)f Fa(http://www.cs.cmu.edu/\230hwxi/DML/thesis.)o
(ps)p Fr(.)150 4708 y([23])42 b(Hongwei)20 b(Xi.)26 b(Some)19
b(programming)h(e)o(xamples)g(in)f(de)g(Caml.)27 b(A)-6
b(v)n(ailable)19 b(at)316 4800 y Fa
(http://www.cse.ogi.edu/\230hongwei/DML/deC)o(aml/ex)o(amples)o(/)p
Fr(,)13 b(1999.)150 4920 y([24])42 b(Christoph)19 b(Zenger)l(.)28
b(Inde)o(x)o(ed)20 b(types.)27 b Fb(Theor)m(etical)19
b(Computer)h(Science)p Fr(,)f(187:147\226165,)j(1997.)150
5040 y([25])42 b(Christoph)18 b(Zenger)l(.)24 b Fb(Indizierte)17
b(T)-6 b(ypen)p Fr(.)25 b(PhD)16 b(thesis,)i(F)o(akult)t(\250)-29
b(at)17 b(f)6 b(\250)-31 b(ur)17 b(Informatik,)h(Uni)n(v)o(ersit)t
(\250)-29 b(at)17 b(Karlsruhe,)h(1998.)24 b(F)o(orthcoming.)1908
5349 y Fp(16)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
