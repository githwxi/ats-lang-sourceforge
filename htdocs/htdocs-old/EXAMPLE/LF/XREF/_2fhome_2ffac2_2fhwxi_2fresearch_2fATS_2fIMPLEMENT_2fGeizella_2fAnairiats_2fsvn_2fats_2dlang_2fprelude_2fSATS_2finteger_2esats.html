<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <style type="text/css">
    span.comment {color:#787878;font-style:italic}
    span.extern  {color:#A52A2A}
    span.keyword {color:#000000;font-weight:bold}
    span.neuexp  {color:#800080}
    span.staexp  {color:#0000FF}
    span.dynexp  {color:#E80000}
    span.prfexp  {color:#009000}
    span.stacstdec  {text-decoration:none}
    span.stacstuse  {color:#0000CF;text-decoration:underline}
    span.dyncstdec  {text-decoration:none}
    span.dyncstimp  {color:#B80000;text-decoration:underline}
    span.dyncstuse  {color:#B80000;text-decoration:underline}
    body          {color:#E80000;background-color:#E0E0E0}
  </style>
</head>
<body>
<pre>
<span class="comment">(***********************************************************************)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                         Applied Type System                         *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                              Hongwei Xi                             *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(***********************************************************************)</span>

<span class="comment">(*
** ATS - Unleashing the Potential of Types!
**
** Copyright (C) 2002-2008 Hongwei Xi, Boston University
**
** All rights reserved
**
** ATS is free software;  you can  redistribute it and/or modify it under
** the terms of the GNU LESSER GENERAL PUBLIC LICENSE as published by the
** Free Software Foundation; either version 2.1, or (at your option)  any
** later version.
** 
** ATS is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without  even  the  implied  warranty  of MERCHANTABILITY or
** FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License
** for more details.
** 
** You  should  have  received  a  copy of the GNU General Public License
** along  with  ATS;  see the  file COPYING.  If not, please write to the
** Free Software Foundation,  51 Franklin Street, Fifth Floor, Boston, MA
** 02110-1301, USA.
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* author: Hongwei Xi (hwxi AT cs DOT bu DOT edu) *)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#include</span> <span class="neuexp">"prelude/params.hats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#if</span> <span class="neuexp">VERBOSE_PRELUDE</span> <span class="keyword">#then</span>

<span class="keyword">#print</span> <span class="neuexp">"Loading [integer.sats] starts!\n"</span>

<span class="keyword">#endif</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// signed integers (of unindexed type)
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">castfn</span> <a name="1708"><span class="dyncstdec">int_of_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="1796"><span class="dyncstdec">int_of_char <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">char</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_int_of_char"
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_char</span>

<span class="keyword">fun</span> <a name="1886"><span class="dyncstdec">int_of_schar <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">schar</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_int_of_schar"
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_schar</span>

<span class="keyword">fun</span> <a name="1980"><span class="dyncstdec">int_of_uchar <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">uchar</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_int_of_uchar"
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_uchar</span>

<span class="comment">// This function is based on [atoi] in [stdlib.h]
</span><span class="keyword">fun</span> <a name="2124"><span class="dyncstdec">int_of_string <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_int_of_string"
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_string</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="2293"><span class="dyncstdec">abs_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_abs_int"
<span class="neuexp"><span class="keyword">overload</span> abs <span class="keyword">with</span> abs_int</span>

<span class="keyword">fun</span> <a name="2367"><span class="dyncstdec">neg_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_neg_int"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> neg_int</span>

<span class="keyword">fun</span> <a name="2439"><span class="dyncstdec">succ_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_succ_int"

<span class="keyword">and</span> <a name="2489"><span class="dyncstdec">pred_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_pred_int"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_int</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_int</span>

<span class="keyword">fun</span> <a name="2596"><span class="dyncstdec">add_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_add_int_int"

<span class="keyword">and</span> <a name="2664"><span class="dyncstdec">sub_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_sub_int_int"

<span class="keyword">and</span> <a name="2732"><span class="dyncstdec">mul_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_mul_int_int"

<span class="keyword">and</span> <a name="2800"><span class="dyncstdec">div_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_div_int_int"

<span class="keyword">and</span> <a name="2868"><span class="dyncstdec">mod_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_mod_int_int"

<span class="keyword">and</span> <a name="2936"><span class="dyncstdec">gcd_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_gcd_int_int"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> gcd <span class="keyword">with</span> gcd_int_int</span>

<span class="keyword">fun</span> <a name="3177"><span class="dyncstdec">lt_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_int_int"
<span class="keyword">and</span> <a name="3243"><span class="dyncstdec">lte_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_int_int"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_int_int</span>

<span class="keyword">fun</span> <a name="3368"><span class="dyncstdec">gt_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_int_int"
<span class="keyword">and</span> <a name="3434"><span class="dyncstdec">gte_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_int_int"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_int_int</span>

<span class="keyword">fun</span> <a name="3559"><span class="dyncstdec">eq_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_int_int"
<span class="keyword">and</span> <a name="3625"><span class="dyncstdec">neq_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_int_int"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_int_int</span>

<span class="keyword">fun</span> <a name="3750"><span class="dyncstdec">compare_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_int_int"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_int_int</span>

<span class="keyword">fun</span> <a name="3864"><span class="dyncstdec">max_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_max_int_int"
<span class="keyword">and</span> <a name="3931"><span class="dyncstdec">min_int_int <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_min_int_int"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_int_int</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_int_int</span>

<span class="keyword">fun</span> <a name="4060"><span class="dyncstdec">square_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_square_int"
<span class="neuexp"><span class="keyword">overload</span> square <span class="keyword">with</span> square_int</span>

<span class="keyword">fun</span> <a name="4146"><span class="dyncstdec">cube_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_cube_int"
<span class="neuexp"><span class="keyword">overload</span> cube <span class="keyword">with</span> cube_int</span>

<span class="keyword">fun</span> <a name="4224"><span class="dyncstdec">pow_int_int1 <span class="keyword">(</span>base<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> exponent<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_pow_int_int1"
<span class="neuexp"><span class="keyword">overload</span> pow <span class="keyword">with</span> pow_int_int1</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// bit operations
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="4379"><span class="dyncstdec">asl_int_int1 <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_asl_int_int1"

<span class="keyword">and</span> <a name="4447"><span class="dyncstdec">asr_int_int1 <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "atspre_asr_int_int1"

<span class="neuexp"><span class="keyword">overload</span> &lt;&lt; <span class="keyword">with</span> asl_int_int1</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;&gt; <span class="keyword">with</span> asr_int_int1</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_int

<span class="keyword">fun</span> <a name="4617"><span class="dyncstdec">fprint0_int <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_int"
<span class="neuexp"><span class="keyword">overload</span> fprint_int <span class="keyword">with</span> fprint0_int</span>

<span class="keyword">fun</span> <a name="4733"><span class="dyncstdec">fprint1_int <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_int"
<span class="neuexp"><span class="keyword">overload</span> fprint_int <span class="keyword">with</span> fprint1_int</span>

<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_int</span>

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="4929"><span class="dyncstdec">print_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "atspre_print_int"
<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_int</span>

<span class="keyword">fun</span> <a name="5016"><span class="dyncstdec">prerr_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "atspre_prerr_int"
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_int</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fscan_int_exn

<span class="keyword">fun</span> <a name="5147"><span class="dyncstdec">fscan0_int_exn <span class="keyword">(</span>inp<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fscan_int_exn"
<span class="neuexp"><span class="keyword">overload</span> fscan_int_exn <span class="keyword">with</span> fscan0_int_exn</span>

<span class="keyword">fun</span> <a name="5284"><span class="dyncstdec">fscan1_int_exn <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> r<span class="keyword">)</span></span></span> <span class="keyword">|</span> inp<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fscan_int_exn"
<span class="neuexp"><span class="keyword">overload</span> fscan_int_exn <span class="keyword">with</span> fscan1_int_exn</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="5507"><span class="dyncstdec">tostrptr_int
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_int"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_int</span>
<span class="keyword">fun</span> <a name="5606"><span class="dyncstdec">tostring_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_int"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_int</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// unsigned integers (of unindexed type)
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">castfn</span> <a name="5790"><span class="dyncstdec">uint_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> uint_of <span class="keyword">with</span> uint_of_int</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="5879"><span class="dyncstdec">uint_of_char <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">char</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_uint_of_char"
<span class="neuexp"><span class="keyword">overload</span> uint_of <span class="keyword">with</span> uint_of_char</span>

<span class="keyword">fun</span> <a name="5976"><span class="dyncstdec">uint_of_double <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp">double</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_uint_of_double"
<span class="neuexp"><span class="keyword">overload</span> uint_of <span class="keyword">with</span> uint_of_double</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="6152"><span class="dyncstdec">succ_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a> <span class="keyword">=</span> "atspre_succ_uint"
<span class="keyword">and</span> <a name="6205"><span class="dyncstdec">pred_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a> <span class="keyword">=</span> "atspre_pred_uint"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_uint</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_uint</span>

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="6322"><span class="dyncstdec">add_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_add_uint_uint"

<span class="keyword">and</span> <a name="6397"><span class="dyncstdec">sub_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_sub_uint_uint"

<span class="keyword">and</span> <a name="6472"><span class="dyncstdec">mul_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_mul_uint_uint"

<span class="keyword">and</span> <a name="6547"><span class="dyncstdec">div_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_div_uint_uint"

<span class="keyword">and</span> <a name="6622"><span class="dyncstdec">mod_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_mod_uint_uint"

<span class="keyword">and</span> <a name="6697"><span class="dyncstdec">gcd_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_gcd_uint_uint"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> gcd <span class="keyword">with</span> gcd_uint_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="6978"><span class="dyncstdec">square_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_square_uint"

<span class="neuexp"><span class="keyword">overload</span> square <span class="keyword">with</span> square_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="7093"><span class="dyncstdec">lt_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_uint_uint"
<span class="keyword">and</span> <a name="7165"><span class="dyncstdec">lte_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_uint_uint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_uint_uint</span>

<span class="keyword">fun</span> <a name="7300"><span class="dyncstdec">gt_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_uint_uint"
<span class="keyword">and</span> <a name="7372"><span class="dyncstdec">gte_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_uint_uint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_uint_uint</span>

<span class="keyword">fun</span> <a name="7507"><span class="dyncstdec">eq_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_uint_uint"
<span class="keyword">and</span> <a name="7579"><span class="dyncstdec">neq_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_uint_uint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_uint_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="7735"><span class="dyncstdec">compare_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_uint_uint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_uint_uint</span>

<span class="keyword">fun</span> <a name="7857"><span class="dyncstdec">max_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_max_uint_uint"

<span class="keyword">and</span> <a name="7932"><span class="dyncstdec">min_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_min_uint_uint"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_uint_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// bit operations
</span>
<span class="keyword">fun</span> <a name="8112"><span class="dyncstdec">lnot_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_lnot_uint" <span class="comment">(* bitwise *)</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> lnot_uint</span>

<span class="keyword">fun</span> <a name="8208"><span class="dyncstdec">land_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_land_uint_uint"

<span class="keyword">fun</span> <a name="8285"><span class="dyncstdec">lor_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_lor_uint_uint"

<span class="keyword">fun</span> <a name="8360"><span class="dyncstdec">lxor_uint_uint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_lxor_uint_uint"

<span class="neuexp"><span class="keyword">overload</span> land <span class="keyword">with</span> land_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> lor <span class="keyword">with</span> lor_uint_uint</span>
<span class="neuexp"><span class="keyword">overload</span> lxor <span class="keyword">with</span> lxor_uint_uint</span>

<span class="keyword">fun</span> <a name="8538"><span class="dyncstdec">lsl_uint_int1 <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_lsl_uint_int1"

<span class="keyword">and</span> <a name="8610"><span class="dyncstdec">lsr_uint_int1 <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a>
  <span class="keyword">=</span> "atspre_lsr_uint_int1"

<span class="neuexp"><span class="keyword">overload</span> &lt;&lt; <span class="keyword">with</span> lsl_uint_int1</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;&gt; <span class="keyword">with</span> lsr_uint_int1</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_uint

<span class="keyword">fun</span> <a name="8787"><span class="dyncstdec">fprint0_uint <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_uint"

<span class="keyword">fun</span> <a name="8869"><span class="dyncstdec">fprint1_uint <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_uint"

<span class="neuexp"><span class="keyword">overload</span> fprint_uint <span class="keyword">with</span> fprint0_uint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint_uint <span class="keyword">with</span> fprint1_uint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="9127"><span class="dyncstdec">print_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_print_uint"

<span class="keyword">and</span> <a name="9189"><span class="dyncstdec">prerr_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_prerr_uint"

<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_uint</span>
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_uint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="9357"><span class="dyncstdec">tostrptr_uint
  <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_uint"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_uint</span>
<span class="keyword">fun</span> <a name="9460"><span class="dyncstdec">tostring_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_uint"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_uint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// signed integers (of indexed type)
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">castfn</span> <a name="9644"><span class="dyncstdec">int1_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> int i</span></span></a>
<span class="keyword">castfn</span> <a name="9689"><span class="dyncstdec">int1_of_uint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int i</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> int1_of <span class="keyword">with</span> int1_of_int</span>
<span class="neuexp"><span class="keyword">overload</span> int1_of <span class="keyword">with</span> int1_of_uint1</span>

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="9811"><span class="dyncstdec">int1_of_string <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> int i</span></span></a>
  <span class="keyword">=</span> "atspre_int1_of_string"
<span class="neuexp"><span class="keyword">overload</span> int1_of <span class="keyword">with</span> int1_of_string</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="9975"><span class="dyncstdec">iabs <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>j<span class="keyword">:</span>int <span class="keyword">|</span> abs_r <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">)</span><span class="keyword">]</span> int j</span></span></a>
  <span class="keyword">=</span> "atspre_iabs"
<span class="neuexp"><span class="keyword">overload</span> abs <span class="keyword">with</span> iabs</span>

<span class="keyword">fun</span> <a name="10077"><span class="dyncstdec">ineg <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span><span class="keyword">~</span>i<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ineg"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> ineg</span>

<span class="keyword">fun</span> <a name="10157"><span class="dyncstdec">isucc <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i + 1<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_isucc"
<span class="keyword">and</span> <a name="10220"><span class="dyncstdec">ipred <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i - 1<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ipred"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> isucc</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> ipred</span>

<span class="keyword">fun</span> <a name="10335"><span class="dyncstdec">iadd <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i+j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_iadd"
<span class="keyword">and</span> <a name="10406"><span class="dyncstdec">isub <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i-j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_isub"
<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> iadd</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> isub</span>

<span class="keyword">fun</span> <a name="10520"><span class="dyncstdec">imul <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i*j<span class="keyword">)</span></span></span></a> <span class="comment">// [j] must be a constant!
</span>  <span class="keyword">=</span> "atspre_imul"
<span class="keyword">and</span> <a name="10620"><span class="dyncstdec">idiv <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int <span class="keyword">|</span> j &lt;&gt; 0<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int <span class="keyword">(</span>i/j<span class="keyword">)</span></span></span></a> <span class="comment">// [j] must be a constant!
</span>  <span class="keyword">=</span> "atspre_idiv"
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> imul</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> idiv</span>

<span class="keyword">fun</span> <a name="10772"><span class="dyncstdec">igcd <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>int <span class="keyword">|</span> r &gt;= 0<span class="keyword">]</span> int r</span></span></a> <span class="keyword">=</span> "atspre_igcd"
<span class="neuexp"><span class="keyword">overload</span> gcd <span class="keyword">with</span> igcd</span>

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="10884"><span class="dyncstdec">imul1
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">Int</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">Int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Int</span></span></a> <span class="keyword">=</span> "atspre_imul1"
<span class="keyword">and</span> <a name="10937"><span class="dyncstdec">idiv1 <span class="staexp"><span class="keyword">{</span>j<span class="keyword">:</span>int <span class="keyword">|</span> j &lt;&gt; 0<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">Int</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Int</span></span></a> <span class="keyword">=</span> "atspre_idiv1"
<span class="keyword">fun</span> <a name="11009"><span class="dyncstdec">igcd1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>int <span class="keyword">|</span> r &gt;= 0<span class="keyword">]</span> int r</span></span></a> <span class="keyword">=</span> "atspre_igcd1"
<span class="comment">// end of [igcd1]
</span>
<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="11118"><span class="dyncstdec">imul2 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span>
  <span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>p<span class="keyword">:</span>int<span class="keyword">]</span> <span class="keyword">(</span>MUL <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> p<span class="keyword">)</span> <span class="keyword">|</span> int p<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "atspre_imul2"
<span class="keyword">fun</span> <a name="11216"><span class="dyncstdec">igcd2 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span>
  <span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>int<span class="keyword">]</span> <span class="keyword">(</span>GCD <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> r<span class="keyword">)</span> <span class="keyword">|</span> int r<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "atspre_igcd2"

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="11319"><span class="dyncstdec">nmul <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Nat</span></span></a> <span class="keyword">=</span> "atspre_nmul"
<span class="keyword">fun</span> <a name="11368"><span class="dyncstdec">ndiv <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">Pos</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Nat</span></span></a> <span class="keyword">=</span> "atspre_ndiv"
<span class="comment">// HX: there is no [ndiv1]
</span><span class="keyword">fun</span> <a name="11444"><span class="dyncstdec">ndiv2 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">;</span>j<span class="keyword">:</span>pos<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span>
  <span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">,</span>r<span class="keyword">:</span>nat <span class="keyword">|</span> r <span class="keyword">&lt;</span> j<span class="keyword">]</span> <span class="keyword">(</span>MUL <span class="keyword">(</span>q<span class="keyword">,</span> j<span class="keyword">,</span> i-r<span class="keyword">)</span> <span class="keyword">|</span> int q<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "atspre_ndiv2"
<span class="comment">// end of [ndiv2]
</span>
<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="11581"><span class="dyncstdec">nmod <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int <span class="keyword">|</span> i &gt;= 0<span class="keyword">;</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span> <span class="comment">// [j] must be a constant!
</span>  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span> <span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">,</span>r<span class="keyword">:</span>nat <span class="keyword">|</span> r <span class="keyword">&lt;</span> j<span class="keyword">;</span> i == q*j + r<span class="keyword">]</span> int r</span></span></a>
  <span class="keyword">=</span> "atspre_nmod"
<span class="keyword">fun</span> <a name="11726"><span class="dyncstdec">nmod1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int <span class="keyword">|</span> i &gt;= 0<span class="keyword">;</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">natLt j</span></span></a>
  <span class="keyword">=</span> "atspre_nmod1"
<span class="keyword">fun</span> <a name="11813"><span class="dyncstdec">nmod2 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int <span class="keyword">|</span> i &gt;= 0<span class="keyword">;</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">,</span>r<span class="keyword">:</span>nat <span class="keyword">|</span> r <span class="keyword">&lt;</span> j<span class="keyword">]</span> <span class="keyword">(</span>MUL <span class="keyword">(</span>q<span class="keyword">,</span> j<span class="keyword">,</span> i-r<span class="keyword">)</span> <span class="keyword">|</span> int r<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_nmod1"

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="11960"><span class="dyncstdec">ilt <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&lt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ilt"
<span class="keyword">and</span> <a name="12032"><span class="dyncstdec">ilte <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ilte"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> ilt</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> ilte</span>

<span class="keyword">fun</span> <a name="12150"><span class="dyncstdec">igt <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&gt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_igt"
<span class="keyword">and</span> <a name="12222"><span class="dyncstdec">igte <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &gt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_igte"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> igt</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> igte</span>

<span class="keyword">fun</span> <a name="12340"><span class="dyncstdec">ieq <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i == j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ieq"
<span class="keyword">and</span> <a name="12413"><span class="dyncstdec">ineq <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;&gt; j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ineq"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> ieq</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> ineq</span>

<span class="keyword">fun</span> <a name="12531"><span class="dyncstdec">icompare <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> sgn_r <span class="keyword">(</span>i-j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> int k</span></span></a>
  <span class="keyword">=</span> "atspre_icompare"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> icompare</span>

<span class="keyword">fun</span> <a name="12665"><span class="dyncstdec">imax <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> max_r <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> int k</span></span></a>
  <span class="keyword">=</span> "atspre_imax"
<span class="keyword">and</span> <a name="12760"><span class="dyncstdec">imin <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> min_r <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> int k</span></span></a>
  <span class="keyword">=</span> "atspre_imin"
<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> imax</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> imin</span>

<span class="keyword">fun</span> <a name="12902"><span class="dyncstdec">ipow <span class="keyword">(</span>base<span class="keyword">:</span> <span class="staexp">Int</span><span class="keyword">,</span> exponent<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Int</span></span></a> <span class="keyword">=</span> "atspre_ipow"
<span class="neuexp"><span class="keyword">overload</span> pow <span class="keyword">with</span> ipow</span>

<span class="keyword">fun</span> <a name="12985"><span class="dyncstdec">npow <span class="keyword">(</span>base<span class="keyword">:</span> <span class="staexp">Int</span><span class="keyword">,</span> exponent<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Nat</span></span></a> <span class="keyword">=</span> "atspre_npow"

<span class="keyword">fun</span> <a name="13045"><span class="dyncstdec">ihalf <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">:</span>int <span class="keyword">|</span> div_r <span class="keyword">(</span>i<span class="keyword">,</span> 2<span class="keyword">,</span> q<span class="keyword">)</span><span class="keyword">]</span> int q</span></span></a>
  <span class="keyword">=</span> "atspre_ihalf"

<span class="keyword">fun</span> <a name="13129"><span class="dyncstdec">nhalf <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">:</span>nat <span class="keyword">|</span> ndiv_r <span class="keyword">(</span>n<span class="keyword">,</span> 2<span class="keyword">,</span> q<span class="keyword">)</span><span class="keyword">]</span> int q</span></span></a>
  <span class="keyword">=</span> "atspre_nhalf"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// unsigned integers (of indexed type)
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">castfn</span> <a name="13299"><span class="dyncstdec">uint1_of_uint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>nat<span class="keyword">]</span> uint i</span></span></a>

<span class="keyword">castfn</span> <a name="13349"><span class="dyncstdec">uint1_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>nat<span class="keyword">]</span> uint i</span></span></a>
<span class="keyword">castfn</span> <a name="13396"><span class="dyncstdec">uint1_of_int1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint i</span></span></a>

<span class="neuexp"><span class="keyword">overload</span> uint1_of <span class="keyword">with</span> uint1_of_int</span>
<span class="neuexp"><span class="keyword">overload</span> uint1_of <span class="keyword">with</span> uint1_of_int1</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="13589"><span class="dyncstdec">usucc <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i + 1<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_usucc"
<span class="keyword">and</span> <a name="13654"><span class="dyncstdec">upred <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>pos<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i - 1<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_upred"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> usucc</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> upred</span>

<span class="keyword">fun</span> <a name="13771"><span class="dyncstdec">uadd <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i+j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_uadd"

<span class="keyword">and</span> <a name="13846"><span class="dyncstdec">usub <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat <span class="keyword">|</span> i &gt;= j<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i-j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_usub"

<span class="keyword">and</span> <a name="13930"><span class="dyncstdec">umul <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i*j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_umul"

<span class="keyword">and</span> <a name="14005"><span class="dyncstdec">udiv <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat <span class="keyword">|</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i/j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_udiv"

<span class="keyword">and</span> <a name="14088"><span class="dyncstdec">umod <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat <span class="keyword">|</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span>
  <span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>q<span class="keyword">,</span>r<span class="keyword">:</span>int <span class="keyword">|</span> 0 &lt;= r<span class="keyword">;</span> r <span class="keyword">&lt;</span> j<span class="keyword">;</span> i == q*j + r<span class="keyword">]</span> uint r</span></span></a>
  <span class="keyword">=</span> "atspre_umod"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> uadd</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> usub</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> umul</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> udiv</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> umod</span>

<span class="keyword">fun</span> <a name="14318"><span class="dyncstdec">uimod <span class="staexp"><span class="keyword">{</span>j<span class="keyword">:</span>nat <span class="keyword">|</span> j <span class="keyword">&gt;</span> 0<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">int j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>r<span class="keyword">:</span>nat <span class="keyword">|</span> r <span class="keyword">&lt;</span> j<span class="keyword">]</span> int r</span></span></a> <span class="keyword">=</span> "atspre_uimod"
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> uimod</span>

<span class="keyword">fun</span> <a name="14433"><span class="dyncstdec">ult <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&lt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ult"

<span class="keyword">and</span> <a name="14508"><span class="dyncstdec">ulte <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ulte"

<span class="keyword">fun</span> <a name="14586"><span class="dyncstdec">ugt <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&gt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ugt"

<span class="keyword">and</span> <a name="14661"><span class="dyncstdec">ugte <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &gt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ugte"

<span class="keyword">fun</span> <a name="14739"><span class="dyncstdec">ueq <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i == j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ueq"

<span class="keyword">and</span> <a name="14815"><span class="dyncstdec">uneq <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;&gt; j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_uneq"

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> ult</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> ulte</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> ugt</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> ugte</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> ueq</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> uneq</span>

<span class="keyword">fun</span> <a name="15020"><span class="dyncstdec">umax <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> max_r <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> uint k</span></span></a>
  <span class="keyword">=</span> "atspre_umax"
<span class="keyword">and</span> <a name="15118"><span class="dyncstdec">umin <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">uint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> min_r <span class="keyword">(</span>i<span class="keyword">,</span> j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> uint k</span></span></a>
  <span class="keyword">=</span> "atspre_umin"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> umax</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> umin</span>

<span class="keyword">fun</span> <a name="15264"><span class="dyncstdec">uhalf <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">uint i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint <span class="keyword">(</span>i/2<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_uhalf"

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// signed long integers (unindexed)
</span><span class="comment">//
</span><span class="comment">(* ****** ****** *)</span>

<span class="keyword">stadef</span> <span class="staexp"><a name="15414"><span class="stacstdec">lint <span class="keyword">=</span> lint_int_t0ype</span></a></span> <span class="comment">// indexed
</span><span class="keyword">typedef</span> <span class="staexp"><a name="15455"><span class="stacstdec">lint <span class="keyword">=</span> int_long_t0ype</span></a></span> <span class="comment">// unindexed
</span>
<span class="keyword">castfn</span> <a name="15498"><span class="dyncstdec">lint1_of_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> lint i</span></span></a>

<span class="keyword">fun</span> <a name="15545"><span class="dyncstdec">lint_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_lint_of_int"
<span class="neuexp"><span class="keyword">overload</span> lint_of <span class="keyword">with</span> lint_of_int</span>

<span class="keyword">fun</span> <a name="15636"><span class="dyncstdec">int_of_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "atspre_int_of_lint"
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_lint</span>

<span class="comment">// This function is based on [atol] in [stdlib.h]
</span><span class="keyword">fun</span> <a name="15777"><span class="dyncstdec">lint_of_string <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_lint_of_string"
<span class="neuexp"><span class="keyword">overload</span> lint_of <span class="keyword">with</span> lint_of_string</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="15951"><span class="dyncstdec">abs_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_abs_lint"
<span class="neuexp"><span class="keyword">overload</span> abs <span class="keyword">with</span> abs_lint</span>
<span class="keyword">fun</span> <a name="16030"><span class="dyncstdec">neg_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_neg_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> neg_lint</span>

<span class="keyword">fun</span> <a name="16108"><span class="dyncstdec">succ_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_succ_lint"
<span class="keyword">and</span> <a name="16162"><span class="dyncstdec">pred_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a> <span class="keyword">=</span> "atspre_pred_lint"
<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_lint</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_lint</span>

<span class="keyword">fun</span> <a name="16275"><span class="dyncstdec">add_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_add_lint_lint"
<span class="keyword">and</span> <a name="16347"><span class="dyncstdec">sub_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_sub_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_lint_lint</span>

<span class="keyword">fun</span> <a name="16480"><span class="dyncstdec">mul_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_mul_lint_lint"
<span class="keyword">and</span> <a name="16552"><span class="dyncstdec">div_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_div_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_lint_lint</span>

<span class="keyword">fun</span> <a name="16685"><span class="dyncstdec">mod_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_mod_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_lint_lint</span>

<span class="keyword">fun</span> <a name="16790"><span class="dyncstdec">lt_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_lint_lint"
<span class="keyword">and</span> <a name="16860"><span class="dyncstdec">lte_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_lint_lint</span>

<span class="keyword">fun</span> <a name="16993"><span class="dyncstdec">gt_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_lint_lint"
<span class="keyword">and</span> <a name="17063"><span class="dyncstdec">gte_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_lint_lint</span>

<span class="keyword">fun</span> <a name="17196"><span class="dyncstdec">eq_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_lint_lint"
<span class="keyword">and</span> <a name="17266"><span class="dyncstdec">neq_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_lint_lint</span>

<span class="keyword">fun</span> <a name="17399"><span class="dyncstdec">compare_lint_lint <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_lint_lint</span>

<span class="keyword">fun</span> <a name="17521"><span class="dyncstdec">max_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_max_lint_lint"
<span class="keyword">and</span> <a name="17593"><span class="dyncstdec">min_lint_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "atspre_min_lint_lint"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_lint_lint</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_lint_lint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_lint

<span class="keyword">fun</span> <a name="17773"><span class="dyncstdec">fprint0_lint <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_lint"
<span class="neuexp"><span class="keyword">overload</span> fprint_lint <span class="keyword">with</span> fprint0_lint</span>

<span class="keyword">fun</span> <a name="17894"><span class="dyncstdec">fprint1_lint <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_lint"
<span class="neuexp"><span class="keyword">overload</span> fprint_lint <span class="keyword">with</span> fprint1_lint</span>

<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_lint</span>

<span class="keyword">fun</span> <a name="18092"><span class="dyncstdec">print_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "atspre_print_lint"
<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_lint</span>

<span class="keyword">fun</span> <a name="18184"><span class="dyncstdec">prerr_lint <span class="keyword">(</span>li<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "atspre_prerr_lint"
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_lint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="18319"><span class="dyncstdec">tostrptr_lint
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_lint"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_lint</span>
<span class="keyword">fun</span> <a name="18422"><span class="dyncstdec">tostring_lint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_lint"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_lint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// signed long integers (indexed)
</span><span class="comment">//
</span><span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="18604"><span class="dyncstdec">lt_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&lt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_lt_lint_lint"
<span class="keyword">and</span> <a name="18698"><span class="dyncstdec">lte_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_lte_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_lint1_lint1</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_lint1_lint1</span>

<span class="keyword">fun</span> <a name="18860"><span class="dyncstdec">gt_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i <span class="keyword">&gt;</span> j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_gt_lint_lint"
<span class="keyword">and</span> <a name="18954"><span class="dyncstdec">gte_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &gt;= j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_gte_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_lint1_lint1</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_lint1_lint1</span>

<span class="keyword">fun</span> <a name="19116"><span class="dyncstdec">eq_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i == j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_lt_lint_lint"
<span class="keyword">and</span> <a name="19211"><span class="dyncstdec">neq_lint1_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool <span class="keyword">(</span>i &lt;&gt; j<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_lte_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_lint1_lint1</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_lint1_lint1</span>

<span class="keyword">fun</span> <a name="19373"><span class="dyncstdec">compare_lint1_lint1
  <span class="staexp"><span class="keyword">{</span>i<span class="keyword">,</span>j<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">lint j</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>k<span class="keyword">:</span>int <span class="keyword">|</span> sgn_r <span class="keyword">(</span>i-j<span class="keyword">,</span> k<span class="keyword">)</span><span class="keyword">]</span> int k</span></span></a>
  <span class="keyword">=</span> "atspre_compare_lint_lint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_lint1_lint1</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// unsigned long integers (unindexed)
</span><span class="comment">//
</span><span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="keyword">stadef</span> <span class="staexp"><a name="19630"><span class="stacstdec">ulint <span class="keyword">=</span> ulint_int_t0ype</span></a></span> <span class="comment">// indexed
</span><span class="keyword">typedef</span> <span class="staexp"><a name="19673"><span class="stacstdec">ulint <span class="keyword">=</span> uint_long_t0ype</span></a></span> <span class="comment">// unindexed
</span><span class="comment">//
</span><span class="keyword">castfn</span> <a name="19720"><span class="dyncstdec">ulint1_of_ulint <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>nat<span class="keyword">]</span> ulint i</span></span></a>
<span class="keyword">castfn</span> <a name="19773"><span class="dyncstdec">ulint1_of_lint1 <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">lint i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint i</span></span></a>
<span class="comment">//
</span><span class="keyword">castfn</span> <a name="19830"><span class="dyncstdec">lint_of_ulint <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">lint</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> lint_of <span class="keyword">with</span> lint_of_ulint</span>
<span class="comment">//
</span><span class="keyword">castfn</span> <a name="19909"><span class="dyncstdec">ulint_of_lint <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> ulint_of <span class="keyword">with</span> ulint_of_lint</span>
<span class="comment">//
</span><span class="keyword">fun</span> <a name="19986"><span class="dyncstdec">ulint_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a> <span class="keyword">=</span> "atspre_ulint_of_int"
<span class="neuexp"><span class="keyword">overload</span> ulint_of <span class="keyword">with</span> ulint_of_int</span>
<span class="comment">//
</span><span class="keyword">fun</span> <a name="20084"><span class="dyncstdec">ulint_of_uint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a> <span class="keyword">=</span> "atspre_ulint_of_uint"
<span class="neuexp"><span class="keyword">overload</span> ulint_of <span class="keyword">with</span> ulint_of_uint</span>
<span class="comment">//
</span><span class="keyword">fun</span> <a name="20186"><span class="dyncstdec">uint_of_ulint <span class="keyword">(</span>ul<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">uint</span></span></a> <span class="keyword">=</span> "atspre_uint_of_ulint"
<span class="neuexp"><span class="keyword">overload</span> uint_of <span class="keyword">with</span> uint_of_ulint</span>
<span class="comment">//
</span><span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="20359"><span class="dyncstdec">succ_ulint <span class="keyword">(</span>lu<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_succ_ulint"

<span class="keyword">and</span> <a name="20420"><span class="dyncstdec">pred_ulint <span class="keyword">(</span>lu<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_pred_ulint"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_ulint</span>

<span class="keyword">fun</span> <a name="20542"><span class="dyncstdec">add_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_add_ulint_ulint"

<span class="keyword">and</span> <a name="20622"><span class="dyncstdec">sub_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_sub_ulint_ulint"

<span class="keyword">and</span> <a name="20702"><span class="dyncstdec">mul_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_mul_ulint_ulint"

<span class="keyword">and</span> <a name="20782"><span class="dyncstdec">div_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_div_ulint_ulint"

<span class="keyword">and</span> <a name="20862"><span class="dyncstdec">mod_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_mod_ulint_ulint"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_ulint_ulint</span>

<span class="keyword">fun</span> <a name="21105"><span class="dyncstdec">lt_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_ulint_ulint"

<span class="keyword">and</span> <a name="21182"><span class="dyncstdec">lte_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_ulint_ulint"

<span class="keyword">fun</span> <a name="21261"><span class="dyncstdec">gt_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_ulint_ulint"

<span class="keyword">and</span> <a name="21338"><span class="dyncstdec">gte_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_ulint_ulint"

<span class="keyword">fun</span> <a name="21417"><span class="dyncstdec">eq_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_ulint_ulint"

<span class="keyword">and</span> <a name="21494"><span class="dyncstdec">neq_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_ulint_ulint"

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_ulint_ulint</span>

<span class="keyword">fun</span> <a name="21766"><span class="dyncstdec">compare_ulint_ulint <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_ulint_ulint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_ulint_ulint</span>

<span class="keyword">fun</span> <a name="21896"><span class="dyncstdec">max_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_max_ulint_ulint"

<span class="keyword">and</span> <a name="21976"><span class="dyncstdec">min_ulint_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_min_ulint_ulint"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_ulint_ulint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// bit operations
</span>
<span class="keyword">fun</span> <a name="22165"><span class="dyncstdec">lnot_ulint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_lnot_ulint" <span class="comment">(* bitwise *)</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> lnot_ulint</span>

<span class="keyword">fun</span> <a name="22266"><span class="dyncstdec">land_ulint_ulint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_land_ulint_ulint"

<span class="keyword">fun</span> <a name="22350"><span class="dyncstdec">lor_ulint_ulint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_lor_ulint_ulint"

<span class="keyword">fun</span> <a name="22432"><span class="dyncstdec">lxor_ulint_ulint <span class="keyword">(</span>u1<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> u2<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_lxor_ulint_ulint"

<span class="neuexp"><span class="keyword">overload</span> land <span class="keyword">with</span> land_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> lor <span class="keyword">with</span> lor_ulint_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> lxor <span class="keyword">with</span> lxor_ulint_ulint</span>

<span class="keyword">fun</span> <a name="22623"><span class="dyncstdec">lsl_ulint_int1 <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_lsl_ulint_int1"

<span class="keyword">and</span> <a name="22699"><span class="dyncstdec">lsr_ulint_int1 <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">Nat</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "atspre_lsr_ulint_int1"

<span class="neuexp"><span class="keyword">overload</span> &lt;&lt; <span class="keyword">with</span> lsl_ulint_int1</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;&gt; <span class="keyword">with</span> lsr_ulint_int1</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_ulint

<span class="keyword">fun</span> <a name="22883"><span class="dyncstdec">fprint0_ulint <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_ulint"

<span class="keyword">fun</span> <a name="22968"><span class="dyncstdec">fprint1_ulint <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_ulint"

<span class="neuexp"><span class="keyword">overload</span> fprint_ulint <span class="keyword">with</span> fprint0_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint_ulint <span class="keyword">with</span> fprint1_ulint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_ulint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="23234"><span class="dyncstdec">print_ulint <span class="keyword">(</span>lu<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_print_ulint"
<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_ulint</span>

<span class="keyword">fun</span> <a name="23332"><span class="dyncstdec">prerr_ulint <span class="keyword">(</span>lu<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_prerr_ulint"
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_ulint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="23473"><span class="dyncstdec">tostrptr_ulint
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_ulint"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_ulint</span>
<span class="keyword">fun</span> <a name="23580"><span class="dyncstdec">tostring_ulint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_ulint"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_ulint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// signed long long integers
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">stadef</span> <span class="staexp"><a name="23760"><span class="stacstdec">llint <span class="keyword">=</span> llint_int_t0ype</span></a></span> <span class="comment">// indexed
</span><span class="keyword">typedef</span> <span class="staexp"><a name="23803"><span class="stacstdec">llint <span class="keyword">=</span> int_long_long_t0ype</span></a></span> <span class="comment">// unindexed
</span>
<span class="keyword">castfn</span> <a name="23852"><span class="dyncstdec">llint1_of_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp"><span class="keyword">[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> llint i</span></span></a>

<span class="comment">// Note that the following coersion is automatic
</span><span class="keyword">fun</span> <a name="23952"><span class="dyncstdec">llint_of_int <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_llint_of_int"
<span class="neuexp"><span class="keyword">overload</span> llint_of <span class="keyword">with</span> llint_of_int</span>

<span class="keyword">fun</span> <a name="24050"><span class="dyncstdec">llint_of_double <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp">double</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_llint_of_double"
<span class="neuexp"><span class="keyword">overload</span> llint_of <span class="keyword">with</span> llint_of_double</span>

<span class="comment">// This function is based on [atoll] in [stdlib.h]
</span><span class="keyword">fun</span> <a name="24211"><span class="dyncstdec">llint_of_string <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_llint_of_string"
<span class="neuexp"><span class="keyword">overload</span> llint_of <span class="keyword">with</span> llint_of_string</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="24371"><span class="dyncstdec">abs_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_abs_llint"
<span class="neuexp"><span class="keyword">overload</span> abs <span class="keyword">with</span> abs_llint</span>

<span class="keyword">fun</span> <a name="24459"><span class="dyncstdec">neg_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_neg_llint"
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">~</span> <span class="keyword">with</span> neg_llint</span>

<span class="keyword">fun</span> <a name="24545"><span class="dyncstdec">succ_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_succ_llint"

<span class="keyword">and</span> <a name="24607"><span class="dyncstdec">pred_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_pred_llint"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_llint</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_llint</span>

<span class="keyword">fun</span> <a name="24730"><span class="dyncstdec">add_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_add_llint_llint"

<span class="keyword">and</span> <a name="24810"><span class="dyncstdec">sub_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_sub_llint_llint"

<span class="keyword">and</span> <a name="24890"><span class="dyncstdec">mul_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_mul_llint_llint"

<span class="keyword">and</span> <a name="24970"><span class="dyncstdec">div_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_div_llint_llint"

<span class="keyword">and</span> <a name="25050"><span class="dyncstdec">mod_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_mod_llint_llint"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_llint_llint</span>

<span class="keyword">fun</span> <a name="25293"><span class="dyncstdec">lt_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_llint_llint"

<span class="keyword">and</span> <a name="25370"><span class="dyncstdec">lte_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_llint_llint"

<span class="keyword">fun</span> <a name="25449"><span class="dyncstdec">gt_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_llint_llint"

<span class="keyword">and</span> <a name="25526"><span class="dyncstdec">gte_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_llint_llint"

<span class="keyword">fun</span> <a name="25605"><span class="dyncstdec">eq_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_llint_llint"

<span class="keyword">and</span> <a name="25682"><span class="dyncstdec">neq_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_llint_llint"

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_llint_llint</span>

<span class="keyword">fun</span> <a name="25954"><span class="dyncstdec">compare_llint_llint <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_llint_llint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_llint_llint</span>

<span class="keyword">fun</span> <a name="26084"><span class="dyncstdec">max_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_max_llint_llint"

<span class="keyword">and</span> <a name="26164"><span class="dyncstdec">min_llint_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>
  <span class="keyword">=</span> "atspre_min_llint_llint"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_llint_llint</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_llint_llint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_llint

<span class="keyword">fun</span> <a name="26356"><span class="dyncstdec">fprint0_llint <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_llint"

<span class="keyword">fun</span> <a name="26441"><span class="dyncstdec">fprint1_llint <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_llint"

<span class="neuexp"><span class="keyword">overload</span> fprint_llint <span class="keyword">with</span> fprint0_llint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint_llint <span class="keyword">with</span> fprint1_llint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_llint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="26707"><span class="dyncstdec">print_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_print_llint"
<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_llint</span>

<span class="keyword">fun</span> <a name="26806"><span class="dyncstdec">prerr_llint <span class="keyword">(</span>lli<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_prerr_llint"
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_llint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="26948"><span class="dyncstdec">tostrptr_llint
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_llint"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_llint</span>
<span class="keyword">fun</span> <a name="27055"><span class="dyncstdec">tostring_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_llint"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_llint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// unsigned long long integers
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">stadef</span> <span class="staexp"><a name="27237"><span class="stacstdec">ullint <span class="keyword">=</span> ullint_int_t0ype</span></a></span> <span class="comment">// indexed
</span><span class="keyword">typedef</span> <span class="staexp"><a name="27282"><span class="stacstdec">ullint <span class="keyword">=</span> uint_long_long_t0ype</span></a></span> <span class="comment">// unindexed
</span>
<span class="comment">//
</span>
<span class="keyword">castfn</span> <a name="27337"><span class="dyncstdec">ullint_of_llint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">llint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
<span class="keyword">castfn</span> <a name="27381"><span class="dyncstdec">llint_of_ullint <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">llint</span></span></a>

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="27427"><span class="dyncstdec">ullint_of_int
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a> <span class="keyword">=</span> "atspre_ullint_of_int"
<span class="neuexp"><span class="keyword">overload</span> ullint_of <span class="keyword">with</span> ullint_of_int</span>

<span class="keyword">fun</span> <a name="27530"><span class="dyncstdec">ullint_of_uint
  <span class="keyword">(</span>u<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a> <span class="keyword">=</span> "atspre_ullint_of_uint"
<span class="neuexp"><span class="keyword">overload</span> ullint_of <span class="keyword">with</span> ullint_of_uint</span>

<span class="keyword">fun</span> <a name="27637"><span class="dyncstdec">ullint_of_double <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp">double</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_ullint_of_double"
<span class="neuexp"><span class="keyword">overload</span> ullint_of <span class="keyword">with</span> ullint_of_double</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// arithmetic functions and comparison functions
</span>
<span class="keyword">fun</span> <a name="27823"><span class="dyncstdec">succ_ullint <span class="keyword">(</span>llu<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_succ_ullint"

<span class="keyword">and</span> <a name="27889"><span class="dyncstdec">pred_ullint <span class="keyword">(</span>llu<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_pred_ullint"

<span class="neuexp"><span class="keyword">overload</span> succ <span class="keyword">with</span> succ_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> pred <span class="keyword">with</span> pred_ullint</span>

<span class="keyword">fun</span> <a name="28018"><span class="dyncstdec">add_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_add_ullint_ullint"

<span class="keyword">and</span> <a name="28105"><span class="dyncstdec">sub_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_sub_ullint_ullint"

<span class="keyword">and</span> <a name="28192"><span class="dyncstdec">mul_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_mul_ullint_ullint"

<span class="keyword">and</span> <a name="28279"><span class="dyncstdec">div_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_div_ullint_ullint"

<span class="keyword">and</span> <a name="28366"><span class="dyncstdec">mod_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_mod_ullint_ullint"

<span class="neuexp"><span class="keyword">overload</span> + <span class="keyword">with</span> add_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> - <span class="keyword">with</span> sub_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> * <span class="keyword">with</span> mul_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> / <span class="keyword">with</span> div_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> mod <span class="keyword">with</span> mod_ullint_ullint</span>

<span class="keyword">fun</span> <a name="28626"><span class="dyncstdec">lt_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lt_ullint_ullint"

<span class="keyword">and</span> <a name="28709"><span class="dyncstdec">lte_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_lte_ullint_ullint"

<span class="keyword">fun</span> <a name="28794"><span class="dyncstdec">gt_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gt_ullint_ullint"

<span class="keyword">and</span> <a name="28877"><span class="dyncstdec">gte_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_gte_ullint_ullint"

<span class="keyword">fun</span> <a name="28962"><span class="dyncstdec">eq_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_eq_ullint_ullint"

<span class="keyword">and</span> <a name="29045"><span class="dyncstdec">neq_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "atspre_neq_ullint_ullint"

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_ullint_ullint</span>

<span class="comment">//
</span><span class="comment">// compare, max and min
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="29366"><span class="dyncstdec">compare_ullint_ullint <span class="keyword">(</span>i1<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> i2<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Sgn</span></span></a>
  <span class="keyword">=</span> "atspre_compare_ullint_ullint"
<span class="neuexp"><span class="keyword">overload</span> compare <span class="keyword">with</span> compare_ullint_ullint</span>

<span class="keyword">fun</span> <a name="29504"><span class="dyncstdec">max_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_max_ullint_ullint"

<span class="keyword">and</span> <a name="29591"><span class="dyncstdec">min_ullint_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">,</span> j<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ullint</span></span></a>
  <span class="keyword">=</span> "atspre_min_ullint_ullint"

<span class="neuexp"><span class="keyword">overload</span> max <span class="keyword">with</span> max_ullint_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> min <span class="keyword">with</span> min_ullint_ullint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">symintr</span></span> fprint_ullint

<span class="keyword">fun</span> <a name="29795"><span class="dyncstdec">fprint0_ullint <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_ullint"

<span class="keyword">fun</span> <a name="29883"><span class="dyncstdec">fprint1_ullint <span class="staexp"><span class="keyword">{</span>m<span class="keyword">:</span>file_mode<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">file_mode_lte <span class="keyword">(</span>m<span class="keyword">,</span> w<span class="keyword">)</span></span></span> <span class="keyword">|</span> out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>FILE m</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">exnref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_fprint_ullint"

<span class="neuexp"><span class="keyword">overload</span> fprint_ullint <span class="keyword">with</span> fprint0_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint_ullint <span class="keyword">with</span> fprint1_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_ullint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="30157"><span class="dyncstdec">print_ullint <span class="keyword">(</span>llu<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_print_ullint"

<span class="keyword">and</span> <a name="30227"><span class="dyncstdec">prerr_ullint <span class="keyword">(</span>llu<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">ref</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "atspre_prerr_ullint"

<span class="neuexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_ullint</span>
<span class="neuexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_ullint</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// stringization
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="30407"><span class="dyncstdec">tostrptr_ullint
  <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">strptr1</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_ullint"
<span class="neuexp"><span class="keyword">overload</span> tostrptr <span class="keyword">with</span> tostrptr_ullint</span>
<span class="keyword">fun</span> <a name="30518"><span class="dyncstdec">tostring_ullint <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp">ullint</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "atspre_tostrptr_ullint"
<span class="neuexp"><span class="keyword">overload</span> tostring <span class="keyword">with</span> tostring_ullint</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">typedef</span> <span class="staexp"><a name="30652"><span class="stacstdec">sint <span class="keyword">=</span> int_short_t0ype</span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="30683"><span class="stacstdec">usint <span class="keyword">=</span> uint_short_t0ype</span></a></span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#if</span> <span class="neuexp">VERBOSE_PRELUDE</span> <span class="keyword">#then</span>

<span class="keyword">#print</span> <span class="neuexp">"Loading [integer.sats] finishes!\n"</span>

<span class="keyword">#endif</span>

<span class="comment">(* end of [integer.sats] *)</span>
</pre>
</body>
</html>
