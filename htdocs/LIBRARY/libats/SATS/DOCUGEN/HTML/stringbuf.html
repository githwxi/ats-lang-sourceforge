
<!DOCTYPE html>
<html>
<head>
<title>ATSLIB/libats/stringbuf</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<style type="text/css">
  .patsyntax {color:#808080;background-color:#E0E0E0;}
  .patsyntaxkeyword {color:#000000;font-weight:bold;}
  .patsyntaxcomment {color:#787878;font-style:italic;}
  .patsyntaxextcode {color:#A52A2A;}
  .patsyntaxneuexp  {color:#800080;}
  .patsyntaxstaexp  {color:#0000F0;}
  .patsyntaxprfexp  {color:#603030;}
  .patsyntaxdynexp  {color:#F00000;}
  .patsyntaxstalab  {color:#0000F0;font-style:italic}
  .patsyntaxdynlab  {color:#F00000;font-style:italic}
  .patsyntaxdynstr  {color:#008000;font-style:normal}
  .patsyntaxstacstdec  {text-decoration:none;}
  .patsyntaxstacstuse  {color:#0000CF;text-decoration:underline;}
  .patsyntaxdyncstdec  {text-decoration:none;}
  .patsyntaxdyncstuse  {color:#B80000;text-decoration:underline;}
  .patsyntaxdyncst_implement  {color:#B80000;text-decoration:underline;}
  .patsyntax span.keyword {color:#000000;font-weight:bold;}
  .patsyntax span.comment {color:#787878;font-style:italic;}
  .patsyntax span.extcode {color:#A52A2A;}
  .patsyntax span.neuexp  {color:#800080;}
  .patsyntax span.staexp  {color:#0000F0;}
  .patsyntax span.prfexp  {color:#603030;}
  .patsyntax span.dynexp  {color:#F00000;}
  .patsyntax span.stalab  {color:#0000F0;font-style:italic}
  .patsyntax span.dynlab  {color:#F00000;font-style:italic}
  .patsyntax span.dynstr  {color:#008000;font-style:normal}
  .patsyntax span.stacstdec  {text-decoration:none;}
  .patsyntax span.stacstuse  {color:#0000CF;text-decoration:underline;}
  .patsyntax span.dyncstdec  {text-decoration:none;}
  .patsyntax span.dyncstuse  {color:#B80000;text-decoration:underline;}
  .patsyntax span.dyncst_implement  {color:#B80000;text-decoration:underline;}
</style>

<script
type="text/javascript"
src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
></script>

<script
type="text/javascript"
src="http://www.ats-lang.org/scripts/patscode_tryit_bind_all.js"
></script>

</head>
<body>

<h1>ATSLIB/libats/stringbuf</h1>


<p>
This package implements string buffers that can grow or shrink.
A typical use of such a buffer is for turning a value into some
form of string representation (stringization).

</p>



<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<menu>
<li><a href="#stringbuf">stringbuf</a></li>
<li><a href="#stringbuf_vtype">stringbuf_vtype</a></li>
<li><a href="#stringbuf$recapacitize">stringbuf$recapacitize</a></li>
<li><a href="#stringbuf_make_nil">stringbuf_make_nil</a></li>
<li><a href="#stringbuf_free">stringbuf_free</a></li>
<li><a href="#stringbuf_getfree_strnptr">stringbuf_getfree_strnptr</a></li>
<li><a href="#stringbuf_get_size">stringbuf_get_size</a></li>
<li><a href="#stringbuf_get_capacity">stringbuf_get_capacity</a></li>
<li><a href="#stringbuf_insert_char">stringbuf_insert_char</a></li>
<li><a href="#stringbuf_insert_string">stringbuf_insert_string</a></li>
<li><a href="#stringbuf_insert_strlen">stringbuf_insert_strlen</a></li>
<li><a href="#stringbuf_insert_bool">stringbuf_insert_bool</a></li>
<li><a href="#stringbuf_insert_int">stringbuf_insert_int</a></li>
<li><a href="#stringbuf_insert_uint">stringbuf_insert_uint</a></li>
<li><a href="#stringbuf_insert_lint">stringbuf_insert_lint</a></li>
<li><a href="#stringbuf_insert_ulint">stringbuf_insert_ulint</a></li>
<li><a href="#stringbuf_reset_capacity">stringbuf_reset_capacity</a></li>
<li><a href="#stringbuf_truncate">stringbuf_truncate</a></li>
<li><a href="#stringbuf_truncout">stringbuf_truncout</a></li>
<li><a href="#stringbuf_truncout_all">stringbuf_truncout_all</a></li>
</menu>

<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<h2><a id="stringbuf">stringbuf</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="keyword">vtypedef</span> <span class="staexp">stringbuf <span class="keyword">=</span> <span class="staexp">stringbuf_vtype</span></span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_vtype">stringbuf_vtype</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="staexp"><span class="keyword">absvtype</span> stringbuf_vtype <span class="keyword">=</span> ptr</span></pre>
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf$recapacitize">stringbuf$recapacitize</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span> stringbuf$recapacitize <span class="keyword">(</span><span class="comment">(*void*)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

The value returned by this function determines whether the capacity of a
string buffer is allowed to be expanded automatically if needed.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_make_nil">stringbuf_make_nil</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> stringbuf_make_nil <span class="keyword">with</span> stringbuf_make_nil_int</span></pre>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">overload</span> stringbuf_make_nil <span class="keyword">with</span> stringbuf_make_nil_size</span></pre>
<h3>Description</h3>

Given a size m, this function returns a string buffer of capacity m and
size 0.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_free">stringbuf_free</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_free <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp">stringbuf</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span></pre>
<h3>Description</h3>
This function frees a given string buffer.<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_getfree_strnptr">stringbuf_getfree_strnptr</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_getfree_strnptr
  <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp">stringbuf</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">size_t</span><span class="staexp">?</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">size_t</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp"><span class="keyword">#[</span>n<span class="keyword">:</span>nat<span class="keyword">]</span></span> <span class="staexp">strnptr</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span></pre>
<h3>Description</h3>

This function returns the string associated with a given string buffer
after freeing the buffer, and ot stores the length of the returned string
in its second (call-by-reference) parameter.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_get_size">stringbuf_get_size</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_get_size <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">size_t</span></span></pre>
<h3>Description</h3>

Given a string buffer, this function returns its current size, that is, the
number of characters stored in the buffer.
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_get_capacity">stringbuf_get_capacity</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_get_capacity <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">size_t</span></span></pre>
<h3>Description</h3>

Given a string buffer, this function returns its current capacity, that is,
the maximal number of characters that can be stored in the buffer.
<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_char">stringbuf_insert_char</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_char <span class="keyword">(</span><span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">charNZ</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function inserts a non-null character into a given string buffer.
If the character is inserted, then 1 is returned. Otherwise, 0 is returned
(due to the buffer being full but not allowed to recapacitize).

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_string">stringbuf_insert_string</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_string <span class="keyword">(</span><span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function inserts a string into a given string buffer.
If the string is inserted, then the length of the string is returned.
Otherwise, 0 is returned.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_strlen">stringbuf_insert_strlen</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_strlen<span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span><span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> <span class="staexp">string</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> <span class="staexp">size_t</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function is a slight variant of <span class="patsyntaxdynexp">stringbuf_insert_string</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_bool">stringbuf_insert_bool</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_bool <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">bool</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

Given a string buffer and a boolean, this function inserts a string
representation of the boolean into the buffer.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_int">stringbuf_insert_int</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_int <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

Given a string buffer and an integer, this function inserts a string
representation of the integer into the buffer.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_uint">stringbuf_insert_uint</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_uint <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function is a slight variant of <span class="patsyntaxdynexp">stringbuf_insert_int</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_lint">stringbuf_insert_lint</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_lint <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">lint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function is a slight variant of <span class="patsyntaxdynexp">stringbuf_insert_int</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_insert_ulint">stringbuf_insert_ulint</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_insert_ulint <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></pre>
<h3>Description</h3>

This function is a slight variant of <span class="patsyntaxdynexp">stringbuf_insert_int</span>.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_reset_capacity">stringbuf_reset_capacity</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_reset_capacity
  <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> m2<span class="keyword">:</span> <span class="staexp">sizeGte</span><span class="keyword">(</span><span class="staexp">1</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">bool</span></span><span class="comment">(*done/ignored*)</span></pre>
<h3>Description</h3>

Given a string buffer and a size m2, this function resets the capacity of
the buffer to m2. Note that m2 is expected to be greater than or equal to
the current size of the buffer for otherwise this function returns false
to indicate the capacity of the buffer is not reset.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_truncate">stringbuf_truncate</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_truncate
  <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> n2<span class="keyword">:</span> <span class="staexp">size_t</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">bool</span></span><span class="comment">(*done/ignored*)</span></pre>
<h3>Description</h3>

Given a stringbuf-value sbf and an integer n2, if n2 is less than the
current size of the buffer associated with sbf, then the function resets
the size of the buffer to n2. Otherwise, the function makes no change.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_truncout">stringbuf_truncout</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_truncout
  <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">,</span> n2<span class="keyword">:</span> <span class="staexp">size_t</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr0</span></span></pre>
<h3>Description</h3>

This function is like <span class="patsyntaxdynexp">stringbuf_trunout</span> except that it returns
a linear string representing the truncated portion of a given stringbuf-value.

<hr style="background-color: #E0E0E0; height: 1px;"></hr>
<h2><a id="stringbuf_truncout_all">stringbuf_truncout_all</a></h2>
<h3>Synopsis</h3>
<pre class="patsyntax">
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
stringbuf_truncout_all <span class="keyword">(</span>sbf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">stringbuf</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr1</span></span></pre>
<h3>Description</h3>

This function is just the special case of <span class="patsyntaxdynexp">stringbuf_truncout</span>
where the second passed argument equals 0.



<hr style="background-color: #E0E0E0; height: 2px;"></hr>

<table>
<tr>
<td style="width: 100%;">
This page is created with
<a href="http://www.ats-lang.org">ATS</a>
by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>
and also maintained by
<a href="http://www.cs.bu.edu/~hwxi/">Hongwei Xi</a>.
</td>
<td style="width: 0%;"><!--pushed to the right-->
<a href="http://sourceforge.net">
<img
src="http://sflogo.sourceforge.net/sflogo.php?group_id=205722&amp;type=2"
width="120"
height="36"
alt="SourceForge.net Logo"
/>
</a>
</td>
</tr>
</table>


</body>
</html>

