<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <style type="text/css">
    span.comment {color:#787878;font-style:italic}
    span.extern  {color:#A52A2A}
    span.keyword {color:#000000;font-weight:bold}
    span.neuexp  {color:#800080}
    span.staexp  {color:#0000FF}
    span.dynexp  {color:#E80000}
    span.prfexp  {color:#009000}
    span.stacstdec  {text-decoration:none}
    span.stacstuse  {color:#0000CF;text-decoration:underline}
    span.dyncstdec  {text-decoration:none}
    span.dyncstimp  {color:#B80000;text-decoration:underline}
    span.dyncstuse  {color:#B80000;text-decoration:underline}
    body          {color:#E80000;background-color:#E0E0E0}
  </style>
</head>
<body>
<pre>
<span class="comment">(***********************************************************************)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                         Applied Type System                         *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                              Hongwei Xi                             *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(***********************************************************************)</span>

<span class="comment">(*
** ATS/Anairiats - Unleashing the Potential of Types!
**
** Copyright (C) 2002-2008 Hongwei Xi, Boston University
**
** All rights reserved
**
** ATS is free software;  you can  redistribute it and/or modify it under
** the terms of  the GNU GENERAL PUBLIC LICENSE (GPL) as published by the
** Free Software Foundation; either version 3, or (at  your  option)  any
** later version.
** 
** ATS is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without  even  the  implied  warranty  of MERCHANTABILITY or
** FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License
** for more details.
** 
** You  should  have  received  a  copy of the GNU General Public License
** along  with  ATS;  see the  file COPYING.  If not, please write to the
** Free Software Foundation,  51 Franklin Street, Fifth Floor, Boston, MA
** 02110-1301, USA.
*)</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// Author: Hongwei Xi (hwxi AT cs DOT bu DOT edu)
</span><span class="comment">// Time: March 2008
</span><span class="comment">//
</span><span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">Deb <span class="keyword">=</span> "ats_debug.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Err <span class="keyword">=</span> "ats_error.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Lst <span class="keyword">=</span> "ats_list.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Set <span class="keyword">=</span> "ats_set_fun.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Sym <span class="keyword">=</span> "ats_symbol.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Syn <span class="keyword">=</span> "ats_syntax.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"ats_staexp2.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_dynexp2.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_dynexp3.sats"</span>

<span class="keyword">staload</span> <span class="staexp">"ats_hiexp.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"ats_trans4.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"ats_reference.sats"</span>
<span class="keyword">staload</span> <span class="staexp">_<span class="comment">(*anonymous*)</span> <span class="keyword">=</span> "ats_reference.dats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#define</span> <span class="neuexp">THISFILENAME "ats_trans4.dats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#define</span> <span class="neuexp">nil list_nil</span><span class="keyword">;</span> <span class="keyword">#define</span> <span class="neuexp">cons list_cons</span><span class="keyword">;</span> <span class="keyword">#define</span> <span class="neuexp">:: list_cons</span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> $Sym<span class="keyword">.</span>eq_symbol_symbol</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> prerr_loc_error4 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2738"><span class="dyncstuse">$Loc<span class="keyword">.</span>prerr_location</span></a> loc<span class="keyword">;</span> prerr ": error(4)"
<span class="keyword">end</span> <span class="comment">// end of [prerr_loc_error4]
</span>
<span class="keyword">fn</span> prerr_interror <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "INTERNAL ERROR (ats_trans4)"
<span class="keyword">fn</span> prerr_loc_interror <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2738"><span class="dyncstuse">$Loc<span class="keyword">.</span>prerr_location</span></a> loc<span class="keyword">;</span> prerr ": INTERNAL ERROR (ats_trans4)"
<span class="keyword">end</span> <span class="comment">// end of [prerr_loc_interror]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> hityp_ptr_abs <span class="keyword">(</span>s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span> <span class="keyword">=</span>
  <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11201"><span class="dyncstuse">s2rt_is_boxed</span></a> <span class="keyword">(</span>s2t<span class="keyword">)</span> <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3482"><span class="dyncstuse">hityp_abs</span></a>
<span class="comment">// end of [hityp_ptr_abs]
</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//
</span><span class="comment">// HX-2010-12-05:
</span><span class="comment">// for testing if a type is named: a named type is one that
</span><span class="comment">// can be recovered from its name. For instance, bool, char,
</span><span class="comment">// float, double and int are all named types, but string is
</span><span class="comment">// not named as its (erasure) name is simply "ats_ptr_type".
</span><span class="comment">//
</span><span class="keyword">extern</span> <span class="keyword">fun</span> <a name="2976"><span class="dyncstdec">s2exp_tr_named <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> deep<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s2e0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span><span class="keyword">,</span> named<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span></span></a> <span class="comment">// end of [s2exp_tr_named]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s2exp_app_tr_named <span class="staexp"><span class="keyword">.&lt;&gt;.</span></span> <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> deep<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
  <span class="keyword">,</span> s2t_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span>
  <span class="keyword">,</span> s2e_fun<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span>
  <span class="keyword">,</span> s2es_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span>
  <span class="keyword">,</span> named<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">(*
  val () = begin
    print "s2exp_app_tr: s2t_app = "; print s2t_app; print_newline ();
    print "s2exp_app_tr: s2e_fun = "; print s2e_fun; print_newline ();
    print "s2exp_app_tr: s2es_arg = "; print s2es_arg; print_newline ();
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> s2e_fun<span class="keyword">.</span>s2exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S2Ecst s2c <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2t_app <span class="keyword">of</span>
<span class="comment">(*
    | _ when s2rt_is_boxed s2t_app =&gt; hityp_ptr
*)</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14040"><span class="dyncstuse">s2cst_isabs_get</span></a> s2c <span class="keyword">of</span>
      <span class="keyword">|</span> Some <span class="keyword">(</span>os2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> os2e <span class="keyword">of</span>
        <span class="keyword">|</span> Some s2e <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2e<span class="keyword">.</span>s2exp_node <span class="keyword">of</span>
          <span class="keyword">|</span> S2Elam <span class="keyword">(</span>s2vs_arg<span class="keyword">,</span> s2e_body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">//
</span>              <span class="keyword">fun</span> aux <span class="keyword">(</span>
                  s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span>
                <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#33374"><span class="stacstuse">stasub_t</span></a></span> <span class="keyword">=</span>
                <span class="keyword">case+</span> <span class="keyword">(</span>s2vs<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">of</span>
                <span class="keyword">|</span> <span class="keyword">(</span>cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span><span class="keyword">,</span> cons <span class="keyword">(</span>s2e<span class="keyword">,</span> s2es<span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                    <span class="keyword">val</span> sub <span class="keyword">=</span> aux <span class="keyword">(</span>s2vs<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#33428"><span class="dyncstuse">stasub_add</span></a> <span class="keyword">(</span>sub<span class="keyword">,</span> s2v<span class="keyword">,</span> s2e<span class="keyword">)</span>
                  <span class="keyword">end</span> <span class="comment">// end of [cons, cons]
</span>                <span class="keyword">|</span> <span class="keyword">(</span>nil _<span class="keyword">,</span> nil _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#33402"><span class="dyncstuse">stasub_nil</span></a>
                <span class="keyword">|</span> <span class="keyword">(</span>_<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_interror <span class="keyword">(</span><span class="keyword">)</span>
                    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": s2exp_app_tr: S2Eapp: arity error"
                    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
                  <span class="keyword">in</span>
                    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#33374"><span class="stacstuse">stasub_t</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
                  <span class="keyword">end</span> <span class="comment">// end [_,_]
</span>              <span class="comment">// end of [aux]
</span><span class="comment">//
</span>              <span class="keyword">val</span> sub <span class="keyword">=</span> aux <span class="keyword">(</span>s2vs_arg<span class="keyword">,</span> s2es_arg<span class="keyword">)</span>
              <span class="keyword">val</span> s2e_app <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#33866"><span class="dyncstuse">s2exp_subst</span></a> <span class="keyword">(</span>sub<span class="keyword">,</span> s2e_body<span class="keyword">)</span>
<span class="comment">//
</span>            <span class="keyword">in</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e_app<span class="keyword">,</span> named<span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [S2Elam]
</span>          <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t_app<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>        <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t_app<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [case]
</span>      <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t_app<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [case]
</span>    <span class="keyword">end</span> <span class="comment">(* end of [S2Ecst] *)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t_app<span class="keyword">)</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s2exp_app_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s2Var_tr_named <span class="staexp"><span class="keyword">.&lt;&gt;.</span></span> <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
<span class="keyword">,</span> deep<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s2V<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2386"><span class="stacstuse">s2Var_t</span></a></span><span class="keyword">,</span> named<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#19347"><span class="dyncstuse">s2Var_lbs_get</span></a> s2V <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2Vb<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2elb <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#19815"><span class="dyncstuse">s2Varbound_val_get</span></a> <span class="keyword">(</span>s2Vb<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2elb<span class="keyword">,</span> named<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#19450"><span class="dyncstuse">s2Var_ubs_get</span></a> s2V <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2Vb<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2eub <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#19815"><span class="dyncstuse">s2Varbound_val_get</span></a> <span class="keyword">(</span>s2Vb<span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2eub<span class="keyword">,</span> named<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3482"><span class="dyncstuse">hityp_abs</span></a> <span class="comment">// end of [list_nil]
</span>    <span class="keyword">end</span> <span class="comment">// end of [list_nil]
</span><span class="keyword">end</span> <span class="comment">// end of [s2Var_tr_named]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> update_ifnot_named <span class="keyword">(</span>
  res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span><span class="keyword">,</span> s2e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span><span class="keyword">,</span> named<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span>
<span class="keyword">)</span> <span class="keyword">:&lt;&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> res <span class="keyword">of</span>
  <span class="keyword">|</span> Some _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">if</span> not<span class="keyword">(</span>named<span class="keyword">)</span> <span class="keyword">then</span> res := Some <span class="keyword">(</span>s2e<span class="keyword">)</span>
<span class="comment">// end of [update_ifnot_named]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s2explst_tr_named <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span>
  <span class="keyword">case+</span> s2es <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2e<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> named<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a>
      <span class="keyword">val</span> hit <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> update_ifnot_named <span class="keyword">(</span>res<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
    <span class="keyword">in</span>
      list_cons <span class="keyword">(</span>hit<span class="keyword">,</span> s2explst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">// end of [s2explst_tr_named]
</span>
<span class="keyword">fun</span> s2explst_tr <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">in</span> s2explst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2explst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s2explstlst_tr_named <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9489"><span class="stacstuse">s2explstlst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2919"><span class="stacstuse">hityplstlst</span></a></span> <span class="keyword">=</span>
  <span class="keyword">case+</span> s2ess <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2es<span class="keyword">,</span> s2ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hits <span class="keyword">=</span> s2explst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span> <span class="keyword">in</span>
      list_cons <span class="keyword">(</span>hits<span class="keyword">,</span> s2explstlst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> s2ess<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">// end of [s2explstlst_tr_named]
</span>
<span class="keyword">fun</span> s2explstlst_tr <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9489"><span class="stacstuse">s2explstlst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2919"><span class="stacstuse">hityplstlst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">in</span> s2explstlst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> s2ess<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2explst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s2explst_npf_tr_named <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
<span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux1 <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> s2es <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2e<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#26640"><span class="dyncstuse">s2exp_is_proof</span></a> s2e <span class="keyword">then</span> aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">else</span> <span class="keyword">let</span>
          <span class="keyword">var</span> named<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a>
          <span class="keyword">val</span> hit <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> update_ifnot_named <span class="keyword">(</span>res<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
        <span class="keyword">in</span>
          list_cons <span class="keyword">(</span>hit<span class="keyword">,</span> aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [if]
</span>      <span class="keyword">end</span> <span class="comment">(* end of [cons] *)</span>
    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span>  <span class="comment">// end of [aux1]
</span>  <span class="keyword">fun</span> aux2 <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">if</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2es <span class="keyword">of</span>
      <span class="keyword">|</span> list_cons <span class="keyword">(</span>_<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> aux2 <span class="keyword">(</span>loc0<span class="keyword">,</span> i-1<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span>
      <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// deadcode
</span>    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
      aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span> <span class="comment">// proof arguments have been dropped
</span>    <span class="keyword">end</span> <span class="comment">// end of [if]
</span>  <span class="comment">// end of [aux2]
</span><span class="keyword">in</span>
  aux2 <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2explst_npf_tr_named]
</span>
<span class="keyword">fun</span> s2explst_npf_tr <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">in</span> s2explst_npf_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> s2es<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2explst_npf_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> labs2explst_npf_tr_named <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
<span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> ls2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2635"><span class="stacstuse">labhityplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux1 <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> ls2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2635"><span class="stacstuse">labhityplst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> ls2es <span class="keyword">of</span>
    <span class="keyword">|</span> LABS2EXPLSTcons
        <span class="keyword">(</span>l<span class="keyword">,</span> s2e<span class="keyword">,</span> ls2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> isprf <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#26640"><span class="dyncstuse">s2exp_is_proof</span></a> s2e <span class="keyword">in</span>
        <span class="keyword">if</span> isprf <span class="keyword">then</span> <span class="keyword">begin</span>
          aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span> <span class="comment">// HX: skipping the proof argument
</span>        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">let</span>
          <span class="keyword">var</span> named<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a>
          <span class="keyword">val</span> hit <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> update_ifnot_named <span class="keyword">(</span>res<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
        <span class="keyword">in</span>
          LABHITYPLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> hit<span class="keyword">,</span> aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
      <span class="keyword">end</span> <span class="comment">// end of [LABS2EXPLSTcons]
</span>    <span class="keyword">|</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABHITYPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux1]
</span>  <span class="keyword">fun</span> aux2 <span class="keyword">(</span>
      loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
    <span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> ls2es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2635"><span class="stacstuse">labhityplst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">if</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">begin</span> <span class="keyword">case+</span> ls2es <span class="keyword">of</span>
      <span class="keyword">|</span> LABS2EXPLSTcons <span class="keyword">(</span>_<span class="keyword">,</span> _<span class="keyword">,</span> ls2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> aux2 <span class="keyword">(</span>loc0<span class="keyword">,</span> i-1<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span>
      <span class="keyword">|</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABHITYPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// deadcode
</span>    <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
      aux1 <span class="keyword">(</span>loc0<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span> <span class="comment">// proof arguments have been dropped
</span>    <span class="keyword">end</span> <span class="comment">// end of [if]
</span>  <span class="comment">// end of [aux2]
</span><span class="keyword">in</span>
  aux2 <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [labs2explst_npf_tr_named]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstimp">s2exp_tr_named</span></a> <span class="keyword">(</span>
  loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e0<span class="keyword">,</span> named
<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2e0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#35358"><span class="dyncstuse">s2exp_whnf</span></a> s2e0<span class="keyword">;</span> <span class="keyword">val</span> s2t0 <span class="keyword">=</span> s2e0<span class="keyword">.</span>s2exp_srt
<span class="comment">(*
  val () = begin
    print "s2exp_tr_named: loc0 = "; $Loc.print_location loc0; print_newline ();
    print "s2exp_tr_named: deep = "; print deep; print_newline ();
    print "s2exp_tr_named: s2e0 = "; print s2e0; print_newline ();
  end // end of [val]
*)</span>
  <span class="keyword">fn</span> err <span class="keyword">(</span>
      loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2t0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> s2e0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error4 <span class="keyword">(</span>loc0<span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": [%s]: s2exp_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": s2t0 = "<span class="keyword">;</span> prerr s2t0<span class="keyword">;</span> prerr "; s2e0 = "<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#27774"><span class="dyncstuse">prerr_s2exp</span></a> <span class="keyword">(</span>s2e0<span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err]
</span><span class="keyword">in</span>
  <span class="keyword">case+</span> s2e0<span class="keyword">.</span>s2exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S2Eapp <span class="keyword">(</span>
      s2e_fun<span class="keyword">,</span> s2es_arg
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2t0 <span class="keyword">=</span> s2e0<span class="keyword">.</span>s2exp_srt <span class="keyword">in</span>
      s2exp_app_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2t0<span class="keyword">,</span> s2e_fun<span class="keyword">,</span> s2es_arg<span class="keyword">,</span> named<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Eapp]
</span>  <span class="keyword">|</span> S2Ecrypt s2e <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
  <span class="keyword">|</span> S2Ecst s2c <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2t0 <span class="keyword">of</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14040"><span class="dyncstuse">s2cst_isabs_get</span></a> s2c <span class="keyword">of</span>
      <span class="keyword">|</span> Some os2e <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> os2e <span class="keyword">of</span>
        <span class="keyword">|</span> Some s2e <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
        <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t0<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>      <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> hityp_ptr_abs <span class="keyword">(</span>s2t0<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [_] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Ecst]
</span>  <span class="keyword">|</span> S2Eclo <span class="keyword">(</span>knd<span class="keyword">,</span> s2exp<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> knd &lt;&gt; 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a> <span class="comment">(*1/-1:cloptr/cloref*)</span> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3482"><span class="dyncstuse">hityp_abs</span></a> <span class="comment">(*0:clo*)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Eclo]
</span>  <span class="keyword">|</span> S2Edatconptr _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a>
  <span class="keyword">|</span> S2Edatcontyp <span class="keyword">(</span>d2c<span class="keyword">,</span> s2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> deep <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">let</span>
        <span class="keyword">val</span> npf <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22419"><span class="dyncstuse">d2con_npf_get</span></a> d2c
        <span class="keyword">val</span> hits_arg <span class="keyword">=</span> s2explst_npf_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> s2es<span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4489"><span class="dyncstuse">hityp_tysumtemp</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> hits_arg<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a> <span class="comment">// deep = 0
</span>      <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Edatcontyp]
</span>  <span class="keyword">|</span> S2Eexi <span class="keyword">(</span>_<span class="comment">(*s2vs*)</span><span class="keyword">,</span> _<span class="comment">(*s2ps*)</span><span class="keyword">,</span> s2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
  <span class="keyword">|</span> S2Eextype <span class="keyword">(</span>name<span class="keyword">,</span> _arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> _arg <span class="keyword">=</span> s2explstlst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> _arg<span class="keyword">,</span> res<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">case+</span> res <span class="keyword">of</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> named := <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a> <span class="keyword">|</span> Some _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">)</span> <span class="comment">// end of [val]
</span>    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3916"><span class="dyncstuse">hityp_extype</span></a> <span class="keyword">(</span>name<span class="keyword">,</span> _arg<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Eextype]
</span>  <span class="keyword">|</span> S2Efun <span class="keyword">(</span>
      fc<span class="keyword">,</span> _<span class="comment">(*lin*)</span><span class="keyword">,</span> _<span class="comment">(*s2fe*)</span><span class="keyword">,</span> npf<span class="keyword">,</span> s2es_arg<span class="keyword">,</span> s2e_res
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> deep <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">let</span>
        <span class="keyword">val</span> hits_arg <span class="keyword">=</span> s2explst_npf_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> s2es_arg<span class="keyword">)</span>
        <span class="keyword">val</span> hit_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e_res<span class="keyword">)</span>
        <span class="comment">// HX: [hityp_varetisze] turns [ats_var_type]
</span>        <span class="keyword">val</span> hit_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4607"><span class="dyncstuse">hityp_varetize</span></a> <span class="keyword">(</span>hit_res<span class="keyword">)</span> <span class="comment">// into [ats_varet_type] if needed
</span><span class="comment">(*
        val HITNAM (_, name) = hit_res.hityp_name
        val () = (print "s2exp_tr_named: S2Efun: hit_res = "; print name; print_newline ())
*)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4020"><span class="dyncstuse">hityp_fun</span></a> <span class="keyword">(</span>fc<span class="keyword">,</span> hits_arg<span class="keyword">,</span> hit_res<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span> <span class="keyword">case+</span> fc <span class="keyword">of</span>
        <span class="keyword">|</span> $Syn<span class="keyword">.</span>FUNCLOfun <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a> <span class="comment">// function pointer
</span>        <span class="keyword">|</span> $Syn<span class="keyword">.</span>FUNCLOclo knd <span class="keyword">=&gt;</span> <span class="keyword">if</span> knd <span class="keyword">=</span> 0 <span class="keyword">then</span> <span class="keyword">begin</span>
            <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3550"><span class="dyncstuse">hityp_clo</span></a> <span class="comment">// GCC is to report an error as [hityp_clo] is abstract
</span>          <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
            <span class="keyword">if</span> knd <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3572"><span class="dyncstuse">hityp_clo_ptr</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3598"><span class="dyncstuse">hityp_clo_ref</span></a> <span class="comment">(*knd = -1*)</span>
          <span class="keyword">end</span> <span class="comment">// end of [FUNCLOclo]
</span>      <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Efun]
</span>  <span class="keyword">|</span> S2Elam <span class="keyword">(</span>_<span class="comment">(*s2vs*)</span><span class="keyword">,</span> s2e_body<span class="keyword">)</span> <span class="keyword">=&gt;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e_body<span class="keyword">,</span> named<span class="keyword">)</span>
  <span class="keyword">|</span> S2Emetfn <span class="keyword">(</span>_<span class="comment">(*stamp*)</span><span class="keyword">,</span> _<span class="comment">(*met*)</span><span class="keyword">,</span> s2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">)</span>
<span class="comment">(*
// HX-2010-12-04: inadequate design
  | S2Enamed (name, _) =&gt; let
      val name = $Sym.symbol_name name in hityp_extype name
    end // end of [S2Enamed]
*)</span>
  <span class="keyword">|</span> S2Erefarg <span class="keyword">(</span>refval<span class="keyword">,</span> s2e_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4088"><span class="dyncstuse">hityp_refarg</span></a> <span class="keyword">(</span>refval<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e_arg<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Erefarg]
</span>  <span class="keyword">|</span> S2Etop <span class="keyword">(</span>_<span class="comment">(*knd*)</span><span class="keyword">,</span> s2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
  <span class="keyword">|</span> S2Etyarr <span class="keyword">(</span>s2e_elt<span class="keyword">,</span> s2ess_dim<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="keyword">,</span> s2e_elt<span class="keyword">)</span> <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4178"><span class="dyncstuse">hityp_tyarr</span></a> <span class="keyword">(</span>hit_elt<span class="keyword">,</span> s2ess_dim<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2Etyarr]
</span>  <span class="keyword">|</span> S2Etyrec <span class="keyword">(</span>knd<span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> hit0 <span class="keyword">where</span> <span class="keyword">{</span>
<span class="comment">(*
      val () = begin
        print "s2exp_tr_named: S2Etyrec: s2e0 = "; print s2e0; print_newline ()
      end // end of [val]
*)</span>
<span class="comment">//
</span>      <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> lhits <span class="keyword">=</span> labs2explst_npf_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="comment">//
</span>      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> knd <span class="keyword">of</span>
        <span class="keyword">|</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
            <span class="keyword">if</span> deep <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4317"><span class="dyncstuse">hityp_tyrectemp</span></a> <span class="keyword">(</span>1<span class="comment">(*box*)</span><span class="keyword">,</span> lhits<span class="keyword">)</span>
            <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3719"><span class="dyncstuse">hityp_ptr</span></a>
          <span class="keyword">end</span> <span class="comment">// end of [TYRECKINDbox]
</span>        <span class="keyword">|</span> TYRECKINDflt_ext name <span class="keyword">=&gt;</span> <span class="keyword">let</span>
            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> named := <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a> <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4243"><span class="dyncstuse">hityp_tyrec</span></a> <span class="keyword">(</span>~1<span class="comment">(*ext*)</span><span class="keyword">,</span> name<span class="keyword">,</span> lhits<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [TYRECKINDflt_ext]
</span>        <span class="keyword">|</span> _ <span class="comment">(*TYRECKINDflt0/1*)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> res <span class="keyword">of</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> named := <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a> <span class="keyword">|</span> Some _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">in</span>
            <span class="keyword">case+</span> lhits <span class="keyword">of</span>
            <span class="keyword">|</span> LABHITYPLSTcons <span class="keyword">(</span>
                _<span class="comment">(*lab*)</span><span class="keyword">,</span> hit<span class="keyword">,</span> LABHITYPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
              <span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4381"><span class="dyncstuse">hityp_tyrecsin</span></a> hit <span class="comment">// end of [LABHITYPLSTcons]
</span>            <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4317"><span class="dyncstuse">hityp_tyrectemp</span></a> <span class="keyword">(</span>0<span class="comment">(*flt*)</span><span class="keyword">,</span> lhits<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [TYRECKINDflt0/1]
</span>      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span> <span class="comment">// end of [val]
</span><span class="comment">(*
      val () = begin
        print "s2exp_tr_named: S2Etyrec: hit0 = "; print_hityp hit0; print_newline ()
      end // end of [val]
*)</span>
    <span class="keyword">}</span> <span class="comment">// end of [S2Etyrec]
</span>  <span class="keyword">|</span> S2Euni <span class="keyword">(</span>_<span class="comment">(*s2vs*)</span><span class="keyword">,</span> _<span class="comment">(*s2ps*)</span><span class="keyword">,</span> s2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">,</span> named<span class="keyword">)</span>
<span class="comment">(*
  | S2Eunion (stamp, s2i, ls2es) =&gt; let
      val lhits = labs2explst_npf_tr (0, ls2es)
      val lnames = List.map labhityp_labname_get lhits
      val tk_uni = TYKEYuni lnames
      val name = typedef_map_find tk
    in
      hityp_union (name, lhits)
    end // end of [S2Eunion]
*)</span>
  <span class="keyword">|</span> S2EVar s2V <span class="keyword">=&gt;</span> s2Var_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2V<span class="keyword">,</span> named<span class="keyword">)</span>
  <span class="keyword">|</span> S2Evar s2v <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4139"><span class="dyncstuse">hityp_s2var</span></a> s2v
  <span class="keyword">|</span> S2Evararg _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3846"><span class="dyncstuse">hityp_vararg</span></a>
  <span class="keyword">|</span> S2Ewth <span class="keyword">(</span>s2e<span class="keyword">,</span> _<span class="comment">(*wths2es*)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e<span class="keyword">)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err <span class="keyword">(</span>loc0<span class="keyword">,</span> s2t0<span class="keyword">,</span> s2e0<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2exp_tr_named]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstimp">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">(*
** HX-2010-12-05: [s2e0] is assumed to be unnamed by default
*)</span>
  <span class="keyword">var</span> named<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#2976"><span class="dyncstuse">s2exp_tr_named</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> deep<span class="keyword">,</span> s2e0<span class="keyword">,</span> named<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s2exp_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> hipatlst_typ_get <span class="keyword">(</span>hips<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6508"><span class="stacstuse">hipatlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6324"><span class="stacstuse">hipat</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span>hips<span class="keyword">,</span> <span class="keyword">lam</span> hip <span class="keyword">=&lt;&gt;</span> hip<span class="keyword">.</span>hipat_typ<span class="keyword">)</span>
<span class="comment">// end of [hipatlst_typ_get]
</span>
<span class="keyword">fn</span> p3at_is_proof <span class="keyword">(</span>p3t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#2770"><span class="stacstuse">p3at</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#26640"><span class="dyncstuse">s2exp_is_proof</span></a> <span class="keyword">(</span>p3t<span class="keyword">.</span>p3at_typ<span class="keyword">)</span>

<span class="keyword">fn</span> p3atlst_arg_tr
  <span class="keyword">(</span>npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> p3ts<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#2925"><span class="stacstuse">p3atlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6508"><span class="stacstuse">hipatlst</span></a></span> <span class="keyword">=</span> aux <span class="keyword">(</span>npf<span class="keyword">,</span> p3ts<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> p3ts<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#2925"><span class="stacstuse">p3atlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6508"><span class="stacstuse">hipatlst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> p3ts <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>p3t<span class="keyword">,</span> p3ts<span class="keyword">)</span> <span class="keyword">=&gt;</span>
        <span class="keyword">if</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> p3ts<span class="keyword">)</span>
        <span class="keyword">else</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> p3at_is_proof p3t <span class="keyword">then</span> aux <span class="keyword">(</span>0<span class="keyword">,</span> p3ts<span class="keyword">)</span>
          <span class="keyword">else</span> cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t<span class="keyword">,</span> aux <span class="keyword">(</span>0<span class="keyword">,</span> p3ts<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [if]
</span>      <span class="comment">(* end of [list_cons] *)</span>
    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux]
</span><span class="keyword">}</span> <span class="comment">// end of [p3atlst_arg_tr]
</span>
<span class="keyword">fn</span> labp3atlst_arg_tr
  <span class="keyword">(</span>npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> lp3ts<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#2642"><span class="stacstuse">labp3atlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6190"><span class="stacstuse">labhipatlst</span></a></span> <span class="keyword">=</span> aux <span class="keyword">(</span>npf<span class="keyword">,</span> lp3ts<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> lp3ts<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#2642"><span class="stacstuse">labp3atlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6190"><span class="stacstuse">labhipatlst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> lp3ts <span class="keyword">of</span>
    <span class="keyword">|</span> LABP3ATLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> p3t<span class="keyword">,</span> lp3ts<span class="keyword">)</span> <span class="keyword">=&gt;</span>
        <span class="keyword">if</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> lp3ts<span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> p3at_is_proof p3t <span class="keyword">then</span> aux <span class="keyword">(</span>0<span class="keyword">,</span> lp3ts<span class="keyword">)</span>
          <span class="keyword">else</span> <span class="keyword">begin</span>
            LABHIPATLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t<span class="keyword">,</span> aux <span class="keyword">(</span>0<span class="keyword">,</span> lp3ts<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
        <span class="keyword">end</span> <span class="comment">// end of [if]
</span>    <span class="keyword">|</span> LABP3ATLSTdot <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABHIPATLSTdot <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">|</span> LABP3ATLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABHIPATLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux]
</span><span class="keyword">}</span> <span class="comment">// end of [labp3atlst_arg_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstimp">p3at_tr</span></a> <span class="keyword">(</span>p3t0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6324"><span class="stacstuse">hipat</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> p3t0<span class="keyword">.</span>p3at_loc
  <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> p3t0<span class="keyword">.</span>p3at_typ<span class="keyword">)</span>
<span class="comment">(*
  val () = begin
    print "p3at_tr: p3t0 = "; print_p3at p3t0; print_newline ()
    print "p3at_tr: p3t0.p3at_typ = "; print_s2exp p3t0.p3at_typ; print_newline ();
    print "p3at_tr: hit0 = "; print_hityp hit0; print_newline ();
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> p3t0<span class="keyword">.</span>p3at_node <span class="keyword">of</span>
  <span class="keyword">|</span> P3Tann <span class="keyword">(</span>p3t<span class="keyword">,</span> s2e_ann<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hip <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t
      <span class="keyword">val</span> hit_ann <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_ann<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7093"><span class="dyncstuse">hipat_ann</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hip<span class="keyword">,</span> hit_ann<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [P3Tann]
</span>  <span class="keyword">|</span> P3Tany _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7157"><span class="dyncstuse">hipat_any</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">)</span>
  <span class="keyword">|</span> P3Tas <span class="keyword">(</span>refknd<span class="keyword">,</span> d2v<span class="keyword">,</span> p3t<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#7753"><span class="dyncstuse">d2var_count_inc</span></a> <span class="keyword">(</span>d2v<span class="keyword">)</span>
    <span class="keyword">in</span>  
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7199"><span class="dyncstuse">hipat_as</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> refknd<span class="keyword">,</span> d2v<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [P3Tas]
</span>  <span class="keyword">|</span> P3Tbool b <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7275"><span class="dyncstuse">hipat_bool</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> b<span class="keyword">)</span>
  <span class="keyword">|</span> P3Tchar c <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7327"><span class="dyncstuse">hipat_char</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> c<span class="keyword">)</span>
  <span class="keyword">|</span> P3Tcon <span class="keyword">(</span>freeknd<span class="keyword">,</span> d2c<span class="keyword">,</span> npf<span class="keyword">,</span> p3ts_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hips_arg <span class="keyword">=</span> p3atlst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> p3ts_arg<span class="keyword">)</span>
      <span class="keyword">val</span> freeknd <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> p3ts_arg <span class="keyword">of</span>
        <span class="keyword">|</span> list_cons _ <span class="keyword">=&gt;</span> freeknd <span class="keyword">|</span> list_nil _ <span class="keyword">=&gt;</span> 1 <span class="comment">(*nonfreeable*)</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
    <span class="keyword">in</span>
      <span class="keyword">case+</span> 0 <span class="keyword">of</span>
      <span class="keyword">|</span> _ <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#8018"><span class="dyncstuse">hipatlst_is_unused</span></a> hips_arg <span class="keyword">=&gt;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7506"><span class="dyncstuse">hipat_con_any</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> freeknd<span class="keyword">,</span> d2c<span class="keyword">)</span>
        <span class="comment">// end of [_ when ...]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hits_arg <span class="keyword">=</span> hipatlst_typ_get <span class="keyword">(</span>hips_arg<span class="keyword">)</span>
<span class="comment">(*
          val () = () where {
            val () = print "p3at_tr: P3Tcon: hits_arg = "
            val () = print_hityplst (hits_arg)
            val () = print_newline ()
          } // end of [val]
*)</span>
          <span class="keyword">val</span> hit_sum <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4489"><span class="dyncstuse">hityp_tysumtemp</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> hits_arg<span class="keyword">)</span>
<span class="comment">(*
          val () = () where {
            val () = print "p3at_tr: P3Tcon: hit_sum = "
            val () = print_hityp (hit_sum)
            val () = print_newline ()
          } // end of [val]
*)</span>
        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7380"><span class="dyncstuse">hipat_con</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> freeknd<span class="keyword">,</span> d2c<span class="keyword">,</span> hips_arg<span class="keyword">,</span> hit_sum<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [P3Tcon]
</span>  <span class="keyword">|</span> P3Tempty <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7579"><span class="dyncstuse">hipat_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">)</span>
  <span class="keyword">|</span> P3Texist <span class="keyword">(</span>_<span class="comment">(*s2vs*)</span><span class="keyword">,</span> p3t<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t
  <span class="keyword">|</span> P3Tint <span class="keyword">(</span>str<span class="keyword">,</span> int<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7623"><span class="dyncstuse">hipat_int</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">,</span> int<span class="keyword">)</span>
  <span class="keyword">|</span> P3Tlst <span class="keyword">(</span>s2e_elt<span class="keyword">,</span> p3ts_elt<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_elt<span class="keyword">)</span>
      <span class="keyword">val</span> hips_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1775"><span class="dyncstuse">p3atlst_tr</span></a> p3ts_elt
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7693"><span class="dyncstuse">hipat_lst</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hit_elt<span class="keyword">,</span> hips_elt<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [P3Tlst]
</span>  <span class="keyword">|</span> P3Trec <span class="keyword">(</span>knd<span class="keyword">,</span> npf<span class="keyword">,</span> lp3ts<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_rec <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> p3t0<span class="keyword">.</span>p3at_typ<span class="keyword">)</span>
      <span class="keyword">val</span> lhips <span class="keyword">=</span> labp3atlst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> lp3ts<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7765"><span class="dyncstuse">hipat_rec</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> knd<span class="keyword">,</span> lhips<span class="keyword">,</span> hit_rec<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [P3Trec]
</span>  <span class="keyword">|</span> P3Tstring str <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7871"><span class="dyncstuse">hipat_string</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">)</span>
  <span class="keyword">|</span> P3Tvar <span class="keyword">(</span>refknd<span class="keyword">,</span> d2v<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#7927"><span class="dyncstuse">hipat_var</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> refknd<span class="keyword">,</span> d2v<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [P3Tvar]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_interror <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": p3at_tr: p3t0 = "<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#3444"><span class="dyncstuse">prerr_p3at</span></a> p3t0<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6324"><span class="stacstuse">hipat</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [p3at_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1775"><span class="dyncstimp">p3atlst_tr</span></a> <span class="keyword">(</span>p3ts<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>p3ts<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a><span class="keyword">)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> hiexplst_typ_get <span class="keyword">(</span>hies<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2893"><span class="stacstuse">hityplst</span></a></span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span>hies<span class="keyword">,</span> <span class="keyword">lam</span> hie <span class="keyword">=&lt;&gt;</span> hie<span class="keyword">.</span>hiexp_typ<span class="keyword">)</span>
<span class="comment">// end of [hiexplst_typ_get]
</span>
<span class="keyword">fn</span> d3exp_is_proof <span class="keyword">(</span>d3e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10952"><span class="stacstuse">d3exp</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#26640"><span class="dyncstuse">s2exp_is_proof</span></a> <span class="keyword">(</span>d3e<span class="keyword">.</span>d3exp_typ<span class="keyword">)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">viewtypedef</span> <span class="staexp"><a name="20144"><span class="stacstdec">hiexplst_vt <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22725"><span class="stacstuse">List_vt</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span></a></span>

<span class="keyword">extern</span> <span class="keyword">fun</span> <a name="20184"><span class="dyncstdec">d3explst_funarg_tr
  <span class="keyword">(</span>isvararg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span><span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span></span></a>
<span class="comment">// end of [d3explst_funarg_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#20184"><span class="dyncstimp">d3explst_funarg_tr</span></a>
  <span class="keyword">(</span>isvararg<span class="keyword">,</span> npf<span class="keyword">,</span> d3es<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>  <span class="keyword">fun</span> aux0 <span class="keyword">(</span>
      hies<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#20144"><span class="stacstuse">hiexplst_vt</span></a></span>
    <span class="keyword">,</span> ld3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10564"><span class="stacstuse">labd3explst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> ld3es <span class="keyword">of</span>
    <span class="keyword">|</span> LABD3EXPLSTcons <span class="keyword">(</span>_<span class="comment">(*lab*)</span><span class="keyword">,</span> d3e<span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">;</span> <span class="keyword">val</span> hies <span class="keyword">=</span> list_vt_cons <span class="keyword">(</span>hie<span class="keyword">,</span> hies<span class="keyword">)</span>
      <span class="keyword">in</span>
        aux0 <span class="keyword">(</span>hies<span class="keyword">,</span> ld3es<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [LABD3EXPLSTcons]
</span>    <span class="keyword">|</span> LABD3EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#4588"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_vt_reverse_list</span></a> <span class="keyword">(</span>hies<span class="keyword">)</span>
  <span class="comment">// end of [aux0]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> aux1 <span class="keyword">(</span>
      hies<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#20144"><span class="stacstuse">hiexplst_vt</span></a></span>
    <span class="keyword">,</span> d3e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10952"><span class="stacstuse">d3exp</span></a></span>
    <span class="keyword">,</span> d3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> d3es <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>d3e1<span class="keyword">,</span> d3es1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">;</span> <span class="keyword">val</span> hies <span class="keyword">=</span> list_vt_cons <span class="keyword">(</span>hie<span class="keyword">,</span> hies<span class="keyword">)</span>
      <span class="keyword">in</span>
        aux1 <span class="keyword">(</span>hies<span class="keyword">,</span> d3e1<span class="keyword">,</span> d3es1<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> d3e <span class="keyword">=</span> loop <span class="keyword">(</span>d3e<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
          <span class="keyword">fun</span> loop <span class="comment">// for a case like ,(`(@(1,2,3)))
</span>            <span class="keyword">(</span>d3e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10952"><span class="stacstuse">d3exp</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10952"><span class="stacstuse">d3exp</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> d3e<span class="keyword">.</span>d3exp_node <span class="keyword">of</span>
            <span class="keyword">|</span> D3Eseq <span class="keyword">(</span>list_cons <span class="keyword">(</span>d3e<span class="keyword">,</span> list_nil<span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> loop <span class="keyword">(</span>d3e<span class="keyword">)</span> <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> d3e
          <span class="comment">// end of [loop]  
</span>        <span class="keyword">}</span> <span class="comment">// end of [val]
</span>      <span class="keyword">in</span>  
<span class="comment">//
</span>        <span class="keyword">if</span> isvararg <span class="keyword">then</span> <span class="keyword">(</span>
          <span class="keyword">case+</span> d3e<span class="keyword">.</span>d3exp_node <span class="keyword">of</span>
          <span class="keyword">|</span> D3Erec <span class="keyword">(</span>_<span class="keyword">,</span> _<span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> aux0 <span class="keyword">(</span>hies<span class="keyword">,</span> ld3es<span class="keyword">)</span>
          <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#3568"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_vt_free__boxed</span></a> <span class="keyword">(</span>hies<span class="keyword">)</span>
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error4 <span class="keyword">(</span>d3e<span class="keyword">.</span>d3exp_loc<span class="keyword">)</span>
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": [%s]: d3explst_funarg_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span>
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": the expression is expected to be a record of the form @(...) but it is not."
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">in</span>
               <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">(* end of [_] *)</span>
        <span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">;</span> <span class="keyword">val</span> hies <span class="keyword">=</span> list_vt_cons <span class="keyword">(</span>hie<span class="keyword">,</span> hies<span class="keyword">)</span>
        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#4588"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_vt_reverse_list</span></a> <span class="keyword">(</span>hies<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="comment">//
</span>      <span class="keyword">end</span> <span class="comment">(* end of [list_nil] *)</span>
  <span class="comment">// end of [aux1]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> aux2 <span class="keyword">(</span>
      i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> d3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span> <span class="keyword">=</span> <span class="comment">// HX: skipping proof args
</span>    <span class="keyword">case+</span> d3es <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>d3e<span class="keyword">,</span> d3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>d3e<span class="keyword">)</span> <span class="keyword">in</span> aux2 <span class="keyword">(</span>i-1<span class="keyword">,</span> d3es<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="keyword">else</span>
          aux1 <span class="keyword">(</span>list_vt_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> d3e<span class="keyword">,</span> d3es<span class="keyword">)</span> <span class="comment">// HX: no more proof args
</span>        <span class="comment">// end of [if]
</span>      <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [nil]
</span>  <span class="comment">// end of [aux2]
</span><span class="comment">//
</span><span class="keyword">in</span>
  aux2 <span class="keyword">(</span>npf<span class="keyword">,</span> d3es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3explst_funarg_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d3explst_arg_tr <span class="keyword">(</span>
  npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> d3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>
      i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> d3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13435"><span class="stacstuse">hiexplst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> d3es <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>d3e<span class="keyword">,</span> d3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> i <span class="keyword">of</span>
      <span class="keyword">|</span> _ <span class="keyword">when</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e <span class="keyword">in</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> d3es<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [i &gt; 0]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> d3exp_is_proof d3e <span class="keyword">then</span> <span class="keyword">let</span>
            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e <span class="keyword">in</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> d3es<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
            cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">,</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> d3es<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>      <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [aux]
</span><span class="keyword">in</span>
  aux <span class="keyword">(</span>npf<span class="keyword">,</span> d3es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3explst_arg_tr]
</span>
<span class="keyword">fn</span> labd3explst_arg_tr <span class="keyword">(</span>
    npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> ld3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10564"><span class="stacstuse">labd3explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#12897"><span class="stacstuse">labhiexplst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>
      i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> ld3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10564"><span class="stacstuse">labd3explst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#12897"><span class="stacstuse">labhiexplst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> ld3es <span class="keyword">of</span>
    <span class="keyword">|</span> LABD3EXPLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> d3e<span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> i <span class="keyword">of</span>
      <span class="keyword">|</span> _ <span class="keyword">when</span> i <span class="keyword">&gt;</span> 0 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e <span class="keyword">in</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> ld3es<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [i &gt; 0]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> d3exp_is_proof d3e <span class="keyword">then</span> <span class="keyword">let</span>
             <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e <span class="keyword">in</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> ld3es<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
            LABHIEXPLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">,</span> aux <span class="keyword">(</span>i-1<span class="keyword">,</span> ld3es<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
        <span class="keyword">end</span>
      <span class="keyword">end</span> <span class="comment">// end of [LABHIEXPLSTcons]
</span>    <span class="keyword">|</span> LABD3EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABHIEXPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [aux]
</span><span class="keyword">in</span>
  aux <span class="keyword">(</span>npf<span class="keyword">,</span> ld3es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [labd3explst_arg_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d3exp_cst_tr <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> hit0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span><span class="keyword">,</span> d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#2635"><span class="stacstuse">d2cst_t</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> sym <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#4409"><span class="dyncstuse">d2cst_sym_get</span></a> d2c <span class="keyword">in</span>
  <span class="keyword">case+</span> sym <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> sym <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#2608"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_TRUE</span></a> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16482"><span class="dyncstuse">hiexp_bool</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a><span class="keyword">)</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> sym <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#2580"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_FALSE</span></a> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16482"><span class="dyncstuse">hiexp_bool</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a><span class="keyword">)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17011"><span class="dyncstuse">hiexp_cst</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2c<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3exp_cst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d3exp_seq_tr <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> hit0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span><span class="keyword">,</span> d3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11109"><span class="stacstuse">d3explst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> hies <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a> d3es <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#15918"><span class="dyncstuse">hiexp_seq_simplify</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hies<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3exp_seq_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d3exp_tmpcst_tr <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> hit0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span><span class="keyword">,</span> d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#2635"><span class="stacstuse">d2cst_t</span></a></span><span class="keyword">,</span> s2ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9489"><span class="stacstuse">s2explstlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> sym <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#4409"><span class="dyncstuse">d2cst_sym_get</span></a> d2c <span class="keyword">in</span> <span class="keyword">case+</span> sym <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> sym <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#2776"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_SIZEOF</span></a> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2ess <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>cons <span class="keyword">(</span>s2e<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19486"><span class="dyncstuse">hiexp_sizeof</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_interror <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": d3exp_tmpcst_tr: sizeof"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [_] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_ when ...]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hitss <span class="keyword">=</span> s2explstlst_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> s2ess<span class="keyword">)</span>
<span class="comment">(*
      val () = begin
        print "d3exp_tmpcst_tr: hitss = "; print hitss; print_newline ()
      end // end of [val]
*)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19610"><span class="dyncstuse">hiexp_tmpcst</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2c<span class="keyword">,</span> hitss<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">(* end of [d3exp_tmpcst_tr] *)</span>

<span class="keyword">fn</span> d3exp_tmpvar_tr <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1783"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> hit0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#2808"><span class="stacstuse">hityp</span></a></span>
  <span class="keyword">,</span> d2v<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#2719"><span class="stacstuse">d2var_t</span></a></span><span class="keyword">,</span> s2ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9489"><span class="stacstuse">s2explstlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> hitss <span class="keyword">=</span> s2explstlst_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> s2ess<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19688"><span class="dyncstuse">hiexp_tmpvar</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2v<span class="keyword">,</span> hitss<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3exp_tmpvar_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d3lab1_tr
  <span class="keyword">(</span>d3l<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11372"><span class="stacstuse">d3lab1</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13522"><span class="stacstuse">hilab</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> d3l<span class="keyword">.</span>d3lab1_loc
<span class="keyword">in</span>
  <span class="keyword">case+</span> d3l<span class="keyword">.</span>d3lab1_node <span class="keyword">of</span>
  <span class="keyword">|</span> D3LAB1lab <span class="keyword">(</span>l<span class="keyword">,</span> s2e_rec<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_rec <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_rec<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19958"><span class="dyncstuse">hilab_lab</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> l<span class="keyword">,</span> hit_rec<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3LAB1lab]
</span>  <span class="keyword">|</span> D3LAB1ind <span class="keyword">(</span>d3ess<span class="keyword">,</span> s2e_elt<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hiess <span class="keyword">=</span> <span class="keyword">(</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>d3ess<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a><span class="keyword">)</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13489"><span class="stacstuse">hiexplstlst</span></a></span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_elt<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20016"><span class="dyncstuse">hilab_ind</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hiess<span class="keyword">,</span> hit_elt<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3LAB1ind]
</span><span class="keyword">end</span> <span class="comment">// end of [d3lab1_tr]
</span>
<span class="keyword">fn</span> d3lab1lst_tr
  <span class="keyword">(</span>d3ls<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11456"><span class="stacstuse">d3lab1lst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13601"><span class="stacstuse">hilablst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>d3ls<span class="keyword">,</span> d3lab1_tr<span class="keyword">)</span>
<span class="comment">// end of [d3lab1lst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> m3atch_tr
  <span class="keyword">(</span>m3at<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11506"><span class="stacstuse">m3atch</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13628"><span class="stacstuse">himat</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> m3at<span class="keyword">.</span>m3atch_exp
  <span class="keyword">val</span> ohip <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> m3at<span class="keyword">.</span>m3atch_pat <span class="keyword">of</span>
    <span class="keyword">|</span> Some p3t <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> p3t<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#6534"><span class="stacstuse">hipatopt</span></a></span> <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20102"><span class="dyncstuse">himat_make</span></a> <span class="keyword">(</span>m3at<span class="keyword">.</span>m3atch_loc<span class="keyword">,</span> hie<span class="keyword">,</span> ohip<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [m3atch_tr]
</span>
<span class="keyword">fn</span> m3atchlst_tr
  <span class="keyword">(</span>m3ats<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11604"><span class="stacstuse">m3atchlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13728"><span class="stacstuse">himatlst</span></a></span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>m3ats<span class="keyword">,</span> m3atch_tr<span class="keyword">)</span>
<span class="comment">// end of [m3atchlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> c3lau_tr
  <span class="keyword">(</span>c3l<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11926"><span class="stacstuse">c3lau</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13755"><span class="stacstuse">hiclau</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">(*
  val () = begin
    print "cla3_tr: c3l = "; print c3l; print_newline ()
  end // end of [val]
*)</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> c3l<span class="keyword">.</span>c3lau_loc
  <span class="keyword">val</span> hips <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1775"><span class="dyncstuse">p3atlst_tr</span></a> c3l<span class="keyword">.</span>c3lau_pat
<span class="comment">(*
  val () = begin
    print "cla3_tr: hips = "; print hips; print_newline ()
  end // end of [val]
*)</span>
  <span class="keyword">val</span> gua <span class="keyword">=</span> m3atchlst_tr c3l<span class="keyword">.</span>c3lau_gua
  <span class="keyword">val</span> body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> c3l<span class="keyword">.</span>c3lau_exp
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20159"><span class="dyncstuse">hiclau_make</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hips<span class="keyword">,</span> gua<span class="keyword">,</span> body<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [c3lau_tr]
</span>
<span class="keyword">fn</span> c3laulst_tr
  <span class="keyword">(</span>c3ls<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11993"><span class="stacstuse">c3laulst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13989"><span class="stacstuse">hiclaulst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>  <span class="keyword">fun</span> aux <span class="keyword">(</span> <span class="comment">// tail-recursive function
</span>      c3ls<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11993"><span class="stacstuse">c3laulst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13989"><span class="stacstuse">hiclaulst</span></a>? &gt;&gt; <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13989"><span class="stacstuse">hiclaulst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> c3ls <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons
      <span class="keyword">(</span>c3l<span class="keyword">,</span> c3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">case+</span> 0 <span class="keyword">of</span>
      <span class="keyword">|</span> _ <span class="keyword">when</span> c3l<span class="keyword">.</span>c3lau_neg <span class="keyword">&gt;</span> 0 <span class="keyword">=&gt;</span> aux <span class="keyword">(</span>c3ls<span class="keyword">,</span> res<span class="keyword">)</span>
      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hicl <span class="keyword">=</span> c3lau_tr c3l
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span>res := cons <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13755"><span class="stacstuse">hiclau</span></a><span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>0<span class="keyword">}</span></span> <span class="keyword">(</span>hicl<span class="keyword">,</span> ?<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">val+</span> cons <span class="keyword">(</span>_<span class="keyword">,</span> <span class="keyword">!</span>res_nxt<span class="keyword">)</span> <span class="keyword">=</span> res
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> aux <span class="keyword">(</span>c3ls<span class="keyword">,</span> <span class="keyword">!</span>res_nxt<span class="keyword">)</span>
        <span class="keyword">in</span>
          fold@ <span class="keyword">(</span>res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">(* end of [_] *)</span>
      <span class="keyword">)</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>res := list_nil<span class="keyword">)</span>
  <span class="comment">(* end of [aux] *)</span>
<span class="comment">//
</span>  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11993"><span class="stacstuse">c3laulst</span></a></span> <span class="comment">// uninitialized
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> aux <span class="keyword">(</span>c3ls<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="comment">//
</span><span class="keyword">in</span>
  res
<span class="keyword">end</span> <span class="comment">// end of [c3laulst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">absview</span> <span class="staexp"><a name="28071"><span class="stacstdec">dyncstsetlst_push_token</span></a></span>

<span class="keyword">extern</span>
<span class="keyword">fun</span> <a name="28107"><span class="dyncstdec">the_dyncstset_get
  <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#8254"><span class="stacstuse">dyncstset_t</span></a></span></span></a> <span class="keyword">=</span> "ats_ccomp_env_the_dyncstset_get"
<span class="comment">// end of [extern]
</span>
<span class="keyword">extern</span>
<span class="keyword">fun</span> <a name="28210"><span class="dyncstdec">the_dyncstsetlst_push
  <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28071"><span class="stacstuse">dyncstsetlst_push_token</span></a> <span class="keyword">|</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "ats_ccomp_env_the_dyncstsetlst_push"
<span class="comment">// end of [extern]
</span>
<span class="keyword">extern</span>
<span class="keyword">fun</span> <a name="28344"><span class="dyncstdec">the_dyncstsetlst_pop <span class="keyword">(</span>
  <span class="prfexp">pf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28071"><span class="stacstuse">dyncstsetlst_push_token</span></a></span></span> <span class="keyword">|</span> <span class="comment">(*none*)</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#8254"><span class="stacstuse">dyncstset_t</span></a></span></span></a> <span class="keyword">=</span> "ats_ccomp_env_the_dyncstsetlst_pop"
<span class="comment">// end of [extern]
</span>
<span class="keyword">extern</span> <span class="comment">// HX: implemented in [ats_ccomp_env.dats]
</span><span class="keyword">fun</span> <a name="28537"><span class="dyncstdec">the_dyncstset_add_if
  <span class="keyword">(</span>d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#2635"><span class="stacstuse">d2cst_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span></span></a> <span class="keyword">=</span> "ats_ccomp_env_the_dyncstset_add_if"
<span class="comment">// end of [extern]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstimp">d3exp_tr</span></a> <span class="keyword">(</span>d3e0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> d3e0<span class="keyword">.</span>d3exp_loc <span class="keyword">and</span> s2e0 <span class="keyword">=</span> d3e0<span class="keyword">.</span>d3exp_typ
<span class="comment">(*
  val () = begin
    print "d3exp_tr: s2e0 = "; print_s2exp s2e0; print_newline ();
    print "d3exp_tr: d3e0 = "; print_d3exp d3e0; print_newline ();
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> d3e0<span class="keyword">.</span>d3exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> D3Eann_type <span class="keyword">(</span>d3e<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
  <span class="keyword">|</span> D3Eapp_dyn <span class="keyword">(</span>d3e_fun<span class="keyword">,</span> npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> d3e_fun<span class="keyword">.</span>d3exp_typ<span class="keyword">)</span>
      <span class="keyword">val</span> hie_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_fun
      <span class="keyword">val</span> isvararg <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4786"><span class="dyncstuse">hityp_fun_is_vararg</span></a> hit_fun
      <span class="keyword">val</span> hies_arg <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#20184"><span class="dyncstuse">d3explst_funarg_tr</span></a> <span class="keyword">(</span>isvararg<span class="keyword">,</span> npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="keyword">case+</span> hie_fun<span class="keyword">.</span>hiexp_node <span class="keyword">of</span>
      <span class="keyword">|</span> HIEcst d2c <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#5250"><span class="dyncstuse">d2cst_is_castfn</span></a> d2c <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">(*
          val () = begin
            print "d3exp_tr: D3Eapp_dyn: castfn: d2c = "; print_d2cst d2c; print_newline ()
          end // end of [val]
*)</span>
          <span class="keyword">val</span> hie <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> hies_arg <span class="keyword">of</span>
            <span class="keyword">|</span> list_cons <span class="keyword">(</span>hie<span class="keyword">,</span> list_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> hie <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
                prerr_loc_interror <span class="keyword">(</span>loc0<span class="keyword">)</span><span class="keyword">;</span>
                prerr ": d3exp_tr: a casting function must be applied to exactly one argument."<span class="keyword">;</span>
                <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
              <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>          <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a></span> <span class="comment">// end of [val]
</span>        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16776"><span class="dyncstuse">hiexp_castfn</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2c<span class="keyword">,</span> hie<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [HIEcst when ...]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16007"><span class="dyncstuse">hiexp_app</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hit_fun<span class="keyword">,</span> hie_fun<span class="keyword">,</span> hies_arg<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eapp_dyn]
</span>  <span class="keyword">|</span> D3Eapp_sta d3e <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
  <span class="keyword">|</span> D3Earrinit <span class="keyword">(</span>s2e_elt<span class="keyword">,</span> od3e_asz<span class="keyword">,</span> d3es_elt<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_elt<span class="keyword">)</span>
      <span class="keyword">val</span> ohie_asz <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1914"><span class="dyncstuse">d3expopt_tr</span></a> od3e_asz
      <span class="keyword">val</span> hies_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a> d3es_elt
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16099"><span class="dyncstuse">hiexp_arrinit</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hit_elt<span class="keyword">,</span> ohie_asz<span class="keyword">,</span> hies_elt<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Earrinit]
</span>  <span class="keyword">|</span> D3Earrsize <span class="keyword">(</span>s2e_elt<span class="keyword">,</span> d3es_elt<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_elt<span class="keyword">)</span>
      <span class="keyword">val</span> hies_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a> d3es_elt
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16207"><span class="dyncstuse">hiexp_arrsize</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hit_elt<span class="keyword">,</span> hies_elt<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Earrsize]
</span>  <span class="keyword">|</span> D3Eassgn_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> d3exp_is_proof d3e_val <span class="keyword">then</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">let</span>
        <span class="keyword">val</span> hie_ptr <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_ptr
        <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr <span class="keyword">(</span>d3ls<span class="keyword">)</span>
        <span class="keyword">val</span> hie_val <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_val
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16288"><span class="dyncstuse">hiexp_assgn_ptr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">,</span> hie_ptr<span class="keyword">,</span> hils<span class="keyword">,</span> hie_val<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [if]
</span>    <span class="keyword">end</span> <span class="comment">(* end of [D3Eassgn_ptr] *)</span>
  <span class="keyword">|</span> D3Eassgn_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> d3exp_is_proof d3e_val <span class="keyword">then</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">)</span>
      <span class="keyword">else</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#7753"><span class="dyncstuse">d2var_count_inc</span></a> d2v_ptr
        <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr <span class="keyword">(</span>d3ls<span class="keyword">)</span>
        <span class="keyword">val</span> hie_val <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_val
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16384"><span class="dyncstuse">hiexp_assgn_var</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">,</span> d2v_ptr<span class="keyword">,</span> hils<span class="keyword">,</span> hie_val<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [if]
</span>    <span class="keyword">end</span> <span class="comment">(* end of [D3Eassgn_var] *)</span>
  <span class="keyword">|</span> D3Ebool b <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16482"><span class="dyncstuse">hiexp_bool</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> b<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Echar]
</span>  <span class="keyword">|</span> D3Ecaseof <span class="keyword">(</span>knd<span class="keyword">,</span> d3es<span class="keyword">,</span> c3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hies <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a> d3es
<span class="comment">(*
      val () = begin
        print "d3exp_tr: D3Ecaseof: c3ls = "; print c3ls; print_newline ()
      end // end of [val]
*)</span>
      <span class="keyword">val</span> hicls <span class="keyword">=</span> c3laulst_tr c3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16651"><span class="dyncstuse">hiexp_caseof_if</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> knd<span class="keyword">,</span> hies<span class="keyword">,</span> hicls<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Ecase]
</span>  <span class="keyword">|</span> D3Echar c <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16869"><span class="dyncstuse">hiexp_char</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> c<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Echar]
</span>  <span class="keyword">|</span> D3Econ <span class="keyword">(</span>d2c<span class="keyword">,</span> npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">(*
      val () = begin
        print "d3exp_tr: d2c = "; print d2c; print_newline ();
        print "d3exp_tr: npf = "; print npf; print_newline ();
        print "d3exp_tr: d3es_arg = "; print d3es_arg; print_newline ()
      end // end of [val]
*)</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hies_arg <span class="keyword">=</span> d3explst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span>
<span class="comment">(*
      val () = begin
        print "d3exp_tr: hies_arg = "; print hies_arg; print_newline ()
      end // end of [val]
*)</span>
      <span class="keyword">val</span> hits_arg <span class="keyword">=</span> hiexplst_typ_get hies_arg
      <span class="keyword">val</span> hit_sum <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#4489"><span class="dyncstuse">hityp_tysumtemp</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> hits_arg<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#16922"><span class="dyncstuse">hiexp_con</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hit_sum<span class="keyword">,</span> d2c<span class="keyword">,</span> hies_arg<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Econ]
</span>  <span class="keyword">|</span> D3Ecst d2c <span class="keyword">=&gt;</span> <span class="keyword">let</span> <span class="comment">(* d2c is external *)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28537"><span class="dyncstuse">the_dyncstset_add_if</span></a> <span class="keyword">(</span>d2c<span class="keyword">)</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      d3exp_cst_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2c<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Ecst]
</span>  <span class="keyword">|</span> D3Ecstsp cst <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17067"><span class="dyncstuse">hiexp_cstsp</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> cst<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Ecstsp]
</span>  <span class="keyword">|</span> D3Ecrypt <span class="keyword">(</span>_<span class="comment">(*knd*)</span><span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
  <span class="keyword">|</span> D3Edynload fil <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17129"><span class="dyncstuse">hiexp_dynload</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> fil<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Edynload]
</span>  <span class="keyword">|</span> D3Eeffmask <span class="keyword">(</span>_<span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
  <span class="keyword">|</span> D3Eempty <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eempty]
</span>  <span class="keyword">|</span> D3Eextval code <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17231"><span class="dyncstuse">hiexp_extval</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> code<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eextval]
</span>  <span class="keyword">|</span> D3Efix <span class="keyword">(</span>
      knd<span class="keyword">,</span> d2v_fun<span class="keyword">,</span> d3e_def
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie_def <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_def
      <span class="keyword">val</span> isval <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#15802"><span class="dyncstuse">hiexp_is_value</span></a> <span class="keyword">(</span>hie_def<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="comment">// check for valueness of the def
</span>        <span class="keyword">if</span> isval <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">begin</span>
          prerr_loc_error4 loc0<span class="keyword">;</span>
          prerr ": a non-value fixed-point dynamic expression is not supported."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
      <span class="comment">// end of [val]
</span>    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17291"><span class="dyncstuse">hiexp_fix</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> knd<span class="keyword">,</span> d2v_fun<span class="keyword">,</span> hie_def<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Efix]
</span>  <span class="keyword">|</span> D3Efloat str <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17400"><span class="dyncstuse">hiexp_float</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Efloat]
</span>  <span class="keyword">|</span> D3Efloatsp str <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17455"><span class="dyncstuse">hiexp_floatsp</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Efloatsp]
</span>  <span class="keyword">|</span> D3Efoldat _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Efoldat]
</span>  <span class="keyword">|</span> D3Efreeat d3e <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17513"><span class="dyncstuse">hiexp_freeat</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Efreeat]
</span>  <span class="keyword">|</span> D3Eif <span class="keyword">(</span>
      d3e_cond<span class="keyword">,</span> d3e_then<span class="keyword">,</span> d3e_else
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie_cond <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_cond
      <span class="keyword">val</span> hie_then <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_then
      <span class="keyword">val</span> hie_else <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_else
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17569"><span class="dyncstuse">hiexp_if</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie_cond<span class="keyword">,</span> hie_then<span class="keyword">,</span> hie_else<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eif]
</span>  <span class="keyword">|</span> D3Eint <span class="keyword">(</span>str<span class="keyword">,</span> int<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17658"><span class="dyncstuse">hiexp_int</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">,</span> int<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eint]
</span>  <span class="keyword">|</span> D3Eintsp <span class="keyword">(</span>str<span class="keyword">,</span> int<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17731"><span class="dyncstuse">hiexp_intsp</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">,</span> int<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eintsp]
</span>  <span class="keyword">|</span> D3Elam_dyn <span class="keyword">(</span>
      lin<span class="keyword">,</span> npf<span class="keyword">,</span> p3ts_arg<span class="keyword">,</span> d3e_body
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hips_arg <span class="keyword">=</span> p3atlst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> p3ts_arg<span class="keyword">)</span>
      <span class="keyword">val</span> hie_body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_body
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17864"><span class="dyncstuse">hiexp_lam</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit_fun<span class="keyword">,</span> hips_arg<span class="keyword">,</span> hie_body<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elam_dyn]
</span>  <span class="keyword">|</span> D3Elaminit_dyn <span class="keyword">(</span>
      lin<span class="keyword">,</span> npf<span class="keyword">,</span> p3ts_arg<span class="keyword">,</span> d3e_body
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hips_arg <span class="keyword">=</span> p3atlst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> p3ts_arg<span class="keyword">)</span>
      <span class="keyword">val</span> hie_body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_body
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17961"><span class="dyncstuse">hiexp_laminit</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit_fun<span class="keyword">,</span> hips_arg<span class="keyword">,</span> hie_body<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elaminit_dyn]
</span>  <span class="keyword">|</span> D3Elam_sta <span class="keyword">(</span>
      _<span class="comment">(*s2vs*)</span><span class="keyword">,</span> _<span class="comment">(*s2ps*)</span><span class="keyword">,</span> d3e_body
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> hie_body <span class="keyword">where</span> <span class="keyword">{</span>
      <span class="keyword">val</span> hie_body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_body
      <span class="keyword">val</span> isval <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#15802"><span class="dyncstuse">hiexp_is_value</span></a> <span class="keyword">(</span>hie_body<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> isval <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">let</span> <span class="comment">// check for valueness
</span>        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error4 <span class="keyword">(</span>loc0<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": a non-value body for static lambda-abstraction is not supported."
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
    <span class="keyword">}</span> <span class="comment">// end of [D3Elam_sta]
</span>  <span class="keyword">|</span> D3Elam_met <span class="keyword">(</span>_<span class="comment">(*s2es_met*)</span><span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
  <span class="keyword">|</span> D3Elazy_delay <span class="keyword">(</span>d3e_eval<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18087"><span class="dyncstuse">hiexp_lazy_delay</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_eval<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elazy_delay]
</span>  <span class="keyword">|</span> D3Elazy_vt_delay <span class="keyword">(</span>d3e_eval<span class="keyword">,</span> d3e_free<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie_eval <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_eval <span class="keyword">and</span> hie_free <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_free
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18157"><span class="dyncstuse">hiexp_lazy_vt_delay</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie_eval<span class="keyword">,</span> hie_free<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elazy_delay]
</span>  <span class="keyword">|</span> D3Elazy_force <span class="keyword">(</span>lin<span class="keyword">,</span> d3e_lazy<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18244"><span class="dyncstuse">hiexp_lazy_force</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> lin<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_lazy<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elazy_force]
</span>  <span class="keyword">|</span> D3Elet <span class="keyword">(</span>d3cs<span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hids <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs<span class="keyword">;</span> <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#15841"><span class="dyncstuse">hiexp_let_simplify</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hids<span class="keyword">,</span> hie<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elet]
</span>  <span class="keyword">|</span> D3Eloop <span class="keyword">(</span>init<span class="keyword">,</span> test<span class="keyword">,</span> post<span class="keyword">,</span> body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> init <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1914"><span class="dyncstuse">d3expopt_tr</span></a> init
      <span class="keyword">val</span> test <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> test
      <span class="keyword">val</span> post <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1914"><span class="dyncstuse">d3expopt_tr</span></a> post
      <span class="keyword">val</span> body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> body
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18434"><span class="dyncstuse">hiexp_loop</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">,</span> init<span class="keyword">,</span> test<span class="keyword">,</span> post<span class="keyword">,</span> body<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eloop]
</span>  <span class="keyword">|</span> D3Eloopexn i <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18564"><span class="dyncstuse">hiexp_loopexn</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> i<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eloopexn]
</span>  <span class="keyword">|</span> D3Elst <span class="keyword">(</span>lin<span class="keyword">,</span> s2e_elt<span class="keyword">,</span> d3es_elt<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_elt<span class="keyword">)</span>
      <span class="keyword">val</span> hies_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstuse">d3explst_tr</span></a> d3es_elt
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18640"><span class="dyncstuse">hiexp_lst</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> lin<span class="keyword">,</span> hit_elt<span class="keyword">,</span> hies_elt<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Elst]
</span>  <span class="keyword">|</span> D3Eptrof_ptr <span class="keyword">(</span>d3e<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">;</span> <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr d3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18727"><span class="dyncstuse">hiexp_ptrof_ptr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie<span class="keyword">,</span> hils<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eptrof_ptr]
</span>  <span class="keyword">|</span> D3Eptrof_var <span class="keyword">(</span>d2v<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#7753"><span class="dyncstuse">d2var_count_inc</span></a> d2v<span class="keyword">;</span> <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr d3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18807"><span class="dyncstuse">hiexp_ptrof_var</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2v<span class="keyword">,</span> hils<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eptrof_var]
</span>  <span class="keyword">|</span> D3Eraise d3e_exn <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18889"><span class="dyncstuse">hiexp_raise</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_exn<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eraise]
</span>  <span class="keyword">|</span> D3Erec <span class="keyword">(</span>knd<span class="keyword">,</span> npf<span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_rec <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> lhies <span class="keyword">=</span> labd3explst_arg_tr <span class="keyword">(</span>npf<span class="keyword">,</span> ld3es<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18944"><span class="dyncstuse">hiexp_rec</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> knd<span class="keyword">,</span> hit_rec<span class="keyword">,</span> lhies<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Erec]
</span>  <span class="keyword">|</span> D3Erefarg <span class="keyword">(</span>refval<span class="keyword">,</span> freeknd<span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19031"><span class="dyncstuse">hiexp_refarg</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> refval<span class="keyword">,</span> freeknd<span class="keyword">,</span> hie<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Erefarg]
</span>  <span class="keyword">|</span> D3Escaseof _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": the static caseof-expression should have already been erased."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Escaseof]
</span>  <span class="keyword">|</span> D3Esel <span class="keyword">(</span>d3e<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
      <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr d3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19118"><span class="dyncstuse">hiexp_sel</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie<span class="keyword">,</span> hils<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Esel]
</span>  <span class="keyword">|</span> D3Esel_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie_ptr <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_ptr
      <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr d3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19191"><span class="dyncstuse">hiexp_sel_ptr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie_ptr<span class="keyword">,</span> hils<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Esel_ptr]
</span>  <span class="keyword">|</span> D3Esel_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#7753"><span class="dyncstuse">d2var_count_inc</span></a> d2v_ptr
      <span class="keyword">val</span> hils <span class="keyword">=</span> d3lab1lst_tr d3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19269"><span class="dyncstuse">hiexp_sel_var</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2v_ptr<span class="keyword">,</span> hils<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Esel_var]
</span>  <span class="keyword">|</span> D3Eseq d3es <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      d3exp_seq_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d3es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eseq]
</span>  <span class="keyword">|</span> D3Esif <span class="keyword">(</span>_<span class="comment">(*cond*)</span><span class="keyword">,</span> d3e_then<span class="keyword">,</span> d3e_else<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hie_then <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_then
      <span class="keyword">and</span> hie_else <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_else
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19405"><span class="dyncstuse">hiexp_sif</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">,</span> hie_then<span class="keyword">,</span> hie_else<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Esif]
</span>  <span class="keyword">|</span> D3Estring <span class="keyword">(</span>str<span class="keyword">,</span> len<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19545"><span class="dyncstuse">hiexp_string</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> str<span class="keyword">,</span> len<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Estring]
</span>  <span class="keyword">|</span> D3Estruct ld3es <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hit_rec <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> lhies <span class="keyword">=</span> labd3explst_arg_tr <span class="keyword">(</span>0<span class="keyword">,</span> ld3es<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#18944"><span class="dyncstuse">hiexp_rec</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> 0<span class="comment">(*@{}*)</span><span class="keyword">,</span> hit_rec<span class="keyword">,</span> lhies<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Estruct]
</span>  <span class="keyword">|</span> D3Etmpcst <span class="keyword">(</span>d2c<span class="keyword">,</span> s2ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      d3exp_tmpcst_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> hit_fun<span class="keyword">,</span> d2c<span class="keyword">,</span> s2ess<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Etmpcst]
</span>  <span class="keyword">|</span> D3Etmpvar <span class="keyword">(</span>d2v<span class="keyword">,</span> s2ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      d3exp_tmpvar_tr <span class="keyword">(</span>loc0<span class="keyword">,</span> hit_fun<span class="keyword">,</span> d2v<span class="keyword">,</span> s2ess<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Etmpvar]
</span>  <span class="keyword">|</span> D3Etop <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19766"><span class="dyncstuse">hiexp_top</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Etop]
</span>  <span class="keyword">|</span> D3Etrywith <span class="keyword">(</span>d3e<span class="keyword">,</span> c3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">;</span> <span class="keyword">val</span> hicls <span class="keyword">=</span> c3laulst_tr c3ls
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19809"><span class="dyncstuse">hiexp_trywith</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hie<span class="keyword">,</span> hicls<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Etrywith]
</span>  <span class="keyword">|</span> D3Evar d2v <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>  <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#6865"><span class="dyncstuse">d2var_isprf_get</span></a> d2v <span class="keyword">then</span> <span class="keyword">begin</span>
        prerr_loc_error4 loc0<span class="keyword">;</span>
        prerr ": the dynamic variable ["<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#8852"><span class="dyncstuse">prerr_d2var</span></a> d2v<span class="keyword">;</span>
        prerr "] refers to a proof and thus should have been erased."<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#7753"><span class="dyncstuse">d2var_count_inc</span></a> d2v<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#19882"><span class="dyncstuse">hiexp_var</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> d2v<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Evar]
</span>  <span class="keyword">|</span> D3Eviewat_assgn_ptr _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">)</span>
  <span class="keyword">|</span> D3Eviewat_assgn_var _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#17186"><span class="dyncstuse">hiexp_empty</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#3871"><span class="dyncstuse">hityp_void</span></a><span class="keyword">)</span>
  <span class="keyword">|</span> D3Eviewat_ptr _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": this proof expression should have already been erased."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_ptr]
</span>  <span class="keyword">|</span> D3Eviewat_var _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": this proof expression should have already been erased."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13337"><span class="stacstuse">hiexp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_var]
</span>  <span class="keyword">|</span> D3Ewhere <span class="keyword">(</span>d3e<span class="keyword">,</span> d3cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> hit0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> 0<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e0<span class="keyword">)</span>
      <span class="keyword">val</span> hids <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs<span class="keyword">;</span> <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#15841"><span class="dyncstuse">hiexp_let_simplify</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> hit0<span class="keyword">,</span> hids<span class="keyword">,</span> hie<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Ewhere]
</span><span class="comment">(*
  | _ =&gt; begin
      prerr_loc_interror loc0;
      prerr "d3exp_tr: not yet implemented: d3e0 = "; prerr d3e0; prerr_newline ();
      $Err.abort {hiexp} ()
    end // end of [_]
*)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3exp_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1871"><span class="dyncstimp">d3explst_tr</span></a> <span class="keyword">(</span>d3es<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>d3es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a><span class="keyword">)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1914"><span class="dyncstimp">d3expopt_tr</span></a> <span class="keyword">(</span>od3e<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> od3e <span class="keyword">of</span>
  <span class="keyword">|</span> Some d3e <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d3expopt_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> labd3explst_prf_tr
  <span class="keyword">(</span>ld3es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10564"><span class="stacstuse">labd3explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
  <span class="keyword">case+</span> ld3es <span class="keyword">of</span>
  <span class="keyword">|</span> LABD3EXPLSTcons <span class="keyword">(</span>l<span class="keyword">,</span> d3e<span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e<span class="keyword">;</span> labd3explst_prf_tr ld3es
    <span class="keyword">end</span> <span class="comment">// end of [LABD3EXPLSTcons]
</span>  <span class="keyword">|</span> LABD3EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">// end of [labd3explst_prf_tr]
</span>
<span class="keyword">fn</span> c3laulst_prf_tr <span class="keyword">(</span>c3ls<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11993"><span class="stacstuse">c3laulst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fn</span> f <span class="keyword">(</span>c3l<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#11926"><span class="stacstuse">c3lau</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>c3l<span class="keyword">.</span>c3lau_exp<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2118"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_foreach_fun</span></a> <span class="keyword">(</span>c3ls<span class="keyword">,</span>  f<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [c3laulst_prf_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstimp">d3exp_prf_tr</span></a> <span class="keyword">(</span>d3e0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">(*
  val () = begin
    print "d3exp_prf_tr: d3e0 = " print d3e0; print_newline ();
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> d3e0<span class="keyword">.</span>d3exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> D3Eann_type <span class="keyword">(</span>d3e<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Eapp_dyn <span class="keyword">(</span>d3e_fun<span class="keyword">,</span> npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_fun
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstuse">d3explst_prf_tr</span></a> d3es_arg
    <span class="keyword">in</span>
      <span class="comment">(* empty *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D3Eapp_dyn]
</span>  <span class="keyword">|</span> D3Eapp_sta d3e <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Eassgn_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_ptr
      <span class="comment">// val () = d3lab1lst_prf_tr (d3ls) // is this really needed?
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_val
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eassgn_ptr]
</span>  <span class="keyword">|</span> D3Eassgn_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="comment">// val hils = d3lab1lst_prf_tr (d3ls) // is this really needed?
</span>      <span class="keyword">val</span> hie_val <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_val
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eassgn_var]
</span>  <span class="keyword">|</span> D3Ecaseof <span class="keyword">(</span>knd<span class="keyword">,</span> d3es<span class="keyword">,</span> c3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstuse">d3explst_prf_tr</span></a> d3es
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> c3laulst_prf_tr c3ls
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Ecase]
</span>  <span class="keyword">|</span> D3Echar c <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Econ <span class="keyword">(</span>d2c<span class="keyword">,</span> npf<span class="keyword">,</span> d3es_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstuse">d3explst_prf_tr</span></a> <span class="keyword">(</span>d3es_arg<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Econ]
</span>  <span class="keyword">|</span> D3Ecst d2c <span class="keyword">=&gt;</span> <span class="keyword">let</span> <span class="comment">(* d2c is external as it is used *)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28537"><span class="dyncstuse">the_dyncstset_add_if</span></a> <span class="keyword">(</span>d2c<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Ecst]
</span>  <span class="keyword">|</span> D3Ecrypt <span class="keyword">(</span>_<span class="comment">(*knd*)</span><span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Eeffmask <span class="keyword">(</span>_<span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Eempty <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Eextval _<span class="comment">(*code*)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Efix <span class="keyword">(</span>knd<span class="keyword">,</span> d2v_fun<span class="keyword">,</span> d3e_def<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>d3e_def<span class="keyword">)</span>
<span class="comment">(*
  | D3Efloat _(*str*) =&gt; ()
  | D3Efloatsp _(*str*) =&gt; ()
*)</span>
  <span class="keyword">|</span> D3Efoldat d3e <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
<span class="comment">(*
  | D3Efreeat _ =&gt; ()
*)</span>
  <span class="keyword">|</span> D3Eif <span class="keyword">(</span>
      d3e_cond<span class="keyword">,</span> d3e_then<span class="keyword">,</span> d3e_else
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_cond
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_then
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_else
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eif]
</span>  <span class="keyword">|</span> D3Eint _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Elam_dyn <span class="keyword">(</span>_<span class="keyword">,</span> _<span class="keyword">,</span> _<span class="comment">(*arg*)</span><span class="keyword">,</span> d3e_body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_body
  <span class="keyword">|</span> D3Elam_sta <span class="keyword">(</span>_<span class="comment">(*s2vs*)</span><span class="keyword">,</span> _<span class="comment">(*s2ps*)</span><span class="keyword">,</span> d3e_body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_body
  <span class="keyword">|</span> D3Elam_met <span class="keyword">(</span>_<span class="comment">(*s2es_met*)</span><span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Elet <span class="keyword">(</span>d3cs<span class="keyword">,</span> d3e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstuse">d3eclst_prf_tr</span></a> d3cs<span class="keyword">;</span> <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Elet]
</span>  <span class="keyword">|</span> D3Elst <span class="keyword">(</span>
      _<span class="comment">(*lin*)</span><span class="keyword">,</span> _<span class="comment">(*s2e*)</span><span class="keyword">,</span> d3es_elt
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstuse">d3explst_prf_tr</span></a> d3es_elt
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Elst]
</span>  <span class="keyword">|</span> D3Eptrof_ptr <span class="keyword">(</span>d3e<span class="keyword">,</span> _<span class="comment">(*labs*)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>d3e<span class="keyword">)</span>
  <span class="keyword">|</span> D3Eptrof_var _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Erec <span class="keyword">(</span>_<span class="comment">(*knd*)</span><span class="keyword">,</span> _<span class="comment">(*npf*)</span><span class="keyword">,</span> ld3es<span class="keyword">)</span> <span class="keyword">=&gt;</span> labd3explst_prf_tr ld3es
  <span class="keyword">|</span> D3Erefarg _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Escaseof <span class="keyword">(</span>_<span class="comment">(*s2e*)</span><span class="keyword">,</span> sc3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2118"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_foreach_fun</span></a> <span class="keyword">(</span>sc3ls<span class="keyword">,</span> f<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
      <span class="keyword">fn</span> f <span class="keyword">(</span>sc3l<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12028"><span class="stacstuse">sc3lau</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>sc3l<span class="keyword">.</span>sc3lau_exp<span class="keyword">)</span>
    <span class="keyword">}</span> <span class="comment">// end of [D3Escaseof]
</span>  <span class="keyword">|</span> D3Esel <span class="keyword">(</span>d3e<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
  <span class="keyword">|</span> D3Esel_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_ptr
  <span class="keyword">|</span> D3Esel_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Eseq d3es <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstuse">d3explst_prf_tr</span></a> d3es
  <span class="keyword">|</span> D3Esif <span class="keyword">(</span>
      _<span class="comment">(*cond*)</span><span class="keyword">,</span> d3e_then<span class="keyword">,</span> d3e_else
    <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_then
      <span class="keyword">and</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_else
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Esif]
</span>  <span class="keyword">|</span> D3Estring _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Estruct ld3es <span class="keyword">=&gt;</span> labd3explst_prf_tr ld3es
  <span class="keyword">|</span> D3Evar _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> D3Eviewat_assgn_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_ptr
      <span class="comment">// val () = d3lablst_prf_tr (d3ls) // is this really needed?
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_val
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_assgn_ptr]
</span>  <span class="keyword">|</span> D3Eviewat_assgn_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> d3e_val<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="comment">// val () = d3lablst_prf_tr (d3ls) // is this really needed?
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_val
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_assgn_var]
</span>  <span class="keyword">|</span> D3Eviewat_ptr <span class="keyword">(</span>d3e_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> _<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e_ptr
      <span class="comment">// val () = d3lablst_prf_tr (d3ls) // is this really needed?
</span>    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_ptr]
</span>  <span class="keyword">|</span> D3Eviewat_var <span class="keyword">(</span>d2v_ptr<span class="keyword">,</span> d3ls<span class="keyword">,</span> _<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="comment">// val () = d3lablst_prf_tr (d3ls) // is this really needed?
</span>    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Eviewat_var]
</span>  <span class="keyword">|</span> D3Ewhere <span class="keyword">(</span>d3e<span class="keyword">,</span> d3cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstuse">d3eclst_prf_tr</span></a> d3cs<span class="keyword">;</span> <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> d3e
    <span class="keyword">in</span>
      <span class="comment">// empty
</span>    <span class="keyword">end</span> <span class="comment">// end of [D3Ewhere]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror d3e0<span class="keyword">.</span>d3exp_loc<span class="keyword">;</span>
      prerr ": d3exp_prf_tr: d3e0 = "<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#14332"><span class="dyncstuse">prerr_d3exp</span></a> d3e0<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">(* end of [d3exp_prf_tr] *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2015"><span class="dyncstimp">d3explst_prf_tr</span></a> <span class="keyword">(</span>d3es<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2118"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_foreach_fun</span></a> <span class="keyword">(</span>d3es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a><span class="keyword">)</span>
<span class="comment">// end of [d3explst_prf_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> f3undec_tr <span class="keyword">(</span>
    decarg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10049"><span class="stacstuse">s2qualst</span></a></span><span class="keyword">,</span> d3c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12378"><span class="stacstuse">f3undec</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14039"><span class="stacstuse">hifundec</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d3c<span class="keyword">.</span>f3undec_loc
  <span class="keyword">val</span> d2v_fun <span class="keyword">=</span> d3c<span class="keyword">.</span>f3undec_var
  <span class="keyword">val</span> hie_def <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3c<span class="keyword">.</span>f3undec_def
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> decarg <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#25001"><span class="dyncstuse">tmpvarmap_add</span></a> <span class="keyword">(</span>d2v_fun<span class="keyword">,</span> decarg<span class="keyword">,</span> hie_def<span class="keyword">)</span> <span class="comment">// template function
</span>      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="comment">// end of [val]
</span><span class="comment">(*
  val () = begin
    print "f3undec_tr: d2v_fun = "; print d2v_fun; print_newline ();
    print "f3undec_tr: hie_def = "; print hie_def; print_newline ();
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20731"><span class="dyncstuse">hifundec_make</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> d2v_fun<span class="keyword">,</span> hie_def<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [f3undec_tr]
</span>
<span class="keyword">fn</span> f3undeclst_tr
  <span class="keyword">(</span>decarg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10049"><span class="stacstuse">s2qualst</span></a></span><span class="keyword">,</span> d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12483"><span class="stacstuse">f3undeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14149"><span class="stacstuse">hifundeclst</span></a></span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2688"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_cloptr</span></a> <span class="keyword">(</span>d3cs<span class="keyword">,</span> <span class="keyword">lam</span> d3c <span class="keyword">=&lt;</span><span class="staexp">cloptr1</span><span class="keyword">&gt;</span> f3undec_tr <span class="keyword">(</span>decarg<span class="keyword">,</span> d3c<span class="keyword">)</span><span class="keyword">)</span>
<span class="comment">// end of [f3undeclst_tr]
</span>
<span class="keyword">fun</span> f3undeclst_prf_tr
  <span class="keyword">(</span>fundecs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12483"><span class="stacstuse">f3undeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> fundecs <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>fundec<span class="keyword">,</span> fundecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>fundec<span class="keyword">.</span>f3undec_def<span class="keyword">)</span><span class="keyword">;</span> f3undeclst_prf_tr fundecs
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span><span class="comment">// end of [f3undeclst_prf_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> v3aldec_tr <span class="keyword">(</span>
  d3c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12224"><span class="stacstuse">v3aldec</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14182"><span class="stacstuse">hivaldec</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d3c<span class="keyword">.</span>v3aldec_loc
  <span class="keyword">val</span> hip <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1744"><span class="dyncstuse">p3at_tr</span></a> d3c<span class="keyword">.</span>v3aldec_pat
  <span class="keyword">val</span> d3e_def <span class="keyword">=</span> d3c<span class="keyword">.</span>v3aldec_def
  <span class="keyword">val</span> isprf <span class="keyword">=</span> d3exp_is_proof <span class="keyword">(</span>d3e_def<span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> isprf <span class="keyword">then</span> <span class="keyword">let</span>
    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error4 <span class="keyword">(</span>loc<span class="keyword">)</span>
    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": [val] should be replaced with [prval] as this is a proof binding."
    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">in</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> hie <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_def
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20894"><span class="dyncstuse">hivaldec_make</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> hip<span class="keyword">,</span> hie<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [v3aldec_tr]
</span>
<span class="keyword">fn</span> v3aldeclst_tr
  <span class="keyword">(</span>d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12326"><span class="stacstuse">v3aldeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14290"><span class="stacstuse">hivaldeclst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>d3cs<span class="keyword">,</span> v3aldec_tr<span class="keyword">)</span>
<span class="comment">// end of [v3aldeclst_tr]
</span>
<span class="keyword">fn</span> v3ardec_tr
  <span class="keyword">(</span>d3c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12535"><span class="stacstuse">v3ardec</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14323"><span class="stacstuse">hivardec</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d3c<span class="keyword">.</span>v3ardec_loc
  <span class="keyword">val</span> knd <span class="keyword">=</span> d3c<span class="keyword">.</span>v3ardec_knd
  <span class="keyword">val</span> d2v_ptr <span class="keyword">=</span> d3c<span class="keyword">.</span>v3ardec_dvar_ptr
  <span class="keyword">val</span> ini <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> d3c<span class="keyword">.</span>v3ardec_ini <span class="keyword">of</span>
    <span class="keyword">|</span> Some d3e <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13461"><span class="stacstuse">hiexpopt</span></a></span> <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21152"><span class="dyncstuse">hivardec_make</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> knd<span class="keyword">,</span> d2v_ptr<span class="keyword">,</span> ini<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [v3ardec_tr]
</span>
<span class="keyword">fn</span> v3ardeclst_tr
  <span class="keyword">(</span>d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12716"><span class="stacstuse">v3ardeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14456"><span class="stacstuse">hivardeclst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>d3cs<span class="keyword">,</span> v3ardec_tr<span class="keyword">)</span>
<span class="comment">// end of [v3ardeclst_tr]
</span>
<span class="keyword">fun</span> v3aldeclst_prf_tr
  <span class="keyword">(</span>valdecs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12326"><span class="stacstuse">v3aldeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> valdecs <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>valdec<span class="keyword">,</span> valdecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>valdec<span class="keyword">.</span>v3aldec_def<span class="keyword">)</span><span class="keyword">;</span> v3aldeclst_prf_tr valdecs
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span><span class="comment">// end of [v3aldeclst_prf_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> i3mpdec_tr <span class="keyword">(</span>
  d3c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#12768"><span class="stacstuse">i3mpdec</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#14489"><span class="stacstuse">hiimpdec</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> d3c<span class="keyword">.</span>i3mpdec_loc
  <span class="keyword">val</span> d2c <span class="keyword">=</span> d3c<span class="keyword">.</span>i3mpdec_cst
  <span class="keyword">val</span> decarg <span class="keyword">=</span> d3c<span class="keyword">.</span>i3mpdec_decarg
  <span class="keyword">val</span> tmp <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> decarg <span class="keyword">of</span> cons _ <span class="keyword">=&gt;</span> 1 <span class="keyword">|</span> nil _ <span class="keyword">=&gt;</span> 0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
<span class="comment">//
</span>  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> tmparg <span class="keyword">=</span> d3c<span class="keyword">.</span>i3mpdec_tmparg
  <span class="keyword">val</span> tmparg <span class="keyword">=</span> s2explstlst_tr_named <span class="keyword">(</span>loc0<span class="keyword">,</span> tmparg<span class="keyword">,</span> res<span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> res <span class="keyword">of</span>
    <span class="keyword">|</span> Some <span class="keyword">(</span>s2e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error4 <span class="keyword">(</span>loc0<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": the template parameter ["
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#27774"><span class="dyncstuse">prerr_s2exp</span></a> <span class="keyword">(</span>s2e<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "] is required to be named but it is not."
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [None_vt]
</span>  <span class="keyword">)</span> <span class="comment">// end of [val]
</span><span class="comment">//
</span>  <span class="keyword">val</span> def <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3c<span class="keyword">.</span>i3mpdec_def
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> 0 <span class="keyword">of</span>
    <span class="keyword">|</span> _ <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#5210"><span class="dyncstuse">d2cst_is_fun</span></a> d2c <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">case+</span> def<span class="keyword">.</span>hiexp_node <span class="keyword">of</span>
      <span class="keyword">|</span> HIElam _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error4 <span class="keyword">(</span>loc0<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": the dynamic constant ["
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr <span class="keyword">(</span>d2c<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "] is required to be implemented as a function but it is not."
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>      <span class="keyword">end</span> <span class="comment">// end of [_ when ...]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="comment">// end of [val]
</span><span class="comment">//
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> tmp <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#24837"><span class="dyncstuse">tmpcstmap_add</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> decarg<span class="keyword">,</span> def<span class="keyword">)</span>
  <span class="keyword">val</span> d2cs <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28107"><span class="dyncstuse">the_dyncstset_get</span></a> <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">//
</span><span class="keyword">in</span>
<span class="comment">//
</span>  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21309"><span class="dyncstuse">hiimpdec_make</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> d2c<span class="keyword">,</span> tmp<span class="keyword">,</span> decarg<span class="keyword">,</span> tmparg<span class="keyword">,</span> def<span class="keyword">,</span> d2cs<span class="keyword">)</span>
<span class="comment">//
</span><span class="keyword">end</span> <span class="comment">// end of [i3mpdec_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstimp">d3eclst_tr</span></a> <span class="keyword">(</span>d3cs0<span class="keyword">)</span> <span class="keyword">=</span> res <span class="keyword">where</span> <span class="keyword">{</span>
<span class="comment">//
</span><span class="comment">// [aux0] and [aux1] are mutually tail-recursive
</span><span class="comment">//
</span>  <span class="keyword">fn*</span> aux0 <span class="keyword">(</span>
      d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10927"><span class="stacstuse">d3eclst</span></a></span>
    <span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13310"><span class="stacstuse">hideclst</span></a>? &gt;&gt; <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13310"><span class="stacstuse">hideclst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d3cs <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>d3c<span class="keyword">,</span> d3cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d3c<span class="keyword">.</span>d3ec_node <span class="keyword">of</span>
      <span class="keyword">|</span> D3Cnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> aux0 <span class="keyword">(</span>d3cs<span class="keyword">,</span> res<span class="keyword">)</span>
      <span class="keyword">|</span> D3Clist d3cs1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20262"><span class="dyncstuse">hidec_list</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs1<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Clist]
</span>      <span class="keyword">|</span> D3Csaspdec saspdec <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20309"><span class="dyncstuse">hidec_saspdec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> saspdec<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Csaspdec]
</span>      <span class="keyword">|</span> D3Cdcstdec <span class="keyword">(</span>knd<span class="keyword">,</span> d2cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20359"><span class="dyncstuse">hidec_dcstdec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> knd<span class="keyword">,</span> d2cs<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cdcstdec]
</span>      <span class="keyword">|</span> D3Cdatdec <span class="keyword">(</span>knd<span class="keyword">,</span> s2cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20427"><span class="dyncstuse">hidec_datdec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> knd<span class="keyword">,</span> s2cs<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cdatdec]
</span>      <span class="keyword">|</span> D3Cexndec d3cs1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20493"><span class="dyncstuse">hidec_exndec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> d3cs1<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cexndec]
</span>      <span class="keyword">|</span> D3Cextype <span class="keyword">(</span>name<span class="keyword">,</span> s2e_def<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> loc <span class="keyword">=</span> d3c<span class="keyword">.</span>d3ec_loc
          <span class="keyword">val</span> hit_def <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1642"><span class="dyncstuse">s2exp_tr</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> 1<span class="comment">(*deep*)</span><span class="keyword">,</span> s2e_def<span class="keyword">)</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20606"><span class="dyncstuse">hidec_extype</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> name<span class="keyword">,</span> hit_def<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cextype]
</span>      <span class="keyword">|</span> D3Cextval <span class="keyword">(</span>name<span class="keyword">,</span> d3e_def<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hie_def <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1838"><span class="dyncstuse">d3exp_tr</span></a> d3e_def
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20668"><span class="dyncstuse">hidec_extval</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> name<span class="keyword">,</span> hie_def<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cextval]
</span>      <span class="keyword">|</span> D3Cextcode <span class="keyword">(</span>position<span class="comment">(*int*)</span><span class="keyword">,</span> code<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20542"><span class="dyncstuse">hidec_extern</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> position<span class="keyword">,</span> code<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cextcode]
</span>      <span class="keyword">|</span> D3Cimpdec impdec <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> d2c <span class="keyword">=</span> impdec<span class="keyword">.</span>i3mpdec_cst
          <span class="keyword">val</span> hid <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> 0 <span class="keyword">of</span>
            <span class="keyword">|</span> _ <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#5462"><span class="dyncstuse">d2cst_is_proof</span></a> d2c <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_token</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28210"><span class="dyncstuse">the_dyncstsetlst_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
                <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#1979"><span class="dyncstuse">d3exp_prf_tr</span></a> <span class="keyword">(</span>impdec<span class="keyword">.</span>i3mpdec_def<span class="keyword">)</span>
                <span class="keyword">val</span> d2cs <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28344"><span class="dyncstuse">the_dyncstsetlst_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_token</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
                <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2edats.html#28537"><span class="dyncstuse">the_dyncstset_add_if</span></a> <span class="keyword">(</span>d2c<span class="keyword">)</span>
                <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21542"><span class="dyncstuse">hiimpdec_prf_make</span></a> <span class="keyword">(</span>impdec<span class="keyword">.</span>i3mpdec_loc<span class="keyword">,</span> d2c<span class="keyword">,</span> d2cs<span class="keyword">)</span>
              <span class="keyword">in</span>
                <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21659"><span class="dyncstuse">hidec_impdec_prf</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> hid<span class="keyword">)</span>
              <span class="keyword">end</span> <span class="comment">// end of [_ when ...]
</span>            <span class="keyword">|</span> _ <span class="comment">(* nonproof implementation *)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                <span class="keyword">val</span> hid <span class="keyword">=</span> i3mpdec_tr impdec <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21491"><span class="dyncstuse">hidec_impdec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> hid<span class="keyword">)</span>
              <span class="keyword">end</span> <span class="comment">// end of [_]
</span>          <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13231"><span class="stacstuse">hidec</span></a></span> <span class="comment">// end of [val]
</span>        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cimpdec]
</span>      <span class="keyword">|</span> D3Cfundecs <span class="keyword">(</span>decarg<span class="keyword">,</span> knd<span class="keyword">,</span> fundecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#5570"><span class="dyncstuse">$Syn<span class="keyword">.</span>funkind_is_proof</span></a> knd <span class="keyword">then</span> <span class="keyword">let</span>
            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> f3undeclst_prf_tr <span class="keyword">(</span>fundecs<span class="keyword">)</span> <span class="keyword">in</span> aux0 <span class="keyword">(</span>d3cs<span class="keyword">,</span> res<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">let</span>
            <span class="keyword">val</span> hifundecs <span class="keyword">=</span> f3undeclst_tr <span class="keyword">(</span>decarg<span class="keyword">,</span> fundecs<span class="keyword">)</span>
            <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20796"><span class="dyncstuse">hidec_fundecs</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> decarg<span class="keyword">,</span> knd<span class="keyword">,</span> hifundecs<span class="keyword">)</span>
          <span class="keyword">in</span>
            aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [if]
</span>        <span class="keyword">end</span> <span class="comment">(* end of [D3Cfundecs] *)</span>
      <span class="keyword">|</span> D3Cvaldecs <span class="keyword">(</span>knd<span class="keyword">,</span> valdecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#5103"><span class="dyncstuse">$Syn<span class="keyword">.</span>valkind_is_proof</span></a> knd <span class="keyword">then</span> <span class="keyword">let</span>
            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> v3aldeclst_prf_tr <span class="keyword">(</span>valdecs<span class="keyword">)</span> <span class="keyword">in</span> aux0 <span class="keyword">(</span>d3cs<span class="keyword">,</span> res<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">let</span>
            <span class="keyword">val</span> hid <span class="keyword">=</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#20957"><span class="dyncstuse">hidec_valdecs</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> knd<span class="keyword">,</span> v3aldeclst_tr valdecs<span class="keyword">)</span>
            <span class="comment">// end of [val]
</span>          <span class="keyword">in</span>
            aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [if]
</span>        <span class="keyword">end</span> <span class="comment">(* end of [D3Cvaldecs] *)</span>
      <span class="keyword">|</span> D3Cvaldecs_par valdecs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21033"><span class="dyncstuse">hidec_valdecs_par</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> v3aldeclst_tr valdecs<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cvaldecs_par]
</span>      <span class="keyword">|</span> D3Cvaldecs_rec valdecs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21092"><span class="dyncstuse">hidec_valdecs_rec</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> v3aldeclst_tr valdecs<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cvaldecs_rec]
</span>      <span class="keyword">|</span> D3Cvardecs vardecs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21232"><span class="dyncstuse">hidec_vardecs</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> v3ardeclst_tr vardecs<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cvardecs]
</span>      <span class="keyword">|</span> D3Clocal <span class="keyword">(</span>d3cs_head<span class="keyword">,</span> d3cs_body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hids_head <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs_head
          <span class="keyword">val</span> hids_body <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs_body
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21739"><span class="dyncstuse">hidec_local</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> hids_head<span class="keyword">,</span> hids_body<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Clocal]
</span>      <span class="keyword">|</span> D3Cstaload <span class="keyword">(</span>fil<span class="keyword">,</span> loadflag<span class="keyword">,</span> od3c<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> od3c <span class="keyword">of</span>
            <span class="keyword">|</span> Some d3cs <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
                <span class="comment">// record definitions for templates
</span>                <span class="keyword">let</span> <span class="keyword">val</span> _<span class="comment">(*hideclst*)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2108"><span class="dyncstuse">d3eclst_tr</span></a> d3cs <span class="keyword">in</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">end</span>
              <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>            <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [val]
</span>          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21808"><span class="dyncstuse">hidec_staload</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> fil<span class="keyword">,</span> loadflag<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cstaload]
</span>      <span class="keyword">|</span> D3Cdynload fil <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> hid <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#21869"><span class="dyncstuse">hidec_dynload</span></a> <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">,</span> fil<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux1 <span class="keyword">(</span>d3cs<span class="keyword">,</span> hid<span class="keyword">,</span> res<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cdynload]
</span><span class="comment">(*
      | _ =&gt; let
          val () = (res := list_nil ())
        in
          prerr_loc_interror d3c.d3ec_loc;
          prerr ": d3eclst_tr: aux0: not available yet."; prerr_newline ();
          $Err.abort {void} ()
        end // end of [_]
*)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [list_cons] *)</span>
    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>res := list_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [aux0]
</span><span class="comment">//
</span>  <span class="keyword">and</span> aux1 <span class="keyword">(</span>
      d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10927"><span class="stacstuse">d3eclst</span></a></span>
    <span class="keyword">,</span> hid<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13231"><span class="stacstuse">hidec</span></a></span>
    <span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13310"><span class="stacstuse">hideclst</span></a>? &gt;&gt; <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13310"><span class="stacstuse">hideclst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span>res := cons <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13231"><span class="stacstuse">hidec</span></a><span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>0<span class="keyword">}</span></span> <span class="keyword">(</span>hid<span class="keyword">,</span> ?<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">val+</span> cons <span class="keyword">(</span>_<span class="keyword">,</span> <span class="keyword">!</span>res_nxt<span class="keyword">)</span> <span class="keyword">=</span> res
  <span class="keyword">in</span>
    aux0 <span class="keyword">(</span>d3cs<span class="keyword">,</span> <span class="keyword">!</span>res_nxt<span class="keyword">)</span><span class="keyword">;</span> fold@ res
  <span class="keyword">end</span> <span class="comment">// end of [aux1]
</span><span class="comment">//
</span>  <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fhiexp_2esats.html#13310"><span class="stacstuse">hideclst</span></a></span> <span class="comment">// uninitialize
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> aux0 <span class="keyword">(</span>d3cs0<span class="keyword">,</span> res<span class="keyword">)</span>
<span class="keyword">}</span> <span class="comment">// end of [d3eclst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstimp">d3eclst_prf_tr</span></a>
  <span class="keyword">(</span>d3cs0<span class="keyword">)</span> <span class="keyword">=</span> aux <span class="keyword">(</span>d3cs0<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>d3cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp3_2esats.html#10927"><span class="stacstuse">d3eclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d3cs <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>d3c<span class="keyword">,</span> d3cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d3c<span class="keyword">.</span>d3ec_node <span class="keyword">of</span>
      <span class="keyword">|</span> D3Cnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> aux <span class="keyword">(</span>d3cs<span class="keyword">)</span>
      <span class="keyword">|</span> D3Clist d3cs1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstuse">d3eclst_prf_tr</span></a> d3cs1 <span class="keyword">in</span> aux d3cs
        <span class="keyword">end</span> <span class="comment">// end of [D3Clist]
</span>      <span class="keyword">|</span> D3Cdatdec _ <span class="keyword">=&gt;</span> aux d3cs
      <span class="keyword">|</span> D3Cexndec _ <span class="keyword">=&gt;</span> aux d3cs
      <span class="keyword">|</span> D3Cdcstdec _ <span class="keyword">=&gt;</span> aux d3cs
      <span class="keyword">|</span> D3Cfundecs <span class="keyword">(</span>decarg<span class="keyword">,</span> knd<span class="keyword">,</span> fundecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> f3undeclst_prf_tr fundecs <span class="keyword">in</span> aux <span class="keyword">(</span>d3cs<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cfundecs]
</span>      <span class="keyword">|</span> D3Cvaldecs <span class="keyword">(</span>knd<span class="keyword">,</span> valdecs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> v3aldeclst_prf_tr valdecs <span class="keyword">in</span> aux <span class="keyword">(</span>d3cs<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cvaldecs]
</span>      <span class="keyword">|</span> D3Cvaldecs_rec valdecs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> v3aldeclst_prf_tr valdecs <span class="keyword">in</span> aux <span class="keyword">(</span>d3cs<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Cvaldecs_rec]
</span>      <span class="keyword">|</span> D3Clocal <span class="keyword">(</span>
          d3cs_head<span class="keyword">,</span> d3cs_body
        <span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstuse">d3eclst_prf_tr</span></a> d3cs_head
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans4_2esats.html#2182"><span class="dyncstuse">d3eclst_prf_tr</span></a> d3cs_body
        <span class="keyword">in</span>
          aux <span class="keyword">(</span>d3cs<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [D3Clocal]
</span>      <span class="keyword">|</span> D3Cstaload _ <span class="keyword">=&gt;</span> aux d3cs
      <span class="keyword">|</span> D3Cdynload _ <span class="keyword">=&gt;</span> aux d3cs
      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_interror <span class="keyword">(</span>d3c<span class="keyword">.</span>d3ec_loc<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": d3eclst_prf_tr: illegal proof declaration."
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span>  <span class="keyword">end</span> <span class="comment">// end of [aux]
</span><span class="keyword">}</span> <span class="comment">// end of [d3eclst_prf_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* end of [ats_trans4.dats] *)</span>
</pre>
</body>
</html>
