<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <style type="text/css">
    span.comment {color:#787878;font-style:italic}
    span.extern  {color:#A52A2A}
    span.keyword {color:#000000;font-weight:bold}
    span.neuexp  {color:#800080}
    span.staexp  {color:#0000FF}
    span.dynexp  {color:#E80000}
    span.prfexp  {color:#009000}
    span.stacstdec  {text-decoration:none}
    span.stacstuse  {color:#0000CF;text-decoration:underline}
    span.dyncstdec  {text-decoration:none}
    span.dyncstimp  {color:#B80000;text-decoration:underline}
    span.dyncstuse  {color:#B80000;text-decoration:underline}
    body          {color:#E80000;background-color:#E0E0E0}
  </style>
</head>
<body>
<pre>
<span class="comment">(***********************************************************************)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                         Applied Type System                         *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                              Hongwei Xi                             *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(***********************************************************************)</span>

<span class="comment">(*
** ATS/Anairiats - Unleashing the Potential of Types!
**
** Copyright (C) 2002-2008 Hongwei Xi, Boston University
**
** All rights reserved
**
** ATS is free software;  you can  redistribute it and/or modify it under
** the terms of  the GNU GENERAL PUBLIC LICENSE (GPL) as published by the
** Free Software Foundation; either version 3, or (at  your  option)  any
** later version.
** 
** ATS is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without  even  the  implied  warranty  of MERCHANTABILITY or
** FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License
** for more details.
** 
** You  should  have  received  a  copy of the GNU General Public License
** along  with  ATS;  see the  file COPYING.  If not, please write to the
** Free Software Foundation,  51 Franklin Street, Fifth Floor, Boston, MA
** 02110-1301, USA.
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// Author: Hongwei Xi (hwxi AT cs DOT bu DOT edu)
</span><span class="comment">// Time: November 2007
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="extern">%{^
#include "ats_counter.cats" /* only needed for [ATS/Geizella] */
%}</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">Deb <span class="keyword">=</span> "ats_debug.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Err <span class="keyword">=</span> "ats_error.sats"</span>
<span class="keyword">staload</span> <span class="staexp">IntInf <span class="keyword">=</span> "ats_intinf.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Lab <span class="keyword">=</span> "ats_label.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Loc <span class="keyword">=</span> "ats_location.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Lst <span class="keyword">=</span> "ats_list.sats"</span>
<span class="keyword">staload</span> <span class="staexp">PM <span class="keyword">=</span> "ats_posmark.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Stamp <span class="keyword">=</span> "ats_stamp.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Sym <span class="keyword">=</span> "ats_symbol.sats"</span>
<span class="keyword">staload</span> <span class="staexp">Syn <span class="keyword">=</span> "ats_syntax.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"ats_staexp1.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_dynexp1.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_staexp2.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_dynexp2.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_trans2_env.sats"</span>
<span class="keyword">staload</span> <span class="staexp">"ats_stadyncst2.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"ats_trans2.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#define</span> <span class="neuexp">THISFILENAME "ats_trans2_sta.dats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#define</span> <span class="neuexp">nil list_nil</span>
<span class="keyword">#define</span> <span class="neuexp">cons list_cons</span>
<span class="keyword">#define</span> <span class="neuexp">:: list_cons</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">typedef</span> <span class="staexp"><a name="2353"><span class="stacstdec">loc_t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#1710"><span class="stacstuse">$Loc<span class="keyword">.</span>location_t</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2385"><span class="stacstdec">funclo <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#15340"><span class="stacstuse">$Syn<span class="keyword">.</span>funclo</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2414"><span class="stacstdec">funcloopt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#15487"><span class="stacstuse">$Syn<span class="keyword">.</span>funcloopt</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2449"><span class="stacstdec">efc <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5feffect_2esats.html#2527"><span class="stacstuse">$Eff<span class="keyword">.</span>effcst</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2475"><span class="stacstdec">efcopt <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2449"><span class="stacstuse">efc</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2503"><span class="stacstdec">sym_t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#1609"><span class="stacstuse">$Sym<span class="keyword">.</span>symbol_t</span></a></span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="2533"><span class="stacstdec">symopt_t <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span></a></span>

<span class="comment">(* ****** ****** *)</span>

<span class="neuexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> $Sym<span class="keyword">.</span>eq_symbol_symbol</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> prerr_loc_error2 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
  <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2738"><span class="dyncstuse">$Loc<span class="keyword">.</span>prerr_location</span></a> loc<span class="keyword">;</span> prerr ": error(2)"<span class="keyword">)</span>
<span class="comment">// end of [prerr_loc_error2]
</span>
<span class="keyword">fn</span> prerr_interror <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "INTERNAL ERROR (ats_trans2_sta)"

<span class="keyword">fn</span> prerr_loc_interror <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2738"><span class="dyncstuse">$Loc<span class="keyword">.</span>prerr_location</span></a> loc<span class="keyword">;</span> prerr ": INTERNAL ERROR (ats_trans2_sta)"
<span class="keyword">end</span> <span class="comment">// end of [prerr_loc_interror]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> stacstuseloc_posmark
  <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc_s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13965"><span class="dyncstuse">s2cst_loc_get</span></a> <span class="keyword">(</span>s2c<span class="keyword">)</span>
  <span class="keyword">val</span> loc_begoff <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2273"><span class="dyncstuse">$Loc<span class="keyword">.</span>location_begpos_toff</span></a> loc
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fposmark_2esats.html#2555"><span class="dyncstuse">$PM<span class="keyword">.</span>posmark_insert_stacstuse_beg</span></a> <span class="keyword">(</span>loc_begoff<span class="keyword">,</span> loc_s2c<span class="keyword">)</span>
  <span class="keyword">val</span> loc_endoff <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2322"><span class="dyncstuse">$Loc<span class="keyword">.</span>location_endpos_toff</span></a> loc
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fposmark_2esats.html#2617"><span class="dyncstuse">$PM<span class="keyword">.</span>posmark_insert_stacstuse_end</span></a> <span class="keyword">(</span>loc_endoff<span class="keyword">,</span> loc_s2c<span class="keyword">)</span>
<span class="keyword">in</span>
  <span class="comment">// empty
</span><span class="keyword">end</span> <span class="comment">// end of [stacstuseloc_posmark]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s1rt_app_tr <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> s1t_fun<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#3782"><span class="stacstuse">s1rt</span></a></span>
  <span class="keyword">,</span> s1ts_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#3845"><span class="stacstuse">s1rtlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> 0 <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#4897"><span class="dyncstuse">s1rt_is_arrow</span></a> s1t_fun <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> s1ts_arg <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>s1t1<span class="keyword">,</span> cons <span class="keyword">(</span>s1t2<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s1ts1 <span class="keyword">=</span> <span class="keyword">(</span>
          <span class="keyword">case+</span> s1t1<span class="keyword">.</span>s1rt_node <span class="keyword">of</span>
          <span class="keyword">|</span> S1RTlist s1ts <span class="keyword">=&gt;</span> s1ts <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> cons <span class="keyword">(</span>s1t1<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#3845"><span class="stacstuse">s1rtlst</span></a></span>
        <span class="keyword">val</span> s2ts1 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> s1ts1 <span class="keyword">and</span> s2t2 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t2
      <span class="keyword">in</span>
        S2RTfun <span class="keyword">(</span>s2ts1<span class="keyword">,</span> s2t2<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_interror <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": [s1rt_app_tr]: [-&gt;] is not an infix operator!"<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [s1rt_is_arrow]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_error2 loc0<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1rt_app_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": sort application is not supported."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s1rt_app_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstimp">s1rt_tr</span></a> <span class="keyword">(</span>s1t0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1t0<span class="keyword">.</span>s1rt_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1RTapp <span class="keyword">(</span>s1t<span class="keyword">,</span> s1ts<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
<span class="comment">(*
      print "s1rt_tr: S1RTapp: "; print s1t0.s1rt_loc; print_newline ();
*)</span>
      s1rt_app_tr <span class="keyword">(</span>s1t0<span class="keyword">.</span>s1rt_loc<span class="keyword">,</span> s1t<span class="keyword">,</span> s1ts<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1RTapp]
</span>  <span class="keyword">|</span> S1RTlist s1ts <span class="keyword">=&gt;</span> S2RTtup <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> s1ts<span class="keyword">)</span> 
  <span class="keyword">|</span> S1RTqid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#1953"><span class="dyncstuse">the_s2rtenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">of</span>
    <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2te <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2te <span class="keyword">of</span>
      <span class="keyword">|</span> S2TEsrt s2t <span class="keyword">=&gt;</span> s2t <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          prerr_loc_error2 s1t0<span class="keyword">.</span>s1rt_loc<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1rt_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": the identifier ["<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
          prerr "] refers to an extended sort but not a sort."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>      <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>    <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_error2 s1t0<span class="keyword">.</span>s1rt_loc<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1rt_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": the identifier ["<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#12723"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0rtq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
        prerr "] refers to an unrecognized sort."<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [None_vt]
</span>    <span class="keyword">end</span> <span class="comment">// end of [S1RTqid]
</span>  <span class="keyword">|</span> S1RTtup s1ts <span class="keyword">=&gt;</span> S2RTtup <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> s1ts<span class="keyword">)</span>
<span class="comment">(*
  | _ =&gt; begin
      prerr_loc_interror s1t0.s1rt_loc;
      prerr ": not yet implemented: ["; prerr s1t0; prerr "]";
      prerr_newline ();
      $Err.abort ()
    end // end of [_]
*)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1rt_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstimp">s1rtlst_tr</span></a> <span class="keyword">(</span>s1ts<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1ts <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>s1t<span class="keyword">,</span> s1ts<span class="keyword">)</span> <span class="keyword">=&gt;</span> cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> s1ts<span class="keyword">)</span>
  <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1rtlst_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1722"><span class="dyncstimp">s1rtopt_tr</span></a> <span class="keyword">(</span>os1t<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> os1t <span class="keyword">of</span>
  <span class="keyword">|</span> Some s1t <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span> 
<span class="keyword">end</span> <span class="comment">// end of [s1rtopt_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* static special identifier *)</span>
<span class="keyword">datatype</span> <span class="staexp"><a name="6113"><span class="stacstdec">staspecid</span></a></span> <span class="keyword">=</span> SPSIDarrow <span class="keyword">|</span> SPSIDnone

<span class="keyword">fn</span> staspecid_of_qid <span class="keyword">(</span>q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#6113"><span class="stacstuse">staspecid</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> q<span class="keyword">.</span>s0taq_node <span class="keyword">of</span>
  <span class="keyword">|</span> $Syn<span class="keyword">.</span>S0TAQnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">if</span> id <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#2263"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_MINUSGT</span></a> <span class="keyword">then</span> SPSIDarrow <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> SPSIDnone <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> SPSIDnone <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [staspecid_of_qid]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> effvar_tr
  <span class="keyword">(</span>efv<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5feffect_2esats.html#2466"><span class="stacstuse">$Eff<span class="keyword">.</span>effvar</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2679"><span class="dyncstuse">the_s2expenv_find</span></a> efv<span class="keyword">.</span>i0de_sym <span class="keyword">of</span>
  <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
    <span class="keyword">|</span> S2ITEMvar s2v <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#3406"><span class="dyncstuse">s2var_tmplev_check</span></a> <span class="keyword">(</span>efv<span class="keyword">.</span>i0de_loc<span class="keyword">,</span> s2v<span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32074"><span class="dyncstuse">s2exp_var</span></a> <span class="keyword">(</span>s2v<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [S2ITEMvar]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_error2 efv<span class="keyword">.</span>i0de_loc<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: effvar_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": the static identifer ["<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> efv<span class="keyword">.</span>i0de_sym<span class="keyword">;</span>
        prerr "] should refer to a variable but it does not."<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>  <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> 
      prerr_loc_error2 efv<span class="keyword">.</span>i0de_loc<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: effvar_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": unrecognized static identifer ["<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> efv<span class="keyword">.</span>i0de_sym<span class="keyword">;</span>
      prerr "]."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [None_vt]
</span><span class="keyword">end</span> <span class="comment">// end of [effvar_tr]
</span>
<span class="keyword">fn</span> effvarlst_tr <span class="keyword">(</span>efvs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5feffect_2esats.html#2493"><span class="stacstuse">$Eff<span class="keyword">.</span>effvarlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>efvs<span class="keyword">,</span> effvar_tr<span class="keyword">)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1763"><span class="dyncstimp">effcst_tr</span></a> <span class="keyword">(</span>efc<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#5355"><span class="stacstuse">s2eff</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> efc <span class="keyword">of</span>
  <span class="keyword">|</span> $Eff<span class="keyword">.</span>EFFCSTall <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2EFFall <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> $Eff<span class="keyword">.</span>EFFCSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2EFFnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> $Eff<span class="keyword">.</span>EFFCSTset <span class="keyword">(</span>efs<span class="keyword">,</span> efvs<span class="keyword">)</span> <span class="keyword">=&gt;</span> S2EFFset <span class="keyword">(</span>efs<span class="keyword">,</span> effvarlst_tr efvs<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [effcst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1871"><span class="dyncstimp">s1arglst_var_tr</span></a> <span class="keyword">(</span>s1as<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> s1rtopt_search <span class="keyword">(</span>s1as<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#5768"><span class="stacstuse">s1arglst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#3875"><span class="stacstuse">s1rtopt</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> s1as <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1a<span class="keyword">,</span> s1as<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> os1t <span class="keyword">=</span> s1a<span class="keyword">.</span>s1arg_srt <span class="keyword">in</span>
        <span class="keyword">case+</span> os1t <span class="keyword">of</span> Some _ <span class="keyword">=&gt;</span> os1t <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1rtopt_search s1as
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [s1rtopt_search]
</span><span class="keyword">in</span>
  <span class="keyword">case+</span> s1as <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1a_fst<span class="keyword">,</span> s1as_rst<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> os1t <span class="keyword">=</span> s1rtopt_search s1as<span class="keyword">;</span> <span class="keyword">val</span> s1t <span class="keyword">=</span> <span class="keyword">case+</span> os1t <span class="keyword">of</span>
        <span class="keyword">|</span> Some s1t <span class="keyword">=&gt;</span> s1t <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
            prerr_loc_error2 s1a_fst<span class="keyword">.</span>s1arg_loc<span class="keyword">;</span>
            <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1arglst_var_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
            prerr ": the static variable ["<span class="keyword">;</span>
            <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> s1a_fst<span class="keyword">.</span>s1arg_sym<span class="keyword">;</span>
            prerr "] must be ascribed a sort."<span class="keyword">;</span>
            <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
            <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">// end of [None]
</span>      <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t
      <span class="keyword">val</span> s2v_fst <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>s1a_fst<span class="keyword">.</span>s1arg_sym<span class="keyword">,</span> s2t<span class="keyword">)</span>
      <span class="keyword">val</span> s2vs_rst <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1871"><span class="dyncstuse">s1arglst_var_tr</span></a> s1as_rst
      <span class="keyword">val</span> s2vs <span class="keyword">=</span> list_cons <span class="keyword">(</span>s2v_fst<span class="keyword">,</span> s2vs_rst<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2438"><span class="dyncstuse">the_s2expenv_add_svarlst</span></a> s2vs<span class="keyword">;</span> s2vs
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1arglst_var_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1918"><span class="dyncstimp">s1arglstlst_var_tr</span></a> <span class="keyword">(</span>s1ass<span class="keyword">)</span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1ass<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1871"><span class="dyncstuse">s1arglst_var_tr</span></a><span class="keyword">)</span>
<span class="comment">// end of [s1arglstlst_var_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1976"><span class="dyncstimp">s1arg_var_tr_srt</span></a>
  <span class="keyword">(</span>s1a<span class="keyword">,</span> s2t0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2t <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> s1a<span class="keyword">.</span>s1arg_srt <span class="keyword">of</span>
    <span class="keyword">|</span> Some s1t <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t
      <span class="keyword">in</span>
        <span class="keyword">if</span> s2t0 &lt;= s2t <span class="keyword">then</span> s2t <span class="keyword">else</span> <span class="keyword">begin</span>
          prerr_loc_error2 s1a<span class="keyword">.</span>s1arg_loc<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1arg_var_tr_srt"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": the static variable ["<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> s1a<span class="keyword">.</span>s1arg_sym<span class="keyword">;</span>
          prerr "] is expected to be of the sort ["<span class="keyword">;</span>
          prerr s2t0<span class="keyword">;</span>
          prerr "]."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [if]
</span>      <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s2t0
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>s1a<span class="keyword">.</span>s1arg_sym<span class="keyword">,</span> s2t<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v<span class="keyword">;</span> s2v
<span class="keyword">end</span> <span class="comment">// end of [s1arg_var_tr_srt]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> sp1at_arg_tr_dn <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
<span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">,</span> s1as<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#5768"><span class="stacstuse">s1arglst</span></a></span><span class="keyword">,</span> s2ts<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> <span class="keyword">(</span>s1as<span class="keyword">,</span> s2ts<span class="keyword">)</span> <span class="keyword">of</span>
  <span class="keyword">|</span> <span class="keyword">(</span>list_cons <span class="keyword">(</span>s1a<span class="keyword">,</span> s1as<span class="keyword">)</span><span class="keyword">,</span> list_cons <span class="keyword">(</span>s2t<span class="keyword">,</span> s2ts<span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1976"><span class="dyncstuse">s1arg_var_tr_srt</span></a> <span class="keyword">(</span>s1a<span class="keyword">,</span> s2t<span class="keyword">)</span>
      <span class="keyword">val</span> s2vs <span class="keyword">=</span> sp1at_arg_tr_dn <span class="keyword">(</span>loc0<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">,</span> s1as<span class="keyword">,</span> s2ts<span class="keyword">)</span>
    <span class="keyword">in</span>
      list_cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons, list_cons]
</span>  <span class="keyword">|</span> <span class="keyword">(</span>list_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> list_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">|</span> <span class="keyword">(</span>_<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_error2 loc0<span class="keyword">;</span>
      prerr ": the static constructor ["<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "] requires "<span class="keyword">;</span>
      <span class="keyword">case+</span> s1as <span class="keyword">of</span> list_cons _ <span class="keyword">=&gt;</span> prerr "less" <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> prerr "more"<span class="keyword">;</span>
      prerr " arguments."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons, list_nil]
</span><span class="keyword">end</span> <span class="comment">// end of [sp2at_arg_tr_dn]
</span>
<span class="keyword">fun</span> sp1at_argcheck
  <span class="keyword">(</span>s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#23028"><span class="stacstuse">Option_vt</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2272"><span class="stacstuse">s2var_t</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> check <span class="keyword">(</span>
    name<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">,</span> s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#23028"><span class="stacstuse">Option_vt</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2272"><span class="stacstuse">s2var_t</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> s2vs <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> <span class="keyword">(</span>name <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16784"><span class="dyncstuse">s2var_sym_get</span></a> s2v<span class="keyword">)</span> <span class="keyword">then</span> Some_vt s2v <span class="keyword">else</span> check <span class="keyword">(</span>name<span class="keyword">,</span> s2vs<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None_vt <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [check]
</span><span class="keyword">in</span>
  <span class="keyword">case+</span> s2vs <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> ans <span class="keyword">=</span> check <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16784"><span class="dyncstuse">s2var_sym_get</span></a> s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span> <span class="keyword">in</span> <span class="keyword">case+</span> ans <span class="keyword">of</span>
      <span class="keyword">|</span> Some_vt _ <span class="keyword">=&gt;</span> <span class="keyword">(</span>fold@ ans<span class="keyword">;</span> ans<span class="keyword">)</span> <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> sp1at_argcheck s2vs
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None_vt <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [sp1at_argcheck]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2031"><span class="dyncstimp">sp1at_tr_dn</span></a> <span class="keyword">(</span>sp1t<span class="keyword">,</span> s2t_pat<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc0 <span class="keyword">=</span> sp1t<span class="keyword">.</span>sp1at_loc
<span class="comment">//
</span>  <span class="keyword">fn</span> err1
    <span class="keyword">(</span>q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc0<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: sp1at_tr_dn"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] does not refer to a constructor associated with the sort ["<span class="keyword">;</span>
    prerr s2t_pat<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err1]
</span><span class="comment">//
</span>  <span class="keyword">fn</span> err2 
    <span class="keyword">(</span>q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc0<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: sp1at_tr_dn"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] does not refer to a static constructor."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err2]
</span><span class="comment">//
</span>  <span class="keyword">fn</span> err3
    <span class="keyword">(</span>q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc0<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: sp1at_tr_dn"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "] is unrecognized."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9577"><span class="stacstuse">sp2at</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err3]
</span><span class="comment">//
</span>  <span class="keyword">fn</span> argcheck_err <span class="keyword">(</span>s2v<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2272"><span class="stacstuse">s2var_t</span></a></span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flocation_2esats.html#2738"><span class="dyncstuse">$Loc<span class="keyword">.</span>prerr_location</span></a> loc0<span class="keyword">;</span> prerr ": warning(2)"<span class="keyword">;</span>    
    prerr ": the static variable ["<span class="keyword">;</span> prerr s2v<span class="keyword">;</span> prerr "] occurs repeatedly."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [argcheck_err]
</span><span class="comment">//
</span><span class="keyword">in</span>
  <span class="keyword">case+</span> sp1t<span class="keyword">.</span>sp1at_node <span class="keyword">of</span>
  <span class="keyword">|</span> SP1Tcon <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">,</span> s1as<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
    <span class="keyword">val</span> ans <span class="keyword">=</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2727"><span class="dyncstuse">the_s2expenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">in</span>
    <span class="keyword">case+</span> ans <span class="keyword">of</span>
    <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
      <span class="keyword">|</span> S2ITEMcst s2cs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">var</span> s2ts_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span> <span class="keyword">=</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">val</span> s2cs <span class="keyword">=</span> sel <span class="keyword">(</span>s2cs<span class="keyword">,</span> s2t_pat<span class="keyword">,</span> s2ts_arg<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
            <span class="keyword">fun</span> sel <span class="keyword">(</span>
                s2cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span><span class="keyword">,</span> s2t_pat<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> s2ts_arg<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span></a></span>
              <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
              <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> s2cs1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                  <span class="keyword">val</span> s2t_s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14003"><span class="dyncstuse">s2cst_srt_get</span></a> s2c <span class="keyword">in</span> <span class="keyword">case+</span> s2t_s2c <span class="keyword">of</span>
                  <span class="keyword">|</span> S2RTfun <span class="keyword">(</span>s2ts<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> 0 <span class="keyword">of</span>
                    <span class="keyword">|</span> _ <span class="keyword">when</span> s2t_pat &lt;= s2t <span class="keyword">=&gt;</span> <span class="keyword">(</span>s2ts_arg := s2ts<span class="keyword">;</span> s2cs<span class="keyword">)</span>
                    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> sel <span class="keyword">(</span>s2cs1<span class="keyword">,</span> s2t_pat<span class="keyword">,</span> s2ts_arg<span class="keyword">)</span>
                    <span class="keyword">end</span> <span class="comment">// end of [S2RTfun]
</span>                  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> sel <span class="keyword">(</span>s2cs1<span class="keyword">,</span> s2t_pat<span class="keyword">,</span> s2ts_arg<span class="keyword">)</span>
                <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTcons]
</span>              <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">}</span> <span class="comment">// end of [val]
</span>        <span class="keyword">in</span>
          <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
          <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
              <span class="keyword">val</span> s2vs <span class="keyword">=</span> sp1at_arg_tr_dn <span class="keyword">(</span>loc0<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">,</span> s1as<span class="keyword">,</span> s2ts_arg<span class="keyword">)</span>
              <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> sp1at_argcheck <span class="keyword">(</span>s2vs<span class="keyword">)</span> <span class="keyword">of</span>
                <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2v <span class="keyword">=&gt;</span> argcheck_err <span class="keyword">(</span>s2v<span class="keyword">)</span> <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
              <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="comment">// end of [val]
</span>            <span class="keyword">in</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29442"><span class="dyncstuse">sp2at_con</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> s2c<span class="keyword">,</span> s2vs<span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTcons]
</span>          <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> err1 <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [S2ITEMcst]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err2 <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>    <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> err3 <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [SP1Tcon]
</span><span class="keyword">end</span> <span class="comment">// end of [sp1at_tr_dn]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2454"><span class="dyncstimp">s1exp_tr_dn_bool</span></a>
  <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10118"><span class="dyncstuse">s2rt_bool</span></a><span class="keyword">)</span>
<span class="comment">// end of [s1exp_tr_dn_bool]
</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2942"><span class="dyncstimp">s1explst_tr_dn_bool</span></a> <span class="keyword">(</span>s1es<span class="keyword">)</span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2454"><span class="dyncstuse">s1exp_tr_dn_bool</span></a><span class="keyword">)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2495"><span class="dyncstimp">s1exp_tr_dn_cls</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10160"><span class="dyncstuse">s2rt_cls</span></a><span class="keyword">)</span>

<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2993"><span class="dyncstimp">s1explst_tr_dn_cls</span></a> <span class="keyword">(</span>s1es<span class="keyword">)</span> <span class="keyword">=</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2495"><span class="dyncstuse">s1exp_tr_dn_cls</span></a><span class="keyword">)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2535"><span class="dyncstimp">s1exp_tr_dn_int</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10200"><span class="dyncstuse">s2rt_int</span></a><span class="keyword">)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3043"><span class="dyncstimp">s1explst_tr_dn_int</span></a> <span class="keyword">(</span>s1es<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2535"><span class="dyncstuse">s1exp_tr_dn_int</span></a><span class="keyword">)</span>
<span class="comment">// end of [s1explst_tr_dn_int]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2575"><span class="dyncstimp">s1exp_tr_dn_prop</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10270"><span class="dyncstuse">s2rt_prop</span></a><span class="keyword">)</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2616"><span class="dyncstimp">s1exp_tr_dn_type</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10291"><span class="dyncstuse">s2rt_type</span></a><span class="keyword">)</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2657"><span class="dyncstimp">s1exp_tr_dn_t0ype</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a><span class="keyword">)</span>

<span class="keyword">fun</span> s1explst_tr_dn_t0ype
  <span class="keyword">(</span>s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2657"><span class="dyncstuse">s1exp_tr_dn_t0ype</span></a><span class="keyword">)</span>
<span class="comment">// end of [s1explst_tr_dn_t0ype]
</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2699"><span class="dyncstimp">s1exp_tr_dn_view</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a><span class="keyword">)</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2740"><span class="dyncstimp">s1exp_tr_dn_viewtype</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10355"><span class="dyncstuse">s2rt_viewtype</span></a><span class="keyword">)</span>
<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2785"><span class="dyncstimp">s1exp_tr_dn_viewt0ype</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a><span class="keyword">)</span>

<span class="keyword">fun</span> s1explst_tr_dn_viewt0ype
  <span class="keyword">(</span>s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2785"><span class="dyncstuse">s1exp_tr_dn_viewt0ype</span></a><span class="keyword">)</span>
<span class="comment">// end of [s1explst_tr_dn_viewt0ype]
</span><span class="keyword">fun</span> s1explstlst_tr_dn_viewt0ype
  <span class="keyword">(</span>s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9489"><span class="stacstuse">s2explstlst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1ess<span class="keyword">,</span> s1explst_tr_dn_viewt0ype<span class="keyword">)</span>
<span class="comment">// end of [s1explstlst_tr_dn_viewt0ype]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstimp">s1exp_tr_dn_impredicative</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e<span class="keyword">;</span> <span class="keyword">val</span> s2t <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
<span class="keyword">in</span>
  <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11109"><span class="dyncstuse">s2rt_is_impredicative</span></a> s2t <span class="keyword">then</span> s2e <span class="keyword">else</span> <span class="keyword">begin</span>
    prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tr_dn_impredicative"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static expression needs to be impredicative"<span class="keyword">;</span>
    prerr " but is assigned the sort ["<span class="keyword">;</span>
    prerr s2t<span class="keyword">;</span>
    prerr "]."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_tr_dn_impredicative]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2881"><span class="dyncstimp">s1expopt_tr_dn_impredicative</span></a> <span class="keyword">(</span>os1e<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> os1e <span class="keyword">of</span>
  <span class="keyword">|</span> Some s1e <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> s1e<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">// end of [s1expopt_tr_dn_impredicative]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_any_tr_up <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  prerr_loc_error2 loc0<span class="keyword">;</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_any_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
  prerr "the static expression needs to be ascribed a sort."<span class="keyword">;</span>
  <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_any_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_app_tr_up
  <span class="keyword">(</span>loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> loc_fun<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> loop <span class="keyword">(</span>loc_app<span class="keyword">,</span> loc_fun<span class="keyword">,</span> s2e<span class="keyword">,</span> s1ess<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
  <span class="keyword">fun</span> loop
    <span class="keyword">(</span>loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> loc_fun<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s2e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span>
    <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1ess <span class="keyword">of</span>
    <span class="keyword">|</span> s1es :: s1ess <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">@(</span>s2ts<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span>
          <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12774"><span class="dyncstuse">un_s2rt_fun</span></a> <span class="keyword">(</span>s2e<span class="keyword">.</span>s2exp_srt<span class="keyword">)</span> <span class="keyword">of</span>
          <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2ts_s2t <span class="keyword">=&gt;</span> s2ts_s2t
          <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              prerr_loc_error2 loc_fun<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
              prerr ": the static expresstion ["<span class="keyword">;</span>
              prerr s2e<span class="keyword">;</span>
              prerr "] is expected to be of a functional sort"<span class="keyword">;</span>
              prerr ", but is assigned the sort ["<span class="keyword">;</span>
              prerr s2e<span class="keyword">.</span>s2exp_srt<span class="keyword">;</span>
              prerr "]."<span class="keyword">;</span>
              <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span>
        <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">)</span></span>
        <span class="keyword">val</span> ns2es <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> s1es <span class="keyword">and</span> ns2ts <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> s2ts
        <span class="keyword">val</span> s2es <span class="keyword">=</span> <span class="keyword">case+</span> compare <span class="keyword">(</span>ns2es<span class="keyword">,</span> ns2ts<span class="keyword">)</span> <span class="keyword">of</span>
          <span class="keyword">|</span>  0 <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2361"><span class="dyncstuse">s1explst_tr_dn</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> s2ts<span class="keyword">)</span>
          <span class="keyword">|</span>  1 <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              prerr_loc_error2 loc_app<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
              prerr ": the static application needs less arguments."<span class="keyword">;</span>
              <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [1]
</span>          <span class="keyword">|</span> _ <span class="comment">(* ~1 *)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              prerr_loc_error2 loc_app<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
              prerr ": the static application needs more arguments."<span class="keyword">;</span>
              <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end [_]
</span>      <span class="keyword">in</span>
        loop <span class="keyword">(</span>loc_app<span class="keyword">,</span> loc_fun<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29528"><span class="dyncstuse">s2exp_app_srt</span></a> <span class="keyword">(</span>s2t<span class="keyword">,</span> s2e<span class="keyword">,</span> s2es<span class="keyword">)</span><span class="keyword">,</span> s1ess<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [::]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s2e
  <span class="keyword">end</span> <span class="comment">// end of [loop]
</span><span class="keyword">}</span> <span class="comment">// end of [s1exp_app_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_app_datconptr_tr_up
  <span class="keyword">(</span>loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s1es <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> s1ess <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>s1es<span class="keyword">,</span> s1ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">case+</span> s1ess <span class="keyword">of</span>
      <span class="keyword">|</span> nil _ <span class="keyword">=&gt;</span> s1es <span class="keyword">|</span> cons _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          prerr_loc_error2 loc_app<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_datconptr_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": the type constructor ["<span class="keyword">;</span>
          prerr d2c<span class="keyword">;</span>
          prerr "] is overly applied."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>      <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span>
  <span class="keyword">val</span> s2es <span class="keyword">=</span> aux s1es <span class="keyword">where</span> <span class="keyword">{</span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> s1es <span class="keyword">of</span>
      <span class="keyword">|</span> cons <span class="keyword">(</span>s1e<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10097"><span class="dyncstuse">s2rt_addr</span></a><span class="keyword">)</span><span class="keyword">,</span> aux s1es<span class="keyword">)</span>
        <span class="keyword">end</span>
      <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">}</span> <span class="comment">// end of [where]
</span>  <span class="keyword">val</span> ns2es <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> s2es
  <span class="keyword">val</span> arity <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22496"><span class="dyncstuse">d2con_arity_full_get</span></a> d2c
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> ns2es <span class="keyword">&gt;</span> arity <span class="keyword">then</span> <span class="keyword">begin</span>
      prerr_loc_error2 loc_app<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_datcon_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": the type constructor ["<span class="keyword">;</span>
      prerr d2c<span class="keyword">;</span>
      prerr "] expects less arguments."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [if]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> ns2es <span class="keyword">&lt;</span> arity <span class="keyword">then</span> <span class="keyword">begin</span>
      prerr_loc_error2 loc_app<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_datcon_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": the type constructor ["<span class="keyword">;</span>
      prerr d2c<span class="keyword">;</span>
      prerr "] expects more arguments."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29953"><span class="dyncstuse">s2exp_datconptr</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> s2es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end [s1exp_app_datconptr_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_app_datcontyp_tr_up
  <span class="keyword">(</span>loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fn</span> err <span class="keyword">(</span>loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> d2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
     prerr_loc_error2 loc_app<span class="keyword">;</span>
     <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_app_datcon_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
     prerr ": the type constructor ["<span class="keyword">;</span>
     prerr d2c<span class="keyword">;</span>
     prerr "_t0ype] is overly applied."<span class="keyword">;</span>
     <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
     <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err]
</span>  <span class="keyword">val</span> s1es <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> s1ess <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1es<span class="keyword">,</span> s1ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <span class="keyword">case+</span> s1ess <span class="keyword">of</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1es <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err <span class="keyword">(</span>loc_app<span class="keyword">,</span> d2c<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span>
  <span class="keyword">val</span> s2es <span class="keyword">=</span> s1explst_tr_dn_viewt0ype s1es
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30011"><span class="dyncstuse">s2exp_datcontyp</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> s2es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_app_datcontyp_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s1exp_qid_app_tr_up <span class="keyword">(</span>
    loc_app<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> loc_qid<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span>
  <span class="keyword">,</span> s2i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#3094"><span class="stacstuse">s2item</span></a></span>
  <span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
  <span class="keyword">|</span> S2ITEMcst s2cs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2ess <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2187"><span class="dyncstuse">s1explstlst_tr_up</span></a> s1ess
    <span class="keyword">in</span>
      <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32499"><span class="dyncstuse">s2cst_select_s2explstlst</span></a> <span class="keyword">(</span>s2cs<span class="keyword">,</span> s2ess<span class="keyword">)</span> <span class="keyword">of</span>
      <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">//
</span>          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> stacstuseloc_posmark <span class="keyword">(</span>loc_qid<span class="keyword">,</span> s2c<span class="keyword">)</span> <span class="keyword">in</span>
<span class="comment">//
</span>          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29603"><span class="dyncstuse">s2exp_app_wind</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29862"><span class="dyncstuse">s2exp_cst</span></a> s2c<span class="keyword">,</span> s2ess<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTcons]
</span>      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          prerr_loc_error2 loc_app<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_qid_app_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": none of the static constants referred to by ["<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
          prerr "] is applicable."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [S2ITEMcst]
</span>  <span class="keyword">|</span> S2ITEMvar s2v <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#3406"><span class="dyncstuse">s2var_tmplev_check</span></a> <span class="keyword">(</span>loc_qid<span class="keyword">,</span> s2v<span class="keyword">)</span>
    <span class="keyword">in</span>
      s1exp_app_tr_up <span class="keyword">(</span>loc_app<span class="keyword">,</span> loc_qid<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32074"><span class="dyncstuse">s2exp_var</span></a> s2v<span class="keyword">,</span> s1ess<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S2ITEMvar]
</span>  <span class="keyword">|</span> S2ITEMdatconptr d2c <span class="keyword">=&gt;</span> s1exp_app_datconptr_tr_up <span class="keyword">(</span>loc_app<span class="keyword">,</span> d2c<span class="keyword">,</span> s1ess<span class="keyword">)</span>
  <span class="keyword">|</span> S2ITEMdatcontyp d2c <span class="keyword">=&gt;</span> s1exp_app_datcontyp_tr_up <span class="keyword">(</span>loc_app<span class="keyword">,</span> d2c<span class="keyword">,</span> s1ess<span class="keyword">)</span>
<span class="comment">(*
  | S2ITEMfil _ =&gt; s1exp_qid_app_tr_up_errmsg_fil loc_qid qid
*)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc_qid<span class="keyword">;</span>
      prerr ": s1exp_qid_app_tr_up: not implemented yet: s2i = "<span class="keyword">;</span> prerr s2i<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_qid_app_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_qid_tr_up
  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2727"><span class="dyncstuse">the_s2expenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">of</span>
  <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
    <span class="keyword">|</span> S2ITEMcst s2cs <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
      <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">//
</span>          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> stacstuseloc_posmark <span class="keyword">(</span>loc0<span class="keyword">,</span> s2c<span class="keyword">)</span>
<span class="comment">//
</span>          <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14003"><span class="dyncstuse">s2cst_srt_get</span></a> s2c<span class="keyword">;</span> <span class="keyword">val</span> s2e_s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29862"><span class="dyncstuse">s2exp_cst</span></a> s2c
        <span class="keyword">in</span>
          <span class="keyword">case+</span> s2t <span class="keyword">of</span>
          <span class="keyword">|</span> S2RTfun <span class="keyword">(</span>nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> _res<span class="keyword">)</span> <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10485"><span class="dyncstuse">s2rt_is_dat</span></a> _res <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              <span class="comment">// a nullary constructor is automatically applied!!!
</span>              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29528"><span class="dyncstuse">s2exp_app_srt</span></a> <span class="keyword">(</span>_res<span class="keyword">,</span> s2e_s2c<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [S2RTfun]
</span>          <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> s2e_s2c
        <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTcons]
</span>      <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="comment">// this clause should be unreachable
</span>          prerr_interror <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": s1exp_qid_tr_up: Some: S2ITEMcst: S2CSTLSTnil"<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTnil]
</span>      <span class="keyword">end</span> <span class="comment">// end of [S2ITEMcst]
</span>    <span class="keyword">|</span> S2ITEMe1xp e1xp <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#13429"><span class="dyncstuse">s1exp_make_e1xp</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> e1xp<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">|</span> S2ITEMvar s2v <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#3406"><span class="dyncstuse">s2var_tmplev_check</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> s2v<span class="keyword">)</span> <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32074"><span class="dyncstuse">s2exp_var</span></a> s2v
      <span class="keyword">end</span> <span class="comment">// end of [S2ITEMvar]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_interror loc0<span class="keyword">;</span>
        prerr ": s1exp_qid_tr_up: s2i = "<span class="keyword">;</span> prerr s2i<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>  <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_error2 loc0<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_qid_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": the static identifier ["<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "] is unrecognized."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [None_vt]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_qid_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_invar_tr_up
  <span class="keyword">(</span>refval<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
    <span class="keyword">if</span> refval <span class="keyword">=</span> 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a> <span class="comment">(*val*)</span> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a> <span class="comment">(*ref*)</span>
  <span class="keyword">val</span> s2e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31187"><span class="dyncstuse">s2exp_refarg</span></a> <span class="keyword">(</span>refval<span class="keyword">,</span> s2e<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_invar_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_read_tr_up <span class="keyword">(</span>_v<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">,</span> s1e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> _v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2699"><span class="dyncstuse">s1exp_tr_dn_view</span></a> <span class="keyword">(</span>_v<span class="keyword">)</span>
  <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e<span class="keyword">;</span> <span class="keyword">val</span> s2t_s2e <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11109"><span class="dyncstuse">s2rt_is_impredicative</span></a> s2t_s2e <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">begin</span>
      prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_read_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": the static expression needs to be impredicative"<span class="keyword">;</span>
      prerr " but is assigned the sort ["<span class="keyword">;</span>
      prerr s2t_s2e<span class="keyword">;</span>
      prerr "]."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#35022"><span class="dyncstuse">s2exp_readize</span></a> <span class="keyword">(</span>_v<span class="keyword">,</span> s2e<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_read_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_top_tr_up <span class="keyword">(</span>knd<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e
  <span class="keyword">val</span> s2t_fun <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
  <span class="keyword">val</span> s2t_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11299"><span class="dyncstuse">s2rt_base_fun</span></a> s2t_fun
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11109"><span class="dyncstuse">s2rt_is_impredicative</span></a> s2t_res <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">begin</span>
      prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_top_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
      prerr ": the static expression needs to be impredicative"<span class="keyword">;</span>
      prerr " but is assigned the sort ["<span class="keyword">;</span>
      prerr s2t_fun<span class="keyword">;</span>
      prerr "]."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#35130"><span class="dyncstuse">s2exp_topize</span></a> <span class="keyword">(</span>knd<span class="keyword">,</span> s2e<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_top_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3122"><span class="dyncstimp">s1exp_arg_tr_up</span></a>
  <span class="keyword">(</span>s1e0<span class="keyword">,</span> wths1es<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1e0<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1Einvar <span class="keyword">(</span>refval<span class="keyword">,</span> s1e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
        wths1es := WTHS1EXPLSTcons_some <span class="keyword">(</span>refval<span class="keyword">,</span> s1e<span class="keyword">,</span> wths1es<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [val]
</span>    <span class="keyword">in</span>
      s1exp_invar_tr_up <span class="keyword">(</span>refval<span class="keyword">,</span> s1e<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Einvar]
</span>  <span class="keyword">|</span> S1Etrans <span class="keyword">(</span>s1e1<span class="keyword">,</span> s1e2<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1e1<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
    <span class="keyword">|</span> S1Einvar <span class="keyword">(</span>refval<span class="keyword">,</span> s1e_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
          wths1es := WTHS1EXPLSTcons_some <span class="keyword">(</span>refval<span class="keyword">,</span> s1e2<span class="keyword">,</span> wths1es<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [val]
</span>      <span class="keyword">in</span>
        s1exp_invar_tr_up <span class="keyword">(</span>refval<span class="keyword">,</span> s1e_arg<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [S1Einvar]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_error2 s1e1<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_arg_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": a refval type must begin with !(call-by-value) or &amp;(call-by-reference)"<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>    <span class="keyword">end</span> <span class="comment">// end of [S1Etrans]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> wths1es := WTHS1EXPLSTcons_none wths1es
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e0
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_arg_tr_up]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3179"><span class="dyncstimp">s1exp_arg_tr_dn_impredicative</span></a>
  <span class="keyword">(</span>s1e<span class="keyword">,</span> wths1es<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3122"><span class="dyncstuse">s1exp_arg_tr_up</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> wths1es<span class="keyword">)</span><span class="keyword">;</span> <span class="keyword">val</span> s2t <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
<span class="keyword">in</span>
  <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11109"><span class="dyncstuse">s2rt_is_impredicative</span></a> s2t <span class="keyword">then</span> s2e <span class="keyword">else</span> <span class="keyword">begin</span>
    prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_arg_tr_dn_impredicative"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static expression needs to be impredicative"<span class="keyword">;</span>
    prerr " but is assigned the sort ["<span class="keyword">;</span>
    prerr s2t<span class="keyword">;</span>
    prerr "]."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [if]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_arg_tr_dn_impredicative]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3250"><span class="dyncstimp">s1exp_res_tr_dn_impredicative</span></a>
  <span class="keyword">(</span>s1e0<span class="keyword">,</span> wths1es<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>  <span class="keyword">fun</span> auxwth <span class="keyword">(</span>
    wths1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8388"><span class="stacstuse">wths1explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8597"><span class="stacstuse">wths2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> wths1es <span class="keyword">of</span>
    <span class="keyword">|</span> WTHS1EXPLSTcons_some <span class="keyword">(</span>refval<span class="keyword">,</span> s1e<span class="keyword">,</span> wths1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span> 
          <span class="keyword">if</span> refval <span class="keyword">=</span> 0 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a> <span class="comment">(*call-by-val*)</span>
          <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a> <span class="comment">(*call-by-ref*)</span>
        <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span>
      <span class="keyword">in</span>
        WTHS2EXPLSTcons_some <span class="keyword">(</span>refval<span class="keyword">,</span> s2e<span class="keyword">,</span> auxwth wths1es<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> WTHS1EXPLSTcons_none <span class="keyword">(</span>wths1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        WTHS2EXPLSTcons_none <span class="keyword">(</span>auxwth wths1es<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> WTHS1EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> WTHS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// endof [auxwth]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> auxres <span class="keyword">(</span>
    s1e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">,</span> wths1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8388"><span class="stacstuse">wths1explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> s1e<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
    <span class="keyword">|</span> S1Eexi <span class="keyword">(</span>1<span class="comment">(*funres*)</span><span class="keyword">,</span> s1qs<span class="keyword">,</span> s1e_scope<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">@(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3342"><span class="dyncstuse">s1qualst_tr</span></a> <span class="keyword">(</span>s1qs<span class="keyword">)</span>
        <span class="keyword">val</span> s2e_scope <span class="keyword">=</span> auxres <span class="keyword">(</span>s1e_scope<span class="keyword">,</span> wths1es<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30153"><span class="dyncstuse">s2exp_exi</span></a> <span class="keyword">(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">,</span> s2e_scope<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> <span class="keyword">(</span>s1e<span class="keyword">)</span>
        <span class="keyword">val</span> wths2es <span class="keyword">=</span> auxwth wths1es
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32183"><span class="dyncstuse">s2exp_wth</span></a> <span class="keyword">(</span>s2e<span class="keyword">,</span> wths2es<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span>  <span class="comment">// end of [auxres]
</span><span class="comment">//
</span><span class="keyword">in</span>
  <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#13481"><span class="dyncstuse">wths1explst_is_none</span></a> <span class="keyword">(</span>wths1es<span class="keyword">)</span> <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> <span class="keyword">(</span>s1e0<span class="keyword">)</span>
  <span class="keyword">else</span> auxres <span class="keyword">(</span>s1e0<span class="keyword">,</span> wths1es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_res_tr_dn_impredicative]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_arrow_tr_up <span class="comment">// arrow is a special type constructor
</span>  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> ofc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2414"><span class="stacstuse">funcloopt</span></a></span><span class="keyword">,</span>
   islin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span><span class="keyword">,</span> isprf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span><span class="keyword">,</span> oefc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2475"><span class="stacstuse">efcopt</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s1es <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> s1ess <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>s1es<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1es <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_error2 loc0<span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_arrow_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": illegal static application."<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span>
  <span class="keyword">val</span> <span class="keyword">@(</span>s1e_arg<span class="keyword">,</span> s1e_res<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> s1es <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>s1e1<span class="keyword">,</span> cons <span class="keyword">(</span>s1e2<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">@(</span>s1e1<span class="keyword">,</span> s1e2<span class="keyword">)</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_interror loc0<span class="keyword">;</span>
        prerr ": s1exp_arrow_tr_up: s1es = "<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#10494"><span class="dyncstuse">prerr_s1explst</span></a> s1es<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a><span class="keyword">)</span></span> <span class="comment">// end of [val]
</span>  <span class="keyword">var</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> s1es_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span> <span class="keyword">=</span> nil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> s1e_arg<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
    <span class="keyword">|</span> S1Elist <span class="keyword">(</span>n<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>npf := n<span class="keyword">;</span> s1es_arg := s1es<span class="keyword">)</span>
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> s1es_arg := cons <span class="keyword">(</span>s1e_arg<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
  <span class="keyword">var</span> wths1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8388"><span class="stacstuse">wths1explst</span></a></span> <span class="keyword">=</span> WTHS1EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// restoration
</span>  <span class="keyword">val</span> s2es_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> aux <span class="keyword">(</span>s1es_arg<span class="keyword">,</span> wths1es<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">,</span> wths1es<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8388"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8388"><span class="stacstuse">wths1explst</span></a></span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span>
      <span class="keyword">case+</span> s1es <span class="keyword">of</span>
      <span class="keyword">|</span> cons <span class="keyword">(</span>s1e<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3122"><span class="dyncstuse">s1exp_arg_tr_up</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> wths1es<span class="keyword">)</span>
          <span class="keyword">val</span> s2t <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
          <span class="keyword">var</span> imp<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> types<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> s2t <span class="keyword">of</span>
            <span class="keyword">|</span> S2RTbas s2tb <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2tb <span class="keyword">of</span>
              <span class="keyword">|</span> S2RTBASimp <span class="keyword">(</span>id<span class="keyword">,</span> _<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
                  imp := 1<span class="keyword">;</span> <span class="keyword">if</span> id <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#3750"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_TYPES</span></a> <span class="keyword">then</span> types := 1
                <span class="keyword">end</span> <span class="comment">// end of [S2RTBASimp]
</span>              <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [_]
</span>              <span class="keyword">end</span>
            <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">in</span>
          <span class="keyword">case+</span> 0 <span class="keyword">of</span>
          <span class="keyword">|</span> _ <span class="keyword">when</span> types <span class="keyword">&gt;</span> 0 <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1es <span class="keyword">of</span>
            <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32110"><span class="dyncstuse">s2exp_vararg</span></a> s2e<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
            <span class="keyword">|</span> cons _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
                prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
                <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_arrow_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
                prerr ": this static expression must be the last argument."<span class="keyword">;</span>
                <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
                <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
              <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>            <span class="keyword">end</span> <span class="comment">// end of [_ when types &gt; 0]
</span>          <span class="keyword">|</span> _ <span class="keyword">when</span> <span class="keyword">(</span>imp <span class="keyword">&gt;</span> 0<span class="keyword">)</span> <span class="keyword">=&gt;</span> cons <span class="keyword">(</span>s2e<span class="keyword">,</span> aux <span class="keyword">(</span>s1es<span class="keyword">,</span> wths1es<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_arrow_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
              prerr ": the static expression needs to be impredicative"<span class="keyword">;</span>
              prerr " but is assigned the sort ["<span class="keyword">;</span>
              prerr s2t<span class="keyword">;</span>
              prerr "]."<span class="keyword">;</span>
              <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [_]
</span>        <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>      <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">}</span> <span class="comment">// end of [where]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> wths1es := <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#13528"><span class="dyncstuse">wths1explst_reverse</span></a> wths1es
  <span class="keyword">val</span> s2e_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3250"><span class="dyncstuse">s1exp_res_tr_dn_impredicative</span></a> <span class="keyword">(</span>s1e_res<span class="keyword">,</span> wths1es<span class="keyword">)</span>
  <span class="keyword">val</span> s2t_res <span class="keyword">=</span> s2e_res<span class="keyword">.</span>s2exp_srt
  <span class="keyword">val</span> isprf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span> <span class="keyword">=</span> <span class="keyword">if</span> isprf <span class="keyword">then</span> isprf <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10953"><span class="dyncstuse">s2rt_is_proof</span></a> s2t_res
  <span class="keyword">val</span> fc <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> ofc <span class="keyword">of</span> <span class="comment">// default is [function]
</span>    <span class="keyword">|</span> Some fc <span class="keyword">=&gt;</span> fc <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> $Syn<span class="keyword">.</span>FUNCLOfun <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#15340"><span class="stacstuse">$Syn<span class="keyword">.</span>funclo</span></a></span>
  <span class="keyword">val</span> s2t_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11515"><span class="dyncstuse">s2rt_prf_lin_fc</span></a> <span class="keyword">(</span>loc0<span class="keyword">,</span> isprf<span class="keyword">,</span> islin<span class="keyword">,</span> fc<span class="keyword">)</span>
  <span class="keyword">val</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> <span class="keyword">if</span> islin <span class="keyword">then</span> 1 <span class="keyword">else</span> 0
  <span class="keyword">val</span> sf2e <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> oefc <span class="keyword">of</span>
    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> isprf <span class="keyword">then</span> S2EFFnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> S2EFFall <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [None]
</span>    <span class="keyword">|</span> Some efc <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1763"><span class="dyncstuse">effcst_tr</span></a> efc
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#5355"><span class="stacstuse">s2eff</span></a></span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30327"><span class="dyncstuse">s2exp_fun_srt</span></a> <span class="keyword">(</span>s2t_fun<span class="keyword">,</span> fc<span class="keyword">,</span> lin<span class="keyword">,</span> sf2e<span class="keyword">,</span> npf<span class="keyword">,</span> s2es_arg<span class="keyword">,</span> s2e_res<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_arrow_tr_up]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s1rtext_tr
  <span class="keyword">(</span>s1te0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9075"><span class="stacstuse">s1rtext</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4276"><span class="stacstuse">s2rtext</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1te0<span class="keyword">.</span>s1rtext_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1TEsrt s1t <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1t<span class="keyword">.</span>s1rt_node <span class="keyword">of</span>
    <span class="keyword">|</span> S1RTqid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#1953"><span class="dyncstuse">the_s2rtenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">of</span>
      <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2te <span class="keyword">=&gt;</span> s2te <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
          prerr_loc_error2 s1t<span class="keyword">.</span>s1rt_loc<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1rtext_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
          prerr ": the identifier ["<span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#12723"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0rtq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
          prerr "] refers to an unrecognized sort."<span class="keyword">;</span>
          <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [None_vt]
</span>      <span class="keyword">end</span> <span class="comment">// end of [S1RTqid]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> S2TEsrt <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1TEsrt]
</span>  <span class="keyword">|</span> S1TEsub <span class="keyword">(</span>id<span class="keyword">,</span> s1te<span class="keyword">,</span> s1ps<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2te <span class="keyword">=</span> s1rtext_tr s1te
      <span class="keyword">val</span> s2t <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2te <span class="keyword">of</span>
        <span class="keyword">|</span> S2TEsrt s2t <span class="keyword">=&gt;</span> s2t <span class="keyword">|</span> S2TEsub <span class="keyword">(</span>_<span class="keyword">,</span> s2t<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> s2t
      <span class="keyword">end</span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>id<span class="keyword">,</span> s2t<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v
      <span class="keyword">val</span> s2ps <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2942"><span class="dyncstuse">s1explst_tr_dn_bool</span></a> s1ps
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
      <span class="keyword">val</span> s2ps <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">case+</span> s2te <span class="keyword">of</span>
        <span class="keyword">|</span> S2TEsrt _ <span class="keyword">=&gt;</span> s2ps
        <span class="keyword">|</span> S2TEsub <span class="keyword">(</span>s2v1<span class="keyword">,</span> _<span class="keyword">,</span> s2ps1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
            <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#1736"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_append</span></a> <span class="keyword">(</span>s2ps<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#34232"><span class="dyncstuse">s2explst_alpha</span></a> <span class="keyword">(</span>s2v1<span class="keyword">,</span> s2v<span class="keyword">,</span> s2ps1<span class="keyword">)</span><span class="keyword">)</span>
          <span class="keyword">end</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span>
    <span class="keyword">in</span>
      S2TEsub <span class="keyword">(</span>s2v<span class="keyword">,</span> s2t<span class="keyword">,</span> s2ps<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1TEsub]
</span><span class="keyword">end</span> <span class="comment">// end of [s1rtext_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3342"><span class="dyncstimp">s1qualst_tr</span></a> <span class="keyword">(</span>s1qs<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span><span class="keyword">fun</span> loop
  <span class="keyword">(</span>s1qs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9273"><span class="stacstuse">s1qualst</span></a></span><span class="keyword">,</span> s2vs<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span></a></span><span class="keyword">,</span> s2ps<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1qs <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>s1q<span class="keyword">,</span> s1qs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1q<span class="keyword">.</span>s1qua_node <span class="keyword">of</span>
    <span class="keyword">|</span> S1Qprop s1e <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2p <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2454"><span class="dyncstuse">s1exp_tr_dn_bool</span></a> s1e
      <span class="keyword">in</span>
        s2ps := cons <span class="keyword">(</span>s2p<span class="keyword">,</span> s2ps<span class="keyword">)</span><span class="keyword">;</span> loop <span class="keyword">(</span>s1qs<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> S1Qvars <span class="keyword">(</span>ids<span class="keyword">,</span> s1te<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1rtext_tr s1te <span class="keyword">of</span>
      <span class="keyword">|</span> S2TEsrt s2t1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">fun</span> aux <span class="keyword">(</span>s2t1<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> ids<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1935"><span class="stacstuse">i0delst</span></a></span><span class="keyword">,</span> s2vs<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
            <span class="keyword">case+</span> ids <span class="keyword">of</span>
            <span class="keyword">|</span> cons <span class="keyword">(</span>id<span class="keyword">,</span> ids<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>id<span class="keyword">.</span>i0de_sym<span class="keyword">,</span> s2t1<span class="keyword">)</span>
              <span class="keyword">in</span>
                <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v<span class="keyword">;</span> s2vs := cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span><span class="keyword">;</span>
                aux <span class="keyword">(</span>s2t1<span class="keyword">,</span> ids<span class="keyword">,</span> s2vs<span class="keyword">)</span>
              <span class="keyword">end</span>
            <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>          
        <span class="keyword">in</span>
          aux <span class="keyword">(</span>s2t1<span class="keyword">,</span> ids<span class="keyword">,</span> s2vs<span class="keyword">)</span><span class="keyword">;</span> loop <span class="keyword">(</span>s1qs<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span>
        <span class="keyword">end</span>
      <span class="keyword">|</span> S2TEsub <span class="keyword">(</span>s2v1<span class="keyword">,</span> s2t1<span class="keyword">,</span> s2ps1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">fun</span> aux1 <span class="keyword">(</span>s2ps1<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span><span class="keyword">,</span> s2v<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2272"><span class="stacstuse">s2var_t</span></a></span><span class="keyword">,</span> s2ps<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span></a></span><span class="keyword">)</span>
            <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> s2ps1 <span class="keyword">of</span>
            <span class="keyword">|</span> cons <span class="keyword">(</span>s2p1<span class="keyword">,</span> s2ps1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                <span class="keyword">val</span> s2p <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#34139"><span class="dyncstuse">s2exp_alpha</span></a> <span class="keyword">(</span>s2v1<span class="keyword">,</span> s2v<span class="keyword">,</span> s2p1<span class="keyword">)</span>
              <span class="keyword">in</span>
                s2ps := cons <span class="keyword">(</span>s2p<span class="keyword">,</span> s2ps<span class="keyword">)</span><span class="keyword">;</span> aux1 <span class="keyword">(</span>s2ps1<span class="keyword">,</span> s2v<span class="keyword">,</span> s2ps<span class="keyword">)</span>
              <span class="keyword">end</span>
            <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
          <span class="keyword">fun</span> aux2 <span class="keyword">(</span>ids<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1935"><span class="stacstuse">i0delst</span></a></span><span class="keyword">,</span> s2vs<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span></a></span><span class="keyword">,</span> s2ps<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span></a></span><span class="keyword">)</span>
            <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> ids <span class="keyword">of</span>
            <span class="keyword">|</span> cons <span class="keyword">(</span>id<span class="keyword">,</span> ids<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
                <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>id<span class="keyword">.</span>i0de_sym<span class="keyword">,</span> s2t1<span class="keyword">)</span>
              <span class="keyword">in</span>
                <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v<span class="keyword">;</span>
                s2vs := cons <span class="keyword">(</span>s2v<span class="keyword">,</span> s2vs<span class="keyword">)</span><span class="keyword">;</span> aux1 <span class="keyword">(</span>s2ps1<span class="keyword">,</span> s2v<span class="keyword">,</span> s2ps<span class="keyword">)</span><span class="keyword">;</span>
                aux2 <span class="keyword">(</span>ids<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span>
              <span class="keyword">end</span>
            <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">in</span>
          aux2 <span class="keyword">(</span>ids<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span><span class="keyword">;</span> loop <span class="keyword">(</span>s1qs<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [S2TEsub]
</span>      <span class="keyword">end</span> <span class="comment">// end of [S1Qvars]
</span>    <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>  <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [loop]
</span><span class="comment">//
</span><span class="keyword">var</span> s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span> <span class="keyword">=</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">and</span> s2ps<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> loop <span class="keyword">(</span>s1qs<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span>
<span class="comment">//
</span><span class="keyword">in</span> <span class="comment">// in of [let]
</span><span class="comment">//
</span><span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2934"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_reverse</span></a> s2vs<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2934"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_reverse</span></a> s2ps<span class="keyword">)</span>
<span class="comment">//
</span><span class="keyword">end</span> <span class="comment">// end of [s1qualst_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3398"><span class="dyncstimp">s1qualstlst_tr</span></a> <span class="keyword">(</span>s1qss<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1qss <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1qs<span class="keyword">,</span> s1qss<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      list_cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3342"><span class="dyncstuse">s1qualst_tr</span></a> s1qs<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3398"><span class="dyncstuse">s1qualstlst_tr</span></a> s1qss<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1qualstlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s1exp_app_unwind
  <span class="keyword">(</span>s1e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">,</span> s1ess<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1e<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1Eapp <span class="keyword">(</span>s1e<span class="keyword">,</span> _<span class="comment">(*loc_arg*)</span><span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1ess := s1es :: s1ess<span class="keyword">;</span> s1exp_app_unwind <span class="keyword">(</span>s1e<span class="keyword">,</span> s1ess<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eapp]
</span>  <span class="keyword">|</span> S1Eqid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> q<span class="keyword">.</span>s0taq_node <span class="keyword">of</span>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>S0TAQnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> ans <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2679"><span class="dyncstuse">the_s2expenv_find</span></a> id <span class="keyword">in</span> <span class="keyword">case+</span> ans <span class="keyword">of</span>
      <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
        <span class="keyword">|</span> S2ITEMe1xp e1xp <span class="keyword">=&gt;</span> <span class="keyword">let</span>
            <span class="keyword">val</span> s1e_new <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#13429"><span class="dyncstuse">s1exp_make_e1xp</span></a> <span class="keyword">(</span>s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> e1xp<span class="keyword">)</span>
          <span class="keyword">in</span>
            s1exp_app_unwind <span class="keyword">(</span>s1e_new<span class="keyword">,</span> s1ess<span class="keyword">)</span>
          <span class="keyword">end</span> <span class="comment">(* end of [S2ITEMe1xp] *)</span>
        <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> s1e
        <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>      <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1e
      <span class="keyword">end</span> <span class="comment">// end of [$Syn.S0TAQnone]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> s1e
    <span class="keyword">end</span> <span class="comment">(* end of [S1Eqid] *)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> s1e
<span class="keyword">end</span> <span class="comment">// end of [s1exp_app_unwind]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s2rtlst_of_s2varlst
  <span class="keyword">(</span>s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s2vs<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16824"><span class="dyncstuse">s2var_srt_get</span></a><span class="keyword">)</span>
<span class="comment">// end of [s2rtlst_of_s2varlst]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">local</span>

<span class="keyword">fun</span> aux01 <span class="keyword">(</span>
    i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
  <span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
  <span class="keyword">,</span> s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span>
  <span class="keyword">,</span> lin<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span></a></span>
  <span class="keyword">,</span> prg<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span></a></span>
  <span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1es <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1e<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> lab <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flabel_2esats.html#1673"><span class="dyncstuse">$Lab<span class="keyword">.</span>label_make_int</span></a> i
      <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> s1e
      <span class="keyword">val</span> s2t <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10875"><span class="dyncstuse">s2rt_is_linear</span></a> s2t <span class="keyword">then</span> <span class="keyword">(</span>lin := lin+1<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> i &gt;= npf <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">if</span> <span class="keyword">~</span><span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10953"><span class="dyncstuse">s2rt_is_proof</span></a> s2t<span class="keyword">)</span> <span class="keyword">then</span> <span class="keyword">(</span>prg := prg+1<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [val]
</span>    <span class="keyword">in</span>
      LABS2EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s2e<span class="keyword">,</span> aux01 <span class="keyword">(</span>i+1<span class="keyword">,</span> npf<span class="keyword">,</span> s1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [list_cons] *)</span>
  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> res
<span class="keyword">end</span> <span class="comment">// end of [aux01]
</span>
<span class="keyword">fun</span> aux23 <span class="keyword">(</span>
    s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s1es <span class="keyword">of</span>
  <span class="keyword">|</span> list_cons <span class="keyword">(</span>s1e<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> lab <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flabel_2esats.html#1673"><span class="dyncstuse">$Lab<span class="keyword">.</span>label_make_int</span></a> i
      <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span>
    <span class="keyword">in</span>
      LABS2EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s2e<span class="keyword">,</span> aux23 <span class="keyword">(</span>s2t<span class="keyword">,</span> i+1<span class="keyword">,</span> s1es<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [list_cons] *)</span>
  <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> res
<span class="keyword">end</span> <span class="comment">// end of [aux23]
</span>
<span class="keyword">in</span> <span class="comment">// in of [local]
</span>
<span class="keyword">fn</span> s1exp_list_tr_up
  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> npf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
  <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux01 <span class="keyword">(</span>0<span class="keyword">,</span> npf<span class="keyword">,</span> s1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">,</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
  <span class="keyword">val</span> s2t_rec <span class="keyword">=</span> <span class="keyword">begin</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32631"><span class="dyncstuse">s2rt_lin_prg_boxed_npf_labs2explst</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> 0<span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">)</span>
  <span class="keyword">end</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> TYRECKINDflt0 <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_list_tr_up]
</span>
<span class="keyword">fn</span> s1exp_tytup_tr_up
  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> tupknd<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> tupknd <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 0 &lt;= tupknd andalso tupknd &lt;= 1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux01 <span class="keyword">(</span>0<span class="keyword">,</span> 0<span class="keyword">,</span> s1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">,</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">val</span> boxed <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">if</span> tupknd <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> 1 <span class="keyword">else</span> 0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
      <span class="keyword">val</span> s2t_rec <span class="keyword">=</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32631"><span class="dyncstuse">s2rt_lin_prg_boxed_npf_labs2explst</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> boxed<span class="keyword">,</span> 0<span class="keyword">,</span> ls2es<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [s2t_rec] *)</span>
      <span class="keyword">val</span> tyrecknd <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">if</span> boxed <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> TYRECKINDflt0 <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#3563"><span class="stacstuse">tyreckind</span></a></span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> tyrecknd<span class="keyword">,</span> 0<span class="comment">(*npf*)</span><span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [_ when ...] *)</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 2 &lt;= tupknd andalso tupknd &lt;= 3 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2t_elt<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> tupknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a>
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux23 <span class="keyword">(</span>s2t_elt<span class="keyword">,</span> 0<span class="keyword">,</span> s1es<span class="keyword">,</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">val</span> s2t_rec<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> tupknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10291"><span class="dyncstuse">s2rt_type</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10355"><span class="dyncstuse">s2rt_viewtype</span></a>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> 0<span class="comment">(*npf*)</span><span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [_ when ...] *)</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": s1exp_tytup_tr_up"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [_] *)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_tytup_tr_up]
</span>
<span class="keyword">fn</span> s1exp_tytup2_tr_up
  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> tupknd<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1es1<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">,</span> s1es2<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> tupknd <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 0 &lt;= tupknd andalso tupknd &lt;= 1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
      <span class="keyword">val</span> npf <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> s1es1        
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> ls2es2 <span class="keyword">=</span> aux01 <span class="keyword">(</span>npf<span class="keyword">,</span> npf<span class="keyword">,</span> s1es2<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">,</span> ls2es<span class="keyword">)</span>
      <span class="keyword">val</span> ls2es12 <span class="keyword">=</span> aux01 <span class="keyword">(</span>0<span class="keyword">,</span> npf<span class="keyword">,</span> s1es1<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">,</span> ls2es2<span class="keyword">)</span>
      <span class="keyword">val</span> boxed <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">if</span> tupknd <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> 1 <span class="keyword">else</span> 0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
      <span class="keyword">val</span> s2t_rec <span class="keyword">=</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32631"><span class="dyncstuse">s2rt_lin_prg_boxed_npf_labs2explst</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> boxed<span class="keyword">,</span> 0<span class="keyword">,</span> ls2es2<span class="keyword">)</span>
      <span class="keyword">end</span>
      <span class="keyword">val</span> tyrecknd <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">if</span> boxed <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> TYRECKINDflt0 <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#3563"><span class="stacstuse">tyreckind</span></a></span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> tyrecknd<span class="keyword">,</span> npf<span class="keyword">,</span> ls2es12<span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 2 &lt;= tupknd andalso tupknd &lt;= 3 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> npf <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> s1es1
      <span class="keyword">val</span> s2t_elt1<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> tupknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10270"><span class="dyncstuse">s2rt_prop</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a>
      <span class="keyword">val</span> s2t_elt2<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> tupknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a>
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux23 <span class="keyword">(</span>s2t_elt2<span class="keyword">,</span> npf<span class="keyword">,</span> s1es2<span class="keyword">,</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux23 <span class="keyword">(</span>s2t_elt1<span class="keyword">,</span> 0<span class="keyword">,</span> s1es1<span class="keyword">,</span> ls2es<span class="keyword">)</span>
      <span class="keyword">val</span> s2t_rec<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> tupknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10291"><span class="dyncstuse">s2rt_type</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10355"><span class="dyncstuse">s2rt_viewtype</span></a>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> npf<span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": s1exp_tytup2_tr_up"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_tytup2_tr_up]
</span>
<span class="keyword">end</span> <span class="comment">// end of [local]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">local</span>

<span class="keyword">fun</span> aux01
  <span class="keyword">(</span>ls1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8146"><span class="stacstuse">labs1explst</span></a></span><span class="keyword">,</span> lin<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span></a></span><span class="keyword">,</span> prg<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> ls1es <span class="keyword">of</span>
  <span class="keyword">|</span> LABS1EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s1e<span class="keyword">,</span> ls1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e
      <span class="keyword">val</span> s2t <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10875"><span class="dyncstuse">s2rt_is_linear</span></a> s2t <span class="keyword">then</span> <span class="keyword">(</span>lin := lin+1<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> <span class="keyword">~</span><span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10953"><span class="dyncstuse">s2rt_is_proof</span></a> s2t<span class="keyword">)</span> <span class="keyword">then</span> <span class="keyword">(</span>prg := prg+1<span class="keyword">)</span>
    <span class="keyword">in</span>
      LABS2EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s2e<span class="keyword">,</span> aux01 <span class="keyword">(</span>ls1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> LABS1EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [aux01]
</span>
<span class="keyword">fun</span> aux23 <span class="keyword">(</span>
    s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> ls1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8146"><span class="stacstuse">labs1explst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8353"><span class="stacstuse">labs2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> ls1es <span class="keyword">of</span>
  <span class="keyword">|</span> LABS1EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s1e<span class="keyword">,</span> ls1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span>
    <span class="keyword">in</span>
      LABS2EXPLSTcons <span class="keyword">(</span>lab<span class="keyword">,</span> s2e<span class="keyword">,</span> aux23 <span class="keyword">(</span>s2t<span class="keyword">,</span> ls1es<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [LABS1EXPLSTcons]
</span>  <span class="keyword">|</span> LABS1EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> LABS2EXPLSTnil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [aux23]
</span>
<span class="keyword">in</span> <span class="comment">// in of [local]
</span>
<span class="comment">(*
// HX-2010-11-01: simplification
fn s1exp_struct_tr_up (
   loc0: loc_t, ls1es: labs1explst
  ) : s2exp = let
  var lin: int = 0 and prg: int = 0      
  val ls2es = aux01 (ls1es, lin, prg)
  val s2t_rec: s2rt = begin
    s2rt_lin_prg_boxed_npf_labs2explst (lin, prg, 0(*boxed*), 0, ls2es)
  end // end of [val]
  val stamp = $Stamp.s2exp_struct_stamp_make ()
in
  s2exp_tyrec_srt (s2t_rec, TYRECKINDflt1 stamp, 0(*npf*), ls2es)
end // end of [s1exp_struct_tr_up]
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_tmpid_tr <span class="keyword">(</span>
    loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
  <span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17817"><span class="stacstuse">$Syn<span class="keyword">.</span>d0ynq</span></a></span>
  <span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#1609"><span class="stacstuse">$Sym<span class="keyword">.</span>symbol_t</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span> <span class="keyword">=</span> s2c <span class="keyword">where</span> <span class="keyword">{</span>
<span class="comment">(*
  val () = begin
    $Loc.print_location loc0;
    print ": s1exp_tmpid_tr: id = "; $Sym.print_symbol id; print_newline ()
  end // end of [val]
*)</span>
  <span class="keyword">fn</span> err1
    <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#1908"><span class="stacstuse">s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tmpid_tr: err1"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] does not refer to a static constant"<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err1]
</span><span class="comment">//
</span>  <span class="keyword">fn</span> err2 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tmpid_tr: err2"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] is unrecognized."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err2]
</span><span class="comment">//
</span>  <span class="keyword">val</span> q_loc <span class="keyword">=</span> q<span class="keyword">.</span>d0ynq_loc
  <span class="keyword">val</span> q_node <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> q<span class="keyword">.</span>d0ynq_node <span class="keyword">of</span>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>D0YNQnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> $Syn<span class="keyword">.</span>S0TAQnone <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>D0YNQfildot nam <span class="keyword">=&gt;</span> $Syn<span class="keyword">.</span>S0TAQfildot nam
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>D0YNQsymcolon sym <span class="keyword">=&gt;</span> $Syn<span class="keyword">.</span>S0TAQsymcolon sym
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>D0YNQsymdot sym <span class="keyword">=&gt;</span> $Syn<span class="keyword">.</span>S0TAQsymdot sym
    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        prerr_loc_error2 <span class="keyword">(</span>q_loc<span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tmpid_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
        prerr ": the static qualifier ["<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#18123"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_d0ynq</span></a> q<span class="keyword">;</span> prerr "] is not supported."<span class="keyword">;</span>
        <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#16866"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq_node</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [_]
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#16866"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq_node</span></a></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> q <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17278"><span class="dyncstuse">$Syn<span class="keyword">.</span>s0taq_make</span></a> <span class="keyword">(</span>q_loc<span class="keyword">,</span> q_node<span class="keyword">)</span>
  <span class="keyword">val</span> ans <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2727"><span class="dyncstuse">the_s2expenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span>
  <span class="keyword">val</span> s2c <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> ans <span class="keyword">of</span>
    <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
      <span class="keyword">|</span> S2ITEMcst s2cs <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
        <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> _<span class="keyword">)</span> <span class="keyword">=&gt;</span> s2c <span class="keyword">where</span> <span class="keyword">{</span>
<span class="comment">//
</span>            <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> stacstuseloc_posmark <span class="keyword">(</span>loc0<span class="keyword">,</span> s2c<span class="keyword">)</span>
<span class="comment">//
</span>          <span class="keyword">}</span> <span class="comment">// end of [S2CSTLSTcons]
</span>        <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> err1 <span class="keyword">(</span>loc0<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">(* end of [S2ITEMcst] *)</span>
      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err1 <span class="keyword">(</span>loc0<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>    <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> err2 <span class="keyword">(</span>loc0<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span>
<span class="keyword">}</span> <span class="comment">// end of [s1exp_tmpid_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1exp_tyrec_tr_up <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> recknd<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> ls1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8146"><span class="stacstuse">labs1explst</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> recknd <span class="keyword">of</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 0 &lt;= recknd andalso recknd &lt;= 1 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux01 <span class="keyword">(</span>ls1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">)</span>
      <span class="keyword">val</span> boxed <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">if</span> recknd <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> 1 <span class="keyword">else</span> 0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
      <span class="keyword">val</span> s2t_rec<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32631"><span class="dyncstuse">s2rt_lin_prg_boxed_npf_labs2explst</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> boxed<span class="keyword">,</span> 0<span class="keyword">,</span> ls2es<span class="keyword">)</span>
      <span class="keyword">end</span>
      <span class="keyword">val</span> tyrecknd <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">if</span> boxed <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> TYRECKINDflt0 <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#3563"><span class="stacstuse">tyreckind</span></a></span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> tyrecknd<span class="keyword">,</span> 0<span class="comment">(*npf*)</span><span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> _ <span class="keyword">when</span> 2 &lt;= recknd andalso recknd &lt;= 3 <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2t_rec<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> recknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10291"><span class="dyncstuse">s2rt_type</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10355"><span class="dyncstuse">s2rt_viewtype</span></a>
      <span class="keyword">val</span> s2t_elt<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span>
        <span class="keyword">if</span> recknd <span class="keyword">=</span> 2 <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a>
      <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux23 <span class="keyword">(</span>s2t_elt<span class="keyword">,</span> ls1es<span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> TYRECKINDbox <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> 0<span class="comment">(*npf*)</span><span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span>
  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror loc0<span class="keyword">;</span>
      prerr ": s1exp_tyrec_tr_up"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exp_tyrec_tr_up]
</span>
<span class="keyword">fn</span> s1exp_tyrec_ext_tr_up
  <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> name<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15989"><span class="stacstuse">string</span></a></span><span class="keyword">,</span> ls1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8146"><span class="stacstuse">labs1explst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0      
  <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux01 <span class="keyword">(</span>ls1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">)</span>
  <span class="keyword">val</span> s2t_rec<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32631"><span class="dyncstuse">s2rt_lin_prg_boxed_npf_labs2explst</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> 0<span class="comment">(*boxed*)</span><span class="keyword">,</span> 0<span class="keyword">,</span> ls2es<span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31747"><span class="dyncstuse">s2exp_tyrec_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> TYRECKINDflt_ext name<span class="keyword">,</span> 0<span class="comment">(*npf*)</span><span class="keyword">,</span> ls2es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_tyrec_ext_tr_up]
</span>
<span class="keyword">fn</span> s1exp_union_tr_up <span class="keyword">(</span>loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> s1e_ind<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span><span class="keyword">,</span> ls1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8146"><span class="stacstuse">labs1explst</span></a></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2e_ind <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2535"><span class="dyncstuse">s1exp_tr_dn_int</span></a> s1e_ind
  <span class="keyword">var</span> lin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0 <span class="keyword">and</span> prg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span> <span class="keyword">=</span> 0
  <span class="keyword">val</span> ls2es <span class="keyword">=</span> aux01 <span class="keyword">(</span>ls1es<span class="keyword">,</span> lin<span class="keyword">,</span> prg<span class="keyword">)</span>
  <span class="keyword">val</span> s2t_rec <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32569"><span class="dyncstuse">s2rt_lin_prg_boxed</span></a> <span class="keyword">(</span>lin<span class="keyword">,</span> prg<span class="keyword">,</span> 0<span class="comment">(*boxed*)</span><span class="keyword">)</span>
  <span class="keyword">val</span> stamp <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstamp_2esats.html#2588"><span class="dyncstuse">$Stamp<span class="keyword">.</span>s2exp_union_stamp_make</span></a> <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31985"><span class="dyncstuse">s2exp_union_srt</span></a> <span class="keyword">(</span>s2t_rec<span class="keyword">,</span> stamp<span class="keyword">,</span> s2e_ind<span class="keyword">,</span> ls2es<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_union_tr_up]
</span>
<span class="keyword">end</span> <span class="comment">// end of [local]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstimp">s1exp_tr_up</span></a> <span class="keyword">(</span>s1e0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">(*
  val () = begin
    print "s1exp_tr_up: s1e0 = "; print s1e0; print_newline ()
  end // end of [val]
*)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> s1e0<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1Eann <span class="keyword">(</span>s1e<span class="keyword">,</span> s1t<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <span class="keyword">let</span> <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t <span class="keyword">in</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">end</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eann]
</span>  <span class="keyword">|</span> S1Eany <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_any_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">)</span>
  <span class="keyword">|</span> S1Eapp <span class="keyword">(</span>s1e<span class="keyword">,</span> _<span class="comment">(*loc_arg*)</span><span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> s1ess_arg<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#9008"><span class="stacstuse">s1explstlst</span></a></span> <span class="keyword">=</span> <span class="keyword">'[</span>s1es<span class="keyword">]</span>
      <span class="keyword">val</span> s1e_opr <span class="keyword">=</span> s1exp_app_unwind <span class="keyword">(</span>s1e<span class="keyword">,</span> s1ess_arg<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="keyword">case+</span> s1e_opr<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
      <span class="keyword">|</span> S1Eqid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> staspecid_of_qid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">of</span>
        <span class="keyword">|</span> SPSIDarrow <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_arrow_tr_up
            <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a><span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> s1ess_arg<span class="keyword">)</span>
        <span class="keyword">|</span> SPSIDnone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> ans <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2727"><span class="dyncstuse">the_s2expenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">in</span> <span class="keyword">case+</span> ans <span class="keyword">of</span>
          <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> s1exp_qid_app_tr_up
              <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> s1e_opr<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">,</span> s2i<span class="keyword">,</span> s1ess_arg<span class="keyword">)</span>
          <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              prerr_loc_error2 s1e<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tr_up"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
              prerr ": unrecognized static identifier ["<span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
              prerr "]."<span class="keyword">;</span>
              <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [None_vt]
</span>          <span class="keyword">end</span> <span class="comment">// end of [SPSIDnone]
</span>        <span class="keyword">end</span> <span class="comment">// end of [S1Eqid]
</span>      <span class="keyword">|</span> S1Eimp <span class="keyword">(</span>fc<span class="keyword">,</span> lin<span class="keyword">,</span> prf<span class="keyword">,</span> oefc<span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_arrow_tr_up 
          <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> Some fc<span class="keyword">,</span> lin<span class="keyword">&gt;</span>0<span class="keyword">,</span> prf<span class="keyword">&gt;</span>0<span class="keyword">,</span> oefc<span class="keyword">,</span> <span class="keyword">'[</span>s1es<span class="keyword">]</span><span class="keyword">)</span>
      <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2e_opr <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e_opr
        <span class="keyword">in</span>
          s1exp_app_tr_up <span class="keyword">(</span>
            s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> s1e_opr<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> s2e_opr<span class="keyword">,</span> s1ess_arg
          <span class="keyword">)</span> <span class="comment">// end of [s1exp_app_tr_up]
</span>        <span class="keyword">end</span> <span class="comment">// end of [_]
</span>      <span class="comment">// end of [case]
</span>    <span class="keyword">end</span> <span class="comment">// end of [S1Eapp]
</span>  <span class="keyword">|</span> S1Echar c <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#29670"><span class="dyncstuse">s2exp_char</span></a> c
  <span class="keyword">|</span> S1Eexi <span class="keyword">(</span>knd<span class="keyword">,</span> s1qs<span class="keyword">,</span> s1e_scope<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
<span class="comment">(*
      val () = begin
        print "s1exp_tr_up: S1Eexi: s1e0 = "; print s1e0; print_newline ()
      end // end of [val]
*)</span>
<span class="comment">//
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">if</span> knd <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error2 <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr <span class="keyword">(</span>
          ": The existential quantifier #[...] is used incorrectly."
        <span class="keyword">)</span> <span class="comment">// end of [val]
</span>        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [val]
</span><span class="comment">//
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">@(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3342"><span class="dyncstuse">s1qualst_tr</span></a> <span class="keyword">(</span>s1qs<span class="keyword">)</span>
      <span class="keyword">val</span> s2e_scope <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> s1e_scope
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30153"><span class="dyncstuse">s2exp_exi</span></a> <span class="keyword">(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">,</span> s2e_scope<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eexi]
</span>  <span class="keyword">|</span> S1Eextype <span class="keyword">(</span>name<span class="keyword">,</span> s1ess_arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2ess_arg <span class="keyword">=</span>
        s1explstlst_tr_dn_viewt0ype <span class="keyword">(</span>s1ess_arg<span class="keyword">)</span>
      <span class="comment">// end of [val]
</span>    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30220"><span class="dyncstuse">s2exp_extype_srt</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a><span class="keyword">,</span> name<span class="keyword">,</span> s2ess_arg<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eextype]
</span>  <span class="keyword">|</span> S1Eimp _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_interror s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
      prerr ": s1exp_tr_up: S1Eimp"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eimp]
</span>  <span class="keyword">|</span> S1Eint int<span class="comment">(*string*)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30570"><span class="dyncstuse">s2exp_intinf</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fintinf_2esats.html#1666"><span class="dyncstuse">$IntInf<span class="keyword">.</span>intinf_make_string</span></a><span class="keyword">(</span>int<span class="keyword">)</span><span class="keyword">)</span>
  <span class="keyword">|</span> S1Einvar <span class="keyword">(</span>refval<span class="keyword">,</span> s1e<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error2 <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr <span class="keyword">(</span>
        ": an invariant type can only be assigned to the argument of a function."
      <span class="keyword">)</span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Einvar]
</span>  <span class="keyword">|</span> S1Elam <span class="keyword">(</span>s1as<span class="keyword">,</span> os1t<span class="keyword">,</span> s1e_body<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> s2vs <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1871"><span class="dyncstuse">s1arglst_var_tr</span></a> s1as<span class="keyword">;</span> <span class="keyword">val</span> s2e_body <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">case+</span> os1t <span class="keyword">of</span>
        <span class="keyword">|</span> Some s1t <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e_body<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t<span class="keyword">)</span>
        <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> s1e_body
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
      <span class="keyword">val</span> s2ts_arg <span class="keyword">=</span> s2rtlst_of_s2varlst <span class="keyword">(</span>s2vs<span class="keyword">)</span>
      <span class="keyword">val</span> s2t_res <span class="keyword">=</span> s2e_body<span class="keyword">.</span>s2exp_srt
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30609"><span class="dyncstuse">s2exp_lam_srt</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span>s2ts_arg<span class="keyword">,</span> s2t_res<span class="keyword">)</span><span class="keyword">,</span> s2vs<span class="keyword">,</span> s2e_body<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Elam]
</span>  <span class="keyword">|</span> S1Elist <span class="keyword">(</span>npf<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_list_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> npf<span class="keyword">,</span> s1es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Elist]
</span><span class="comment">(*
// HX-2010-12-04: simplification
  | S1Emod _ =&gt; let
      val () = prerr_loc_interror s1e0.s1exp_loc
      val () = prerr ": s1exp_tr_up: S1Emod: not implemented yet."
      val () = prerr_newline ()
    in
      $Err.abort {s2exp} ()
    end // end of [S1Emod]
*)</span>
<span class="comment">(*
// HX-2010-12-04: inadequate design
  | S1Enamed (name, s1e) =&gt; let
      val s2e = s1exp_tr_up (s1e) in
      s2exp_named (s2e.s2exp_srt, name, s2e)
    end // end of [S1Enamed]
*)</span>
  <span class="keyword">|</span> S1Eqid <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_qid_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
  <span class="keyword">|</span> S1Eread <span class="keyword">(</span>_v<span class="keyword">,</span> s1e<span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_read_tr_up <span class="keyword">(</span>_v<span class="keyword">,</span> s1e<span class="keyword">)</span>
<span class="comment">(*
// HX-2010-11-01: simplification
  | S1Estruct (ls1es) =&gt; begin
      s1exp_struct_tr_up (s1e0.s1exp_loc, ls1es)
    end // end of [S1Estruct]
*)</span>
  <span class="keyword">|</span> S1Etop <span class="keyword">(</span>knd<span class="keyword">,</span> s1e<span class="keyword">)</span> <span class="keyword">=&gt;</span> s1exp_top_tr_up <span class="keyword">(</span>knd<span class="keyword">,</span> s1e<span class="keyword">)</span>
  <span class="keyword">|</span> S1Etrans _ <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      prerr_loc_error2 s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">;</span>
      prerr ": a transitional type can only be assigned to the argument of a function."<span class="keyword">;</span>
      <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etrans]
</span>  <span class="keyword">|</span> S1Etyarr <span class="keyword">(</span>s1e_elt<span class="keyword">,</span> s1ess_dim<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2e_elt <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2785"><span class="dyncstuse">s1exp_tr_dn_viewt0ype</span></a> s1e_elt
      <span class="keyword">val</span> s2ess_dim <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1ess_dim<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3043"><span class="dyncstuse">s1explst_tr_dn_int</span></a><span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31526"><span class="dyncstuse">s2exp_tyarr</span></a> <span class="keyword">(</span>s2e_elt<span class="keyword">,</span> s2ess_dim<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etyarr]
</span>  <span class="keyword">|</span> S1Etyrec <span class="keyword">(</span>recknd<span class="keyword">,</span> ls1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_tyrec_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> recknd<span class="keyword">,</span> ls1es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etyrec]
</span>  <span class="keyword">|</span> S1Etyrec_ext <span class="keyword">(</span>name<span class="keyword">,</span> ls1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_tyrec_ext_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> name<span class="keyword">,</span> ls1es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etyrec_ext]
</span>  <span class="keyword">|</span> S1Etytup <span class="keyword">(</span>tupknd<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_tytup_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> tupknd<span class="keyword">,</span> s1es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etytup]
</span>  <span class="keyword">|</span> S1Etytup2 <span class="keyword">(</span>tupknd<span class="keyword">,</span> s1es1<span class="keyword">,</span> s1es2<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_tytup2_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> tupknd<span class="keyword">,</span> s1es1<span class="keyword">,</span> s1es2<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Etytup2]
</span>  <span class="keyword">|</span> S1Euni <span class="keyword">(</span>s1qs<span class="keyword">,</span> s1e_scope<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">var</span> s2vs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span> <span class="keyword">=</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">and</span> s2ps<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> nil <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">val</span> <span class="keyword">@(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3342"><span class="dyncstuse">s1qualst_tr</span></a> <span class="keyword">(</span>s1qs<span class="keyword">)</span>
      <span class="keyword">val</span> s2e_scope <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2831"><span class="dyncstuse">s1exp_tr_dn_impredicative</span></a> s1e_scope
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#31832"><span class="dyncstuse">s2exp_uni</span></a> <span class="keyword">(</span>s2vs<span class="keyword">,</span> s2ps<span class="keyword">,</span> s2e_scope<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Euni]
</span>  <span class="keyword">|</span> S1Eunion <span class="keyword">(</span>s2e_ind<span class="keyword">,</span> ls2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      s1exp_union_tr_up <span class="keyword">(</span>s1e0<span class="keyword">.</span>s1exp_loc<span class="keyword">,</span> s2e_ind<span class="keyword">,</span> ls2es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eunion]
</span><span class="comment">(*
  | _ =&gt; begin
      prerr_loc_interror s1e0.s1exp_loc;
      prerr ": s1exp_tr: not available yet."; prerr_newine ();
      $Err.abort {s2exp} ()
    end // end of [_]
*)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1exp_tr_up]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2141"><span class="dyncstimp">s1explst_tr_up</span></a> <span class="keyword">(</span>s1es<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a><span class="keyword">)</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2187"><span class="dyncstimp">s1explstlst_tr_up</span></a> <span class="keyword">(</span>s1ess<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1ess<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2141"><span class="dyncstuse">s1explst_tr_up</span></a><span class="keyword">)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2243"><span class="dyncstimp">tmps1explstlst_tr_up</span></a>
  <span class="keyword">(</span>ts1ess<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> ts1ess <span class="keyword">of</span>
  <span class="keyword">|</span> TMPS1EXPLSTLSTcons
      <span class="keyword">(</span>loc<span class="keyword">,</span> s1es<span class="keyword">,</span> ts1ess<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2141"><span class="dyncstuse">s1explst_tr_up</span></a> s1es
      <span class="keyword">val</span> ts2ess <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2243"><span class="dyncstuse">tmps1explstlst_tr_up</span></a> ts1ess
    <span class="keyword">in</span>
      TMPS2EXPLSTLSTcons <span class="keyword">(</span>loc<span class="keyword">,</span> s2e<span class="keyword">,</span> ts2ess<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [TMPS1EXPLSTLSTcons]
</span>  <span class="keyword">|</span> TMPS1EXPLSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> TMPS2EXPLSTLSTnil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [tmps1explstlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstimp">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e0<span class="keyword">,</span> s2t0<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1e0<span class="keyword">.</span>s1exp_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1Eextype <span class="keyword">(</span>name<span class="keyword">,</span> _arg<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> _arg <span class="keyword">=</span> s1explstlst_tr_dn_viewt0ype <span class="keyword">(</span>_arg<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11109"><span class="dyncstuse">s2rt_is_impredicative</span></a> s2t0 <span class="keyword">then</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30220"><span class="dyncstuse">s2exp_extype_srt</span></a> <span class="keyword">(</span>s2t0<span class="keyword">,</span> name<span class="keyword">,</span> _arg<span class="keyword">)</span> <span class="comment">// [s2t0] can even be a view!
</span>      <span class="keyword">else</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error2 s1e0<span class="keyword">.</span>s1exp_loc
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tr_dn"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": the external type cannot be assigned the sort ["
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr s2t0
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "]."
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1Eextype]
</span>  <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2e0 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> <span class="keyword">(</span>s1e0<span class="keyword">)</span>
      <span class="keyword">val</span> s2t0_new <span class="keyword">=</span> s2e0<span class="keyword">.</span>s2exp_srt
    <span class="keyword">in</span>
      <span class="keyword">if</span> s2t0_new &lt;= s2t0 <span class="keyword">then</span> s2e0 <span class="keyword">else</span> <span class="keyword">let</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr_loc_error2 s1e0<span class="keyword">.</span>s1exp_loc
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1exp_tr_dn"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr ": the static expression is of sort ["
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12225"><span class="dyncstuse">prerr_s2rt</span></a> <span class="keyword">(</span>s2t0_new<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "] but it is expectecd to be of sort ["
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12225"><span class="dyncstuse">prerr_s2rt</span></a> <span class="keyword">(</span>s2t0<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> prerr "]."
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">(* end of [if] *)</span>
    <span class="keyword">end</span> <span class="comment">// end of [_]
</span><span class="keyword">end</span> <span class="comment">(* end of [s1exp_tr_dn] *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2361"><span class="dyncstimp">s1explst_tr_dn</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> s2ts<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1es <span class="keyword">of</span>
  <span class="keyword">|</span> s1e :: s1es <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val+</span> s2t :: s2ts <span class="keyword">=</span> s2ts
    <span class="keyword">in</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span> :: <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2361"><span class="dyncstuse">s1explst_tr_dn</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> s2ts<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [::]
</span>  <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1explst_tr_dn]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3470"><span class="dyncstimp">s1exparg_tr</span></a> <span class="keyword">(</span>s1a<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> s1a<span class="keyword">.</span>s1exparg_node <span class="keyword">of</span>
  <span class="keyword">|</span> S1EXPARGone <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32260"><span class="dyncstuse">s2exparg_one</span></a> <span class="keyword">(</span>s1a<span class="keyword">.</span>s1exparg_loc<span class="keyword">)</span>
  <span class="keyword">|</span> S1EXPARGall <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32300"><span class="dyncstuse">s2exparg_all</span></a> <span class="keyword">(</span>s1a<span class="keyword">.</span>s1exparg_loc<span class="keyword">)</span>
  <span class="keyword">|</span> S1EXPARGseq <span class="keyword">(</span>s2es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#32340"><span class="dyncstuse">s2exparg_seq</span></a> <span class="keyword">(</span>s1a<span class="keyword">.</span>s1exparg_loc<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2141"><span class="dyncstuse">s1explst_tr_up</span></a> s2es<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [S1EXPARGseq]
</span><span class="keyword">end</span> <span class="comment">// end of [s1exparg_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3512"><span class="dyncstimp">s1exparglst_tr</span></a> <span class="keyword">(</span>s1as<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>s1as<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3470"><span class="dyncstuse">s1exparg_tr</span></a><span class="keyword">)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1rtdef_tr
  <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14165"><span class="stacstuse">s1rtdef</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> id <span class="keyword">=</span> d<span class="keyword">.</span>s1rtdef_sym <span class="keyword">and</span> s2te <span class="keyword">=</span> s1rtext_tr <span class="keyword">(</span>d<span class="keyword">.</span>s1rtdef_def<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#1767"><span class="dyncstuse">the_s2rtenv_add</span></a> <span class="keyword">(</span>id<span class="keyword">,</span> s2te<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1rtdef_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3586"><span class="dyncstimp">s1rtdeflst_tr</span></a> <span class="keyword">(</span>ds<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> ds <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>d<span class="keyword">,</span> ds<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>s1rtdef_tr d<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3586"><span class="dyncstuse">s1rtdeflst_tr</span></a> ds<span class="keyword">)</span> <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1rtdeflst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d1atarg_tr <span class="keyword">(</span>
  d1a<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#5409"><span class="stacstuse">d1atarg</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> d1a<span class="keyword">.</span>d1atarg_node <span class="keyword">of</span>
  <span class="keyword">|</span> D1ATARGsrt s1tp <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> <span class="keyword">(</span>s1tp<span class="keyword">.</span>s1rtpol_srt<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="keyword">@(</span>None <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> s2t<span class="keyword">,</span> s1tp<span class="keyword">.</span>s1rtpol_pol<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D1ATARGsrt]
</span>  <span class="keyword">|</span> D1ATARGidsrt <span class="keyword">(</span>id<span class="keyword">,</span> s1tp<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> <span class="keyword">(</span>s1tp<span class="keyword">.</span>s1rtpol_srt<span class="keyword">)</span>
    <span class="keyword">in</span>
      <span class="keyword">@(</span>Some id<span class="keyword">,</span> s2t<span class="keyword">,</span> s1tp<span class="keyword">.</span>s1rtpol_pol<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [D1ATARGidsrt]
</span><span class="keyword">end</span> <span class="comment">// end of [d1atarg_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1804"><span class="dyncstimp">d1atarglst_tr</span></a> <span class="keyword">(</span>d1as<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d1as <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>d1a<span class="keyword">,</span> d1as<span class="keyword">)</span> <span class="keyword">=&gt;</span> cons <span class="keyword">(</span>d1atarg_tr d1a<span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1804"><span class="dyncstuse">d1atarglst_tr</span></a> d1as<span class="keyword">)</span>
  <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d1atarglst_tr]
</span>
<span class="keyword">fn</span> s1tacon_tr <span class="keyword">(</span>
  s2t_res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> d<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14693"><span class="stacstuse">s1tacon</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> id <span class="keyword">=</span> d<span class="keyword">.</span>s1tacon_sym
  <span class="keyword">val</span> loc <span class="keyword">=</span> d<span class="keyword">.</span>s1tacon_loc
  <span class="keyword">val</span> argvar <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> d<span class="keyword">.</span>s1tacon_arg <span class="keyword">of</span>
    <span class="keyword">|</span> Some d1as <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1804"><span class="dyncstuse">d1atarglst_tr</span></a> d1as<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <span class="keyword">(</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span><span class="keyword">)</span></span>
  <span class="keyword">val</span> s2t_fun <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> argvar <span class="keyword">of</span>
    <span class="keyword">|</span> Some xs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">fun</span> aux <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span> <span class="keyword">=</span>
          <span class="keyword">case+</span> xs <span class="keyword">of</span>
            <span class="keyword">|</span> cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> cons <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">,</span> aux xs<span class="keyword">)</span> <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">val</span> s2ts_arg <span class="keyword">=</span> aux xs
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span>s2ts_arg<span class="keyword">,</span> s2t_res<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> None <span class="keyword">=&gt;</span> s2t_res
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> s2vs_opt <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">let</span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>
      xs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span> <span class="keyword">=</span>
      <span class="keyword">case+</span> xs <span class="keyword">of</span>
      <span class="keyword">|</span> cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2v <span class="keyword">=</span> <span class="keyword">case+</span> x<span class="keyword">.</span>0 <span class="keyword">of</span>
            <span class="keyword">|</span> Some id <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>id<span class="keyword">,</span> x<span class="keyword">.</span>1<span class="keyword">)</span>
            <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16700"><span class="dyncstuse">s2var_make_srt</span></a> <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">)</span>
        <span class="keyword">in</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v<span class="keyword">;</span> cons <span class="keyword">(</span>s2v<span class="keyword">,</span> aux xs<span class="keyword">)</span>
        <span class="keyword">end</span>
      <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
    <span class="comment">// end of [aux]
</span>  <span class="keyword">in</span>
    <span class="keyword">case+</span> argvar <span class="keyword">of</span> Some xs <span class="keyword">=&gt;</span> Some <span class="keyword">(</span>aux xs<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span><span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a><span class="keyword">)</span></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> def <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> d<span class="keyword">.</span>s1tacon_def <span class="keyword">of</span>
    <span class="keyword">|</span> Some s1e <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2e <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t_res<span class="keyword">)</span>
        <span class="keyword">val</span> s2e_def <span class="keyword">=</span> <span class="keyword">case+</span> s2vs_opt <span class="keyword">of</span>
          <span class="keyword">|</span> Some s2vs <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30609"><span class="dyncstuse">s2exp_lam_srt</span></a> <span class="keyword">(</span>s2t_fun<span class="keyword">,</span> s2vs<span class="keyword">,</span> s2e<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">=&gt;</span> s2e
        <span class="comment">// end of [s2e_def]
</span>      <span class="keyword">in</span>
        Some s2e_def
      <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9427"><span class="stacstuse">s2expopt</span></a></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
  <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13375"><span class="dyncstuse">s2cst_make</span></a> <span class="keyword">(</span>
      id <span class="comment">// sym
</span>    <span class="keyword">,</span> loc <span class="comment">// location
</span>    <span class="keyword">,</span> s2t_fun <span class="comment">// srt
</span>    <span class="keyword">,</span> Some def <span class="comment">// isabs
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a> <span class="comment">// iscon
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isrec
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isasp
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// islst
</span>    <span class="keyword">,</span> argvar <span class="comment">// argvar
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// def
</span>    <span class="keyword">)</span> <span class="comment">// end of [s2cst_make]
</span>  <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c
<span class="keyword">end</span> <span class="comment">// end of [s1tacon_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3628"><span class="dyncstimp">s1taconlst_tr</span></a> <span class="keyword">(</span>absknd<span class="keyword">,</span> ds<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>
    s2t<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> ds<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14862"><span class="stacstuse">s1taconlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> ds <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>d<span class="keyword">,</span> ds<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>s1tacon_tr <span class="keyword">(</span>s2t<span class="keyword">,</span> d<span class="keyword">)</span><span class="keyword">;</span> aux <span class="keyword">(</span>s2t<span class="keyword">,</span> ds<span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux]
</span>  <span class="keyword">val</span> s2t <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> absknd <span class="keyword">of</span>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDprop <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10270"><span class="dyncstuse">s2rt_prop</span></a>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDtype <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10291"><span class="dyncstuse">s2rt_type</span></a>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDt0ype <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDview <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDviewtype <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10355"><span class="dyncstuse">s2rt_viewtype</span></a>
    <span class="keyword">|</span> $Syn<span class="keyword">.</span>ABSKINDviewt0ype <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  aux <span class="keyword">(</span>s2t<span class="keyword">,</span> ds<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1taconlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1tacst_tr
  <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14893"><span class="stacstuse">s1tacst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> id <span class="keyword">=</span> d<span class="keyword">.</span>s1tacst_sym
  <span class="keyword">val</span> loc <span class="keyword">=</span> d<span class="keyword">.</span>s1tacst_loc
  <span class="keyword">val</span> s2t_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> <span class="keyword">(</span>d<span class="keyword">.</span>s1tacst_res<span class="keyword">)</span>
  <span class="keyword">val</span> s2t <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> d<span class="keyword">.</span>s1tacst_arg <span class="keyword">of</span>
    <span class="keyword">|</span> Some s1ts <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> s1ts<span class="keyword">,</span> s2t_res<span class="keyword">)</span>
    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> s2t_res
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13375"><span class="dyncstuse">s2cst_make</span></a> <span class="keyword">(</span>
      id <span class="comment">// sym
</span>    <span class="keyword">,</span> loc <span class="comment">// location
</span>    <span class="keyword">,</span> s2t <span class="comment">// srt
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// isabs
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// iscon
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isrec
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isasp
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// islst
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// argvar
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// def
</span>  <span class="keyword">)</span> <span class="comment">// end of [s2cst_make]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c
<span class="keyword">end</span> <span class="comment">// end of [s1tacst_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3692"><span class="dyncstimp">s1tacstlst_tr</span></a> <span class="keyword">(</span>ds<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> ds <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>d<span class="keyword">,</span> ds<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>s1tacst_tr d<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3692"><span class="dyncstuse">s1tacstlst_tr</span></a> ds<span class="keyword">)</span> <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1tacstlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> s1tavar_tr
  <span class="keyword">(</span>d<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#15083"><span class="stacstuse">s1tavar</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22491"><span class="stacstuse">s2tavar</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> <span class="keyword">(</span>d<span class="keyword">.</span>s1tavar_srt<span class="keyword">)</span>
  <span class="keyword">val</span> s2v <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>d<span class="keyword">.</span>s1tavar_sym<span class="keyword">,</span> s2t<span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2391"><span class="dyncstuse">the_s2expenv_add_svar</span></a> s2v
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#33174"><span class="dyncstuse">s2tavar_make</span></a> <span class="keyword">(</span>d<span class="keyword">.</span>s1tavar_loc<span class="keyword">,</span> s2v<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1tavar_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3734"><span class="dyncstimp">s1tavarlst_tr</span></a> <span class="keyword">(</span>ds<span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2567"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_map_fun</span></a> <span class="keyword">(</span>ds<span class="keyword">,</span> s1tavar_tr<span class="keyword">)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d1atsrtdec_tr <span class="keyword">(</span>
  res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14509"><span class="stacstuse">d1atsrtdec</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>  <span class="keyword">fn</span> aux <span class="keyword">(</span>
    i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14352"><span class="stacstuse">d1atsrtcon</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
    <span class="keyword">val</span> id <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atsrtcon_sym
    <span class="keyword">val</span> loc <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atsrtcon_loc
    <span class="keyword">val</span> arg <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1682"><span class="dyncstuse">s1rtlst_tr</span></a> d1c<span class="keyword">.</span>d1atsrtcon_arg
    <span class="keyword">val</span> s2t <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span>arg<span class="keyword">,</span> res<span class="keyword">)</span>
    <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13375"><span class="dyncstuse">s2cst_make</span></a> <span class="keyword">(</span>
      id <span class="comment">// sym
</span>    <span class="keyword">,</span> loc <span class="comment">// location
</span>    <span class="keyword">,</span> s2t <span class="comment">// srt
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// isabs
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4327"><span class="dyncstuse">true</span></a> <span class="comment">// iscon
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isrec
</span>    <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isasp
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// islst
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// argvar
</span>    <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// def
</span>    <span class="keyword">)</span> <span class="comment">// end of [s2cst_make]
</span>    <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#15249"><span class="dyncstuse">s2cst_tag_set</span></a> <span class="keyword">(</span>s2c<span class="keyword">,</span> i<span class="keyword">)</span>
  <span class="keyword">in</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c<span class="keyword">;</span> s2c
  <span class="keyword">end</span> <span class="comment">// end of [aux]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> auxlst <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14472"><span class="stacstuse">d1atsrtconlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        S2CSTLSTcons <span class="keyword">(</span>aux <span class="keyword">(</span>i<span class="keyword">,</span> res<span class="keyword">,</span> d1c<span class="keyword">)</span><span class="keyword">,</span> auxlst <span class="keyword">(</span>i+1<span class="keyword">,</span> res<span class="keyword">,</span> d1cs<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [auxlst]
</span><span class="comment">//
</span><span class="keyword">in</span>
  auxlst <span class="keyword">(</span>0<span class="keyword">,</span> res<span class="keyword">,</span> d1c<span class="keyword">.</span>d1atsrtdec_con<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d1atsrtdec_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3782"><span class="dyncstimp">d1atsrtdeclst_tr</span></a> <span class="keyword">(</span>d1cs<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">viewtypedef</span> <span class="staexp"><a name="61278"><span class="stacstdec">VT <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22725"><span class="stacstuse">List_vt</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14509"><span class="stacstuse">d1atsrtdec</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2185"><span class="stacstuse">s2rtdat_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">)</span></span></a></span>
<span class="comment">//
</span>  <span class="keyword">fun</span> loop1 <span class="keyword">(</span>xs0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#61278"><span class="stacstuse">VT</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> xs0 <span class="keyword">of</span>
    <span class="keyword">|</span> <span class="keyword">~</span>list_vt_cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2cs <span class="keyword">=</span> d1atsrtdec_tr <span class="keyword">(</span>x<span class="keyword">.</span>2<span class="keyword">,</span> x<span class="keyword">.</span>0<span class="keyword">)</span>
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13087"><span class="dyncstuse">s2rtdat_conlst_set</span></a> <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">,</span> s2cs<span class="keyword">)</span>
      <span class="keyword">in</span>
        loop1 xs
      <span class="keyword">end</span> <span class="comment">// end of [list_vt_cons]
</span>    <span class="keyword">|</span> <span class="keyword">~</span>list_vt_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [loop1]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> loop2 <span class="keyword">(</span>
    d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#14635"><span class="stacstuse">d1atsrtdeclst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#61278"><span class="stacstuse">VT</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> id <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atsrtdec_sym
        <span class="keyword">val</span> loc <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atsrtdec_loc
        <span class="keyword">val</span> s2td <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12950"><span class="dyncstuse">s2rtdat_make</span></a> id
        <span class="keyword">val</span> s2t <span class="keyword">=</span> S2RTbas <span class="keyword">(</span>S2RTBASdef s2td<span class="keyword">)</span>
        <span class="keyword">val</span> s2t_eq <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span><span class="keyword">'[</span>s2t<span class="keyword">,</span> s2t<span class="keyword">]</span><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10118"><span class="dyncstuse">s2rt_bool</span></a><span class="keyword">)</span>
        <span class="keyword">val</span> s2c_eq <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13375"><span class="dyncstuse">s2cst_make</span></a> <span class="keyword">(</span>
          <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#1993"><span class="dyncstuse">$Sym<span class="keyword">.</span>symbol_EQEQ</span></a> <span class="comment">// sym
</span>        <span class="keyword">,</span> loc <span class="comment">// location
</span>        <span class="keyword">,</span> s2t_eq <span class="comment">// srt
</span>        <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// isabs
</span>        <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// iscon
</span>        <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isrec
</span>        <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isasp
</span>        <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// islst
</span>        <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// argvar 
</span>        <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// def
</span>        <span class="keyword">)</span> <span class="comment">// end of [val]
</span>        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c_eq
        <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#1767"><span class="dyncstuse">the_s2rtenv_add</span></a> <span class="keyword">(</span>id<span class="keyword">,</span> S2TEsrt s2t<span class="keyword">)</span>
      <span class="keyword">in</span>
        loop2 <span class="keyword">(</span>d1cs<span class="keyword">,</span> list_vt_cons <span class="keyword">(</span><span class="keyword">@(</span>d1c<span class="keyword">,</span> s2td<span class="keyword">,</span> s2t<span class="keyword">)</span><span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> loop1 res
  <span class="comment">// end of [loop2]
</span><span class="comment">//
</span><span class="keyword">in</span>
  loop2 <span class="keyword">(</span>d1cs<span class="keyword">,</span> list_vt_nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d1atsrtdeclst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> s1expdef_s1aspdec_tr_main <span class="keyword">(</span>
  loc0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span>
<span class="keyword">,</span> s1ass<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#5798"><span class="stacstuse">s1arglstlst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8824"><span class="stacstuse">s2rtopt</span></a></span><span class="keyword">,</span> body<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8868"><span class="stacstuse">s1exp</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span> 
<span class="comment">//
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> s2vss <span class="keyword">=</span> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1918"><span class="dyncstuse">s1arglstlst_var_tr</span></a> s1ass<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2681"><span class="stacstuse">s2varlstlst</span></a></span>
  <span class="keyword">val</span> body <span class="keyword">=</span> <span class="keyword">case+</span> res <span class="keyword">of</span>
    <span class="keyword">|</span> Some s2t <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>body<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2105"><span class="dyncstuse">s1exp_tr_up</span></a> body
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
<span class="comment">//
</span>  <span class="keyword">fun</span> aux <span class="keyword">(</span>
    body<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span><span class="keyword">,</span> s2vss<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2681"><span class="stacstuse">s2varlstlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9276"><span class="stacstuse">s2exp</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> s2vss <span class="keyword">of</span>
    <span class="keyword">|</span> s2vs :: s2vss <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> body <span class="keyword">=</span> aux <span class="keyword">(</span>body<span class="keyword">,</span> s2vss<span class="keyword">)</span>
        <span class="keyword">val</span> s2ts_arg <span class="keyword">=</span> s2rtlst_of_s2varlst s2vs
        <span class="keyword">val</span> s2t_fun <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#12692"><span class="dyncstuse">s2rt_fun</span></a> <span class="keyword">(</span>s2ts_arg<span class="keyword">,</span> body<span class="keyword">.</span>s2exp_srt<span class="keyword">)</span>
      <span class="keyword">in</span>
        <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#30609"><span class="dyncstuse">s2exp_lam_srt</span></a> <span class="keyword">(</span>s2t_fun<span class="keyword">,</span> s2vs<span class="keyword">,</span> body<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [::]
</span>    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> body
  <span class="keyword">end</span> <span class="comment">// end of [aux]
</span><span class="comment">//
</span><span class="keyword">in</span>
  aux <span class="keyword">(</span>body<span class="keyword">,</span> s2vss<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1expdef_s1aspdec_tr_main]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3830"><span class="dyncstimp">s1expdef_tr</span></a> <span class="keyword">(</span>res<span class="keyword">,</span> d1c<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fn</span> err <span class="keyword">(</span>d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#15268"><span class="stacstuse">s1expdef</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 d1c<span class="keyword">.</span>s1expdef_loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1expdef_tr"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the sort for the definition does not match"<span class="keyword">;</span>
    prerr " the sort assigned to the static constant ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> d1c<span class="keyword">.</span>s1expdef_sym<span class="keyword">;</span>
    prerr "]."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err]
</span>  <span class="keyword">val</span> res <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> d1c<span class="keyword">.</span>s1expdef_res <span class="keyword">of</span>
    <span class="keyword">|</span> Some s1t <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2t1 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1652"><span class="dyncstuse">s1rt_tr</span></a> s1t<span class="keyword">;</span> <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> res <span class="keyword">of</span>
          <span class="keyword">|</span> Some s2t <span class="keyword">=&gt;</span> <span class="keyword">if</span> <span class="keyword">(</span>s2t1 &lt;= s2t<span class="keyword">)</span> <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> err <span class="keyword">(</span>d1c<span class="keyword">)</span>
          <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
        <span class="comment">// end of [val]
</span>      <span class="keyword">in</span>
        Some s2t1
      <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>    <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> res
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8824"><span class="stacstuse">s2rtopt</span></a></span>
  <span class="keyword">val</span> s2e <span class="keyword">=</span> s1expdef_s1aspdec_tr_main
    <span class="keyword">(</span>d1c<span class="keyword">.</span>s1expdef_loc<span class="keyword">,</span> d1c<span class="keyword">.</span>s1expdef_arg<span class="keyword">,</span> res<span class="keyword">,</span> d1c<span class="keyword">.</span>s1expdef_def<span class="keyword">)</span>
  <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13375"><span class="dyncstuse">s2cst_make</span></a> <span class="keyword">(</span>
    d1c<span class="keyword">.</span>s1expdef_sym <span class="comment">// symbol
</span>  <span class="keyword">,</span> d1c<span class="keyword">.</span>s1expdef_loc <span class="comment">// location
</span>  <span class="keyword">,</span> s2e<span class="keyword">.</span>s2exp_srt <span class="comment">// srt
</span>  <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// isabs
</span>  <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// iscon
</span>  <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isrec
</span>  <span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#4371"><span class="dyncstuse">false</span></a> <span class="comment">// isasp
</span>  <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// islst
</span>  <span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// argvar
</span>  <span class="keyword">,</span> Some s2e <span class="comment">// def
</span>  <span class="keyword">)</span> <span class="comment">// end of [s2cst_make]
</span><span class="keyword">end</span> <span class="comment">// end of [s1expdef_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3885"><span class="dyncstimp">s1expdeflst_tr</span></a> <span class="keyword">(</span>res<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2cs <span class="keyword">=</span> aux <span class="keyword">(</span>res<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
    <span class="keyword">fun</span> aux
      <span class="keyword">(</span>res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8824"><span class="stacstuse">s2rtopt</span></a></span><span class="keyword">,</span> d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#15428"><span class="stacstuse">s1expdeflst</span></a></span><span class="keyword">)</span>
      <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22725"><span class="stacstuse">List_vt</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a><span class="keyword">)</span></span> <span class="keyword">=</span> <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
      <span class="keyword">|</span> list_cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3830"><span class="dyncstuse">s1expdef_tr</span></a> <span class="keyword">(</span>res<span class="keyword">,</span> d1c<span class="keyword">)</span>
        <span class="keyword">in</span>
          list_vt_cons <span class="keyword">(</span>s2c<span class="keyword">,</span> aux <span class="keyword">(</span>res<span class="keyword">,</span> d1cs<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>      <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_vt_nil <span class="keyword">(</span><span class="keyword">)</span>
    <span class="comment">// end of [aux]
</span>  <span class="keyword">}</span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> aux s2cs <span class="keyword">where</span> <span class="keyword">{</span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>s2cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22725"><span class="stacstuse">List_vt</span></a> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span>
      <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
      <span class="keyword">|</span> <span class="keyword">~</span>list_vt_cons <span class="keyword">(</span>s2c<span class="keyword">,</span> s2cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c <span class="keyword">in</span> aux s2cs
        <span class="keyword">end</span> <span class="comment">// end of [list_vt_cons]
</span>      <span class="keyword">|</span> <span class="keyword">~</span>list_vt_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="comment">// end of [aux]
</span>  <span class="keyword">}</span> <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <span class="comment">// empty
</span><span class="keyword">end</span> <span class="comment">// end of [s1expdeflst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3945"><span class="dyncstimp">s1aspdec_tr</span></a> <span class="keyword">(</span>d1c<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fn</span> err1
    <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">,</span>
     s2t_s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">,</span> s2t_s2e<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1aspdec_tr: err1"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": sort mismatch"<span class="keyword">;</span>
    prerr ": the sort of the static constant ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] is ["<span class="keyword">;</span>
    prerr s2t_s2c<span class="keyword">;</span>
    prerr "] while the sort of its definition is ["<span class="keyword">;</span>
    prerr s2t_s2e<span class="keyword">;</span>
    prerr "]."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err1]
</span>
  <span class="keyword">fn</span> err2 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1aspdec_tr: err2"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static constant ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] is not abstract."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err2]
</span>
  <span class="keyword">fn</span> err3 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1aspdec_tr: err2"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the static constant referred to by ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] cannot be uniquely resolved."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err3]
</span>
  <span class="keyword">fn</span> err4 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1aspdec_tr: err4"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] does not refer to a static constant."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err4]
</span>
  <span class="keyword">fn</span> err5 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> q<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17018"><span class="stacstuse">$Syn<span class="keyword">.</span>s0taq</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdebug_2esats.html#1975"><span class="dyncstuse">$Deb<span class="keyword">.</span>debug_prerrf</span></a> <span class="keyword">(</span>": %s: s1aspdec_tr: err5"<span class="keyword">,</span> <span class="keyword">@(</span>THISFILENAME<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">;</span>
    prerr ": the identifier ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsyntax_2esats.html#17240"><span class="dyncstuse">$Syn<span class="keyword">.</span>prerr_s0taq</span></a> q<span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span>
    prerr "] is unrecognized."<span class="keyword">;</span>
    <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#22606"><span class="stacstuse">s2aspdec</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err5]
</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d1c<span class="keyword">.</span>s1aspdec_loc
  <span class="keyword">val</span> qid <span class="keyword">=</span> d1c<span class="keyword">.</span>s1aspdec_qid
  <span class="keyword">val</span> q <span class="keyword">=</span> qid<span class="keyword">.</span>sqi0de_qua <span class="keyword">and</span> id <span class="keyword">=</span> qid<span class="keyword">.</span>sqi0de_sym
  <span class="keyword">val</span> os2i <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2727"><span class="dyncstuse">the_s2expenv_find_qua</span></a> <span class="keyword">(</span>q<span class="keyword">,</span> id<span class="keyword">)</span>
<span class="keyword">in</span>
  <span class="keyword">case+</span> os2i <span class="keyword">of</span>
  <span class="keyword">|</span> <span class="keyword">~</span>Some_vt s2i <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> s2i <span class="keyword">of</span>
    <span class="keyword">|</span> S2ITEMcst s2cs <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> s2cs <span class="keyword">=</span> filter s2cs <span class="keyword">where</span> <span class="keyword">{</span>
          <span class="keyword">fun</span> filter <span class="keyword">(</span>s2cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span> <span class="keyword">=</span>
            <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
            <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> s2cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
              <span class="keyword">case+</span> 0 <span class="keyword">of</span>
              <span class="keyword">|</span> _ <span class="keyword">when</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#15747"><span class="dyncstuse">s2cst_is_abstract</span></a> s2c <span class="keyword">=&gt;</span>
                  S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> filter s2cs<span class="keyword">)</span>
              <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> filter s2cs
              <span class="keyword">end</span> <span class="comment">// end of [S2CSTLSTcons]
</span>            <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">}</span> <span class="comment">// end of [val]
</span>      <span class="keyword">in</span>
        <span class="keyword">case+</span> s2cs <span class="keyword">of</span>
        <span class="keyword">|</span> S2CSTLSTcons <span class="keyword">(</span>s2c<span class="keyword">,</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
            <span class="keyword">val</span> res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1722"><span class="dyncstuse">s1rtopt_tr</span></a> d1c<span class="keyword">.</span>s1aspdec_res
            <span class="keyword">val</span> s2e <span class="keyword">=</span> s1expdef_s1aspdec_tr_main
              <span class="keyword">(</span>loc<span class="keyword">,</span> d1c<span class="keyword">.</span>s1aspdec_arg<span class="keyword">,</span> res<span class="keyword">,</span> d1c<span class="keyword">.</span>s1aspdec_def<span class="keyword">)</span>
<span class="comment">(*
            // definition binding is to be done in [ats_trans3_dec.dats]
*)</span>
            <span class="keyword">val</span> s2t_s2e <span class="keyword">=</span> s2e<span class="keyword">.</span>s2exp_srt
            <span class="keyword">val</span> s2t_s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14003"><span class="dyncstuse">s2cst_srt_get</span></a> s2c
          <span class="keyword">in</span>
            <span class="keyword">if</span> s2t_s2e &lt;= s2t_s2c <span class="keyword">then</span> <span class="keyword">begin</span>
              <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#33225"><span class="dyncstuse">s2aspdec_make</span></a> <span class="keyword">(</span>loc<span class="keyword">,</span> s2c<span class="keyword">,</span> s2e<span class="keyword">)</span>
            <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
              err1 <span class="keyword">(</span>loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">,</span> s2t_s2c<span class="keyword">,</span> s2t_s2e<span class="keyword">)</span>
            <span class="keyword">end</span> <span class="comment">// end of [if]
</span>          <span class="keyword">end</span>
        <span class="keyword">|</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
            err2 <span class="keyword">(</span>loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span> <span class="comment">// [s2c] is not abstract!
</span>          <span class="keyword">end</span> <span class="comment">// end of [if]
</span>        <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err3 <span class="keyword">(</span>loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [S2ITEMcst]
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> err4 <span class="keyword">(</span>loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [Some_vt]
</span>  <span class="keyword">|</span> <span class="keyword">~</span>None_vt <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> err5 <span class="keyword">(</span>loc<span class="keyword">,</span> q<span class="keyword">,</span> id<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [s1aspdec_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d1atcon_tr <span class="keyword">(</span>
    s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span>
  <span class="keyword">,</span> islin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span>
  <span class="keyword">,</span> isprf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span>
  <span class="keyword">,</span> s2vs0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span>
  <span class="keyword">,</span> fil<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1655"><span class="stacstuse">fil_t</span></a></span>
  <span class="keyword">,</span> d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#15890"><span class="stacstuse">d1atcon</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>

  <span class="keyword">fn</span> err1 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    prerr ": less indexes are needed for the constructor ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "]"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err1]
</span>
  <span class="keyword">fn</span> err2 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    prerr ": more indexes are needed for the constructor ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "]"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err2]
</span>
  <span class="keyword">fn</span> err3 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    prerr ": no indexes are needed for the constructor ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "]"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err3]
</span>
  <span class="keyword">fn</span> err4 <span class="keyword">(</span>loc<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2353"><span class="stacstuse">loc_t</span></a></span><span class="keyword">,</span> id<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2503"><span class="stacstuse">sym_t</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
    prerr_loc_error2 loc<span class="keyword">;</span>
    prerr ": some indexes are needed for the constructor ["<span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fsymbol_2esats.html#5388"><span class="dyncstuse">$Sym<span class="keyword">.</span>prerr_symbol</span></a> id<span class="keyword">;</span> prerr "]"<span class="keyword">;</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fdyn_2esats.html#12890"><span class="dyncstuse">prerr_newline</span></a> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">;</span>
    <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ferror_2esats.html#1817"><span class="dyncstuse">$Err<span class="keyword">.</span>abort</span></a> <span class="staexp"><span class="keyword">{</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a><span class="keyword">}</span></span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [err4]
</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atcon_loc <span class="keyword">and</span> id <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atcon_sym
  <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2438"><span class="dyncstuse">the_s2expenv_add_svarlst</span></a> s2vs0
  <span class="keyword">var</span> s2vpslst<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10049"><span class="stacstuse">s2qualst</span></a></span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3398"><span class="dyncstuse">s1qualstlst_tr</span></a> <span class="keyword">(</span>d1c<span class="keyword">.</span>d1atcon_qua<span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> s2vs0 <span class="keyword">of</span>
    <span class="keyword">|</span> cons _ <span class="keyword">=&gt;</span> s2vpslst := cons <span class="keyword">(</span><span class="keyword">@(</span>s2vs0<span class="keyword">,</span> nil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">,</span> s2vpslst<span class="keyword">)</span>
    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">var</span> os2ts_s2c_ind<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8880"><span class="stacstuse">s2rtlstopt</span></a></span> <span class="keyword">=</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14003"><span class="dyncstuse">s2cst_srt_get</span></a> s2c <span class="keyword">of</span>
    <span class="keyword">|</span> S2RTfun <span class="keyword">(</span>s2ts<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>os2ts_s2c_ind := Some s2ts<span class="keyword">)</span> <span class="keyword">|</span> s2t <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> npf <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atcon_npf <span class="keyword">and</span> s1es_arg <span class="keyword">=</span> d1c<span class="keyword">.</span>d1atcon_arg
  <span class="keyword">val</span> s2es_arg <span class="keyword">=</span> <span class="keyword">let</span>
    <span class="keyword">val</span> s2t_pfarg <span class="keyword">=</span> <span class="keyword">(</span>
      <span class="keyword">if</span> islin <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10334"><span class="dyncstuse">s2rt_view</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10270"><span class="dyncstuse">s2rt_prop</span></a>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span>
    <span class="keyword">val</span> s2t_arg <span class="keyword">=</span> <span class="keyword">(</span>
      <span class="keyword">if</span> isprf <span class="keyword">then</span> s2t_pfarg <span class="keyword">else</span> <span class="keyword">begin</span>
        <span class="keyword">if</span> islin <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10380"><span class="dyncstuse">s2rt_viewt0ype</span></a> <span class="keyword">else</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10312"><span class="dyncstuse">s2rt_t0ype</span></a>
      <span class="keyword">end</span> <span class="comment">// end of [if]
</span>    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> s1es<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp1_2esats.html#8954"><span class="stacstuse">s1explst</span></a></span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9393"><span class="stacstuse">s2explst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
      <span class="keyword">case+</span> s1es <span class="keyword">of</span>
      <span class="keyword">|</span> cons <span class="keyword">(</span>s1e<span class="keyword">,</span> s1es<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2t <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">if</span> i <span class="keyword">&lt;</span> npf <span class="keyword">then</span> s2t_pfarg <span class="keyword">else</span> s2t_arg<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a></span>
        <span class="keyword">in</span>
          cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2314"><span class="dyncstuse">s1exp_tr_dn</span></a> <span class="keyword">(</span>s1e<span class="keyword">,</span> s2t<span class="keyword">)</span><span class="keyword">,</span> aux <span class="keyword">(</span>i+1<span class="keyword">,</span> s1es<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>      <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [nil]
</span>    <span class="keyword">end</span> <span class="comment">// end of [aux]
</span>  <span class="keyword">in</span>
    aux <span class="keyword">(</span>0<span class="keyword">,</span> s1es_arg<span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> os2ts_s2c_ind <span class="keyword">=</span> <span class="keyword">(</span>os2ts_s2c_ind<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8880"><span class="stacstuse">s2rtlstopt</span></a></span><span class="keyword">)</span>
  <span class="keyword">val</span> os2es_ind <span class="keyword">=</span> <span class="keyword">(</span>
    <span class="keyword">case+</span> <span class="keyword">(</span>d1c<span class="keyword">.</span>d1atcon_ind<span class="keyword">,</span> os2ts_s2c_ind<span class="keyword">)</span> <span class="keyword">of</span>
    <span class="keyword">|</span> <span class="keyword">(</span>Some s1es<span class="keyword">,</span> Some s2ts<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> n1 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> <span class="keyword">(</span>s1es<span class="keyword">)</span>
        <span class="keyword">and</span> n2 <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5flist_2esats.html#2308"><span class="dyncstuse">$Lst<span class="keyword">.</span>list_length</span></a> <span class="keyword">(</span>s2ts<span class="keyword">)</span>
      <span class="keyword">in</span>
        <span class="keyword">case+</span> compare <span class="keyword">(</span>n1<span class="keyword">,</span> n2<span class="keyword">)</span> <span class="keyword">of</span>
        <span class="keyword">|</span> 0 <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#2361"><span class="dyncstuse">s1explst_tr_dn</span></a> <span class="keyword">(</span>s1es<span class="keyword">,</span> s2ts<span class="keyword">)</span><span class="keyword">)</span>
        <span class="keyword">|</span> 1 <span class="keyword">=&gt;</span> err1 <span class="keyword">(</span>loc<span class="keyword">,</span> id<span class="keyword">)</span>
        <span class="keyword">|</span> _ <span class="comment">(*~1*)</span> <span class="keyword">=&gt;</span> err2 <span class="keyword">(</span>loc<span class="keyword">,</span> id<span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> <span class="keyword">(</span>None <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">,</span> None <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
    <span class="keyword">|</span> <span class="keyword">(</span>Some _<span class="keyword">,</span> None _<span class="keyword">)</span> <span class="keyword">=&gt;</span> err3 <span class="keyword">(</span>loc<span class="keyword">,</span> id<span class="keyword">)</span>
    <span class="keyword">|</span> <span class="keyword">(</span>None _<span class="keyword">,</span> Some _<span class="keyword">)</span> <span class="keyword">=&gt;</span> err4 <span class="keyword">(</span>loc<span class="keyword">,</span> id<span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#9521"><span class="stacstuse">s2explstopt</span></a></span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
  <span class="keyword">val</span> vwtp <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">if</span> isprf <span class="keyword">then</span> 0 <span class="keyword">else</span> <span class="keyword">if</span> islin <span class="keyword">then</span> 1 <span class="keyword">else</span> 0<span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span>
  <span class="keyword">val</span> d2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#21890"><span class="dyncstuse">d2con_make</span></a>
    <span class="keyword">(</span>loc<span class="keyword">,</span> fil<span class="keyword">,</span> id<span class="keyword">,</span> s2c<span class="keyword">,</span> vwtp<span class="keyword">,</span> s2vpslst<span class="keyword">,</span> npf<span class="keyword">,</span> s2es_arg<span class="keyword">,</span> os2es_ind<span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#4040"><span class="dyncstuse">the_d2expenv_add_dcon</span></a> d2c<span class="keyword">;</span> <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span>
    <span class="keyword">if</span> isprf <span class="keyword">then</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">else</span> <span class="keyword">let</span>
      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2542"><span class="dyncstuse">the_s2expenv_add_datcontyp</span></a> d2c <span class="comment">// struct
</span>    <span class="keyword">in</span>
      <span class="keyword">if</span> islin <span class="keyword">then</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2490"><span class="dyncstuse">the_s2expenv_add_datconptr</span></a> d2c <span class="comment">// unfold
</span>    <span class="keyword">end</span> <span class="comment">// end of [if]
</span>  <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  d2c
<span class="keyword">end</span> <span class="comment">// end of [d1atcon_tr]
</span>
<span class="keyword">fun</span> d1atconlst_tr <span class="keyword">(</span>
    s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span>
  <span class="keyword">,</span> islin<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span>
  <span class="keyword">,</span> isprf<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#14977"><span class="stacstuse">bool</span></a></span>
  <span class="keyword">,</span> s2vs0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span>
  <span class="keyword">,</span> fil<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp2_2esats.html#1655"><span class="stacstuse">fil_t</span></a></span>
  <span class="keyword">,</span> d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16069"><span class="stacstuse">d1atconlst</span></a></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
  <span class="keyword">|</span> cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
      <span class="keyword">val</span> d2c <span class="keyword">=</span> d1atcon_tr <span class="keyword">(</span>s2c<span class="keyword">,</span> islin<span class="keyword">,</span> isprf<span class="keyword">,</span> s2vs0<span class="keyword">,</span> fil<span class="keyword">,</span> d1c<span class="keyword">)</span>
    <span class="keyword">in</span>
      D2CONLSTcons <span class="keyword">(</span>d2c<span class="keyword">,</span> d1atconlst_tr <span class="keyword">(</span>s2c<span class="keyword">,</span> islin<span class="keyword">,</span> isprf<span class="keyword">,</span> s2vs0<span class="keyword">,</span> fil<span class="keyword">,</span> d1cs<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>  <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> D2CONLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [nil]
</span><span class="keyword">end</span> <span class="comment">// end of [d1atconlst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fn</span> d1atdec_tr <span class="keyword">(</span>
  s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span><span class="keyword">,</span> s2vs0<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span><span class="keyword">,</span> d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16100"><span class="stacstuse">d1atdec</span></a></span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> s2t_s2c <span class="keyword">=</span> <span class="keyword">begin</span>
    <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14003"><span class="dyncstuse">s2cst_srt_get</span></a> s2c <span class="keyword">of</span> S2RTfun <span class="keyword">(</span>s2ts<span class="keyword">,</span> s2t<span class="keyword">)</span> <span class="keyword">=&gt;</span> s2t <span class="keyword">|</span> s2t <span class="keyword">=&gt;</span> s2t
  <span class="keyword">end</span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> islin <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10875"><span class="dyncstuse">s2rt_is_linear</span></a> s2t_s2c <span class="keyword">and</span> isprf <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#10953"><span class="dyncstuse">s2rt_is_proof</span></a> s2t_s2c
  <span class="keyword">val</span> d2cs <span class="keyword">=</span> d1atconlst_tr
    <span class="keyword">(</span>s2c<span class="keyword">,</span> islin<span class="keyword">,</span> isprf<span class="keyword">,</span> s2vs0<span class="keyword">,</span> d1c<span class="keyword">.</span>d1atdec_fil<span class="keyword">,</span> d1c<span class="keyword">.</span>d1atdec_con<span class="keyword">)</span>
  <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span> <span class="comment">// assigning tags to dynamic constructors
</span>    <span class="keyword">fun</span> aux <span class="keyword">(</span>i<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a></span><span class="keyword">,</span> d2cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> d2cs <span class="keyword">of</span>
      <span class="keyword">|</span> D2CONLSTcons <span class="keyword">(</span>d2c<span class="keyword">,</span> d2cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22700"><span class="dyncstuse">d2con_tag_set</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> i<span class="keyword">)</span><span class="keyword">;</span> aux <span class="keyword">(</span>i+1<span class="keyword">,</span> d2cs<span class="keyword">)</span><span class="keyword">)</span>
        <span class="comment">// end of [D2CONLSTcons]
</span>      <span class="keyword">|</span> D2CONLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="comment">// end of [aux]
</span>  <span class="keyword">in</span>
    aux <span class="keyword">(</span>0<span class="keyword">,</span> d2cs<span class="keyword">)</span>
  <span class="keyword">end</span> <span class="comment">// end of [val]
</span>  <span class="keyword">val</span> islst <span class="keyword">=</span> <span class="keyword">(</span><span class="keyword">case+</span> d2cs <span class="keyword">of</span>
    <span class="keyword">|</span> D2CONLSTcons <span class="keyword">(</span>d2c1<span class="keyword">,</span> D2CONLSTcons <span class="keyword">(</span>d2c2<span class="keyword">,</span> D2CONLSTnil <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=&gt;</span>
        <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22539"><span class="dyncstuse">d2con_arity_real_get</span></a> d2c1 <span class="keyword">=</span> 0 <span class="keyword">then</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22539"><span class="dyncstuse">d2con_arity_real_get</span></a> d2c2 <span class="keyword">&gt;</span> 0 <span class="keyword">then</span> Some <span class="keyword">@(</span>d2c1<span class="keyword">,</span> d2c2<span class="keyword">)</span>
          <span class="keyword">else</span> None <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span> <span class="keyword">else</span> <span class="keyword">begin</span>
          <span class="keyword">if</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22539"><span class="dyncstuse">d2con_arity_real_get</span></a> d2c2 <span class="keyword">=</span> 0 <span class="keyword">then</span> Some <span class="keyword">@(</span>d2c2<span class="keyword">,</span> d2c1<span class="keyword">)</span>
          <span class="keyword">else</span> None <span class="keyword">(</span><span class="keyword">)</span>
        <span class="keyword">end</span>
      <span class="comment">// end of [D2CONLSTcons (_, D2CONSLSTcons (_, D2CONLSTnil))
</span>    <span class="keyword">|</span> _ <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a><span class="keyword">)</span></span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14413"><span class="dyncstuse">s2cst_islst_set</span></a> <span class="keyword">(</span>s2c<span class="keyword">,</span> islst<span class="keyword">)</span><span class="keyword">;</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14664"><span class="dyncstuse">s2cst_conlst_set</span></a> <span class="keyword">(</span>s2c<span class="keyword">,</span> Some d2cs<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d1atdec_tr]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#4105"><span class="dyncstimp">d1atdeclst_tr</span></a> <span class="keyword">(</span>
  datknd<span class="keyword">,</span> d1cs_dat<span class="keyword">,</span> d1cs_def
<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>  <span class="keyword">val</span> s2t_res <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#11335"><span class="dyncstuse">s2rt_datakind</span></a> datknd
  <span class="keyword">typedef</span> <span class="staexp"><a name="74187"><span class="stacstdec">T <span class="keyword">=</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16100"><span class="stacstuse">d1atdec</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a><span class="keyword">)</span></span></a></span>
<span class="comment">//
</span>  <span class="keyword">val</span> d1cs2cs2vslst <span class="keyword">=</span> <span class="keyword">let</span>
<span class="comment">//
</span>    <span class="keyword">var</span> res<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse">T</span></a></span> <span class="keyword">=</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
<span class="comment">//
</span>    <span class="keyword">fun</span> aux <span class="staexp"><span class="keyword">.&lt;&gt;.</span></span> <span class="keyword">(</span>
      d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16100"><span class="stacstuse">d1atdec</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse">T</span></a></span></a></span>
    <span class="keyword">)</span> <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
      <span class="keyword">val</span> argvar <span class="keyword">=</span> <span class="keyword">(</span>
        <span class="keyword">case+</span> d1c<span class="keyword">.</span>d1atdec_arg <span class="keyword">of</span>
        <span class="keyword">|</span> Some d1as <span class="keyword">=&gt;</span> Some <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#1804"><span class="dyncstuse">d1atarglst_tr</span></a> d1as<span class="keyword">)</span>
        <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span> 
      <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#22323"><span class="stacstuse">Option</span></a> <span class="keyword">(</span><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span><span class="keyword">)</span></span>
      <span class="keyword">val</span> s2vs <span class="keyword">=</span> <span class="keyword">let</span>
        <span class="keyword">fun</span> aux
          <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span> <span class="keyword">=</span>
          <span class="keyword">case+</span> xs <span class="keyword">of</span>
          <span class="keyword">|</span> list_cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span> <span class="keyword">case+</span> x<span class="keyword">.</span>0 <span class="keyword">of</span>
            <span class="keyword">|</span> Some id <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
                list_cons <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#16646"><span class="dyncstuse">s2var_make_id_srt</span></a> <span class="keyword">(</span>id<span class="keyword">,</span> x<span class="keyword">.</span>1<span class="keyword">)</span><span class="keyword">,</span> aux xs<span class="keyword">)</span>
              <span class="keyword">end</span> <span class="comment">// end of [Some]
</span>            <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> aux xs
            <span class="keyword">end</span> <span class="comment">// end of [list_cons]
</span>          <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
        <span class="comment">// end of [aux]
</span>      <span class="keyword">in</span>
        <span class="keyword">case+</span> argvar <span class="keyword">of</span> Some xs <span class="keyword">=&gt;</span> aux xs <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> nil <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2615"><span class="stacstuse">s2varlst</span></a></span>
<span class="comment">//
</span>      <span class="keyword">val</span> os2ts_arg <span class="keyword">=</span> <span class="keyword">let</span>
        <span class="keyword">fun</span> aux
          <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#21893"><span class="stacstuse">List</span></a> <span class="keyword">@(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#2533"><span class="stacstuse">symopt_t</span></a><span class="keyword">,</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#4120"><span class="stacstuse">s2rt</span></a><span class="keyword">,</span> <a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#15410"><span class="stacstuse">int</span></a><span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8800"><span class="stacstuse">s2rtlst</span></a></span> <span class="keyword">=</span>
          <span class="keyword">case+</span> xs <span class="keyword">of</span>
          <span class="keyword">|</span> list_cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> list_cons <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">,</span> aux xs<span class="keyword">)</span>
          <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> list_nil <span class="keyword">(</span><span class="keyword">)</span>
        <span class="comment">// end of [aux]
</span>      <span class="keyword">in</span>
        <span class="keyword">case+</span> argvar <span class="keyword">of</span> Some xs <span class="keyword">=&gt;</span> Some <span class="keyword">(</span>aux xs<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> None <span class="keyword">(</span><span class="keyword">)</span>
      <span class="keyword">end</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#8880"><span class="stacstuse">s2rtlstopt</span></a></span>
<span class="comment">//
</span>      <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#13682"><span class="dyncstuse">s2cst_make_dat</span></a> <span class="keyword">(</span>
        d1c<span class="keyword">.</span>d1atdec_sym<span class="keyword">,</span> d1c<span class="keyword">.</span>d1atdec_loc<span class="keyword">,</span> os2ts_arg<span class="keyword">,</span> s2t_res<span class="keyword">,</span> argvar
      <span class="keyword">)</span> <span class="comment">// end of [val]
</span>      <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> s2c
<span class="comment">//
</span>    <span class="keyword">in</span>
      res := cons <span class="keyword">(</span><span class="keyword">@(</span>d1c<span class="keyword">,</span> s2c<span class="keyword">,</span> s2vs<span class="keyword">)</span><span class="keyword">,</span> res<span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">// end of [val]
</span><span class="comment">//
</span>    <span class="keyword">fun</span> auxlst <span class="keyword">(</span>
      d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16258"><span class="stacstuse">d1atdeclst</span></a></span><span class="keyword">,</span> res<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse">T</span></a></span></a></span>
    <span class="keyword">)</span> <span class="keyword">:&lt;</span><span class="staexp">cloref1</span><span class="keyword">&gt;</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
      <span class="keyword">|</span> list_cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span>aux <span class="keyword">(</span>d1c<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">;</span> auxlst <span class="keyword">(</span>d1cs<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span>
    <span class="comment">// end of [auxlst]
</span><span class="comment">//
</span>  <span class="keyword">in</span>
    auxlst <span class="keyword">(</span>d1cs_dat<span class="keyword">,</span> res<span class="keyword">)</span><span class="keyword">;</span> res
  <span class="keyword">end</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse">T</span></a></span> <span class="comment">// end of [d1cs2cs2vslst]
</span><span class="comment">//
</span>  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> aux <span class="keyword">(</span>d1cs_def<span class="keyword">)</span> <span class="keyword">where</span> <span class="keyword">{</span>
    <span class="keyword">fun</span> aux <span class="keyword">(</span>
      d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#15428"><span class="stacstuse">s1expdeflst</span></a></span>
    <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><a href="XREF/_2ftmp_2fATS_2d0_2e2_2e3_2fprelude_2fbasics_5fsta_2esats.html#16293"><span class="stacstuse">void</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span> <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
      <span class="keyword">|</span> list_cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
          <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3830"><span class="dyncstuse">s1expdef_tr</span></a> <span class="keyword">(</span>None<span class="keyword">,</span> d1c<span class="keyword">)</span>
          <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2344"><span class="dyncstuse">the_s2expenv_add_scst</span></a> <span class="keyword">(</span>s2c<span class="keyword">)</span>
        <span class="keyword">in</span>
          aux <span class="keyword">(</span>d1cs<span class="keyword">)</span>
        <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>      <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="comment">// end of [list_nil]
</span>    <span class="keyword">end</span> <span class="comment">(* end of [aux] *)</span>
  <span class="keyword">}</span> <span class="comment">// end of [val]
</span><span class="comment">//
</span>  <span class="keyword">fun</span> aux <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fsta_2edats.html#74187"><span class="stacstuse">T</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2880"><span class="stacstuse">s2cstlst</span></a></span> <span class="keyword">=</span> <span class="keyword">case+</span> xs <span class="keyword">of</span>
    <span class="keyword">|</span> list_cons <span class="keyword">(</span>x<span class="keyword">,</span> xs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
        d1atdec_tr <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">,</span> x<span class="keyword">.</span>2<span class="keyword">,</span> x<span class="keyword">.</span>0<span class="keyword">)</span><span class="keyword">;</span> S2CSTLSTcons <span class="keyword">(</span>x<span class="keyword">.</span>1<span class="keyword">,</span> aux xs<span class="keyword">)</span>
      <span class="keyword">end</span> <span class="comment">// end of [cons]
</span>    <span class="keyword">|</span> list_nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> S2CSTLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux]
</span><span class="keyword">in</span>
  aux <span class="keyword">(</span>d1cs2cs2vslst<span class="keyword">)</span>
<span class="keyword">end</span> <span class="comment">// end of [d1atdeclst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* [exn] is considered a viewtype constructor *)</span>
<span class="keyword">fn</span> e1xndec_tr
  <span class="keyword">(</span>s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span><span class="keyword">,</span> d1c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16310"><span class="stacstuse">e1xndec</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2560"><span class="stacstuse">d2con_t</span></a></span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">val</span> loc <span class="keyword">=</span> d1c<span class="keyword">.</span>e1xndec_loc
  <span class="keyword">val</span> fil <span class="keyword">=</span> d1c<span class="keyword">.</span>e1xndec_fil <span class="keyword">and</span> id <span class="keyword">=</span> d1c<span class="keyword">.</span>e1xndec_sym
  <span class="keyword">val</span> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2854"><span class="dyncstuse">the_s2expenv_push</span></a> <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">val</span> s2vpslst <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#3398"><span class="dyncstuse">s1qualstlst_tr</span></a> <span class="keyword">(</span>d1c<span class="keyword">.</span>e1xndec_qua<span class="keyword">)</span>
  <span class="keyword">val</span> npf <span class="keyword">=</span> d1c<span class="keyword">.</span>e1xndec_npf
  <span class="keyword">val</span> s1es_arg <span class="keyword">=</span> d1c<span class="keyword">.</span>e1xndec_arg
  <span class="keyword">val</span> s2es_arg <span class="keyword">=</span> s1explst_tr_dn_viewt0ype s1es_arg
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#2795"><span class="dyncstuse">the_s2expenv_pop</span></a> <span class="keyword">(</span><span class="prfexp">pf_s2expenv</span> <span class="keyword">|</span> <span class="comment">(*none*)</span><span class="keyword">)</span>
  <span class="keyword">val</span> d2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#21890"><span class="dyncstuse">d2con_make</span></a>
    <span class="keyword">(</span>loc<span class="keyword">,</span> fil<span class="keyword">,</span> id<span class="keyword">,</span> s2c<span class="keyword">,</span> 1<span class="comment">(*vwtp*)</span><span class="keyword">,</span> s2vpslst<span class="keyword">,</span> npf<span class="keyword">,</span> s2es_arg<span class="keyword">,</span> None<span class="comment">(*ind*)</span><span class="keyword">)</span>
  <span class="keyword">val</span> <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#22700"><span class="dyncstuse">d2con_tag_set</span></a> <span class="keyword">(</span>d2c<span class="keyword">,</span> ~1<span class="keyword">)</span>
<span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_5fenv_2esats.html#4040"><span class="dyncstuse">the_d2expenv_add_dcon</span></a> d2c<span class="keyword">;</span> d2c
<span class="keyword">end</span> <span class="comment">// end of [e1xndec_tr]
</span>
<span class="keyword">fun</span> d2conlst_revapp
  <span class="keyword">(</span>d2cs1<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span><span class="keyword">,</span> d2cs2<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span> <span class="keyword">=</span> <span class="keyword">begin</span>
  <span class="keyword">case+</span> d2cs1 <span class="keyword">of</span>
  <span class="keyword">|</span> D2CONLSTcons <span class="keyword">(</span>d2c1<span class="keyword">,</span> d2cs1<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">begin</span>
      d2conlst_revapp <span class="keyword">(</span>d2cs1<span class="keyword">,</span> D2CONLSTcons <span class="keyword">(</span>d2c1<span class="keyword">,</span> d2cs2<span class="keyword">)</span><span class="keyword">)</span>
    <span class="keyword">end</span> <span class="comment">(* end of [D2CONLSTcons] *)</span>
  <span class="keyword">|</span> D2CONLSTnil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> d2cs2
<span class="keyword">end</span> <span class="comment">// end of [d2conlst_revapp]
</span>
<span class="keyword">implement</span>
<a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5ftrans2_2esats.html#4234"><span class="dyncstimp">e1xndeclst_tr</span></a> <span class="keyword">(</span>d1cs<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">let</span>
  <span class="keyword">fun</span> aux <span class="keyword">(</span>s2c<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2218"><span class="stacstuse">s2cst_t</span></a></span><span class="keyword">,</span> d1cs<span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fdynexp1_2esats.html#16483"><span class="stacstuse">e1xndeclst</span></a></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#2977"><span class="stacstuse">d2conlst</span></a></span> <span class="keyword">=</span>
    <span class="keyword">case+</span> d1cs <span class="keyword">of</span>
    <span class="keyword">|</span> cons <span class="keyword">(</span>d1c<span class="keyword">,</span> d1cs<span class="keyword">)</span> <span class="keyword">=&gt;</span> <span class="keyword">let</span>
        <span class="keyword">val</span> d2c <span class="keyword">=</span> e1xndec_tr <span class="keyword">(</span>s2c<span class="keyword">,</span> d1c<span class="keyword">)</span>
      <span class="keyword">in</span>
        D2CONLSTcons <span class="keyword">(</span>d2c<span class="keyword">,</span> aux <span class="keyword">(</span>s2c<span class="keyword">,</span> d1cs<span class="keyword">)</span><span class="keyword">)</span>
      <span class="keyword">end</span>
    <span class="keyword">|</span> nil <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> D2CONLSTnil <span class="keyword">(</span><span class="keyword">)</span>
  <span class="comment">// end of [aux]
</span>  <span class="keyword">val</span> s2c <span class="keyword">=</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstadyncst2_2esats.html#1678"><span class="dyncstuse">s2cstref_cst_get</span></a> <span class="keyword">(</span><a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstadyncst2_2esats.html#3451"><span class="dyncstuse">Exception_viewtype</span></a><span class="keyword">)</span>
  <span class="keyword">val</span> d2cs <span class="keyword">=</span> aux <span class="keyword">(</span>s2c<span class="keyword">,</span> d1cs<span class="keyword">)</span>
  <span class="keyword">val</span> d2cs0 <span class="keyword">=</span> <span class="keyword">case+</span> <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14613"><span class="dyncstuse">s2cst_conlst_get</span></a> s2c <span class="keyword">of</span>
    <span class="keyword">|</span> Some d2cs0 <span class="keyword">=&gt;</span> d2conlst_revapp <span class="keyword">(</span>d2cs<span class="keyword">,</span> d2cs0<span class="keyword">)</span> <span class="keyword">|</span> None <span class="keyword">(</span><span class="keyword">)</span> <span class="keyword">=&gt;</span> d2cs
  <span class="comment">// end of [val]
</span><span class="keyword">in</span>
  <a href="XREF/_2fscratch_2ftmp_2fATS_2d0_2e2_2e3_2fsrc_2fats_5fstaexp2_2esats.html#14664"><span class="dyncstuse">s2cst_conlst_set</span></a> <span class="keyword">(</span>s2c<span class="keyword">,</span> Some d2cs0<span class="keyword">)</span><span class="keyword">;</span> d2cs
<span class="keyword">end</span> <span class="comment">// end of [e1xndeclst_tr]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* end of [ats_trans2_sta.dats] *)</span>
</pre>
</body>
</html>
