<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Types for Some Objects in Cairo</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="ATS/Cairo Tutorial"
HREF="book1.html"><LINK
REL="UP"
TITLE="Basic Tutorial Topics"
HREF="p34.html"><LINK
REL="PREVIOUS"
TITLE="A Simple Example: Hello, world!"
HREF="c36.html"><LINK
REL="NEXT"
TITLE="Types for Some Functions in Cairo"
HREF="c116.html"></HEAD
><BODY
CLASS="chapter"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>ATS/Cairo Tutorial: </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c36.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c116.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="chapter"
><H1
><A
NAME="object_types"
></A
>Types for Some Objects in Cairo</H1
><P
>The type for cairo drawing contexts in ATS is declared as follows:</P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN97"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>absviewtype cairo_ref (l:addr) // = cairo_t*
</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;The type <FONT
COLOR="RED"
>cairo_ref(null)</FONT
> is just for a null pointer.  Given an
address <I
CLASS="emphasis"
>L</I
> that is not null, the type <FONT
COLOR="RED"
>cairo_ref</FONT
>(<I
CLASS="emphasis"
>L</I
>) is for
a reference to a cairo context located at <I
CLASS="emphasis"
>L</I
>. We introduce an
abbreviation <FONT
COLOR="RED"
>cairo_ref1</FONT
> as follows:
</P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN106"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>viewtypedef cairo_ref1 = [l:addr | l &#62; null] cairo_ref l
</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;Therefore, <FONT
COLOR="RED"
>cairo_ref1</FONT
> essentially represents a type
<FONT
COLOR="RED"
>cairo_ref</FONT
>(<I
CLASS="emphasis"
>L</I
>) for some unknown <I
CLASS="emphasis"
>L</I
> that is not
null. Similarly, we have the following types in ATS for objects
representing cairo surfaces, cairo patterns, and cairo font faces:
</P
><DIV
CLASS="informalexample"
><P
></P
><A
NAME="AEN113"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>absviewtype cairo_surface_ref (l:addr) // = cairo_surface_t*

absviewtype cairo_pattern_ref (l:addr) // = cairo_pattern_t*
viewtypedef cairo_pattern_ref1 = [l:addr | l &#62; null] cairo_pattern_ref l

absviewtype cairo_font_face_ref (l:addr) // = cairo_font_face_t*
viewtypedef cairo_font_face_ref1 = [l:addr | l &#62; null] cairo_font_face_ref l
</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
><P
>&#13;The above types for objects in cairo are all reference-counted. In other
words, there is a reference count in each object that is assgined one of
these types. When such an object is created, the initial count is 1. This
count can increase or decrease depending on operations performed on the
object, and the object is freed once the count drops to 0. In ATS, we can
employ linear typs to track reference counts. Compared to various other
APIs for cairo, the ability to track reference counts statically, that is,
at compile-time, is arguably the greatest benefit one receives when
programming with ATS/Cairo.
</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c36.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c116.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>A Simple Example: Hello, world!</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="p34.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Types for Some Functions in Cairo</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>