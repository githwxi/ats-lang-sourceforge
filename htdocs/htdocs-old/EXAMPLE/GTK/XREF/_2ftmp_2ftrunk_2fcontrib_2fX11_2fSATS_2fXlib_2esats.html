<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <style type="text/css">
    span.comment {color:#787878;font-style:italic}
    span.extern  {color:#A52A2A}
    span.keyword {color:#000000;font-weight:bold}
    span.neuexp  {color:#800080}
    span.staexp  {color:#0000FF}
    span.dynexp  {color:#E80000}
    span.prfexp  {color:#009000}
    span.stacstdec  {text-decoration:none}
    span.stacstuse  {color:#0000CF;text-decoration:underline}
    span.dyncstdec  {text-decoration:none}
    span.dyncstimp  {color:#B80000;text-decoration:underline}
    span.dyncstuse  {color:#B80000;text-decoration:underline}
    body          {color:#E80000;background-color:#E0E0E0}
  </style>
</head>
<body>
<pre>
<span class="comment">(***********************************************************************)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                         Applied Type System                         *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                              Hongwei Xi                             *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(***********************************************************************)</span>

<span class="comment">(*
** ATS - Unleashing the Potential of Types!
**
** Copyright (C) 2002-2010 Hongwei Xi, Boston University
**
** All rights reserved
**
** ATS is free software;  you can  redistribute it and/or modify it under
** the terms of the GNU LESSER GENERAL PUBLIC LICENSE as published by the
** Free Software Foundation; either version 2.1, or (at your option)  any
** later version.
** 
** ATS is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without  even  the  implied  warranty  of MERCHANTABILITY or
** FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License
** for more details.
** 
** You  should  have  received  a  copy of the GNU General Public License
** along  with  ATS;  see the  file COPYING.  If not, please write to the
** Free Software Foundation,  51 Franklin Street, Fifth Floor, Boston, MA
** 02110-1301, USA.
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// Author of the file: Hongwei Xi (hwxi AT cs DOT bu DOT edu)
</span><span class="comment">// Starting time: January, 2010
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="extern">%{#
#include "contrib/X11/CATS/Xlib.cats"
%}</span> <span class="comment">// end of [{%#]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">#define</span> <span class="neuexp">ATS_STALOADFLAG 0</span> <span class="comment">// no static loading at run-time
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">staload</span> <span class="staexp">"contrib/X11/SATS/X.sats"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// these are resource allocated by
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="1796"><span class="stacstdec">XPtr</span></a></span> <span class="keyword">(</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">,</span> l<span class="keyword">:</span>addr<span class="keyword">)</span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="1835"><span class="stacstdec">XPtr0 <span class="keyword">(</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr<span class="keyword">]</span> XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span></span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="1890"><span class="stacstdec">XPtr1 <span class="keyword">(</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span></span></a></span>
<span class="comment">//
</span><span class="keyword">prfun</span> <a name="1953"><span class="dyncstdec"><span class="prfexp">XPtr_viewget <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><span class="keyword">(</span>a @ l<span class="keyword">,</span> minus <span class="keyword">(</span>XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span><span class="keyword">,</span> a @ l<span class="keyword">)</span><span class="keyword">)</span></span></span></span></a>
<span class="comment">//
</span><span class="keyword">castfn</span> <a name="2055"><span class="dyncstdec">ptr_of_XPtr <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ptr l</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> ptr_of <span class="keyword">with</span> ptr_of_XPtr</span>

<span class="comment">//
</span>
<span class="keyword">absviewtype</span> <span class="staexp"><a name="2165"><span class="stacstdec">XArray</span></a></span> <span class="keyword">(</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">,</span> n<span class="keyword">:</span>int<span class="keyword">,</span> l<span class="keyword">:</span>addr<span class="keyword">)</span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="2213"><span class="stacstdec">XArray1 <span class="keyword">(</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">,</span> n<span class="keyword">:</span>int<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agz<span class="keyword">]</span> XArray <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span></span></a></span>
<span class="comment">//
</span><span class="keyword">prfun</span> <a name="2278"><span class="dyncstdec"><span class="prfexp">XArray_viewget
  <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>XArray <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">(</span>array_v <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span><span class="keyword">,</span> minus <span class="keyword">(</span>XArray <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span><span class="keyword">,</span> array_v <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">)</span></span></span></span></a>
<span class="comment">//
</span><span class="keyword">castfn</span> <a name="2427"><span class="dyncstdec">ptr_of_XArray
  <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>XArray <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ptr l</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> ptr_of <span class="keyword">with</span> ptr_of_XArray</span>

<span class="comment">//
</span>
<span class="keyword">absviewtype</span> <span class="staexp"><a name="2556"><span class="stacstdec">XString</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="2585"><span class="stacstdec">XString0 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> XString <span class="keyword">(</span>l<span class="keyword">)</span></span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="2629"><span class="stacstdec">XString1 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> XString <span class="keyword">(</span>l<span class="keyword">)</span></span></a></span>
<span class="comment">//
</span><span class="keyword">castfn</span> <a name="2682"><span class="dyncstdec">ptr_of_XString <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>XString <span class="keyword">(</span>l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ptr l</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> ptr_of <span class="keyword">with</span> ptr_of_XString</span>

<span class="comment">//
</span><span class="comment">// for a array of linear strings:
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="2817"><span class="stacstdec">XStrarr</span></a></span> <span class="keyword">(</span>n<span class="keyword">:</span>int<span class="keyword">,</span> l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="comment">// array + strings are allocated by XAlloc
</span><span class="keyword">viewtypedef</span> <span class="staexp"><a name="2896"><span class="stacstdec">XStrarr1 <span class="keyword">(</span>n<span class="keyword">:</span>int<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> XStrarr <span class="keyword">(</span>n<span class="keyword">,</span> l<span class="keyword">)</span></span></a></span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="2976"><span class="dyncstdec">XPtrFree <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">XPtr <span class="keyword">(</span>a<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFree"
<span class="comment">// end of [XPtrFree]
</span>
<span class="keyword">fun</span> <a name="3078"><span class="dyncstdec">XArrayFree <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">XArray <span class="keyword">(</span>a<span class="keyword">,</span> n<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFree"
<span class="comment">// end of [XArrayFree]
</span>
<span class="keyword">fun</span> <a name="3197"><span class="dyncstdec">XStringFree <span class="staexp"><span class="keyword">{</span>a<span class="keyword">:</span>viewt@ype<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">XString l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFree"
<span class="comment">// end of [XStringFree]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// HX-2010-01-22:
</span><span class="comment">// it is just a pointer; it is not reference counted
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="3403"><span class="stacstdec">Display_ptr</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="comment">// Display*
</span><span class="keyword">viewtypedef</span> <span class="staexp"><a name="3448"><span class="stacstdec">Display_ptr0 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> Display_ptr l</span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="3498"><span class="stacstdec">Display_ptr1 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> Display_ptr l</span></a></span>

<span class="comment">// HX-2010-01-22:
</span><span class="comment">// it is just a pointer; it is not reference counted
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="3631"><span class="stacstdec">Screen_ptr</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="comment">// Screen*
</span><span class="keyword">viewtypedef</span> <span class="staexp"><a name="3674"><span class="stacstdec">Screen_ptr0 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> Screen_ptr l</span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="3722"><span class="stacstdec">Screen_ptr1 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> Screen_ptr l</span></a></span>

<span class="comment">// it is just a pointer; it is not reference counted
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="3835"><span class="stacstdec">Visual_ptr</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="comment">// Visual*
</span><span class="keyword">viewtypedef</span> <span class="staexp"><a name="3878"><span class="stacstdec">Visual_ptr0 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> Visual_ptr l</span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="3926"><span class="stacstdec">Visual_ptr1 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> Visual_ptr l</span></a></span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// it is just a pointer; it is not reference counted
</span><span class="keyword">absviewtype</span> <span class="staexp"><a name="4060"><span class="stacstdec">GCptr <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="keyword">=</span> ptr</span></a></span> <span class="comment">// $extype "GC" // *GC = _XGC
</span><span class="keyword">viewtypedef</span> <span class="staexp"><a name="4123"><span class="stacstdec">GCptr0 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> GCptr l</span></a></span>
<span class="keyword">viewtypedef</span> <span class="staexp"><a name="4161"><span class="stacstdec">GCptr1 <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l <span class="keyword">&gt;</span> null<span class="keyword">]</span> GCptr l</span></a></span>
<span class="keyword">abstype</span> <span class="staexp"><a name="4206"><span class="stacstdec">GCref <span class="keyword">=</span> <span class="keyword">$extype</span> "GC"</span></a></span> <span class="comment">// this one should never be freed!
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 2: Display Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 2.1: opening the display
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="4404"><span class="dyncstdec">XOpenDisplay <span class="keyword">(</span>name<span class="keyword">:</span> <span class="staexp">Stropt</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Display_ptr0</span></span></a> <span class="keyword">=</span> "#atsctrb_XOpenDisplay"

<span class="keyword">fun</span> <a name="4477"><span class="dyncstdec">Display_ptr_is_null <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>p_dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool <span class="keyword">(</span>l == null<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ptr_is_null" <span class="comment">// defined in $ATSHOME/prelude/CATS/pointer.cats
</span><span class="keyword">fun</span> <a name="4626"><span class="dyncstdec">Display_ptr_isnot_null <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>p_dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool <span class="keyword">(</span>l <span class="keyword">&gt;</span> null<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ptr_isnot_null" <span class="comment">// defined in $ATSHOME/prelude/CATS/pointer.cats
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 2.2: obtaining information about display, image formats or screens
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 2.2.1: display macros
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="4947"><span class="dyncstdec">XAllPlanes <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ulint</span></span></a> <span class="keyword">=</span> "#atsctrb_XAllPlanes"

<span class="keyword">fun</span> <a name="4997"><span class="dyncstdec">XBlackPixel <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XBlackPixel"
<span class="keyword">fun</span> <a name="5092"><span class="dyncstdec">XWhitePixel <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XWhitePixel"

<span class="keyword">fun</span> <a name="5188"><span class="dyncstdec">XConnectionNumber <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XConnectionNumber"

<span class="keyword">fun</span> <a name="5281"><span class="dyncstdec">XDefaultColormap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">Colormap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultColormap"

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="5411"><span class="dyncstdec">XDefaultDepth <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultDepth"

<span class="keyword">fun</span> <a name="5509"><span class="dyncstdec">XListDepths <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> cnt<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> la <span class="keyword">&gt;</span> null<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>n<span class="keyword">:</span>nat<span class="keyword">;</span>la<span class="keyword">:</span>addr<span class="keyword">]</span> XArray <span class="keyword">(</span>int<span class="keyword">,</span> n<span class="keyword">,</span> la<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XListDepths"
<span class="comment">// end of [XListDepths]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="5727"><span class="dyncstdec">XDefaultGC <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">GCref</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultGC"
<span class="comment">// end of [XDefaultGC]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="5861"><span class="dyncstdec">XDefaultRootWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Window</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultRootWindow"

<span class="keyword">fun</span> <a name="5957"><span class="dyncstdec">XDefaultScreenOfDisplay
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l2<span class="keyword">:</span>agz<span class="keyword">]</span> <span class="keyword">(</span>
    minus <span class="keyword">(</span>Display_ptr l1<span class="keyword">,</span> Screen_ptr l2<span class="keyword">)</span> <span class="keyword">|</span> Screen_ptr l2
  <span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XDefaultScreenOfDisplay"
<span class="comment">// end of [XDefaultScreenOfDisplay]
</span>
<span class="keyword">fun</span> <a name="6170"><span class="dyncstdec">XScreenOfDisplay
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> nsrc<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l2<span class="keyword">:</span>agz<span class="keyword">]</span> <span class="keyword">(</span>
    minus <span class="keyword">(</span>Display_ptr l1<span class="keyword">,</span> Screen_ptr l2<span class="keyword">)</span> <span class="keyword">|</span> Screen_ptr l2
  <span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XDefaultScreenOfDisplay"
<span class="comment">// end of [XDefaultScreenOfDisplay]
</span>
<span class="keyword">fun</span> <a name="6387"><span class="dyncstdec">XDefaultScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a><span class="comment">(*nscr*)</span>
  <span class="keyword">=</span> "#atsctrb_XDefaultScreen"

<span class="keyword">fun</span> <a name="6480"><span class="dyncstdec">XDefaultVisual
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> nsrc<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l2<span class="keyword">:</span>agz<span class="keyword">]</span> <span class="keyword">(</span>
    minus <span class="keyword">(</span>Display_ptr l1<span class="keyword">,</span> Visual_ptr l2<span class="keyword">)</span> <span class="keyword">|</span> Visual_ptr l2
  <span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XDefaultVisual"
<span class="comment">// end of [XDefaultVisual]
</span>
<span class="comment">// number of entries in the default colormap
</span><span class="keyword">fun</span> <a name="6722"><span class="dyncstdec">XDisplayCells <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a><span class="comment">(*ncell*)</span>
  <span class="keyword">=</span> "#atsctrb_XDisplayCells"

<span class="comment">// the depth of the root window
</span><span class="keyword">fun</span> <a name="6859"><span class="dyncstdec">XDisplayPlanes <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a><span class="comment">(*depth*)</span>
  <span class="keyword">=</span> "#atsctrb_XDisplayPlanes"

<span class="comment">// the name passed to XOpenDisplay
</span><span class="keyword">fun</span> <a name="7001"><span class="dyncstdec">XDisplayString <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">string</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDisplayString"

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="7110"><span class="dyncstdec">XMaxRequestSize <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">lint</span></span></a> <span class="comment">// in 4-byte units
</span>  <span class="keyword">=</span> "#atsctrb_XMaxRequestSize"

<span class="comment">// the full serial number for the last processed request
</span><span class="keyword">fun</span> <a name="7276"><span class="dyncstdec">XLastKnownRequestProcessed <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XLastKnownRequestProcessed"

<span class="comment">// the full serial number to be used for the next request
</span><span class="keyword">fun</span> <a name="7445"><span class="dyncstdec">XNextRequest <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XNextRequest"

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="7549"><span class="dyncstdec">XProtocolVersion <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XProtocolVersion"

<span class="keyword">fun</span> <a name="7638"><span class="dyncstdec">XProtocolRevision <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XProtocolRevision"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// the length of the event queue for [dpy]
</span><span class="keyword">fun</span> <a name="7793"><span class="dyncstdec">XQLength <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XQLength"

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="7887"><span class="dyncstdec">XRootWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Window</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRootWindow"

<span class="keyword">fun</span> <a name="7980"><span class="dyncstdec">XScreenCount <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XScreenCount"

<span class="keyword">fun</span> <a name="8061"><span class="dyncstdec">XServerVendor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">string</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XServerVendor"

<span class="keyword">fun</span> <a name="8147"><span class="dyncstdec">XVendorRelease <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XVendorRelease"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 2.2.2: image format functions and macros
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">typedef</span> <span class="staexp"><a name="8323"><span class="stacstdec">XPixmapFormatValues <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XPixmapFormatValues" <span class="keyword">of</span> <span class="keyword">{</span>
  depth<span class="keyword">=</span> int<span class="keyword">,</span> bits_per_pixel<span class="keyword">=</span> int<span class="keyword">,</span> scanline_pad<span class="keyword">=</span> int
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XPixmapFormatValues]
</span>
<span class="keyword">fun</span> <a name="8481"><span class="dyncstdec">XListPixmapFormats <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> la <span class="keyword">&gt;</span> null<span class="keyword">)</span></span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>n<span class="keyword">:</span>nat<span class="keyword">;</span>la<span class="keyword">:</span>addr<span class="keyword">]</span> XArray <span class="keyword">(</span>XPixmapFormatValues<span class="keyword">,</span> n<span class="keyword">,</span> la<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XListPixmapFormats"

<span class="keyword">macdef</span> <span class="neuexp">LSBFirst <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "LSBFirst"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">MSBFirst <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "MSBFirst"<span class="keyword">)</span></span>

<span class="keyword">fun</span> <a name="8753"><span class="dyncstdec">XImageByteOrder <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XImageByteOrder"

<span class="keyword">fun</span> <a name="8840"><span class="dyncstdec">XBitmapUnit <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XBitmapUnit"

<span class="keyword">fun</span> <a name="8919"><span class="dyncstdec">XBitmapOrder <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XBitmapOrder"

<span class="keyword">fun</span> <a name="9000"><span class="dyncstdec">XBitmapPad <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XBitmapPad"

<span class="keyword">fun</span> <a name="9077"><span class="dyncstdec">XDisplayHeight <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDisplayHeight"

<span class="keyword">fun</span> <a name="9173"><span class="dyncstdec">XDisplayHeightMM <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDisplayHeightMM"

<span class="keyword">fun</span> <a name="9273"><span class="dyncstdec">XDisplayWidth <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDisplayWidth"

<span class="keyword">fun</span> <a name="9367"><span class="dyncstdec">XDisplayWidthMM <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDisplayWidthMM"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 2.2.3: screen information macros
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="9544"><span class="dyncstdec">XBlackPixelOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XBlackPixelOfScreen"

<span class="keyword">fun</span> <a name="9640"><span class="dyncstdec">XWhitePixelOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">ulint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XWhitePixelOfScreen"

<span class="keyword">fun</span> <a name="9736"><span class="dyncstdec">XCellsOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCellsOfScreen"

<span class="keyword">fun</span> <a name="9820"><span class="dyncstdec">XDefaultColormapOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Colormap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultColormapOfScreen"

<span class="keyword">fun</span> <a name="9929"><span class="dyncstdec">XDefaultDepthOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultDepthOfScreen"

<span class="keyword">fun</span> <a name="10027"><span class="dyncstdec">XDefaultGCOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">GCref</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefaultGCOfScreen"

<span class="comment">//
</span><span class="comment">// the function returns WhenMapped, NotUseful or Always
</span><span class="comment">//
</span><span class="keyword">fun</span> <a name="10183"><span class="dyncstdec">XDoesBackingStore <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDoesBackingStore"

<span class="keyword">fun</span> <a name="10273"><span class="dyncstdec">XDoesSaveUnders <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDoesSaveUnders"

<span class="keyword">fun</span> <a name="10360"><span class="dyncstdec">XScreenNumberOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XScreenNumberofScreen"

<span class="keyword">fun</span> <a name="10458"><span class="dyncstdec">XEventMaskOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">lint</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XEventMaskOfScreen"

<span class="keyword">fun</span> <a name="10551"><span class="dyncstdec">XWidthOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XWidthOfScreen"

<span class="keyword">fun</span> <a name="10635"><span class="dyncstdec">XWidthMMOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XWidthMMOfScreen"

<span class="keyword">fun</span> <a name="10723"><span class="dyncstdec">XHeightOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XHeightOfScreen"

<span class="keyword">fun</span> <a name="10809"><span class="dyncstdec">XHeightMMOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XHeightMMOfScreen"

<span class="keyword">fun</span> <a name="10899"><span class="dyncstdec">XMaxCmapsOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMaxCmapsOfScreen"

<span class="keyword">fun</span> <a name="10989"><span class="dyncstdec">XMinCmapsOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMinCmapsOfScreen"

<span class="keyword">fun</span> <a name="11079"><span class="dyncstdec">XPlanesOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XPlanesOfScreen"

<span class="keyword">fun</span> <a name="11165"><span class="dyncstdec">XRootWindowOfScreen <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>scr<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Screen_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Window</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRootWindowOfScreen"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 2.3: generating a NoOperation protocol request
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">fun</span> <a name="11361"><span class="dyncstdec">XNoOp <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XNoOp"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 2.4: freeing client-created data
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">absview</span> <span class="staexp"><a name="11518"><span class="stacstdec">XFree_v</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span>

<span class="keyword">fun</span> <a name="11540"><span class="dyncstdec">XFree0 <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span>
  <span class="keyword">(</span><span class="prfexp">pf<span class="keyword">:</span> <span class="staexp">XFree_v l</span></span> <span class="keyword">|</span> p<span class="keyword">:</span> <span class="staexp">ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFree"
<span class="comment">// end of [XFree0]
</span>
<span class="neuexp"><span class="keyword">symintr</span></span> XFree
<span class="neuexp"><span class="keyword">overload</span> XFree <span class="keyword">with</span> XFree0</span>
<span class="neuexp"><span class="keyword">overload</span> XFree <span class="keyword">with</span> XPtrFree</span>
<span class="neuexp"><span class="keyword">overload</span> XFree <span class="keyword">with</span> XArrayFree</span>
<span class="neuexp"><span class="keyword">overload</span> XFree <span class="keyword">with</span> XStringFree</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 2.5: closing the display
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="11824"><span class="dyncstdec">XCloseDisplay <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp">Display_ptr1</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XCloseDisplay"

<span class="keyword">abst@ype</span> <span class="staexp"><a name="11901"><span class="stacstdec">close_mode_t <span class="keyword">=</span> int</span></a></span>
<span class="keyword">macdef</span> <span class="neuexp">DestroyAll <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>close_mode_t<span class="keyword">,</span> "DestroyAll"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">RetainPermanent <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>close_mode_t<span class="keyword">,</span> "RetainPermanent"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">RetainTemporary <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>close_mode_t<span class="keyword">,</span> "RetainTemporary"<span class="keyword">)</span></span>

<span class="comment">// [XSetCloseDownMode] may generate a BadValue error
</span><span class="keyword">fun</span> <a name="12169"><span class="dyncstdec">XSetCloseDownMode <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp">Display_ptr l</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">close_mode_t</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 3: Window Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.1: visual types
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="12355"><span class="dyncstdec">XVisualIDFromVisual <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>visual<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Visual_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">VisualID</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XVisualIDFromVisual"
  
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.2: window attributes
</span><span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="12517"><span class="stacstdec">XSetWindowAttributes <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XSetWindowAttributes" <span class="keyword">of</span> <span class="keyword">{</span>
  background_pixmap<span class="keyword">=</span> Pixmap
<span class="keyword">,</span> background_pixel<span class="keyword">=</span> ulint
<span class="keyword">,</span> border_pixmap<span class="keyword">=</span> Pixmap
<span class="keyword">,</span> border_pixel<span class="keyword">=</span> ulint
<span class="keyword">,</span> bit_gravity<span class="keyword">=</span> int
<span class="keyword">,</span> win_gravity<span class="keyword">=</span> int
<span class="keyword">,</span> backing_store<span class="keyword">=</span> int
<span class="keyword">,</span> backing_planes<span class="keyword">=</span> ulint
<span class="keyword">,</span> backing_pixel<span class="keyword">=</span> ulint
<span class="keyword">,</span> save_under<span class="keyword">=</span> bool
<span class="keyword">,</span> event_mask<span class="keyword">=</span> lint
<span class="keyword">,</span> do_not_propagate_mask<span class="keyword">=</span> lint
<span class="keyword">,</span> override_redirect<span class="keyword">=</span> bool
<span class="keyword">,</span> colormap<span class="keyword">=</span> Colormap
<span class="keyword">,</span> cursor<span class="keyword">=</span> Cursor
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XSetWindowAttributes]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.3: creating windows
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="13016"><span class="dyncstdec">XCreateWindow <span class="staexp"><span class="keyword">{</span>ld<span class="keyword">,</span>lv<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr ld</span>
  <span class="keyword">,</span> parent<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> border_width<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> depth<span class="keyword">:</span> <span class="staexp">uint</span> <span class="comment">// can [depth] be negative?
</span>  <span class="keyword">,</span> _class<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> visual<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Visual_ptr lv</span>
  <span class="keyword">,</span> valuemask<span class="keyword">:</span> <span class="staexp">ulint</span>
  <span class="keyword">,</span> attr<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSetWindowAttributes</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Window</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreateWindow"
<span class="comment">// end of [XCreateWindow]
</span>
<span class="keyword">fun</span> <a name="13374"><span class="dyncstdec">XCreateSimpleWindow <span class="staexp"><span class="keyword">{</span>ld<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr ld</span>
  <span class="keyword">,</span> parent<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> border_width<span class="keyword">:</span> <span class="staexp">uint</span> <span class="comment">// in pixels
</span>  <span class="keyword">,</span> border<span class="keyword">:</span> <span class="staexp">ulint</span> <span class="comment">// border pixel value
</span>  <span class="keyword">,</span> background<span class="keyword">:</span> <span class="staexp">ulint</span> <span class="comment">// background pixel value
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Window</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreateSimpleWindow"
<span class="comment">// end of [XCreateSimpleWindow]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.4: destroying windows
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="13762"><span class="dyncstdec">XDestroyWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDestroyWindow"

<span class="keyword">fun</span> <a name="13863"><span class="dyncstdec">XDestroySubwindows <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDestroyWindow"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.5: mapping windows
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="14020"><span class="dyncstdec">XMapWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMapWindow"

<span class="keyword">fun</span> <a name="14113"><span class="dyncstdec">XMapRaised <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMapRaised"

<span class="keyword">fun</span> <a name="14206"><span class="dyncstdec">XMapSubwindows <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMapSubwindows"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.6: unmapping windows
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="14361"><span class="dyncstdec">XUnmapWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XUnmapWindow"

<span class="keyword">fun</span> <a name="14458"><span class="dyncstdec">XUnmapSubwindows <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XUnmapSubwindows"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.7: configuring windows
</span><span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="14623"><span class="stacstdec">XWindowChanges <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XWindowChanges" <span class="keyword">of</span> <span class="keyword">{</span>
  x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> int<span class="keyword">,</span> height<span class="keyword">=</span> int
<span class="keyword">,</span> border_width<span class="keyword">=</span> int
<span class="keyword">,</span> sibling<span class="keyword">=</span> Window
<span class="keyword">,</span> stack_mode<span class="keyword">=</span> int
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XWindowChanges]
</span>
<span class="keyword">fun</span> <a name="14812"><span class="dyncstdec">XConfigureWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> valmask<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> values<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XWindowChanges</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XConfigureWindow"

<span class="keyword">fun</span> <a name="14964"><span class="dyncstdec">XMoveWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMoveWindow"

<span class="keyword">fun</span> <a name="15075"><span class="dyncstdec">XResizeWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XResizeWindow"

<span class="keyword">fun</span> <a name="15201"><span class="dyncstdec">XMoveResizeWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XMoveResizeWindow"

<span class="keyword">fun</span> <a name="15358"><span class="dyncstdec">XSetWindowBorderWidth <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> border_width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowBorderWidth"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.8: changing windows stacking order
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="15561"><span class="dyncstdec">XRaiseWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRaiseWindow"

<span class="keyword">fun</span> <a name="15658"><span class="dyncstdec">XLowerWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XLowerWindow"

<span class="keyword">fun</span> <a name="15755"><span class="dyncstdec">XCirculateSubwindows <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> dir<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCirculateSubwindows"

<span class="keyword">fun</span> <a name="15878"><span class="dyncstdec">XCirculateSubwindowsUp <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCirculateSubwindowsUp"

<span class="keyword">fun</span> <a name="15995"><span class="dyncstdec">XCirculateSubwindowsDown <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCirculateSubwindowsDown"

<span class="keyword">fun</span> <a name="16116"><span class="dyncstdec">XRestackWindows <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> wins<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>Window<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> nwin<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRestackWindows"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 3.9: changing windows attributes
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="16314"><span class="dyncstdec">XChangeWindowAttributes <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> valmask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> attr<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSetWindowAttributes</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XChangeWindowAttributes"

<span class="keyword">fun</span> <a name="16485"><span class="dyncstdec">XSetWindowBackground <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> bg_pixel<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowBackground"

<span class="keyword">fun</span> <a name="16615"><span class="dyncstdec">XSetWindowBackgroundPixmap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> bg_pixmap<span class="keyword">:</span> <span class="staexp">Pixmap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowBackgroundPixmap"

<span class="keyword">fun</span> <a name="16759"><span class="dyncstdec">XSetWindowBorder <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> bd_pixel<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowBorder"

<span class="keyword">fun</span> <a name="16881"><span class="dyncstdec">XSetWindowBorderPixmap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> bd_pixmap<span class="keyword">:</span> <span class="staexp">Pixmap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowBorderPixmap"

<span class="keyword">fun</span> <a name="17017"><span class="dyncstdec">XSetWindowColormap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWindowColormap"

<span class="keyword">fun</span> <a name="17146"><span class="dyncstdec">XDefineCursor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> cursor<span class="keyword">:</span> <span class="staexp">Cursor</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XDefineCursor"

<span class="keyword">fun</span> <a name="17261"><span class="dyncstdec">XUndefineCursor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XUndefineCursor"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 4: Window Information Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">abst@ype</span> <span class="staexp"><a name="17459"><span class="stacstdec">Status <span class="keyword">(</span>i<span class="keyword">:</span>int<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">$extype</span> "Status"</span></a></span> <span class="comment">// = int
</span><span class="keyword">typedef</span> <span class="staexp"><a name="17510"><span class="stacstdec">Status <span class="keyword">=</span> <span class="keyword">[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></a></span>
<span class="keyword">castfn</span> <a name="17543"><span class="dyncstdec">int_of_Status <span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Status i</span><span class="keyword">)</span><span class="keyword">:&lt;&gt;</span> <span class="staexp">int i</span></span></a>
<span class="neuexp"><span class="keyword">overload</span> int_of <span class="keyword">with</span> int_of_Status</span>

<span class="keyword">fun</span> <a name="17628"><span class="dyncstdec">XQueryTree <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> root<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span>
  <span class="keyword">,</span> parent<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span>
  <span class="keyword">,</span> children<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>ptr? &gt;&gt; opt <span class="keyword">(</span>XArray1 <span class="keyword">(</span>Window<span class="keyword">,</span> n<span class="keyword">)</span><span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> nchilren<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">;</span>n<span class="keyword">:</span>nat<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XQueryTree"
<span class="comment">// end of [XQueryTree]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="17935"><span class="stacstdec">XWindowAttributes <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XWindowAttributes" <span class="keyword">of</span> <span class="keyword">{</span>
  x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> uint<span class="keyword">,</span> height<span class="keyword">=</span> uint
<span class="keyword">,</span> border_width<span class="keyword">=</span> uint
<span class="keyword">,</span> depth<span class="keyword">=</span> int
<span class="comment">// , visual= Visual_ptr1
</span><span class="keyword">,</span> root<span class="keyword">=</span> Window
<span class="keyword">,</span> _class<span class="keyword">=</span> int
<span class="keyword">,</span> bit_gravity<span class="keyword">=</span> int
<span class="keyword">,</span> win_gravity<span class="keyword">=</span> int
<span class="keyword">,</span> backing_store<span class="keyword">=</span> int
<span class="keyword">,</span> backing_planes<span class="keyword">=</span> ulint
<span class="keyword">,</span> backing_pixel<span class="keyword">=</span> ulint
<span class="keyword">,</span> save_under<span class="keyword">=</span> bool
<span class="keyword">,</span> colormap<span class="keyword">=</span> Colormap
<span class="keyword">,</span> map_installed<span class="keyword">=</span> bool
<span class="keyword">,</span> map_state<span class="keyword">=</span> int
<span class="keyword">,</span> all_event_mask<span class="keyword">=</span> lint
<span class="keyword">,</span> your_event_mask<span class="keyword">=</span> lint
<span class="keyword">,</span> do_not_propagate_mask<span class="keyword">=</span> lint
<span class="keyword">,</span> override_redirect<span class="keyword">=</span> bool
<span class="comment">// , screen= Screen_ptr1
</span><span class="keyword">}</span></span></a></span> <span class="comment">// end of [XWindowAttributes]
</span>
<span class="keyword">fun</span> <a name="18480"><span class="dyncstdec">XGetWindowAttributes <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> attr<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XWindowAttributes? &gt;&gt; opt <span class="keyword">(</span>XWindowAttributes<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetWindowAttributes"

<span class="keyword">fun</span> <a name="18678"><span class="dyncstdec">XGetGeometry <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> root<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>uint? &gt;&gt; uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>uint? &gt;&gt; uint</span>
  <span class="keyword">,</span> border_width<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>uint? &gt;&gt; uint</span>
  <span class="keyword">,</span> depth<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>uint? &gt;&gt; uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Status</span></span></a> <span class="comment">// ...
</span>  <span class="keyword">=</span> "#atsctrb_XGetWindowAttributes"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 4.2: translating screen coordinates
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="19043"><span class="dyncstdec">XTranslateCoordinates <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win_src<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> win_dst<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> x_src<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y_src<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> x_dst<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">,</span> y_dst<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> child<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XTranslateCoordinates"

<span class="keyword">fun</span> <a name="19291"><span class="dyncstdec">XQueryPointer <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> root<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span><span class="keyword">,</span> child<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; Window</span>
  <span class="keyword">,</span> x_root<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">,</span> y_root<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> x_win<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span><span class="keyword">,</span> y_win<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>uint? &gt;&gt; uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">bool</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XQueryPointer"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 4.3: properties and atoms
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="19630"><span class="dyncstdec">XInternAtom <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> atom_name<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">,</span> only_if_exists<span class="keyword">:</span> <span class="staexp">bool</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Atom</span></span></a> <span class="keyword">=</span> "#atsctrb_XInternAtom"
<span class="comment">// end of [XInternAtom]
</span>
<span class="keyword">fun</span> <a name="19782"><span class="dyncstdec">XGetAtomName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> atom<span class="keyword">:</span> <span class="staexp">Atom</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">XString0</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetAtomName"
<span class="comment">// end of [XGetAtomName]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 4.4: obtaining and changing window properties
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 5: Pixmap and Cursor Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 5.1: creating and freeing pixmaps
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="20119"><span class="dyncstdec">XCreatePixmap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> depth<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Pixmap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreatePixmap"

<span class="keyword">fun</span> <a name="20272"><span class="dyncstdec">XFreePixmap
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> pixmap<span class="keyword">:</span> <span class="staexp">Pixmap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFreePixmap"
<span class="comment">// end of [XFreePixmap]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// 5.2: creating, recoloring and freeing cursors
</span><span class="comment">//
</span>
<span class="keyword">fun</span> <a name="20471"><span class="dyncstdec">XCreateFontCursor
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> shape<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Cursor</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreateFontCursor"

<span class="keyword">fun</span> <a name="20581"><span class="dyncstdec">XFreeCursor
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> cursor<span class="keyword">:</span> <span class="staexp">Cursor</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFreeCursor"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 6: Color Management Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.1: color structures
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="20799"><span class="stacstdec">XColor <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XColor" <span class="keyword">of</span> <span class="keyword">{</span>
  pixel<span class="keyword">=</span> ulint
<span class="keyword">,</span> red<span class="keyword">=</span> usint<span class="keyword">,</span> green<span class="keyword">=</span> usint<span class="keyword">,</span> blue<span class="keyword">=</span> usint
<span class="keyword">,</span> flags<span class="keyword">=</span> char<span class="keyword">,</span> pad<span class="keyword">=</span> char
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XColor]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.4: creating, copying and destroying
</span>
<span class="keyword">fun</span> <a name="21008"><span class="dyncstdec">XCreateColormap <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dsp<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> visual<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Visual_ptr l2</span><span class="keyword">,</span> alloc<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Colormap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreateColormap"

<span class="keyword">fun</span> <a name="21166"><span class="dyncstdec">XCopyColormapAndFree <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCopyColormapAndFree"

<span class="keyword">fun</span> <a name="21286"><span class="dyncstdec">XFreeColormap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFreeColormap"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.5: Mapping Color Names to Values
</span>
<span class="keyword">fun</span> <a name="21452"><span class="dyncstdec">XLookupColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> color_name<span class="keyword">:</span> <span class="staexp">string</span>
  <span class="keyword">,</span> exact_def<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor? &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> screen_def<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor? &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="comment">// nonzero if the name is resolved
</span>  <span class="keyword">=</span> "#atsctrb_XLookupColor"
<span class="comment">// end of [XLookupColor]
</span>
<span class="keyword">fun</span> <a name="21756"><span class="dyncstdec">XParseColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span>
  <span class="keyword">,</span> spec<span class="keyword">:</span> <span class="staexp">string</span>
  <span class="keyword">,</span> exact_def<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor? &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="comment">// nonzero if the name is resolved
</span>  <span class="keyword">=</span> "#atsctrb_XParseColor"
<span class="comment">// end of [XParseColor]
</span>
<span class="comment">(*
fun XcmsLookupColor (...)
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.6: Allocating and Freeing Color Cells
</span>
<span class="keyword">fun</span> <a name="22103"><span class="dyncstdec">XAllocColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> screen_in_out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XAllocColor"
<span class="comment">// end of [XAllocColor]
</span>
<span class="comment">(*
fun XcmsAllocColor (...)
*)</span>

<span class="keyword">fun</span> <a name="22332"><span class="dyncstdec">XAllocNamedColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span>
  <span class="keyword">,</span> color_name<span class="keyword">:</span> <span class="staexp">string</span>
  <span class="keyword">,</span> screen_def<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor? &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> exact_def<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor? &gt;&gt; opt <span class="keyword">(</span>XColor<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XAllocNamedColor"
<span class="comment">// end of [XAllocNamedColor]
</span>
<span class="comment">(*
fun XcmsAllocNamedColor (...)
*)</span>

<span class="comment">(*
fun XAllocColorCells (...)
fun XAllocColorPlanes (...)
*)</span>

<span class="comment">(*
fun XFreeColors (...)
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.7: Modifying and Querying Colormap Cells
</span>
<span class="keyword">fun</span> <a name="22812"><span class="dyncstdec">XStoreColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> color<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XStoreColor"
<span class="comment">// end of [XStoreColor]
</span>
<span class="keyword">fun</span> <a name="22959"><span class="dyncstdec">XStoreColors <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> colors<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XColor<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> ncolor<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XStoreColors"
<span class="comment">// end of [XStoreColors]
</span>
<span class="comment">(*
XcmsStoreColor (...)
XcmsStoreColors (...)
*)</span>

<span class="keyword">fun</span> <a name="23194"><span class="dyncstdec">XStoreNamedColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> color_name<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">,</span> pixel<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> flags<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XStoreNamedColor"
<span class="comment">// end of [XStoreNamedColor]
</span>
<span class="keyword">fun</span> <a name="23389"><span class="dyncstdec">XQueryColor <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
    <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> def_in_out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XColor &gt;&gt; XColor</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XQueryColor"
<span class="comment">// end of [XQueryColor]
</span>
<span class="keyword">fun</span> <a name="23556"><span class="dyncstdec">XQueryColors <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">,</span> defs_in_out<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XColor<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> ncolor<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XQueryColors"
<span class="comment">// end of [XQueryColors]
</span>
<span class="comment">(*
fun XcmsQueryColor (...)
fun XcmsQueryColors (...)
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.8: Color Conversion Context Functions
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.9: Converting Between Color Spaces
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.10: Callback functions
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.11: Gamut querying functions
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 6.12: Color management extensions
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 7: Graphics Context Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 7.1: Manipulating Graphics Context/State
</span>
<span class="keyword">macdef</span> <span class="neuexp">GCFunction <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCFunction"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCPlaneMask <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCPlaneMask"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCForeground <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCForeground"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCBackground <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCBackground"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCLineWidth <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCLineWidth"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCLineStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCLineStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCCapStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCCapStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCJoinStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCJoinStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCFillStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCFillStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCFillRule <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCFillRule"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCTile <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCTile"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCStipple <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCStipple"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCTileStipXOrigin <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCTileStipXOrigin"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCTileStipYOrigin <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCTileStipYOrigin"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCFont <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCFont"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCSubWindowMode <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCSubWindowMode"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCGraphicsExposures <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCGraphicsExposures"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCClipXOrigin <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCClipXOrigin"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCClipYOrigin <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCClipYOrigin"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCClipMask <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCClipMask"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCDashOffset <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCDashOffset"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCDashList <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCDashList"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">GCArcMode <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "GCArcMode"<span class="keyword">)</span></span>

<span class="keyword">typedef</span> <span class="staexp"><a name="25433"><span class="stacstdec">XGCValues <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XGCValues" <span class="keyword">of</span> <span class="keyword">{</span>
  function<span class="keyword">=</span> int
<span class="keyword">,</span> plane_mask<span class="keyword">=</span> ulint
<span class="keyword">,</span> foreground<span class="keyword">=</span> ulint
<span class="keyword">,</span> background<span class="keyword">=</span> ulint
<span class="keyword">,</span> line_width<span class="keyword">=</span> int
<span class="keyword">,</span> line_style<span class="keyword">=</span> int
<span class="keyword">,</span> cap_style<span class="keyword">=</span> int
<span class="keyword">,</span> join_style<span class="keyword">=</span> int
<span class="keyword">,</span> fill_style<span class="keyword">=</span> int
<span class="keyword">,</span> arc_mode<span class="keyword">=</span> int
<span class="keyword">,</span> tile<span class="keyword">=</span> Pixmap
<span class="keyword">,</span> stipple<span class="keyword">=</span> Pixmap
<span class="keyword">,</span> ts_x_origin <span class="keyword">=</span> int
<span class="keyword">,</span> ts_y_origin <span class="keyword">=</span> int
<span class="keyword">,</span> font<span class="keyword">=</span> Font
<span class="keyword">,</span> subwindow_mode<span class="keyword">=</span> int
<span class="keyword">,</span> graphics_exposures<span class="keyword">=</span> XBool
<span class="keyword">,</span> clip_x_origin<span class="keyword">=</span> int
<span class="keyword">,</span> clip_y_origin<span class="keyword">=</span> int
<span class="keyword">,</span> clip_mask<span class="keyword">=</span> Pixmap
<span class="keyword">,</span> dash_offset<span class="keyword">=</span> int
<span class="keyword">,</span> dashes<span class="keyword">=</span> char
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XGCValues]
</span>
<span class="keyword">fun</span> <a name="25921"><span class="dyncstdec">GCptr_is_null <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>p_dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool <span class="keyword">(</span>l == null<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ptr_is_null" <span class="comment">// defined in $ATSHOME/prelude/CATS/pointer.cats
</span><span class="keyword">fun</span> <a name="26058"><span class="dyncstdec">GCptr_isnot_null <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>p_dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool <span class="keyword">(</span>l <span class="keyword">&gt;</span> null<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atspre_ptr_isnot_null" <span class="comment">// defined in $ATSHOME/prelude/CATS/pointer.cats
</span>
<span class="keyword">fun</span> <a name="26201"><span class="dyncstdec">XCreateGC <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span> <span class="comment">// [values] can be uninitialized ...
</span>    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> values<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XGCValues?</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">GCptr1</span></span></a> <span class="comment">// HX-2010-04-18: should it be GCptr0?
</span>  <span class="keyword">=</span> "#atsctrb_XCreateGC"
<span class="comment">// end of [XCreateGC]
</span>
<span class="keyword">fun</span> <a name="26435"><span class="dyncstdec">XCopyGC <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">,</span>l3<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> src<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> dst<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l3</span><span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCopyGC"
<span class="comment">// end of [XCopyGC]
</span>
<span class="keyword">fun</span> <a name="26582"><span class="dyncstdec">XChangeGC <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> values<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XGCValues</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XChangeGC"
<span class="comment">// end of [XChangeGC]
</span>
<span class="keyword">fun</span> <a name="26735"><span class="dyncstdec">XGetGCValues <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> values<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XGCValues? &gt;&gt; XGCValues</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetGCValues"
<span class="comment">// end of [XGetGCValues]
</span>
<span class="keyword">fun</span> <a name="26916"><span class="dyncstdec">XFreeGC <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp">GCptr l2</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFreeGC"
<span class="comment">// end of [XFreeGC]
</span>
<span class="keyword">fun</span> <a name="27027"><span class="dyncstdec">XFlushGC <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFlushGC"
<span class="comment">// end of [XFlushGC]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 7.2: Using GC convenience routines
</span>
<span class="keyword">fun</span> <a name="27202"><span class="dyncstdec">XSetForeground <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> foreground<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetForeground"
<span class="comment">// end of [XSetForeground]
</span>
<span class="keyword">fun</span> <a name="27356"><span class="dyncstdec">XSetBackground <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> background<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetBackground"
<span class="comment">// end of [XSetBackground]                                    
</span>
<span class="keyword">fun</span> <a name="27546"><span class="dyncstdec">XSetFunction <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> _function<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetFunction"
<span class="comment">// end of [XSetFunction]                                    
</span>
<span class="keyword">fun</span> <a name="27727"><span class="dyncstdec">XSetPlaneMask <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> plane_mask<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetPlaneMask"
<span class="comment">// end of [XSetPlaneMask]                                    
</span>
<span class="keyword">fun</span> <a name="27914"><span class="dyncstdec">XSetFont <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> font<span class="keyword">:</span> <span class="staexp">Font</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetFont"
<span class="comment">// end of [XSetFont]
</span>
<span class="keyword">fun</span> <a name="28043"><span class="dyncstdec">XSetLineAttributes <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> line_width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> line_style<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> cap_style<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> join_style<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetLineAttributes"
<span class="comment">// end of [XSetLineAttributes]
</span>
<span class="keyword">fun</span> <a name="28266"><span class="dyncstdec">XSetDashes <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> dash_offset<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> dash_list<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>char<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetDashes"
<span class="comment">// end of [XSetDashes]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 8: Graphics Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.1: Clearing Areas
</span>
<span class="keyword">fun</span> <a name="28567"><span class="dyncstdec">XClearArea <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dsp<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> exposures<span class="keyword">:</span> <span class="staexp">XBool</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XClearArea"

<span class="keyword">fun</span> <a name="28740"><span class="dyncstdec">XClearWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dsp<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XClearWindow"
<span class="comment">// end of [XClearWindow]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.2: Copying Areas
</span>
<span class="keyword">fun</span> <a name="28905"><span class="dyncstdec">XCopyArea
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> src<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> dst<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x_src<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y_src<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> x_dst<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y_dst<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCopyArea"

<span class="keyword">fun</span> <a name="29132"><span class="dyncstdec">XCopyPlane
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> src<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> dst<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x_src<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y_src<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">,</span> x_dst<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y_dst<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> plane<span class="keyword">:</span> <span class="staexp">ulint</span> <span class="comment">// set exactly one-bit to 1
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCopyPlane"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.3: Drawing Points, Lines, Rectangles and Arcs
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="29483"><span class="stacstdec">XSegment <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XSegment" <span class="keyword">of</span> <span class="keyword">{</span>
  x1<span class="keyword">=</span> sint<span class="keyword">,</span> y1<span class="keyword">=</span> sint<span class="keyword">,</span> x2<span class="keyword">=</span> sint<span class="keyword">,</span> y2<span class="keyword">=</span> sint
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XSegment]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="29600"><span class="stacstdec">XPoint <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XPoint" <span class="keyword">of</span> <span class="keyword">{</span> x<span class="keyword">=</span> sint<span class="keyword">,</span> y<span class="keyword">=</span> sint <span class="keyword">}</span></span></a></span>
<span class="comment">// end of [XPoint]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="29687"><span class="stacstdec">XRectangle <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XRectangle" <span class="keyword">of</span> <span class="keyword">{</span>
  x<span class="keyword">=</span> sint<span class="keyword">,</span> y<span class="keyword">=</span> sint<span class="keyword">,</span> width<span class="keyword">=</span> usint<span class="keyword">,</span> height<span class="keyword">=</span> usint
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XRectangle]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="29817"><span class="stacstdec">XArc <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XArc" <span class="keyword">of</span> <span class="keyword">{</span>
  x<span class="keyword">=</span> sint<span class="keyword">,</span> y<span class="keyword">=</span> sint
<span class="keyword">,</span> width<span class="keyword">=</span> usint<span class="keyword">,</span> height<span class="keyword">=</span> usint
<span class="keyword">,</span> angle1<span class="keyword">=</span> sint<span class="keyword">,</span> angle2<span class="keyword">=</span> sint <span class="comment">// uint: 1/64 degree
</span><span class="keyword">}</span></span></a></span> <span class="comment">// end of [XArc]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.3.1: Drawing Single and Multiple Points
</span>
<span class="keyword">fun</span> <a name="30043"><span class="dyncstdec">XDrawPoint <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawPoint"
<span class="comment">// end of [XDrawPoint]
</span>
<span class="keyword">fun</span> <a name="30202"><span class="dyncstdec">XDrawPoints <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> points<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XPoint<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawPoints"
<span class="comment">// end of [XDrawPoints]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.3.2: Drawing Single and Multiple Lines
</span>
<span class="keyword">fun</span> <a name="30471"><span class="dyncstdec">XDrawLine <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> x1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y2<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawLine"
<span class="comment">// end of [XDrawLine]
</span>
<span class="keyword">fun</span> <a name="30650"><span class="dyncstdec">XDrawLines <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> points<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XPoint<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawLines"
<span class="comment">// end of [XDrawLines]
</span>
<span class="keyword">fun</span> <a name="30850"><span class="dyncstdec">XDrawSegments <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> segments<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XSegment<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawSegments"
<span class="comment">// end of [XDrawSegments]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.3.3: Drawing Single and Multiple Rectangles
</span>
<span class="keyword">fun</span> <a name="31123"><span class="dyncstdec">XDrawRectangle <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawRectangle"
<span class="comment">// end of [XDrawRectangle]
</span>
<span class="keyword">fun</span> <a name="31324"><span class="dyncstdec">XDrawRectangles <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> rectangles<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XRectangle<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawRectangles"
<span class="comment">// end of [XDrawRectangles]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.3.4: Drawing Single and Multiple Arcs
</span>
<span class="keyword">fun</span> <a name="31601"><span class="dyncstdec">XDrawArc <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> angle1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> angle2<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawArc"
<span class="comment">// end of [XDrawArc]
</span>
<span class="keyword">fun</span> <a name="31813"><span class="dyncstdec">XDrawArcs <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> arcs<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XArc<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawArcs"
<span class="comment">// end of [XDrawArcs]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.4: Filling Areas
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.4.1: Filling Single and Multiple Rectangles
</span>
<span class="keyword">fun</span> <a name="32110"><span class="dyncstdec">XFillRectangle <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFillRectangle"
<span class="comment">// end of [XFillRectangle]
</span>
<span class="keyword">fun</span> <a name="32311"><span class="dyncstdec">XFillRectangles <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> rectangles<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XRectangle<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFillRectangles"
<span class="comment">// end of [XFillRectangles]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.4.2: Filling a Single Polygon
</span>
<span class="keyword">fun</span> <a name="32580"><span class="dyncstdec">XFillPolygon <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> points<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XPoint<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">,</span> shape<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFillPolygon"
<span class="comment">// end of [XFillPolygon]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.4.3: Filling Single and Multiple Arcs
</span>
<span class="keyword">fun</span> <a name="32866"><span class="dyncstdec">XFillArc <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> angle1<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> angle2<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFillArc"
<span class="comment">// end of [XFillArc]
</span>
<span class="keyword">fun</span> <a name="33078"><span class="dyncstdec">XFillArcs <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span><span class="keyword">,</span> arcs<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XArc<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFillArcs"
<span class="comment">// end of [XFillArcs]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.5: Font Metrics
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="33307"><span class="stacstdec">XCharStruct <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XCharStruct" <span class="keyword">of</span> <span class="keyword">{</span>
  lbearing<span class="keyword">=</span> sint<span class="keyword">,</span> rbearing<span class="keyword">=</span> sint
<span class="keyword">,</span> width<span class="keyword">=</span> sint<span class="keyword">,</span> ascent<span class="keyword">=</span> sint<span class="keyword">,</span> descent<span class="keyword">=</span> sint
<span class="keyword">,</span> attributes<span class="keyword">=</span> usint
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XCharStruct]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="33488"><span class="stacstdec">XFontProp <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XFontProp" <span class="keyword">of</span> <span class="keyword">{</span> name<span class="keyword">=</span> Atom<span class="keyword">,</span> card32<span class="keyword">=</span> ulint <span class="keyword">}</span></span></a></span>
<span class="comment">// end of [XFontProp]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="33593"><span class="stacstdec">XChar2b <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XChar2b" <span class="keyword">of</span> <span class="keyword">{</span> byte1<span class="keyword">=</span> uchar<span class="keyword">,</span> byte2<span class="keyword">=</span> uchar <span class="keyword">}</span></span></a></span>
<span class="comment">// end of [XChar2b]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="33693"><span class="stacstdec">XFontStruct <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XFontStruct" <span class="keyword">of</span> <span class="keyword">{</span>
  XExtData<span class="keyword">=</span> ptr
<span class="keyword">,</span> fid<span class="keyword">=</span> Font
<span class="keyword">,</span> direction<span class="keyword">=</span> uint
<span class="keyword">,</span> min_char_or_byte2<span class="keyword">=</span> uint
<span class="keyword">,</span> max_char_or_byte2<span class="keyword">=</span> uint
<span class="keyword">,</span> min_byte1<span class="keyword">=</span> uint
<span class="keyword">,</span> max_byte1<span class="keyword">=</span> uint
<span class="keyword">,</span> all_chars_exist<span class="keyword">=</span> XBool
<span class="keyword">,</span> default_char<span class="keyword">=</span> uint
<span class="comment">// , n_properties= int n
</span><span class="comment">// , properties= ptr l_properties // @[XFontProp][n] @ l_properties
</span><span class="keyword">,</span> min_bounds<span class="keyword">=</span> XCharStruct
<span class="keyword">,</span> max_bounds<span class="keyword">=</span> XCharStruct
<span class="comment">// , per_char= ptr // XCharStruct*
</span><span class="keyword">,</span> ascent<span class="keyword">=</span> int
<span class="keyword">,</span> descent<span class="keyword">=</span> int
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XFontStruct]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.5.1: Loading and Freeing Fonts
</span>
<span class="keyword">absview</span> <span class="staexp"><a name="34223"><span class="stacstdec">XFreeFont_v</span></a></span> <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span>
<span class="keyword">prfun</span> <a name="34250"><span class="dyncstdec"><span class="prfexp">XFreeFont_v_unnull <span class="keyword">(</span>pf<span class="keyword">:</span> <span class="staexp">XFreeFont_v null</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></span></a>

<span class="keyword">fun</span> <a name="34303"><span class="dyncstdec">XLoadFont <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> name<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Font</span></span></a> <span class="keyword">=</span> "#atsctrb_XLoadFont"
<span class="comment">// end of [XLoadFont]
</span>
<span class="keyword">fun</span> <a name="34415"><span class="dyncstdec">XQueryFont <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> font_id<span class="keyword">:</span> <span class="staexp">XID</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> <span class="keyword">(</span>XFreeFont_v l<span class="keyword">,</span> ptropt_v <span class="keyword">(</span>XFontStruct<span class="keyword">,</span> l<span class="keyword">)</span> <span class="keyword">|</span> ptr l<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XQueryFont"
<span class="comment">// end of [XQueryFont]
</span>
<span class="keyword">fun</span> <a name="34590"><span class="dyncstdec">XLoadQueryFont <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> name<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l<span class="keyword">:</span>agez<span class="keyword">]</span> <span class="keyword">(</span>XFreeFont_v l<span class="keyword">,</span> ptropt_v <span class="keyword">(</span>XFontStruct<span class="keyword">,</span> l<span class="keyword">)</span> <span class="keyword">|</span> ptr l<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XLoadQueryFont"
<span class="comment">// end of [XLoadQueryFont]
</span>
<span class="keyword">fun</span> <a name="34777"><span class="dyncstdec">XFreeFont <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>
    <span class="prfexp">pf1<span class="keyword">:</span> <span class="staexp">XFreeFont_v l2</span></span><span class="keyword">,</span> <span class="prfexp">pf2<span class="keyword">:</span> <span class="staexp">XFontStruct @ l2</span></span> <span class="keyword">|</span> dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span><span class="keyword">,</span> p_font_struct<span class="keyword">:</span> <span class="staexp">ptr l2</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a>  <span class="keyword">=</span> "#atsctrb_XFreeFont"
<span class="comment">// end of [XFreeFont]
</span>            
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.5.3: Computing Character String Sizes
</span>
<span class="keyword">fun</span> <a name="35034"><span class="dyncstdec">XTextWidth <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>ftinfo<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XFontStruct</span><span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">string n</span><span class="keyword">,</span> nstr<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XTextWidth"
<span class="comment">// end of [XTextWidth]
</span>
<span class="keyword">fun</span> <a name="35165"><span class="dyncstdec">XTextWidth16 <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>ftinfo<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XFontStruct</span><span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">array <span class="keyword">(</span>XChar2b<span class="keyword">,</span> n<span class="keyword">)</span></span><span class="keyword">,</span> nstr<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XTextWidth16"
<span class="comment">// end of [XTextWidth]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.6: Drawing Text
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.6.2: Drawing Text Characters
</span>
<span class="keyword">fun</span> <a name="35409"><span class="dyncstdec">XDrawString
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">string n</span>
  <span class="keyword">,</span> len<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawString"
<span class="comment">// end of [XDrawString]
</span>
<span class="keyword">fun</span> <a name="35623"><span class="dyncstdec">XDrawString16
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">array <span class="keyword">(</span>XChar2b<span class="keyword">,</span> n<span class="keyword">)</span></span>
  <span class="keyword">,</span> len<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawString16"
<span class="comment">// end of [XDrawString16]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 8.6.3: Drawing Image Characters
</span>
<span class="keyword">fun</span> <a name="35910"><span class="dyncstdec">XDrawImageString
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">string n</span>
  <span class="keyword">,</span> len<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawImageString"
<span class="comment">// end of [XDrawImageString]
</span>
<span class="keyword">fun</span> <a name="36139"><span class="dyncstdec">XDrawImageString16
  <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l1</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span>
  <span class="keyword">,</span> gc<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>GCptr l2</span>
  <span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">,</span> str<span class="keyword">:</span> <span class="staexp">array <span class="keyword">(</span>XChar2b<span class="keyword">,</span> n<span class="keyword">)</span></span>
  <span class="keyword">,</span> len<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDrawImageString16"
<span class="comment">// end of [XDrawImageString16]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 9: Window and Session Manager Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.1: Changing the parent of a window
</span>
<span class="keyword">fun</span> <a name="36525"><span class="dyncstdec">XReparentWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> parent<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> y<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XReparentWindow"
<span class="comment">// end of [XReparentWindow]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.2: Controlling the Lifetime of a Window
</span>
<span class="keyword">fun</span> <a name="36755"><span class="dyncstdec">XChangeSaveSet <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XChangeSaveSet"
<span class="comment">// end of [atsctrb_XChangeSaveSet]
</span>
<span class="keyword">fun</span> <a name="36902"><span class="dyncstdec">XAddSaveSet <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XAddSaveSet"
<span class="comment">// end of [XAddSaveSet]
</span>
<span class="keyword">fun</span> <a name="37019"><span class="dyncstdec">XRemoveFromSaveSet <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XRemoveFromSaveSet"
<span class="comment">// end of [XRemoveFromSaveSet]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.3: Managing installed colormaps
</span>
<span class="keyword">fun</span> <a name="37216"><span class="dyncstdec">XInstallColormap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XInstallColormap"
<span class="comment">// end of [XInstallColormap]
</span>
<span class="keyword">fun</span> <a name="37355"><span class="dyncstdec">XUninstallColormap <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> colormap<span class="keyword">:</span> <span class="staexp">Colormap</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XUninstallColormap"
<span class="comment">// end of [XUninstallColormap]
</span>
<span class="keyword">fun</span> <a name="37500"><span class="dyncstdec">XListInstalledColormaps <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> nmap<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> la <span class="keyword">&gt;</span> null<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>n<span class="keyword">:</span>nat<span class="keyword">;</span>la<span class="keyword">:</span>addr<span class="keyword">]</span> XArray <span class="keyword">(</span>Colormap<span class="keyword">,</span> n<span class="keyword">,</span> la<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XListInstalledColormaps"
<span class="comment">// end of [XListInstalledColormaps]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.4: Setting and Retrieving the Fond Search Path
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.5: Server Grabbing
</span>
<span class="keyword">fun</span> <a name="37858"><span class="dyncstdec">XGrabServer <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XGrabServer"
<span class="comment">// end of [XGrabServer]
</span>
<span class="keyword">fun</span> <a name="37962"><span class="dyncstdec">XUngrabServer <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XUngrabServer"
<span class="comment">// end of [XUngrabServer]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.6: Killing Clients
</span>
<span class="keyword">fun</span> <a name="38118"><span class="dyncstdec">XKillClient <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> resource<span class="keyword">:</span> <span class="staexp">XID</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XKillClient"
<span class="comment">// end of [XKillClient]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.7: Screen Saver Control
</span>
<span class="keyword">fun</span> <a name="38288"><span class="dyncstdec">XSetScreenSaver <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> timeout<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> interval<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> prefer_blanking<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> allow_exposures<span class="keyword">:</span> <span class="staexp">int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetScreenSaver"
<span class="comment">// end of [XSetScreenSaver]
</span>
<span class="keyword">fun</span> <a name="38487"><span class="dyncstdec">XForceScreenSaver
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XForceScreenSaver"
<span class="comment">// end of [XForceScreenSaver]
</span>
<span class="keyword">fun</span> <a name="38620"><span class="dyncstdec">XActivateScreenSaver
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XActivateScreenSaver"
<span class="comment">// end of [XActivateScreenSaver]
</span>
<span class="keyword">fun</span> <a name="38751"><span class="dyncstdec">XResetScreenSaver
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XResetScreenSaver"
<span class="comment">// end of [XResetScreenSaver]
</span>
<span class="keyword">fun</span> <a name="38873"><span class="dyncstdec">XGetScreenSaver <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> timeout<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> interval<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> prefer_blanking<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">,</span> allow_exposures<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; int</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetScreenSaver"
<span class="comment">// end of [XGetScreenSaver]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.8: Controlling Host Access
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.8.1: Adding, Getting or Removing Hosts
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="39241"><span class="stacstdec">XHostAddress <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XHostAddress" <span class="keyword">of</span> <span class="keyword">{</span>
  family<span class="keyword">=</span> int
<span class="keyword">,</span> length<span class="keyword">=</span> int
<span class="keyword">,</span> address<span class="keyword">=</span> string
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XHostAddress]
</span>
<span class="keyword">fun</span> <a name="39369"><span class="dyncstdec">XAddHost <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> host<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XHostAddress</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XAddHost"
<span class="comment">// end of [XAddHost]
</span>
<span class="keyword">fun</span> <a name="39485"><span class="dyncstdec">XAddHosts <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> hosts<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XHostAddress<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XAddHosts"
<span class="comment">// end of [XAddHosts]
</span>
<span class="keyword">fun</span> <a name="39633"><span class="dyncstdec">XListHosts <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> nhost<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> la <span class="keyword">&gt;</span> null<span class="keyword">)</span></span>
  <span class="keyword">,</span> state<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XBool? &gt;&gt; opt <span class="keyword">(</span>XBool<span class="keyword">,</span> la <span class="keyword">&gt;</span> null<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>n<span class="keyword">:</span>nat<span class="keyword">;</span>la<span class="keyword">:</span>addr<span class="keyword">]</span> XArray <span class="keyword">(</span>XHostAddress<span class="keyword">,</span> n<span class="keyword">,</span> la<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XListHosts"
<span class="comment">// end of [XListHosts]
</span>
<span class="keyword">fun</span> <a name="39872"><span class="dyncstdec">XRemoveHost <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> host<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XHostAddress</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRemoveHost"
<span class="comment">// end of [XRemoveHost]
</span>
<span class="keyword">fun</span> <a name="39999"><span class="dyncstdec">XRemoveHosts <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> hosts<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>XHostAddress<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XRemoveHosts"
<span class="comment">// end of [XRemoveHosts]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 9.8.2: Changing, Enabling or Disabling Access Control
</span>
<span class="keyword">fun</span> <a name="40235"><span class="dyncstdec">XSetAccessControl <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetAccessControl"
<span class="comment">// end of [XSetAccessControl]
</span>
<span class="keyword">fun</span> <a name="40368"><span class="dyncstdec">XEnableAccessControl <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XEnableAccessControl"
<span class="comment">// end of [XEnableAccessControl]
</span>
<span class="keyword">fun</span> <a name="40499"><span class="dyncstdec">XDisableAccessControl <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XDisableAccessControl"
<span class="comment">// end of [XDisableAccessControl]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 10: Events
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">abst@ype</span> <span class="staexp"><a name="40709"><span class="stacstdec">XEvent_rest</span></a></span> <span class="comment">// unknown quantity
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="40750"><span class="stacstdec">XEvent <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t <span class="comment">// the type of the event
</span><span class="keyword">,</span> _rest<span class="keyword">=</span> XEvent_rest <span class="comment">// this abstract field cannot be accessed
</span><span class="keyword">}</span></span></a></span> <span class="comment">// end of [XEvent]
</span>
<span class="keyword">propdef</span> <span class="staexp"><a name="40928"><span class="stacstdec">XEvent_castdn_t <span class="keyword">(</span>a<span class="keyword">:</span>t@ype<span class="keyword">)</span> <span class="keyword">=</span> <span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span>
  <span class="keyword">(</span>XEvent @ l<span class="keyword">)</span> <span class="keyword">-&lt;</span>prf<span class="keyword">&gt;</span> <span class="keyword">(</span>a @ l<span class="keyword">,</span> a @ l <span class="keyword">-&lt;</span>lin<span class="keyword">,</span>prf<span class="keyword">&gt;</span> XEvent @ l<span class="keyword">)</span></span></a></span>
<span class="comment">// end of [XEvent_castdn_t]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.2: Event Structures
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="41109"><span class="stacstdec">XAnyEvent <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XAnyEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial <span class="keyword">=</span> ulint <span class="comment">// # of last request processed by server
</span><span class="keyword">,</span> send_event<span class="keyword">=</span> XBool <span class="comment">// true if this comes from a SendEvent request
</span><span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XAnyEvent]
</span>
<span class="keyword">praxi</span> <a name="41412"><span class="dyncstdec"><span class="prfexp">XEvent_xany_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XAnyEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.5: Keyboard and Pointer Events
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="keyword">typedef</span> <span class="staexp"><a name="41550"><span class="stacstdec">XKeyEvent <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XKeyEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // display from which the event was read
*/</span>
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="comment">// individual section
</span><span class="keyword">,</span> root<span class="keyword">=</span> Window
<span class="keyword">,</span> subwindow<span class="keyword">=</span> Window
<span class="comment">/*
, time= Time
*/</span>
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> x_root<span class="keyword">=</span> int<span class="keyword">,</span> y_root<span class="keyword">=</span> int
<span class="keyword">,</span> state<span class="keyword">=</span> uint
<span class="keyword">,</span> keycode<span class="keyword">=</span> uint
<span class="keyword">,</span> same_screen<span class="keyword">=</span> XBool  
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XKeyEvent]
</span>
<span class="keyword">praxi</span> <a name="41942"><span class="dyncstdec"><span class="prfexp">XEvent_xkey_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XKeyEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="42004"><span class="stacstdec">XKeyPressedEvent <span class="keyword">=</span> XKeyEvent</span></a></span>
<span class="keyword">typedef</span> <span class="staexp"><a name="42041"><span class="stacstdec">XKeyReleasedEvent <span class="keyword">=</span> XKeyEvent</span></a></span>

<span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="42084"><span class="stacstdec">XButtonEvent <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XButtonEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="comment">// individual section
</span><span class="keyword">,</span> root<span class="keyword">=</span> Window
<span class="keyword">,</span> subwindow<span class="keyword">=</span> Window
<span class="comment">/*
, time= Time
*/</span>
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> x_root<span class="keyword">=</span> int<span class="keyword">,</span> y_root<span class="keyword">=</span> int
<span class="keyword">,</span> state<span class="keyword">=</span> uint
<span class="keyword">,</span> button<span class="keyword">=</span> uint
<span class="keyword">,</span> same_screen<span class="keyword">=</span> XBool
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XButtonEvent]
</span>
<span class="keyword">praxi</span> <a name="42477"><span class="dyncstdec"><span class="prfexp">XEvent_xbutton_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XButtonEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="42545"><span class="stacstdec">XMotionEvent <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XMotionEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="comment">// individual section
</span><span class="keyword">,</span> root<span class="keyword">=</span> Window
<span class="keyword">,</span> subwindow<span class="keyword">=</span> Window
<span class="comment">/*
, time= Time
*/</span>
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> x_root<span class="keyword">=</span> int<span class="keyword">,</span> y_root<span class="keyword">=</span> int
<span class="keyword">,</span> state<span class="keyword">=</span> uint
<span class="keyword">,</span> in_hint<span class="keyword">=</span> char
<span class="keyword">,</span> same_screen<span class="keyword">=</span> XBool  
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XMotionEvent]
</span>
<span class="keyword">praxi</span> <a name="42941"><span class="dyncstdec"><span class="prfexp">XEvent_xmotion_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XMotionEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.6: Window Entry/Exit Events
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.7: Input Focus Events
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.8: Key Map State Notification Events
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.9: Exposure Events
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="43223"><span class="stacstdec">XExposeEvent <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XExposeEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="comment">// individual section
</span><span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> int<span class="keyword">,</span> height<span class="keyword">=</span> int
<span class="keyword">,</span> count<span class="keyword">=</span> int  
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XExposeEvent]
</span>
<span class="keyword">praxi</span> <a name="43526"><span class="dyncstdec"><span class="prfexp">XEvent_xexpose_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XExposeEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.10: Window State Change Events
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.10.1: CirculateNotify Events
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="43706"><span class="stacstdec">XCirculateEvent <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XCirculateEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="comment">// individual section
</span><span class="keyword">,</span> event<span class="keyword">=</span> Window
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="keyword">,</span> place<span class="keyword">=</span> int  
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XCirculateEvent]
</span>
<span class="keyword">praxi</span> <a name="43993"><span class="dyncstdec"><span class="prfexp">XEvent_xcirculate_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XCirculateEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.10.2: ConfigureNotify Events
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="44120"><span class="stacstdec">XConfigureEvent <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XConfigureEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="comment">// individual section
</span><span class="keyword">,</span> event<span class="keyword">=</span> Window
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> int<span class="keyword">,</span> height<span class="keyword">=</span> int
<span class="keyword">,</span> border_width<span class="keyword">=</span> int
<span class="keyword">,</span> above<span class="keyword">=</span> Window
<span class="keyword">,</span> override_redirect<span class="keyword">=</span> XBool
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XConfigureEvent]
</span>
<span class="keyword">praxi</span> <a name="44498"><span class="dyncstdec"><span class="prfexp">XEvent_xconfigure_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XConfigureEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.10.2: CreateNotify Events
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="44622"><span class="stacstdec">XCreateWindowEvent <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XCreateWindowEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="comment">// individual section
</span><span class="keyword">,</span> parent<span class="keyword">=</span> Window
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> int<span class="keyword">,</span> height<span class="keyword">=</span> int
<span class="keyword">,</span> border_width<span class="keyword">=</span> int
<span class="keyword">,</span> override_redirect<span class="keyword">=</span> XBool
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XCreateWindowEvent]
</span>
<span class="keyword">praxi</span> <a name="44994"><span class="dyncstdec"><span class="prfexp">XEvent_xcreatewindow_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XCreateWindowEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 10.10.2: DestroyNotify Events
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="45125"><span class="stacstdec">XDestroyWindowEvent <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XDestroyWindowEvent" <span class="keyword">of</span> <span class="keyword">{</span>
  type<span class="keyword">=</span> EventType_t
<span class="keyword">,</span> serial<span class="keyword">=</span> ulint
<span class="keyword">,</span> send_event<span class="keyword">=</span> XBool
<span class="comment">/*
, display= Display_ptr0 // Display the event was read freom
*/</span>
<span class="comment">// individual section
</span><span class="keyword">,</span> event<span class="keyword">=</span> Window
<span class="keyword">,</span> window<span class="keyword">=</span> Window
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XDestroyWindowEvent]
</span>
<span class="keyword">praxi</span> <a name="45426"><span class="dyncstdec"><span class="prfexp">XEvent_xdestroywindow_castdn <span class="keyword">:</span> <span class="staexp">XEvent_castdn_t <span class="keyword">(</span>XDestroyWindowEvent<span class="keyword">)</span></span></span></span></a>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 11: Event Handling Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 11.1: selecting events
</span>
<span class="keyword">fun</span> <a name="45616"><span class="dyncstdec">XSelectInput <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> eventmask<span class="keyword">:</span> <span class="staexp">InputEventMask_t</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSelectInput"
<span class="comment">// end of [XSelectInput]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 11.2: handling the output buffer
</span>
<span class="keyword">fun</span> <a name="45825"><span class="dyncstdec">XFlush <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFlush"
<span class="comment">// end of [XFlush]
</span>
<span class="keyword">fun</span> <a name="45914"><span class="dyncstdec">XSync <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> discard<span class="keyword">:</span> <span class="staexp">bool</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSync"
<span class="comment">// end of [XSync]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 11.3: Event Queue Management
</span>
<span class="keyword">macdef</span> <span class="neuexp">QueuedAlready <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "QueuedAlready"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">QueuedAfterReading <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "QueuedAfterReading"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">QueuedAfterFlush <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "QueuedAfterFlush"<span class="keyword">)</span></span>

<span class="keyword">fun</span> <a name="46248"><span class="dyncstdec">XEventsQueued <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp">Display_ptr l</span><span class="keyword">,</span> mode<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XEventsQueued"
<span class="comment">// end of [XEventsQueued]
</span>
<span class="comment">// this one is equivalent to XEventsQueued (QueuedAfterFlush)
</span><span class="keyword">fun</span> <a name="46429"><span class="dyncstdec">XPending <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp">Display_ptr l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">int</span></span></a> <span class="keyword">=</span> "#atsctrb_XPending"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 11.4: manipulating the event queue
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 11.4.1: returning the next event
</span>
<span class="keyword">fun</span> <a name="46617"><span class="dyncstdec">XNextEvent <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> event<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XEvent? &gt;&gt; XEvent</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XNextEvent"
<span class="comment">// end of [XNextEvent]
</span>
<span class="keyword">fun</span> <a name="46745"><span class="dyncstdec">XPeekEvent <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> event<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XEvent? &gt;&gt; XEvent</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XPeekEvent"
<span class="comment">// end of [XPeekEvent]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 14: Inter-client communication functions
</span><span class="comment">//
</span>
<span class="comment">// source: "X11/Xutil.h"
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1: Client to Window Manage Communication
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="47052"><span class="stacstdec">XTextProperty <span class="keyword">(</span>l<span class="keyword">:</span>addr<span class="keyword">)</span> <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XTextProperty" <span class="keyword">of</span> <span class="keyword">{</span>
  value<span class="keyword">=</span> ptr l <span class="comment">// property data
</span><span class="keyword">,</span> encoding<span class="keyword">=</span> Atom <span class="comment">// type of property
</span><span class="keyword">,</span> format<span class="keyword">=</span> int <span class="comment">// 8, 16, or 32
</span><span class="keyword">,</span> nitems<span class="keyword">=</span> ulint <span class="comment">// number of items in value
</span><span class="keyword">}</span></span></a></span> <span class="comment">// end of [XTextProperty]
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="47295"><span class="stacstdec">XTextProperty <span class="keyword">=</span> <span class="keyword">[</span>l<span class="keyword">:</span>addr<span class="keyword">]</span> XTextProperty l</span></a></span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// this is an enum type
</span><span class="keyword">abst@ype</span> <span class="staexp"><a name="47391"><span class="stacstdec">XICCEncodingStyle <span class="keyword">=</span> <span class="keyword">$extype</span> "XICCEncodingStyle"</span></a></span>

<span class="keyword">macdef</span> <span class="neuexp">XStringStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>XICCEncodingStyle<span class="keyword">,</span> "XStringStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">XCompoundTextStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>XICCEncodingStyle<span class="keyword">,</span> "XCompoundTextStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">XTextStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>XICCEncodingStyle<span class="keyword">,</span> "XTextStyle"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">XStdICCTextStyle <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>XICCEncodingStyle<span class="keyword">,</span> "XStdICCTextStyle"<span class="keyword">)</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.1: Manipulating Top-Level Windows
</span>
<span class="keyword">fun</span> <a name="47789"><span class="dyncstdec">XIconifyWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Status</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XIconifyWindow"
<span class="comment">// end of [XIconifyWindow]
</span>
<span class="keyword">fun</span> <a name="47930"><span class="dyncstdec">XWithdrawWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">Status</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XWithdrawWindow"
<span class="comment">// end of [XWithdrawWindow]
</span>
<span class="keyword">fun</span> <a name="48074"><span class="dyncstdec">XReconfigureWMWindow <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> nscr<span class="keyword">:</span> <span class="staexp">int</span><span class="keyword">,</span> mask<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> values<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XWindowChanges?</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Status</span></span></a> <span class="keyword">=</span> "#atsctrb_XReconfigureWMWindow"
<span class="comment">// end of [XReconfigureWMWindow]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.2: Converting String Lists
</span>
<span class="keyword">fun</span> <a name="48336"><span class="dyncstdec">XDefaultString <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">string</span></span></a> <span class="keyword">=</span> "#atsctrb_XDefaultString"

<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="48399"><span class="dyncstdec">XStringToTextProperty <span class="keyword">(</span>
    str<span class="keyword">:</span> <span class="staexp">string</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty? &gt;&gt; opt <span class="keyword">(</span>XTextProperty l<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">;</span>l<span class="keyword">:</span>addr<span class="keyword">]</span> <span class="keyword">(</span>XFree_v l <span class="keyword">|</span> Status i<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "atsctrb_XStringToTextProperty"
<span class="comment">// end of [XStringToTextProperty]
</span>
<span class="keyword">fun</span> <a name="48618"><span class="dyncstdec">XStringListToTextProperty <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    list<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>string<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span><span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty? &gt;&gt; opt <span class="keyword">(</span>XTextProperty l<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">;</span>l<span class="keyword">:</span>addr<span class="keyword">]</span> <span class="keyword">(</span>XFree_v l <span class="keyword">|</span> Status i<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XStringListToTextProperty"
<span class="comment">// end of [XStringListToTextProperty]
</span>
<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="48882"><span class="dyncstdec">XTextPropertyToStringList <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>
    text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty l</span>
  <span class="keyword">,</span> list<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XStrarr? &gt;&gt; opt <span class="keyword">(</span>XStrarr1 n<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> n<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>int? &gt;&gt; opt <span class="keyword">(</span>int n<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">;</span>n<span class="keyword">:</span>nat<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XTextPropertyToStringList"
<span class="comment">// end of [XTextPropertyToStringList]
</span>
<span class="keyword">fun</span> <a name="49142"><span class="dyncstdec">XFreeStringList
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>list<span class="keyword">:</span> <span class="staexp">XStrarr <span class="keyword">(</span>n<span class="keyword">,</span> l<span class="keyword">)</span></span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XFreeStringList"
<span class="comment">// end of [XFreeStringList]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.3: Setting and Reading Text Properties
</span>
<span class="keyword">fun</span> <a name="49337"><span class="dyncstdec">XSetTextProperty <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty</span>
  <span class="keyword">,</span> property<span class="keyword">:</span> <span class="staexp">Atom</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetTextProperty"
<span class="comment">// end of [XSetTextProperty]
</span>
<span class="keyword">fun</span> <a name="49523"><span class="dyncstdec">XGetTextProperty <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty? &gt;&gt; opt <span class="keyword">(</span>XTextProperty<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> property<span class="keyword">:</span> <span class="staexp">Atom</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetTextProperty"
<span class="comment">// end of [XGetTextProperty]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.4: Setting and Reading the WM_NAME Property
</span>
<span class="keyword">fun</span> <a name="49828"><span class="dyncstdec">XSetWMName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetWMName"
<span class="comment">// end of [XSetWMName]
</span>
<span class="keyword">fun</span> <a name="49977"><span class="dyncstdec">XGetWMName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty &gt;&gt; opt <span class="keyword">(</span>XTextProperty<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetWMName"
<span class="comment">// end of [XGetWMName]
</span>
<span class="keyword">fun</span> <a name="50170"><span class="dyncstdec">XStoreName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> window_name<span class="keyword">:</span> <span class="staexp">string</span> <span class="comment">// the name is copied into ...
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XStoreName"
<span class="comment">// end of [XStoreName]
</span>
<span class="keyword">absviewtype</span> <span class="staexp"><a name="50357"><span class="stacstdec">XString</span></a></span>
<span class="keyword">fun</span> <a name="50369"><span class="dyncstdec">XFetchName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> window_name<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XString? &gt;&gt; opt <span class="keyword">(</span>XString0<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XFetchName"
<span class="comment">// end of [XFetchName]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.5: Setting and Reading the WM_ICON_NAME Property
</span>
<span class="keyword">fun</span> <a name="50640"><span class="dyncstdec">XSetWMIconName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetWMIconName"
<span class="comment">// end of [XSetWMIconName]
</span>
<span class="keyword">fun</span> <a name="50801"><span class="dyncstdec">XGetWMIconName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> text<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty &gt;&gt; opt <span class="keyword">(</span>XTextProperty<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetWMIconName"
<span class="comment">// end of [XGetWMIconName]
</span>
<span class="keyword">fun</span> <a name="51006"><span class="dyncstdec">XSetIconName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> icon_name<span class="keyword">:</span> <span class="staexp">string</span> <span class="comment">// copied into ...
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetIconName"
<span class="comment">// end of [XSetIconName]
</span>
<span class="keyword">fun</span> <a name="51177"><span class="dyncstdec">XGetIconName <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> icon_name<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XString? &gt;&gt; opt <span class="keyword">(</span>XString0<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetIconName"
<span class="comment">// end of [XGetIconName]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.6: Setting and Reading the WM_HINTS Property
</span>
<span class="keyword">macdef</span> <span class="neuexp">InputHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "InputHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">StateHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "StateHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">IconPixmapHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "IconPixmapHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">IconWindowHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "IconWindowHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">IconPositionHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "IconPositionHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">IconMaskHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "IconMaskHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">WindowGroupHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "WindowGroupHint"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">AllHints <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "AllHints"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">XUrgencyHint <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "XUrgencyHint"<span class="keyword">)</span></span>

<span class="comment">//
</span>
<span class="keyword">macdef</span> <span class="neuexp">WithdrawnState <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "WithdrawnState"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">NormalState <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "NormalState"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">IconicState <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>int<span class="keyword">,</span> "IconicState"<span class="keyword">)</span></span>

<span class="comment">//
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="52095"><span class="stacstdec">XWMHints <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XWMHints" <span class="keyword">of</span> <span class="keyword">{</span>
  flags<span class="keyword">=</span> lint <span class="comment">// marks which fields in this structure are defined
</span><span class="keyword">,</span> input<span class="keyword">=</span> XBool <span class="comment">// does this application rely on the window manager to get keyword input?
</span><span class="keyword">,</span> initial_state<span class="keyword">=</span> int <span class="comment">// see below
</span><span class="keyword">,</span> icon_pixmap<span class="keyword">=</span> Pixmap <span class="comment">// pixmap to be used as icon
</span><span class="keyword">,</span> icon_window<span class="keyword">=</span> Window <span class="comment">// window to be used as icon
</span><span class="keyword">,</span> icon_x<span class="keyword">=</span> int<span class="keyword">,</span> icon_y<span class="keyword">=</span> int <span class="comment">// initial position of icon
</span><span class="keyword">,</span> icon_mask<span class="keyword">=</span> Pixmap <span class="comment">// pixmap to be used as mask for icon_pixmap
</span><span class="keyword">,</span> window_group<span class="keyword">=</span> XID <span class="comment">// id of related window group // may be extended in the future
</span><span class="keyword">}</span></span></a></span> <span class="comment">// end of [XWMHints]
</span>
<span class="keyword">fun</span> <a name="52661"><span class="dyncstdec">XAllocWMHints
  <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">XPtr0 <span class="keyword">(</span>XWMHints<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XAllocWMHints"
<span class="comment">// end of [XAllocWMHints]
</span>
<span class="keyword">fun</span> <a name="52756"><span class="dyncstdec">XSetWNHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> wmhints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XWMHints</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWNHints"
<span class="comment">// end of [XSetWNHints]
</span>
<span class="keyword">fun</span> <a name="52895"><span class="dyncstdec">XGetWNHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">XPtr0 <span class="keyword">(</span>XWMHints<span class="keyword">)</span></span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetWNHints"
<span class="comment">// end of [XGetWNHints]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.7: Setting and Reading the WM_NORMAL Property
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="53106"><span class="stacstdec">XSizeHints_aspect <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XSizeHints_aspect" <span class="keyword">of</span> <span class="keyword">{</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int <span class="keyword">}</span></span></a></span>
<span class="comment">// end of [XSizeHints_aspect]
</span>
<span class="keyword">macdef</span> <span class="neuexp">USPosition <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "USPosition"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">USSize <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "USSize"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PPosition <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PPosition"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PSize <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PSize"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PMinSize <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PMinSize"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PMaxSize <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PMaxSize"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PResizeInc <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PResizeInc"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PAspect <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PAspect"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PBaseSize <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PBaseSize"<span class="keyword">)</span></span>
<span class="keyword">macdef</span> <span class="neuexp">PWinGravity <span class="keyword">=</span> <span class="keyword">$extval</span> <span class="keyword">(</span>lint<span class="keyword">,</span> "PWinGravity"<span class="keyword">)</span></span>

<span class="keyword">typedef</span> <span class="staexp"><a name="53681"><span class="stacstdec">XSizeHints <span class="keyword">=</span>
  <span class="keyword">$extype_struct</span> "XSizeHints" <span class="keyword">of</span> <span class="keyword">{</span>
  flags<span class="keyword">=</span> lint
<span class="keyword">,</span> x<span class="keyword">=</span> int<span class="keyword">,</span> y<span class="keyword">=</span> int
<span class="keyword">,</span> width<span class="keyword">=</span> int<span class="keyword">,</span> height<span class="keyword">=</span> int
<span class="keyword">,</span> min_width<span class="keyword">=</span> int<span class="keyword">,</span> min_height<span class="keyword">=</span> int
<span class="keyword">,</span> max_width<span class="keyword">=</span> int<span class="keyword">,</span> max_height<span class="keyword">=</span> int
<span class="keyword">,</span> width_inc<span class="keyword">=</span> int<span class="keyword">,</span> height_inc<span class="keyword">=</span> int
<span class="keyword">,</span> min_aspect<span class="keyword">=</span> XSizeHints_aspect<span class="keyword">,</span> max_aspect<span class="keyword">=</span> XSizeHints_aspect
<span class="keyword">,</span> base_width<span class="keyword">=</span> int<span class="keyword">,</span> base_height<span class="keyword">=</span> int
<span class="keyword">,</span> win_gravity<span class="keyword">=</span> int
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XSizeHints]
</span>
<span class="keyword">fun</span> <a name="54036"><span class="dyncstdec">XAllocSizeHints <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp">XPtr0 <span class="keyword">(</span>XSizeHints<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XAllocSizeHints"
<span class="comment">// end of [XAllocSizeHints]
</span>
<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="54144"><span class="dyncstdec">XSetWMNormalHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSizeHints</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWMNormalHints"
<span class="comment">// end of [XSetWMNormalHints]
</span>
<span class="keyword">fun</span> <a name="54301"><span class="dyncstdec">XGetWMNormalHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSizeHints? &gt;&gt; opt <span class="keyword">(</span>XSizeHints<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span><span class="keyword">,</span> supplied<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>lint? &gt;&gt; lint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetWMNormalHints"
<span class="comment">// end of [XGetWMNormalHints]
</span>
<span class="comment">//
</span>
<span class="keyword">fun</span> <a name="54540"><span class="dyncstdec">XSetWMSizeHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSizeHints</span><span class="keyword">,</span> property<span class="keyword">:</span> <span class="staexp">Atom</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetWMSizeHints"
<span class="comment">// end of [XSetWMSizeHints]
</span>
<span class="keyword">fun</span> <a name="54707"><span class="dyncstdec">XGetWMSizeHints <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSizeHints? &gt;&gt; opt <span class="keyword">(</span>XSizeHints<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">,</span> supplied<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>lint? &gt;&gt; lint</span><span class="keyword">,</span> property<span class="keyword">:</span> <span class="staexp">Atom</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetWMSizeHints"
<span class="comment">// end of [XGetWMSizeHints]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.8: Setting and Reading the WM_CLASS Property
</span>
<span class="keyword">typedef</span> <span class="staexp"><a name="55034"><span class="stacstdec">XClassHint <span class="keyword">=</span> <span class="keyword">$extype_struct</span> "XClassHint" <span class="keyword">of</span> <span class="keyword">{</span>
  res_name<span class="keyword">=</span> string
<span class="keyword">,</span> res_class<span class="keyword">=</span> string
<span class="keyword">}</span></span></a></span> <span class="comment">// end of [XClassHint]
</span>
<span class="keyword">fun</span> <a name="55149"><span class="dyncstdec">XAllocClassHint <span class="keyword">(</span><span class="keyword">)</span>
  <span class="keyword">:</span> <span class="staexp">XPtr0 <span class="keyword">(</span>XClassHint<span class="keyword">)</span></span></span></a> <span class="keyword">=</span> "#atsctrb_XAllocClassHint"
<span class="comment">// end of [XAllocClassHint]
</span>
<span class="keyword">fun</span> <a name="55253"><span class="dyncstdec">XSetClassHint <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span>
  <span class="keyword">(</span>dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> class_hint<span class="keyword">:</span> <span class="staexp">XClassHint</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XSetClassHint"

<span class="keyword">fun</span> <a name="55376"><span class="dyncstdec">XGetClassHint <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> class_hint<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XClassHint? &gt;&gt; opt <span class="keyword">(</span>XClassHint<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XGetClassHint"

<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.9: Setting and Reading the WM_TRANSIENT_FOR Property
</span>
<span class="keyword">fun</span> <a name="55638"><span class="dyncstdec">XSetTransientForHint <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span><span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> prop_window<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetTransientForHint"
<span class="comment">// end of [XSetTransientForHint]
</span>
<span class="keyword">fun</span> <a name="55810"><span class="dyncstdec">XGetTransientForHint <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span><span class="keyword">,</span> prop_window<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>Window? &gt;&gt; opt <span class="keyword">(</span>Window<span class="keyword">,</span> i &lt;&gt; 0<span class="keyword">)</span></span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">#[</span>i<span class="keyword">:</span>int<span class="keyword">]</span> Status i</span></span></a> <span class="keyword">=</span> "#atsctrb_XGetTransientForHint"
<span class="comment">// end of [XGetTransientForHint]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 14.1.13: Using Window Manager Convenience Functions
</span>
<span class="keyword">fun</span> <a name="56101"><span class="dyncstdec">XSetWMProperties
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>l1<span class="keyword">,</span>l2<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> win<span class="keyword">:</span> <span class="staexp">Window</span>
  <span class="keyword">,</span> win_name<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty l1</span><span class="keyword">,</span> icon_name<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XTextProperty l2</span>
  <span class="keyword">,</span> argv<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span><span class="keyword">(</span><span class="keyword">@[</span>string<span class="keyword">]</span><span class="keyword">[</span>n<span class="keyword">]</span><span class="keyword">)</span></span>
  <span class="keyword">,</span> argc<span class="keyword">:</span> <span class="staexp">int n</span>
  <span class="keyword">,</span> normal_hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XSizeHints</span> <span class="comment">// partially init
</span>  <span class="keyword">,</span> wm_hints<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XWMHints</span> <span class="comment">// partially init
</span>  <span class="keyword">,</span> class_hint<span class="keyword">:</span> <span class="staexp"><span class="keyword">&amp;</span>XClassHint</span> <span class="comment">// partially init
</span>  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span></span></a> <span class="keyword">=</span> "#atsctrb_XSetWMProperties"
<span class="comment">// end of [XSetWMProperties]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">//
</span><span class="comment">// Chapter 16: Application Unitility Functions
</span><span class="comment">//
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 16.9: Manipulating Bitmaps
</span>
<span class="keyword">fun</span> <a name="56633"><span class="dyncstdec">XCreatePixmapFromBitmapData <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> data<span class="keyword">:</span> <span class="staexp">ptr</span><span class="comment">(*chars*)</span>
  <span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> fg<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> bg<span class="keyword">:</span> <span class="staexp">ulint</span><span class="keyword">,</span> depth<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Pixmap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreatePixmapFromBitmapData"
<span class="comment">// end of [XCreatePixmapFromBitmapData]
</span>
<span class="keyword">fun</span> <a name="56899"><span class="dyncstdec">XCreateBitmapFromData <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>agz<span class="keyword">}</span></span> <span class="keyword">(</span>
    dpy<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span>Display_ptr l</span>
  <span class="keyword">,</span> drw<span class="keyword">:</span> <span class="staexp">Drawable</span><span class="keyword">,</span> data<span class="keyword">:</span> <span class="staexp">ptr</span><span class="comment">(*chars*)</span><span class="keyword">,</span> width<span class="keyword">:</span> <span class="staexp">uint</span><span class="keyword">,</span> height<span class="keyword">:</span> <span class="staexp">uint</span>
  <span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">Pixmap</span></span></a>
  <span class="keyword">=</span> "#atsctrb_XCreateBitmapFromData"
<span class="comment">// end of [XCreateBitmapFromData]
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">// 16.10: Using the Context Manager
</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* end of [Xlib.sats] *)</span>
</pre>
</body>
</html>
